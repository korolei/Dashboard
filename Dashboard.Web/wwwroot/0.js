(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+Fm5":function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n("c5I9"),s=n("CcnG"),a=n("CcnG"),l=n("CcnG"),h=n("Ip0R"),u=n("gIcY"),c=n("8X1S");e.wjFlexChartMeta={selector:"wj-flex-chart",template:"<div><ng-content></ng-content></div>",inputs:["asyncBindings","wjModelProperty","isDisabled","binding","footer","header","selectionMode","palette","plotMargin","footerStyle","headerStyle","tooltipContent","itemsSource","bindingX","interpolateNulls","legendToggle","symbolSize","options","selection","itemFormatter","labelContent","chartType","rotated","stacking"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","renderingNg: rendering","renderedNg: rendered","selectionChangedNg: selectionChanged","selectionChangePC: selectionChange","seriesVisibilityChangedNg: seriesVisibilityChanged"],providers:[{provide:u.NG_VALUE_ACCESSOR,useFactory:c.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var d=function(t){function n(e,n,i){var o=t.call(this,c.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o._wjBehaviour=c.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=c.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},Object.defineProperty(n.prototype,"tooltipContent",{get:function(){return this.tooltip.content},set:function(t){this.tooltip.content=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labelContent",{get:function(){return this.dataLabel.content},set:function(t){this.dataLabel.content=t},enumerable:!0,configurable:!0}),n.meta={outputs:e.wjFlexChartMeta.outputs,changeEvents:{selectionChanged:["selection"]}},n.decorators=[{type:s.Component,args:[{selector:e.wjFlexChartMeta.selector,template:e.wjFlexChartMeta.template,inputs:e.wjFlexChartMeta.inputs,outputs:e.wjFlexChartMeta.outputs,providers:[{provide:"WjComponent",useExisting:a.forwardRef(function(){return n})}].concat(e.wjFlexChartMeta.providers)}]}],n.ctorParameters=function(){return[{type:a.ElementRef,decorators:[{type:l.Inject,args:[a.ElementRef]}]},{type:a.Injector,decorators:[{type:l.Inject,args:[a.Injector]}]},{type:void 0,decorators:[{type:l.Inject,args:["WjComponent"]},{type:l.SkipSelf},{type:a.Optional}]}]},n}(r.FlexChart);e.WjFlexChart=d,e.wjFlexPieMeta={selector:"wj-flex-pie",template:"<div><ng-content></ng-content></div>",inputs:["wjModelProperty","isDisabled","binding","footer","header","selectionMode","palette","plotMargin","footerStyle","headerStyle","tooltipContent","itemsSource","bindingName","innerRadius","isAnimated","offset","reversed","startAngle","selectedItemPosition","selectedItemOffset","itemFormatter","labelContent"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","renderingNg: rendering","renderedNg: rendered","selectionChangedNg: selectionChanged"],providers:[{provide:u.NG_VALUE_ACCESSOR,useFactory:c.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var p=function(t){function n(e,n,i){var o=t.call(this,c.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o._wjBehaviour=c.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=c.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},Object.defineProperty(n.prototype,"tooltipContent",{get:function(){return this.tooltip.content},set:function(t){this.tooltip.content=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"labelContent",{get:function(){return this.dataLabel.content},set:function(t){this.dataLabel.content=t},enumerable:!0,configurable:!0}),n.meta={outputs:e.wjFlexPieMeta.outputs},n.decorators=[{type:s.Component,args:[{selector:e.wjFlexPieMeta.selector,template:e.wjFlexPieMeta.template,inputs:e.wjFlexPieMeta.inputs,outputs:e.wjFlexPieMeta.outputs,providers:[{provide:"WjComponent",useExisting:a.forwardRef(function(){return n})}].concat(e.wjFlexPieMeta.providers)}]}],n.ctorParameters=function(){return[{type:a.ElementRef,decorators:[{type:l.Inject,args:[a.ElementRef]}]},{type:a.Injector,decorators:[{type:l.Inject,args:[a.Injector]}]},{type:void 0,decorators:[{type:l.Inject,args:["WjComponent"]},{type:l.SkipSelf},{type:a.Optional}]}]},n}(r.FlexPie);e.WjFlexPie=p,e.wjFlexChartAxisMeta={selector:"wj-flex-chart-axis",template:"",inputs:["wjProperty","axisLine","format","labels","majorGrid","majorTickMarks","majorUnit","max","min","position","reversed","title","labelAngle","minorGrid","minorTickMarks","minorUnit","origin","logBase","plotArea","labelAlign","name","overlappingLabels","labelPadding","itemFormatter","itemsSource","binding"],outputs:["initialized","rangeChangedNg: rangeChanged"],providers:[]};var f=function(t){function n(e,n,i){var o=t.call(this)||this;return o.isInitialized=!1,o.wjProperty="axes",o._wjBehaviour=c.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.meta={outputs:e.wjFlexChartAxisMeta.outputs},n.decorators=[{type:s.Component,args:[{selector:e.wjFlexChartAxisMeta.selector,template:e.wjFlexChartAxisMeta.template,inputs:e.wjFlexChartAxisMeta.inputs,outputs:e.wjFlexChartAxisMeta.outputs,providers:[{provide:"WjComponent",useExisting:a.forwardRef(function(){return n})}].concat(e.wjFlexChartAxisMeta.providers)}]}],n.ctorParameters=function(){return[{type:a.ElementRef,decorators:[{type:l.Inject,args:[a.ElementRef]}]},{type:a.Injector,decorators:[{type:l.Inject,args:[a.Injector]}]},{type:void 0,decorators:[{type:l.Inject,args:["WjComponent"]},{type:l.SkipSelf},{type:a.Optional}]}]},n}(r.Axis);e.WjFlexChartAxis=f,e.wjFlexChartLegendMeta={selector:"wj-flex-chart-legend",template:"",inputs:["wjProperty","position","title","titleAlign"],outputs:["initialized"],providers:[]};var g=function(t){function n(e,n,i){var o=t.call(this,i)||this;return o.isInitialized=!1,o.wjProperty="legend",o._wjBehaviour=c.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.meta={outputs:e.wjFlexChartLegendMeta.outputs},n.decorators=[{type:s.Component,args:[{selector:e.wjFlexChartLegendMeta.selector,template:e.wjFlexChartLegendMeta.template,inputs:e.wjFlexChartLegendMeta.inputs,outputs:e.wjFlexChartLegendMeta.outputs,providers:[{provide:"WjComponent",useExisting:a.forwardRef(function(){return n})}].concat(e.wjFlexChartLegendMeta.providers)}]}],n.ctorParameters=function(){return[{type:a.ElementRef,decorators:[{type:l.Inject,args:[a.ElementRef]}]},{type:a.Injector,decorators:[{type:l.Inject,args:[a.Injector]}]},{type:void 0,decorators:[{type:l.Inject,args:["WjComponent"]},{type:l.SkipSelf},{type:a.Optional}]}]},n}(r.Legend);e.WjFlexChartLegend=g,e.wjFlexChartDataLabelMeta={selector:"wj-flex-chart-data-label",template:"",inputs:["wjProperty","content","border","offset","connectingLine","position"],outputs:["initialized","renderingNg: rendering"],providers:[]};var _=function(t){function n(e,n,i){var o=t.call(this)||this;return o.isInitialized=!1,o.wjProperty="dataLabel",o._wjBehaviour=c.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.meta={outputs:e.wjFlexChartDataLabelMeta.outputs},n.decorators=[{type:s.Component,args:[{selector:e.wjFlexChartDataLabelMeta.selector,template:e.wjFlexChartDataLabelMeta.template,inputs:e.wjFlexChartDataLabelMeta.inputs,outputs:e.wjFlexChartDataLabelMeta.outputs,providers:[{provide:"WjComponent",useExisting:a.forwardRef(function(){return n})}].concat(e.wjFlexChartDataLabelMeta.providers)}]}],n.ctorParameters=function(){return[{type:a.ElementRef,decorators:[{type:l.Inject,args:[a.ElementRef]}]},{type:a.Injector,decorators:[{type:l.Inject,args:[a.Injector]}]},{type:void 0,decorators:[{type:l.Inject,args:["WjComponent"]},{type:l.SkipSelf},{type:a.Optional}]}]},n}(r.DataLabel);e.WjFlexChartDataLabel=_,e.wjFlexPieDataLabelMeta={selector:"wj-flex-pie-data-label",template:"",inputs:["wjProperty","content","border","offset","connectingLine","position"],outputs:["initialized","renderingNg: rendering"],providers:[]};var m=function(t){function n(e,n,i){var o=t.call(this)||this;return o.isInitialized=!1,o.wjProperty="dataLabel",o._wjBehaviour=c.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.meta={outputs:e.wjFlexPieDataLabelMeta.outputs},n.decorators=[{type:s.Component,args:[{selector:e.wjFlexPieDataLabelMeta.selector,template:e.wjFlexPieDataLabelMeta.template,inputs:e.wjFlexPieDataLabelMeta.inputs,outputs:e.wjFlexPieDataLabelMeta.outputs,providers:[{provide:"WjComponent",useExisting:a.forwardRef(function(){return n})}].concat(e.wjFlexPieDataLabelMeta.providers)}]}],n.ctorParameters=function(){return[{type:a.ElementRef,decorators:[{type:l.Inject,args:[a.ElementRef]}]},{type:a.Injector,decorators:[{type:l.Inject,args:[a.Injector]}]},{type:void 0,decorators:[{type:l.Inject,args:["WjComponent"]},{type:l.SkipSelf},{type:a.Optional}]}]},n}(r.PieDataLabel);e.WjFlexPieDataLabel=m,e.wjFlexChartSeriesMeta={selector:"wj-flex-chart-series",template:"<div><ng-content></ng-content></div>",inputs:["asyncBindings","wjProperty","axisX","axisY","binding","bindingX","cssClass","name","style","altStyle","symbolMarker","symbolSize","symbolStyle","visibility","itemsSource","chartType"],outputs:["initialized","renderingNg: rendering","renderedNg: rendered","visibilityChangePC: visibilityChange"],providers:[]};var v=function(t){function n(e,n,i){var o=t.call(this)||this;return o.isInitialized=!1,o.wjProperty="series",o._wjBehaviour=c.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.meta={outputs:e.wjFlexChartSeriesMeta.outputs,changeEvents:{"chart.seriesVisibilityChanged":["visibility"]},siblingId:"series"},n.decorators=[{type:s.Component,args:[{selector:e.wjFlexChartSeriesMeta.selector,template:e.wjFlexChartSeriesMeta.template,inputs:e.wjFlexChartSeriesMeta.inputs,outputs:e.wjFlexChartSeriesMeta.outputs,providers:[{provide:"WjComponent",useExisting:a.forwardRef(function(){return n})}].concat(e.wjFlexChartSeriesMeta.providers)}]}],n.ctorParameters=function(){return[{type:a.ElementRef,decorators:[{type:l.Inject,args:[a.ElementRef]}]},{type:a.Injector,decorators:[{type:l.Inject,args:[a.Injector]}]},{type:void 0,decorators:[{type:l.Inject,args:["WjComponent"]},{type:l.SkipSelf},{type:a.Optional}]}]},n}(r.Series);e.WjFlexChartSeries=v,e.wjFlexChartLineMarkerMeta={selector:"wj-flex-line-marker",template:"",inputs:["wjProperty","isVisible","seriesIndex","horizontalPosition","content","verticalPosition","alignment","lines","interaction","dragLines","dragThreshold","dragContent"],outputs:["initialized","positionChangedNg: positionChanged"],providers:[]};var y=function(t){function n(e,n,i){var o=t.call(this,i)||this;return o.isInitialized=!1,o._wjBehaviour=c.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.meta={outputs:e.wjFlexChartLineMarkerMeta.outputs},n.decorators=[{type:s.Component,args:[{selector:e.wjFlexChartLineMarkerMeta.selector,template:e.wjFlexChartLineMarkerMeta.template,inputs:e.wjFlexChartLineMarkerMeta.inputs,outputs:e.wjFlexChartLineMarkerMeta.outputs,providers:[{provide:"WjComponent",useExisting:a.forwardRef(function(){return n})}].concat(e.wjFlexChartLineMarkerMeta.providers)}]}],n.ctorParameters=function(){return[{type:a.ElementRef,decorators:[{type:l.Inject,args:[a.ElementRef]}]},{type:a.Injector,decorators:[{type:l.Inject,args:[a.Injector]}]},{type:void 0,decorators:[{type:l.Inject,args:["WjComponent"]},{type:l.SkipSelf},{type:a.Optional}]}]},n}(r.LineMarker);e.WjFlexChartLineMarker=y,e.wjFlexChartDataPointMeta={selector:"wj-flex-chart-data-point",template:"",inputs:["wjProperty","x","y"],outputs:["initialized"],providers:[]};var b=function(t){function n(e,n,i){var o=t.call(this)||this;return o.isInitialized=!1,o.wjProperty="",o._wjBehaviour=c.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.meta={outputs:e.wjFlexChartDataPointMeta.outputs},n.decorators=[{type:s.Component,args:[{selector:e.wjFlexChartDataPointMeta.selector,template:e.wjFlexChartDataPointMeta.template,inputs:e.wjFlexChartDataPointMeta.inputs,outputs:e.wjFlexChartDataPointMeta.outputs,providers:[{provide:"WjComponent",useExisting:a.forwardRef(function(){return n})}].concat(e.wjFlexChartDataPointMeta.providers)}]}],n.ctorParameters=function(){return[{type:a.ElementRef,decorators:[{type:l.Inject,args:[a.ElementRef]}]},{type:a.Injector,decorators:[{type:l.Inject,args:[a.Injector]}]},{type:void 0,decorators:[{type:l.Inject,args:["WjComponent"]},{type:l.SkipSelf},{type:a.Optional}]}]},n}(r.DataPoint);e.WjFlexChartDataPoint=b,e.wjFlexChartPlotAreaMeta={selector:"wj-flex-chart-plot-area",template:"",inputs:["wjProperty","column","height","name","row","style","width"],outputs:["initialized"],providers:[]};var w=function(t){function n(e,n,i){var o=t.call(this)||this;return o.isInitialized=!1,o.wjProperty="plotAreas",o._wjBehaviour=c.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.meta={outputs:e.wjFlexChartPlotAreaMeta.outputs},n.decorators=[{type:s.Component,args:[{selector:e.wjFlexChartPlotAreaMeta.selector,template:e.wjFlexChartPlotAreaMeta.template,inputs:e.wjFlexChartPlotAreaMeta.inputs,outputs:e.wjFlexChartPlotAreaMeta.outputs,providers:[{provide:"WjComponent",useExisting:a.forwardRef(function(){return n})}].concat(e.wjFlexChartPlotAreaMeta.providers)}]}],n.ctorParameters=function(){return[{type:a.ElementRef,decorators:[{type:l.Inject,args:[a.ElementRef]}]},{type:a.Injector,decorators:[{type:l.Inject,args:[a.Injector]}]},{type:void 0,decorators:[{type:l.Inject,args:["WjComponent"]},{type:l.SkipSelf},{type:a.Optional}]}]},n}(r.PlotArea);e.WjFlexChartPlotArea=w;var C=[d,p,f,g,_,m,v,y,b,w],x=function(){function t(){}return t.decorators=[{type:s.NgModule,args:[{imports:[c.WjDirectiveBaseModule,h.CommonModule],declarations:C.slice(),exports:C.slice()}]}],t.ctorParameters=function(){return[]},t}();e.WjChartModule=x},"8X1S":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DogD"),o=n("CcnG"),r=function(){function t(){}return t.asyncBindings=!0,t}();e.WjOptions=r;var s=function(){function t(t){this.changeEventMap=[],this.allImplEvents=[],this.resolveChangeEventMap(t)}return t.prototype.resolveChangeEventMap=function(t){var e=this.changeEventMap,n=t.outputs,i=t.changeEvents||{};if(e.splice(0,e.length),this.allImplEvents=[],n&&n.length){var o=n.map(function(t){return t.split(":")}).map(function(t){return{implName:t[0].trim(),exposeName:t[1]&&t[1].trim()}});this.allImplEvents=o.map(function(t){return t.implName});for(var r=0,s=o.filter(function(t){return t.implName&&t.exposeName});r<s.length;r++){var a=s[r];if(l.getWjEventName(a.implName)){var h={eventImpl:a.implName,event:a.exposeName},u=i[a.exposeName];u&&u.length&&(h.props=u.map(function(t){return{prop:t,evExposed:l.getChangeEventNameExposed(t),evImpl:l.getChangeEventNameImplemented(t)}})),e.push(h)}}for(var c in i)c.indexOf(".")>-1&&(h={eventImpl:null,event:c,props:i[c].map(function(t){return{prop:t,evExposed:l.getChangeEventNameExposed(t),evImpl:l.getChangeEventNameImplemented(t)}})},e.push(h))}},t}();e.WjComponentResolvedMetadata=s;var a=function(){function t(e,n,i,o){this._pendingEvents=[],this.isInitialized=!1,this.isDestroyed=!1,this.directive=e,this.elementRef=n,this.injector=i,this.injectedParent=o;var r=this.typeData=e.constructor[t.directiveTypeDataProp];null==r.siblingId&&(r.siblingId=++t.siblingDirId+"");var a=e.constructor[t.directiveResolvedTypeDataProp];a?this.resolvedTypeData=a:e.constructor[t.directiveResolvedTypeDataProp]=a=this.resolvedTypeData=new s(r),e[t.BehaviourRefProp]=this,i[t.BehaviourRefProp]=this,e[t.isInitializedPropAttr]=!1,this._createEvents(),this._setupAsChild(),this._isHostElement()&&n.nativeElement.setAttribute(t.siblingDirIdAttr,r.siblingId),this.subscribeToEvents(!1)}return t.getHostElement=function(e,n){return t.ngZone||(t.ngZone=n.get(o.NgZone)),e.nativeElement},t.attach=function(e,n,i,o){return new t(e,n,i,o)},t.prototype.ngOnInit=function(){this.isInitialized=!0,this._initParent(),this.subscribeToEvents(!0)},t.prototype.ngAfterViewInit=function(){var e=this;this.directive[t.isInitializedPropAttr]=!0,setTimeout(function(){e.isDestroyed||e.directive[t.initializedEventAttr].emit(void 0)})},t.prototype.ngOnDestroy=function(){if(!this.isDestroyed){this.isDestroyed=!0;var e=this.directive;if(this._siblingInsertedEH&&this.elementRef.nativeElement.removeEventListener("DOMNodeInserted",this._siblingInsertedEH),this._isChild()&&this.parentBehavior){var n=this.parentBehavior.directive,o=this._getParentProp();if(!this.parentBehavior.isDestroyed&&n&&o&&e){var r=n[o];if(i.isArray(r)&&r){var s=r.indexOf(e);s>=0&&r.splice(s,1)}}}if(e instanceof i.Control&&e.hostElement){var a=this.elementRef.nativeElement,l=a&&a.parentNode,h=l?Array.prototype.indexOf.call(l.childNodes,a):-1;e.dispose(),h>-1&&Array.prototype.indexOf.call(l.childNodes,a)<0&&(a.textContent="",h<l.childNodes.length&&l.replaceChild(a,l.childNodes[h]))}this.injector[t.BehaviourRefProp]=null}},t.instantiateTemplate=function(t,e,n,i,o,r){void 0===o&&(o=!1),void 0===r&&(r={});var s,a=e.createEmbeddedView(n,r,e.length),l=a.rootNodes;if(o&&1===l.length)s=l[0];else{s=document.createElement("div");for(var h=0,u=l;h<u.length;h++)s.appendChild(u[h])}return t&&t.appendChild(s),{viewRef:a,rootElement:s}},t.prototype.getPropChangeEvent=function(t){var e=this.typeData.changeEvents;if(e)for(var n in e)if(e[n].indexOf(t)>-1)return n;return null},t.prototype._createEvents=function(){for(var t=0,e=this.resolvedTypeData.allImplEvents;t<e.length;t++)this.directive[e[t]]=new o.EventEmitter(!1)},t.prototype.subscribeToEvents=function(t){var e=this.resolvedTypeData.changeEventMap;t=!!t;for(var n=0,i=e;n<i.length;n++)t!==(s=i[n]).event.indexOf(".")<0&&this.addHandlers(s);if(t)for(var o=0,r=e;o<r.length;o++){var s=r[o];this.triggerPropChangeEvents(s,!0)}},t.prototype.addHandlers=function(e){var n=this,i=this.directive;t.evaluatePath(i,e.event).addHandler(function(t,o){n._runInsideNgZone(function(){n.isInitialized&&n.triggerPropChangeEvents(e),e.eventImpl&&n._triggerEvent(i[e.eventImpl],o,e.props&&e.props.length>0)})})},t.prototype.triggerPropChangeEvents=function(t,e){void 0===e&&(e=!0);var n=this.directive;if(t.props&&t.props.length)for(var i=0,o=t.props;i<o.length;i++){var r=o[i];this._triggerEvent(n[r.evImpl],n[r.prop],e)}},t.prototype._setupAsChild=function(){this._isChild()&&(this._isHostElement()&&(this.elementRef.nativeElement.style.display="none"),this.parentBehavior=t.getBehavior(this.injectedParent))},t.prototype._isAsyncBinding=function(){var e=this.directive[t.asyncBindingUpdatePropAttr];return null==e?r.asyncBindings:e},t.prototype._isChild=function(){return this._isParentInitializer()||this._isParentReferencer()},t.prototype._isParentInitializer=function(){return null!=this.directive[t.parPropAttr]},t.prototype._isParentReferencer=function(){return!!this.typeData.parentRefProperty},t.prototype._getParentProp=function(){return this.directive[t.parPropAttr]},t.prototype._getParentReferenceProperty=function(){return this.typeData.parentRefProperty},t.prototype._useParentObj=function(){return!1},t.prototype._parentInCtor=function(){return this._isParentReferencer()&&""==this._getParentReferenceProperty()},t.prototype._initParent=function(){if(this.parentBehavior&&!this._useParentObj()){var t=this.parentBehavior.directive,e=this._getParentProp(),n=this.directive;if(this._isParentInitializer()){this._getParentProp();var o=t[e];if(i.isArray(o)){var r=this._isHostElement(),s=r?this._getSiblingIndex():-1;(s<0||s>=o.length)&&(s=o.length),o.splice(s,0,n),r&&(this._siblingInsertedEH=this._siblingInserted.bind(this),this.elementRef.nativeElement.addEventListener("DOMNodeInserted",this._siblingInsertedEH))}else t[e]=n}this._isParentReferencer()&&!this._parentInCtor()&&(n[this._getParentReferenceProperty()]=t)}},t.prototype._getSiblingIndex=function(){var e=this.elementRef.nativeElement,n=e.parentElement;if(!n)return-1;for(var i=n.childNodes,o=-1,r=this.typeData.siblingId,s=0;s<i.length;s++){var a=i[s];if(1==a.nodeType&&a.getAttribute(t.siblingDirIdAttr)==r&&(++o,a===e))return o}return-1},t.prototype._siblingInserted=function(t){if(t.target===this.elementRef.nativeElement){var e=this._getSiblingIndex(),n=this.parentBehavior.directive[this._getParentProp()],i=this.directive,o=n.indexOf(i);e>=0&&o>=0&&e!==o&&(n.splice(o,1),e=Math.min(e,n.length),n.splice(e,0,i))}},t.prototype._isHostElement=function(){return this.elementRef.nativeElement.nodeType===Node.ELEMENT_NODE},t.prototype._runInsideNgZone=function(e){var n=t;return n.ngZone&&!n._ngZoneRun&&(n._ngZoneRun=n.ngZone.run.bind(n.ngZone)),(n._ngZoneRun||function(t){return t()})(e)},t.prototype._triggerEvent=function(t,e,n){var i=this;n&&this._isAsyncBinding()?(this._pendingEvents.push({event:t,args:e}),null==this._pendingEventsTO&&(this._pendingEventsTO=setTimeout(function(){i._triggerPendingEvents(!1)},0))):t.emit(e)},t.prototype._triggerPendingEvents=function(t){if(null!=this._pendingEventsTO&&(clearTimeout(this._pendingEventsTO),this._pendingEventsTO=null),!this.isDestroyed){var e=[].concat(this._pendingEvents);this._pendingEvents.splice(0,this._pendingEvents.length);for(var n=0,i=e;n<i.length;n++){var o=i[n];o.event.emit(o.args)}t&&this._pendingEvents.length&&this._triggerPendingEvents(!0)}},t.prototype.flushPendingEvents=function(){this._triggerPendingEvents(!0)},t.evaluatePath=function(t,e){return this._pathBinding.path=e,this._pathBinding.getValue(t)},t.getBehavior=function(e){return e?e[t.BehaviourRefProp]:null},t.directiveTypeDataProp="meta",t.directiveResolvedTypeDataProp="_wjResolvedMeta",t.BehaviourRefProp="_wjBehaviour",t.parPropAttr="wjProperty",t.wjModelPropAttr="wjModelProperty",t.initializedEventAttr="initialized",t.isInitializedPropAttr="isInitialized",t.siblingDirIdAttr="wj-directive-id",t.asyncBindingUpdatePropAttr="asyncBindings",t.siblingDirId=0,t.wijmoComponentProviderId="WjComponent",t.outsideZoneEvents={pointermove:!0,pointerover:!0,mousemove:!0,wheel:!0,touchmove:!0},t._pathBinding=new i.Binding(""),t}();e.WjDirectiveBehavior=a;var l=function(){function t(){}return t.initEvents=function(t,e){for(var n=[],i=0,o=e;i<o.length;i++){var r=o[i],s=r.props;if(r.event&&r.eventImpl&&n.push(r.eventImpl+":"+r.event),s&&s.length)for(var a=0,l=s;a<l.length;a++){var h=l[a];n.push(h.evImpl+":"+h.evExposed)}}return n},t.getChangeEventNameImplemented=function(e){return t.getChangeEventNameExposed(e)+t.changeEventImplementSuffix},t.getChangeEventNameExposed=function(t){return t+"Change"},t.getWjEventNameImplemented=function(e){return e+t.wjEventImplementSuffix},t.getWjEventName=function(e){if(e){var n=t.wjEventImplementSuffix,i=e.length-n.length;if(i>0&&e.substr(i)===n)return e.substr(0,i)}return null},t.getBaseType=function(t){var e;return t&&(e=Object.getPrototypeOf(t.prototype))&&e.constructor},t.getAnnotations=function(t){return Reflect.getMetadata("annotations",t)},t.getAnnotation=function(t,e){if(e&&t)for(var n=0,i=t;n<i.length;n++){var o=i[n];if(o instanceof e)return o}return null},t.getTypeAnnotation=function(e,n,i){for(var o=e;o;o=i?null:t.getBaseType(o)){var r=t.getAnnotation(t.getAnnotations(o),n);if(r)return r}return null},t.equals=function(t,e){return t!=t&&e!=e||i.DateTime.equals(t,e)||t===e},t._copy=function(t,e,n,o,r){if(t&&e)for(var s in e)if(o||"_"!==s[0]){var a=e[s];if(!r||r(s,a)){var l=t[s];i.isArray(a)?t[s]=(!i.isArray(l)||n?[]:l).concat(a):void 0!==a&&(t[s]=a)}}},t.changeEventImplementSuffix="PC",t.wjEventImplementSuffix="Ng",t}();e.Ng2Utils=l;var h=function(){function t(t){this._isFirstChange=!0,this._isSubscribed=!1,this._onChange=function(t){},this._onTouched=function(){},this._directive=t,this._behavior=a.getBehavior(t)}return t.prototype.writeValue=function(t){var e=this;this._modelValue=t,this._directive.isInitialized?(this._ensureInitEhUnsubscribed(),this._updateDirective(),this._isFirstChange=!1):this._dirInitEh?this._isFirstChange=!1:this._dirInitEh=this._directive.initialized.subscribe(function(){e._updateDirective(),e._ensureInitEhUnsubscribed()})},t.prototype.registerOnChange=function(t){this._onChange=t},t.prototype.registerOnTouched=function(t){this._onTouched=t},t.prototype._updateDirective=function(){if(!this._isFirstChange||null!=this._modelValue){if(this._ensureNgModelProp(),this._directive&&this._ngModelProp){var t=this._modelValue;""===t&&(t=null),this._directive[this._ngModelProp]=t}this._ensureSubscribed()}},t.prototype._ensureSubscribed=function(){if(!this._isSubscribed){var t=this._directive;if(t){this._ensureNgModelProp();var e=this._ngModelProp=t[a.wjModelPropAttr];if(e){var n=this._behavior.getPropChangeEvent(e);n&&t[n].addHandler(this._dirValChgEh,this)}t instanceof i.Control&&t.lostFocus.addHandler(this._dirLostFocusEh,this),this._isSubscribed=!0}}},t.prototype._ensureNgModelProp=function(){!this._ngModelProp&&this._directive&&(this._ngModelProp=this._directive[a.wjModelPropAttr])},t.prototype._ensureInitEhUnsubscribed=function(){this._dirInitEh&&(this._dirInitEh.unsubscribe(),this._dirInitEh=null)},t.prototype._dirValChgEh=function(t,e){if(this._onChange&&this._directive&&this._ngModelProp){var n=this._directive[this._ngModelProp];l.equals(this._modelValue,n)||(this._modelValue=n,this._onChange(n))}},t.prototype._dirLostFocusEh=function(t,e){this._onTouched&&this._onTouched()},t}();e.WjValueAccessor=h,e.WjValueAccessorFactory=function(t){return new h(t)};var u=function(){function t(){}return t.decorators=[{type:o.NgModule,args:[{}]}],t.ctorParameters=function(){return[]},t}();e.WjDirectiveBaseModule=u},DogD:function(t,e,n){"use strict";function i(){return gt}function o(t,e){return null==t?null:s(e)?u(t.implementsInterface)&&t.implementsInterface(e)?t:null:t instanceof e?t:null}function r(t){return s(t)||a(t)||h(t)||c(t)}function s(t){return"string"==typeof t}function a(t){return"number"==typeof t}function l(t){return a(t)&&t==Math.round(t)}function h(t){return"boolean"==typeof t}function u(t){return"function"==typeof t}function c(t){return(t instanceof Date||"[object Date]"===Object.prototype.toString.call(t))&&!isNaN(t.getTime())}function d(t){return t instanceof Array||Array.isArray(t)||"[object Array]"===Object.prototype.toString.call(t)}function p(t){return null!=t&&"object"==typeof t&&!c(t)&&!d(t)}function f(t){for(var e=t,n=0;null!=document.getElementById(e);n++)e=t+n;return e}function g(t,e,n){if(null!=t){if(s(t))switch(e){case ft.Number:var i=wt.parseFloat(t,n);return isNaN(i)?t:i;case ft.Date:var o=wt.parseDate(t,n);return o||n||!t||(o=new Date(t)),o&&isFinite(o.getTime())?o:t;case ft.Boolean:switch(t.toLowerCase()){case"true":return!0;case"false":return!1}return t}if(e==ft.String)return wt.format(t,n)}return t}function _(t,e,n){if(n){var i=(o=t.toString()).indexOf(".");o.indexOf("e")<0&&i>-1&&(o=o.substr(0,i+1+e),t=parseFloat(o))}else{var o=t.toFixed(e);t=parseFloat(o)}return t}function m(t,e,n){if((t=w(t)).match(/\{.*"count".*:.*"when".*:.*\}/))try{var i=JSON.parse(t);if(s(i.count)){var o=e[i.count],r=i.when;if(a(o)&&p(r)){var l=r[o]||r.other;s(l)&&(t=l)}}}catch(t){}return t.replace(/\{(.*?)(:(.*?))?\}/g,function(t,i,o,r){var s=t;return i&&"{"!=i[0]&&e&&(s=e[i],r&&(s=wt.format(s,r)),n&&(s=n(e,i,r,s))),null==s?"":s})}function v(t,e,n){return null!=t&&(null!=n&&t>n&&(t=n),null!=e&&t<e&&(t=e)),t}function y(t,e){if(e)for(var n in e)if("_"!=n[0]){b(n in t,'Unknown property "'+n+'".');var i=e[n];t._copy&&t._copy(n,i)||(t[n]instanceof xt?u(i)&&t[n].addHandler(i):!p(i)||i instanceof Element||!t[n]||"itemsSource"==n?t[n]=i:y(t[n],i))}}function b(t,e){if(!t)throw e="** Assertion failed in Wijmo: "+e,console.error(e),e}function w(t,e){return void 0===e&&(e=!0),b(e&&null==t||s(t),"String expected."),t}function C(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),b(e&&null==t||a(t),"Number expected."),n&&t&&t<0)throw"Positive number expected.";return t}function x(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),b(e&&null==t||l(t),"Integer expected."),n&&t&&t<0)throw"Positive integer expected.";return t}function j(t,e){return void 0===e&&(e=!1),b(e&&null==t||h(t),"Boolean expected."),t}function S(t,e){if(void 0===e&&(e=!1),s(t)){var n=g(t,ft.Date,"r");c(n)&&(t=n)}return b(e&&null==t||c(t),"Date expected."),t}function E(t,e){return void 0===e&&(e=!0),b(e&&null==t||u(t),"Function expected."),t}function I(t,e){return void 0===e&&(e=!0),b(e&&null==t||d(t),"Array expected."),t}function D(t,e,n){return void 0===n&&(n=!1),t=o(t,e),b(n||null!=t,e+" expected."),t}function P(t,e,n){if(void 0===n&&(n=!1),null==t&&n)return null;var i=e[t];return b(null!=i,"Invalid enum value."),a(i)?i:t}function M(t,e){if(t&&t.getAttribute){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");return t&&n.test(t.getAttribute("class"))}return!1}function T(t,e){if(t&&e&&t.setAttribute)for(var n=e.split(" "),i=0;i<n.length;i++){var o=n[i];if(M(t,o)){var r=new RegExp("((\\s|^)"+o+"(\\s|$))","g"),s=t.getAttribute("class");(s=s.replace(r," ").replace(/ +/g," ").trim())?t.setAttribute("class",s):t.removeAttribute("class")}}}function R(t,e){if(t&&e&&t.setAttribute)for(var n=e.split(" "),i=0;i<n.length;i++){var o=n[i];if(!M(t,o)){var r=t.getAttribute("class");t.setAttribute("class",r?r+" "+o:o)}}}function A(t,e,n){null==n&&(n=!M(t,e)),n?R(t,e):T(t,e)}function O(t,e,n,i){t&&(null!=n?i&&t.getAttribute(e)||t.setAttribute(e,n.toString()):t.removeAttribute(e))}function k(t,e,n){if(void 0===n&&(n=e),b(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement,"INPUT or TEXTAREA element expected"),B(document.body,t)&&!t.disabled&&"none"!=t.style.display)try{return t.setSelectionRange(C(e),C(n),at()?null:"backward"),t.focus(),!0}catch(t){}return!1}function N(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function L(){var t=document.activeElement;if(t){var e=t.shadowRoot;e&&e.activeElement&&(t=e.activeElement)}return t}function F(t){return t instanceof Element?t:s(t)?document.querySelector(t):t&&t.jquery?t[0]:null}function V(t,e){var n=document.createElement("div");return n.innerHTML=t,1==n.children.length&&(n=n.children[0]),e&&e.appendChild(n),n}function B(t,e){for(var n=e;n&&t;){if(n===t)return!0;n=n.parentNode||n.host}return!1}function H(t,e){var n=t?t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector:null;if(n)for(;t;t=t.parentNode)if(t instanceof Element&&n.call(t,e))return t;return null}function z(t,e){var n=!e;A(t,"wj-state-disabled",n),O(t,"disabled",n?"true":null);for(var i=t.querySelectorAll("input"),o=0;o<i.length;o++){var r=i[o];e?r.removeAttribute("disabled"):r.setAttribute("disabled","true")}}function W(t,e){if(b(p(e),"css parameter should be an object"),t instanceof Array)for(var n=0;n<t.length;n++)W(t[n],e);else if(t&&t.style){var i=t.style;for(var o in e){var r=e[o];"number"==typeof r&&o.match(/width|height|left|top|right|bottom|size|padding|margin'/i)&&(r+="px"),i[o]!==r&&(i[o]=r.toString())}}}function G(t,e,n){void 0===e&&(e=Mt._ANIM_DEF_DURATION),void 0===n&&(n=Mt._ANIM_DEF_STEP),t=E(t),e=C(e,!1,!0),n=C(n,!1,!0);var i=Date.now(),o=setInterval(function(){var n=Math.min(1,(Date.now()-i)/e);n=Math.sin(n*Math.PI/2),n*=n,requestAnimationFrame(function(){t(n)}),n>=1&&clearInterval(o)},n);return o}function Y(t,e){e||(e={});var n=e.method?w(e.method).toUpperCase():"GET",i=null==e.async||j(e.async),o=e.data;if(null!=o&&"GET"==n){var r=[];for(var l in o){var h=o[l];c(h)&&(h=h.toJSON()),r.push(l+"="+h)}r.length&&(t+=(t.indexOf("?")<0?"?":"&")+r.join("&")),o=null}var d=new XMLHttpRequest;d.URL_DEBUG=t;var f=!1;if(null==o||s(o)||(f=p(o),o=JSON.stringify(o)),d.onload=function(){4==d.readyState&&(d.status<300?e.success&&E(e.success)(d):e.error&&E(e.error)(d),e.complete&&E(e.complete)(d))},d.onerror=function(){if(!u(e.error))throw"HttpRequest Error: "+d.status+" "+d.statusText;e.error(d)},d.open(n,t,i,e.user,e.password),e.user&&e.password&&d.setRequestHeader("Authorization","Basic "+btoa(e.user+":"+e.password)),f&&d.setRequestHeader("Content-Type","application/json"),e.requestHeaders)for(var g in e.requestHeaders)d.setRequestHeader(g,e.requestHeaders[g]);return a(e.timeout)&&(d.timeout=e.timeout),u(e.beforeSend)&&e.beforeSend(d),d.send(o),d}function K(t,e,n){var i=0,o=0,r=0,s=0,l=null,u=null,c=null,d=n?new Ct(n):null;if((t=P(t,Dt))==Dt.CntAll)return e.length;for(var p=0;p<e.length;p++){var f=e[p];if(d&&(f=d.getValue(f)),t==Dt.First)return f;null!=f&&(i++,(null==l||f<l)&&(l=f),(null==u||f>u)&&(u=f),c=f,a(f)&&!isNaN(f)?(o++,r+=f,s+=f*f):h(f)&&(o++,1==f&&(r++,s++)))}var g=0==o?0:r/o;switch(t){case Dt.Avg:return g;case Dt.Cnt:return i;case Dt.Max:return u;case Dt.Min:return l;case Dt.Rng:return u-l;case Dt.Sum:return r;case Dt.VarPop:return o<=1?0:s/o-g*g;case Dt.StdPop:return o<=1?0:Math.sqrt(s/o-g*g);case Dt.Var:return o<=1?0:(s/o-g*g)*o/(o-1);case Dt.Std:return o<=1?0:Math.sqrt((s/o-g*g)*o/(o-1));case Dt.Last:return c}throw"Invalid aggregate type."}function X(t,e,n,i,o){void 0===o&&(o=!0);var r=document.body;if(e instanceof HTMLElement){if(!B(document.body,e))return;for(var s=e;s;s=s.parentElement)if(q(s)||"fixed"==getComputedStyle(s).position){r=s;break}}W(t,{display:"none",left:"",top:""}),t.offsetHeight&&t.offsetWidth&&B(r,t)||r.lastChild!=t&&r.appendChild(t);var a=document.body,l=new mt(a.scrollLeft||pageXOffset,a.scrollTop||pageYOffset),h=document.documentElement,u=h.clientWidth/window.innerWidth;if(r!=a||u>1.005){var c=r==a?h:t.offsetParent||r;if(q(r)&&r.offsetParent&&(c=r.offsetParent),c){var d=c.getBoundingClientRect();l=new mt(c.scrollLeft-d.left,c.scrollTop-d.top)}}if(W(t,{position:"fixed",display:"",left:0,top:0}),t.offsetHeight&&t.offsetWidth&&B(r,t)||r.lastChild!=t&&r.appendChild(t),e instanceof HTMLElement&&o){var p=getComputedStyle(e);new Gt(p.backgroundColor).a&&W(t,{color:p.color,backgroundColor:p.backgroundColor,fontFamily:p.fontFamily,fontSize:p.fontSize,fontWeight:p.fontWeight,fontStyle:p.fontStyle})}W(t,{position:"fixed",display:""}),Mt.refreshAll(t);var f=getComputedStyle(t),g=parseFloat(f.marginTop)+parseFloat(f.marginBottom),_=parseFloat(f.marginLeft)+parseFloat(f.marginRight),m=new vt(t.offsetWidth+_,t.offsetHeight+g),v=new mt,y=null,b=h.clientWidth,w=h.clientHeight;if(e&&null!=e.clientX&&null!=e.clientY&&null!=e.pageX&&null!=e.pageY)e.clientX<=0&&e.clientY<=0&&e.target?y=e.target.getBoundingClientRect():(v.x=Math.max(0,e.pageX-pageXOffset),v.y=Math.max(0,e.pageY-pageYOffset));else if(e instanceof mt)v=e;else if(e instanceof HTMLElement)y=e.getBoundingClientRect();else if(e&&null!=e.top&&null!=e.left)y=e;else{if(null!=e)throw"Invalid ref parameter.";v.x=Math.max(0,(b-m.width)/2),v.y=Math.max(0,Math.round((w-m.height)/2*.7))}var C=parseFloat(f.minWidth);if(y){var x=y.top,j=w-y.bottom,S="rtl"==getComputedStyle(t).direction;v.x=S?Math.max(0,y.right-m.width):Math.max(0,Math.min(y.left,b-m.width)),v.y=n?x>m.height||x>j?Math.max(0,y.top-m.height):y.bottom:j>m.height||j>x?y.bottom:Math.max(0,y.top-m.height),C=Math.max(C,y.width),at()&&(C-=t.offsetWidth-(t.clientWidth+parseInt(f.borderLeftWidth)+parseInt(f.borderRightWidth)))}else v.y+m.height>w-20&&(v.y=Math.max(0,w-20-m.height)),v.x+m.width>b-20&&(v.x=Math.max(0,b-20-m.width));var E={position:"absolute",left:v.x+l.x,top:v.y+l.y,minWidth:C,zIndex:1500},I=null;i&&(t.style.opacity="0",I=G(function(e){t.style.opacity=e<1?e.toString():""})),e instanceof HTMLElement&&(t[Mt._OWNR_KEY]=e),W(t,E);var D=e instanceof MouseEvent?e.target:e;if(D instanceof HTMLElement&&D.parentElement!=document.body){var P=Date.now(),M=D.getBoundingClientRect(),T=new Mt(document.createElement("div"));t[Mt._SCRL_KEY]=T,T.addEventListener(document,"scroll",function(n){if(Date.now()-P>100&&B(document,D)&&!B(t,n.target)&&(n.target!=document||null!=e&&"fixed"==t.style.position)){var i=D.getBoundingClientRect(),o=Math.abs(i.left-M.left),r=Math.abs(i.top-M.top);(o>1||r>1)&&U(t,!0)}},!0)}return I}function U(t,e){t.style.display="none",e&&t.parentElement&&setTimeout(function(){"none"==t.style.display&&(N(t),u(e)&&e())},2*Mt._FOCUS_INTERVAL);var n=t[Mt._SCRL_KEY];n instanceof Mt&&n.dispose(),delete t[Mt._SCRL_KEY],delete t[Mt._OWNR_KEY]}function q(t){var e=window.jQuery,n=u(e)?e(t):null;return n&&u(n.dialog)&&null!=n.dialog("instance")}function Z(t){return t._getProductInfo().split(",")[0]}function J(t,n,o){var r=e.culture.Licensing||Ut,s=null;o?function(t,e){if(e.Exp){var n=e.Exp,i=new Date(parseInt(n.substr(0,4))||0,parseInt(n.substr(4,2))-1||0,parseInt(n.substr(6,2))||0);if(Math.ceil((i.valueOf()-Date.now())/864e5)<=0)return!1}return!0}(0,o)?function(t,e){var n=e.Anl?e.Anl.ver:null,o=i();return!n||!o||parseInt(n.replace("v",""))+10>=parseInt(o.split(".")[1])}(0,o)?function(t,e){if($()||!e.Dms)return!0;for(var n=location.hostname,i=e.Dms.split(","),o=!1,r=0;r<i.length;r++){var s=i[r];if((s=(o=s&&0==s.lastIndexOf("*.",0))?s.slice(2):s)==n)return!0;if(o){var a=n.indexOf("."+s);if(a>0&&a==n.length-s.length-1)return!0}}return!1}(0,o)?function(t,e){var n=Z(t);if(n&&n.length>=4)for(var i=0;i<e.Prd.length;i++)if(e.Prd[i].C.indexOf(n)>-1)return!0;return!1}(t,o)?Q(0,o)&&(s=r.evl):s=r.prd:s=r.dmn:s=r.ver:s=r.exp:s=n?r.lic:r.mss,s&&function(t,n,i){if(n=tt(t,n,i),!qt[" "]&&!$()&&!Q(0,i)){qt[" "]=!0;var o=e.culture.Licensing,r=V(s='<div style="position:fixed;background:rgba(0,0,0,0.3);left:0;top:0;width:100%;height:100%;font-family: sans-serif;z-index:10000;"><div style="position:relative;background:white;width:450px;padding:36pt;left:50%;top:50%;transform:translate(-50%,-50%)"><div><p style="font-size:150%;font-weight:bold">'+o.hdr+"</p><p>"+n+'</p></div><div style="text-align:right;margin-top:24pt"><button style="border:none;background:rgba(158,158,158,.2);padding:8px 16px">'+o.cls+"</button></div></div></div>",document.body);r.addEventListener("click",function(t){t.target instanceof HTMLButtonElement&&N(r)})}if(!Mt._wme){var s='<div><a href="'+("ja"==e.culture.Globalize.name?"https://www.grapecity.co.jp/developer/support/wijmo-license":"https://www.grapecity.com/en/licensing/wijmo")+'" target="_blank">'+tt(t)+"</a></div>",a=V(s),l={position:"fixed",display:"block",visibility:"visible",background:"rgba(240,240,240,.75)",padding:"8px 12px",margin:"6px",fontFamily:"sans-serif",fontSize:"14pt",fontWeight:"bold",zIndex:1e4,opacity:.8,height:"auto",width:"auto",transform:"none"};switch(Math.round(100*Math.random())%3){case 0:l.right=l.bottom=0;break;case 1:l.left=l.bottom=0;break;case 2:l.right=l.top=0}W(a,l),document.body.appendChild(a),Mt._wme=a,(new zt).setTooltip(a,n)}}(t,s+="<br/><br/>"+r.ctc,o)}function Q(t,e){return!!e&&e.Evl}function $(){var t=atob("Xih8bG9jYWxob3N0fGZpZGRsZS5qc2hlbGwubmV0fHJ1bi5wbG5rci5jb3xzLmNvZGVwZW4uaW98bnVsbC5qc2Jpbi5jb218MTI3LjAuMC4xKSQ="),e=new RegExp(t,"i");return location.hostname.match(e)}function tt(t,n,o){(!n||n.trim().length<15)&&(n=(e.culture.Licensing||Ut).evl),(!n||n.trim().length<15)&&(n=atob("V2lqbW8gRXZhbHVhdGlvbiBWZXJzaW9uICh7dmVyc2lvbn0p"));var r=null;if(o&&o.Exp){var s=o.Exp;r=new Date(parseInt(s.substr(0,4))||0,parseInt(s.substr(4,2))-1||0,parseInt(s.substr(6,2))||0)}return m(n,{version:i(),domain:location.hostname,control:function(t){return t._getProductInfo().split(",")[1]}(t),licVer:o&&o.Anl?"5."+o.Anl.ver.replace("v","")+".*":null,licDomain:o?o.Dms:null,expDate:r})}function et(t,e,n,i){t.length>1&&t.splice(n,1,i(t.splice(e,1,i(t[n]))[0]))}function nt(t){return function(t,e){var n=t.charCodeAt(0);return n>=65&&n<=90?t.toLowerCase():n>=97&&n<=122?t.toUpperCase():n>=48&&n<=57?String.fromCharCode(48+(n-48+10-1)%10):t}(t)}function it(t){for(var e=atob(t),n=e.length,i=new Zt(n),o=0;o<n;o++)i[o]=e.charCodeAt(o);return i.buffer}function ot(t){for(var e=new ArrayBuffer(t.length),n=new Zt(e),i=0,o=t.length;i<o;i++)n[i]=t.charCodeAt(i);return e}function rt(t){return"oncomplete"in t&&(t.then=function(e,n){t.resolve=e,t.reject=n},t.oncomplete=function(e){t.resolve(t.result)},t.onerror=function(e){t.reject()}),t}function st(){return ee}function at(){return oe}function lt(t,e){return se?{capture:t,passive:e}:t}var ht=n("mrSG").__extends;Object.defineProperty(e,"__esModule",{value:!0});var ut=n("DogD"),ct=window.wijmo&&window.wijmo.culture;window.wijmo=ut||e,e.culture=ct;var dt,pt,ft,gt="5.20181.436";e.getVersion=i,e.setLicenseKey=function(t){Mt._licKey=t},(pt=dt=e.Key||(e.Key={}))[pt.Back=8]="Back",pt[pt.Tab=9]="Tab",pt[pt.Enter=13]="Enter",pt[pt.Escape=27]="Escape",pt[pt.Space=32]="Space",pt[pt.PageUp=33]="PageUp",pt[pt.PageDown=34]="PageDown",pt[pt.End=35]="End",pt[pt.Home=36]="Home",pt[pt.Left=37]="Left",pt[pt.Up=38]="Up",pt[pt.Right=39]="Right",pt[pt.Down=40]="Down",pt[pt.Delete=46]="Delete",pt[pt.F1=112]="F1",pt[pt.F2=113]="F2",pt[pt.F3=114]="F3",pt[pt.F4=115]="F4",pt[pt.F5=116]="F5",pt[pt.F6=117]="F6",pt[pt.F7=118]="F7",pt[pt.F8=119]="F8",pt[pt.F9=120]="F9",pt[pt.F10=121]="F10",pt[pt.F11=122]="F11",pt[pt.F12=123]="F12",function(t){t[t.Object=0]="Object",t[t.String=1]="String",t[t.Number=2]="Number",t[t.Boolean=3]="Boolean",t[t.Date=4]="Date",t[t.Array=5]="Array"}(ft=e.DataType||(e.DataType={})),e.tryCast=o,e.isPrimitive=r,e.isString=s,e.isNullOrWhiteSpace=function(t){return null==t||t.replace(/\s/g,"").length<1},e.isNumber=a,e.isInt=l,e.isBoolean=h,e.isFunction=u,e.isUndefined=function(t){return void 0===t},e.isDate=c,e.isArray=d,e.isObject=p,e.isEmpty=function(t){for(var e in t)return!1;return!0},e.getUniqueId=f,e.mouseToPage=function(t){if(t instanceof mt)return t;if(t.touches&&t.touches.length>0&&(t=t.touches[0]),a(t.clientX)&&a(t.clientY))return new mt(t.clientX+pageXOffset,t.clientY+pageYOffset);throw"Mouse or touch event expected."},e.getType=function(t){return a(t)?ft.Number:h(t)?ft.Boolean:c(t)?ft.Date:s(t)?ft.String:d(t)?ft.Array:ft.Object},e.changeType=g,e.toFixed=_,e.format=m,e.clamp=v,e.copy=y,e.assert=b,e._deprecated=function(t,e){console.error('** WARNING: "'+t+'" has been deprecated; please use "'+e+'" instead.')},e.asString=w,e.asNumber=C,e.asInt=x,e.asBoolean=j,e.asDate=S,e.asFunction=E,e.asArray=I,e.asType=D,e.asEnum=P,e.asCollectionView=function(t,e){if(void 0===e&&(e=!0),null==t&&e)return null;var n=o(t,"ICollectionView");return null!=n?n:(d(t)||b(!1,"Array or ICollectionView expected."),new Bt(t))},e.hasItems=function(t){return null!=t&&null!=t.items&&t.items.length>0},e.toHeaderCase=function(t){return t&&t.length?t[0].toUpperCase()+t.substr(1).replace(/([a-z])([A-Z])/g,"$1 $2"):""},e.escapeHtml=function(t){return s(t)&&(t=t.replace(/[&<>"'\/]/g,function(t){return _t[t]})),t};var _t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};e.hasClass=M,e.removeClass=T,e.addClass=R,e.toggleClass=A,e.setAttribute=O,e.setSelectionRange=k,e.disableAutoComplete=function(t){"autocomplete,autocorrect,autocapitalize,spellcheck".split(",").forEach(function(e){t.setAttribute(e,"spellcheck"==e?"false":"off")})},e.removeChild=N,e.getActiveElement=L,e.moveFocus=function(t,e){var n=function t(e){for(var n=[],i=e.querySelectorAll("input,select,textarea,button,a,div"),o=0;o<i.length;o++){var r=i[o];if(r.offsetHeight>0&&r.tabIndex>-1&&!r.disabled&&!H(r,"[disabled],.wj-state-disabled")){if(r instanceof HTMLAnchorElement&&!r.hasAttribute("href"))continue;if(at()&&!r.hasAttribute("tabindex")){if(r instanceof HTMLDivElement)continue;var s=Mt.getControl(H(r,".wj-flexgrid"));if(s&&0==s.keyActionTab)continue}!Mt.getControl(r)&&t(r).length||n.push(r)}}return n}(t),i=0;if(e){var o=n.indexOf(L());o>-1&&(i=(o+e+n.length)%n.length)}if(i<n.length){var r=n[i];r.focus(),r instanceof HTMLInputElement&&r.select()}},e.getElement=F,e.createElement=V,e.setText=function(t,e){t.textContent=e||""},e.contains=B,e.closest=H,e.closestClass=function(t,e){return H(t,"."+e)},e.enable=z,e.getElementRect=function(t){var e=t.getBoundingClientRect();return new yt(e.left+pageXOffset,e.top+pageYOffset,e.width,e.height)},e.setCss=W,e.animate=G;var mt=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=C(t),this.y=C(e)}return t.prototype.equals=function(e){return e instanceof t&&this.x==e.x&&this.y==e.y},t.prototype.clone=function(){return new t(this.x,this.y)},t}();e.Point=mt;var vt=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.width=C(t),this.height=C(e)}return t.prototype.equals=function(e){return e instanceof t&&this.width==e.width&&this.height==e.height},t.prototype.clone=function(){return new t(this.width,this.height)},t}();e.Size=vt;var yt=function(){function t(t,e,n,i){this.left=C(t),this.top=C(e),this.width=C(n),this.height=C(i)}return Object.defineProperty(t.prototype,"right",{get:function(){return this.left+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.top+this.height},enumerable:!0,configurable:!0}),t.prototype.equals=function(e){return e instanceof t&&this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height},t.prototype.clone=function(){return new t(this.left,this.top,this.width,this.height)},t.fromBoundingRect=function(e){return null!=e.left?new t(e.left,e.top,e.width,e.height):null!=e.x?new t(e.x,e.y,e.width,e.height):void b(!1,"Invalid source rectangle.")},t.union=function(e,n){var i=Math.min(e.left,n.left),o=Math.min(e.top,n.top);return new t(i,o,Math.max(e.right,n.right)-i,Math.max(e.bottom,n.bottom)-o)},t.intersection=function(e,n){var i=Math.max(e.left,n.left),o=Math.max(e.top,n.top);return new t(i,o,Math.min(e.right,n.right)-i,Math.min(e.bottom,n.bottom)-o)},t.prototype.contains=function(e){return e instanceof mt?e.x>=this.left&&e.x<=this.right&&e.y>=this.top&&e.y<=this.bottom:e instanceof t?e.left>=this.left&&e.right<=this.right&&e.top>=this.top&&e.bottom<=this.bottom:void b(!1,"Point or Rect expected.")},t.prototype.inflate=function(e,n){return new t(this.left-e,this.top-n,this.width+2*e,this.height+2*n)},t}();e.Rect=yt;var bt=function(){function t(){}return t.addDays=function(e,n){return t.newDate(e.getFullYear(),e.getMonth(),e.getDate()+n)},t.addMonths=function(e,n){return t.newDate(e.getFullYear(),e.getMonth()+n,e.getDate())},t.addYears=function(e,n){return t.newDate(e.getFullYear()+n,e.getMonth(),e.getDate())},t.addHours=function(e,n){return t.newDate(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()+n)},t.addMinutes=function(e,n){return t.newDate(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()+n)},t.addSeconds=function(e,n){return t.newDate(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()+n)},t.sameDate=function(t,e){return c(t)&&c(e)&&t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()&&t.getDate()==e.getDate()},t.sameTime=function(t,e){return c(t)&&c(e)&&t.getHours()==e.getHours()&&t.getMinutes()==e.getMinutes()&&t.getSeconds()==e.getSeconds()},t.equals=function(t,e){return c(t)&&c(e)&&t.getTime()==e.getTime()},t.fromDateTime=function(e,n){return e||n?(e||(e=n),n||(n=e),t.newDate(e.getFullYear(),e.getMonth(),e.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())):null},t.toFiscal=function(n,i){var o=e.culture.Globalize.calendar;return d(o.fiscalYearOffsets)?t.addMonths(n,-o.fiscalYearOffsets[i?0:1]):n},t.fromFiscal=function(n,i){var o=e.culture.Globalize.calendar;return d(o.fiscalYearOffsets)?t.addMonths(n,+o.fiscalYearOffsets[i?0:1]):n},t.newDate=function(t,e,n,i,o,r,s){if(null==t||null==e||null==n){var a=new Date;null==t&&(t=a.getFullYear()),null==e&&(e=a.getMonth()),null==n&&(n=a.getDate())}null==i&&(i=0),null==o&&(o=0),null==r&&(r=0),null==s&&(s=0);var l=new Date(t,e,n,i,o,r,s),h=l.getFullYear();return t<100&&h>=1900&&l.setFullYear(l.getFullYear()-1900),l},t.clone=function(e){return t.fromDateTime(e,e)},t}();e.DateTime=bt,e.httpRequest=Y,e.culture=window.wijmo.culture||{Globalize:{numberFormat:{".":".",",":",","-":"-","+":"+","%":"%",percent:{pattern:["-n %","n %"]},currency:{decimals:2,symbol:"$",pattern:["($n)","$n"]}},calendar:{"/":"/",":":":",firstDay:0,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],am:["AM","A"],pm:["PM","P"],eras:["A.D.","B.C."],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",t:"h:mm tt",T:"h:mm:ss tt",M:"MMMM d",m:"MMMM d",Y:"MMMM, yyyy",y:"MMMM, yyyy",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",s:'yyyy"-"MM"-"dd"T"HH":"mm":"ss',o:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',O:'yyyy"-"MM"-"dd"T"HH":"mm":"ss"."fffffffK',U:"dddd, MMMM dd, yyyy h:mm:ss tt"},fiscalYearOffsets:[-3,-3]}}};var wt=function(){function t(){}return t.format=function(e,n,i,o){return s(e)?e:a(e)?(n=n||(e==Math.round(e)?"n0":"n2"),t.formatNumber(e,n,i,o)):c(e)?t.formatDate(e,n=n||"d"):null!=e?e.toString():""},t.formatNumber=function(n,i,o,r){n=C(n),i=w(i);var s,a=e.culture.Globalize.numberFormat,l=i?i.match(/([a-z])(\d*)(,*)(.*)/i):null,h=l?l[1].toLowerCase():"n",u=l&&l[2]?parseInt(l[2]):"c"==h?a.currency.decimals:n==Math.round(n)?0:2,c=l&&l[3]?3*l[3].length:0,d=a["."]||".",p=a[","]||",",f=a["-"]||"-";if(c&&(n/=Math.pow(10,c)),"d"==h||"x"==h){for(s=Math.round(Math.abs(n)).toString("d"==h?10:16);s.length<u;)s="0"+s;return n<0&&(s=f+s),i&&"X"==i[0]&&(s=s.toUpperCase()),s}if("p"==h&&(n=_(n=t._mul100(n),u,r)),r&&"p"!=h&&(n=_(n,u,!0)),s=t._toFixedStr("c"==h||"p"==h?Math.abs(n):n,u),(o||"g"==h)&&s.indexOf(".")>-1&&(s=(s=s.replace(/(\.[0-9]*?)0+$/g,"$1")).replace(/\.$/,"")),"."!=d&&(s=s.replace(".",d)),"-"!=f&&(s=s.replace("-",f)),p&&("n"==h||"c"==h||"p"==h)){var g=s.indexOf(d),m=/\B(?=(\d\d\d)+(?!\d))/g;s=g>-1?s.substr(0,g).replace(m,p)+s.substr(g):s.replace(m,p)}if("c"==h){var v=a.currency.pattern[n<0?0:1],y=l&&l[4]?l[4]:a.currency.symbol;"\u200b"==y&&(y=""),s=v.replace("n",s).replace("$",y)}if("p"==h){v=a.percent.pattern[n<0?0:1];var b=a["%"]||"%";s=v.replace("n",s),"%"!=b&&(s=s.replace("%",b)),"-"!=f&&n<0&&(s=s.replace("-",f))}return s},t.formatDate=function(e,n){switch(e=S(e),n){case"r":case"R":return e.toUTCString();case"u":return e.toISOString().replace(/\.\d{3}/,"")}n=t._expandFormat(n);for(var i=t._parseDateFormat(n),o="",r=0;r<i.length;r++)o+=t._formatDatePart(e,n,i[r]);return o},t.parseInt=function(e,n){return Math.round(t.parseFloat(e,n))},t.parseFloat=function(t,n){var i=e.culture.Globalize.numberFormat,o=i["%"]||"%",r=t.indexOf(i["-"]||"-")>-1||t.indexOf("(")>-1&&t.indexOf(")")>-1?-1:1,s=t.indexOf(o)>-1?.01:1,a=n?n.match(/,+/):null,l=a?3*a[0].length:0,h=0;if(!n||"x"!=n[0]&&"X"!=n[0]){var u=i["."]||".",c=new RegExp("[^\\d\\"+u+"]","g");t=t.replace(c,"").replace(u,"."),h=parseFloat(t)}else t=t.replace(/[^0-9a-f]+.*$/gi,""),h=parseInt(t,16);return h*r*s*Math.pow(10,l)},t.parseDate=function(n,i){if(!(n=w(n)))return null;if("u"==i)return new Date(n);var o;if("R"==i||"r"==i){var r=n.match(/(([0-9]+)\-([0-9]+)\-([0-9]+))?\s?(([0-9]+):([0-9]+)(:([0-9]+))?)?/);return r[1]||r[5]?(o=r[1]?new Date(parseInt(r[2]),parseInt(r[3])-1,parseInt(r[4])):new Date,r[5]&&(o.setHours(parseInt(r[6])),o.setMinutes(parseInt(r[7])),o.setSeconds(r[8]?parseInt(r[9]):0))):o=new Date(n),isNaN(o.getTime())?null:o}i=t._expandFormat(i||"d");var s,l,h,u,c,p,f=e.culture.Globalize.calendar,g=t._CJK,_=new RegExp("(\\"+f["/"]+")|(\\"+f[":"]+")|(\\d+)|(["+g+"\\.]{2,})|(["+g+"]+)","gi"),m=n.match(_),v=t._parseDateFormat(i),y=0,b=-1,C=0,x=1,j=0,S=0,E=0,I=0,D=-1;if(!(m&&m.length&&v&&v.length))return null;for(var P=0;P<v.length&&m;P++){var M=P-y,T=M>-1&&M<m.length?m[M]:"",R=v[P].length;switch(v[P]){case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":p=v[P];case"yyyy":case"yyy":case"yy":case"y":R>1&&T.length>R&&(m[M]=T.substr(R),T=T.substr(0,R),y++),b=parseInt(T),c=4==T.length;break;case"MMMM":case"MMM":u=!0;var A=T.toLowerCase();C=-1;for(var O=0;O<12;O++)if(0==f.months[O].toLowerCase().indexOf(A)){C=O;break}if(C>-1)break;case"MM":case"M":u=!0,R>1&&T.length>R&&(m[M]=T.substr(R),T=T.substr(0,R),y++),C=parseInt(T)-1;break;case"dddd":case"ddd":s=!0;break;case"dd":case"d":R>1&&T.length>R&&(m[M]=T.substr(R),T=T.substr(0,R),y++),x=parseInt(T),l=!0;break;case"hh":case"h":R>1&&T.length>R&&(m[M]=T.substr(R),T=T.substr(0,R),y++),j=12==(j=parseInt(T))?0:j;break;case"HH":R>1&&T.length>R&&(m[M]=T.substr(R),T=T.substr(0,R),y++),j=parseInt(T);break;case"H":j=parseInt(T);break;case"mm":case"m":R>1&&T.length>R&&(m[M]=T.substr(R),T=T.substr(0,R),y++),S=parseInt(T);break;case"ss":case"s":R>1&&T.length>R&&(m[M]=T.substr(R),T=T.substr(0,R),y++),E=parseInt(T);break;case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":I=parseInt(T)/Math.pow(10,R-3);break;case"tt":case"t":T=T.toUpperCase(),j<12&&f.pm.indexOf(T)>-1&&(j+=12);break;case"q":case"Q":case"u":case"U":h=!0;break;case"ggg":case"gg":case"g":D=f.eras.length>1?t._getEra(T,f):-1;break;case f["/"]:case f[":"]:if(T&&T!=v[P])return null;break;case"K":break;default:t._unquote(v[P]).trim()!=T.trim()&&y++}}if(u&&l&&(isNaN(j)&&(j=0),isNaN(S)&&(S=0),isNaN(E)&&(E=0)),C<0||C>11||isNaN(C)||x<1||x>31||isNaN(x)||j<0||j>24||isNaN(j)||S<0||S>60||isNaN(S)||E<0||E>60||isNaN(E))return null;if(p){if(!u)return null;var k=e.culture.Globalize.calendar;if(d(k.fiscalYearOffsets)){var N=C-k.fiscalYearOffsets["E"==p[0]?0:1];b+=N>11?-1:N<0?1:0}}return s&&!l?null:h&&!u?null:(b<0&&(b=(new Date).getFullYear()),D>-1?b=b+f.eras[D].start.getFullYear()-1:b<100&&!c&&(b+=b+2e3<(a(f.twoDigitYearMax)?f.twoDigitYearMax:2029)?2e3:1900),x>new Date(b,C+1,0).getDate()?null:(o=bt.newDate(b,C,x,j,S+0,E,I),isNaN(o.getTime())?null:o))},t.getFirstDayOfWeek=function(){return e.culture.Globalize.calendar.firstDay||0},t.getNumberDecimalSeparator=function(){return e.culture.Globalize.numberFormat["."]||"."},t._toFixedStr=function(t,e){var n=t.toString(),i=n.indexOf("."),o=e-(n.length-i)+1;return n.indexOf("e")<0&&i>-1&&o>=0?n+Array(o+1).join("0"):t.toFixed(e)},t._unquote=function(t){return t.length>1&&t[0]==t[t.length-1]&&("'"==t[0]||'"'==t[0])?t.substr(1,t.length-2):t},t._parseDateFormat=function(e){if(e in t._dateFormatParts)return t._dateFormatParts[e];var n,i,o=[];if(e)for(n=0;n>-1&&n<e.length;n++){var r=e[n];if(("'"==r||'"'==r)&&(i=e.indexOf(r,n+1))>-1)o.push(e.substring(n,i+1)),n=i;else if("\\"==r&&n<e.length-1)o.push('"'+e[++n]+'"');else{for(i=n+1;i<e.length&&e[i]==r;i++);o.push(e.substring(n,i)),n=i-1}}return t._dateFormatParts[e]=o,o},t._formatDatePart=function(n,i,o){var r,s=e.culture.Globalize.calendar,a=0,l=0,h=0,u=o.length;switch(o){case"yyyy":case"yyy":case"yy":case"y":case"EEEE":case"EEE":case"EE":case"E":case"eeee":case"eee":case"ee":case"e":return l=(r="E"==o[0]?bt.toFiscal(n,!0):"e"==o[0]?bt.toFiscal(n,!1):n).getFullYear(),s.eras.length>1&&i.indexOf("g")>-1&&(a=t._getEra(n,s))>-1&&(l=l-s.eras[a].start.getFullYear()+1),t._zeroPad(o.length<3?l%100:3==o.length?l%1e3:l,o.length);case"MMMMM":return s.monthsAbbr[n.getMonth()][0];case"MMMM":return s.months[n.getMonth()];case"MMM":return s.monthsAbbr[n.getMonth()];case"MM":case"M":return t._zeroPad(n.getMonth()+1,u);case"dddd":return s.days[n.getDay()];case"ddd":return s.daysAbbr[n.getDay()];case"dd":return t._zeroPad(n.getDate(),2);case"d":return n.getDate().toString();case"hh":case"h":return t._zeroPad(t._h12(n),u);case"HH":case"H":return t._zeroPad(n.getHours(),u);case"mm":case"m":return t._zeroPad(n.getMinutes(),u);case"ss":case"s":return t._zeroPad(n.getSeconds(),u);case"fffffff":case"FFFFFFF":case"ffffff":case"FFFFFF":case"fffff":case"FFFFF":case"ffff":case"FFFF":case"fff":case"FFF":case"ff":case"FF":case"f":case"F":return h=n.getMilliseconds()*Math.pow(10,u-3),"f"==o[0]?t._zeroPad(h,u):h.toFixed(0);case"tt":return n.getHours()<12?s.am[0]:s.pm[0];case"t":return n.getHours()<12?s.am[1]:s.pm[1];case"q":case"Q":return(Math.floor(n.getMonth()/3)+1).toString();case"u":case"U":return r=bt.toFiscal(n,"U"==o),(Math.floor(r.getMonth()/3)+1).toString();case"ggg":case"gg":case"g":return s.eras.length>1&&(a=t._getEra(n,s))>-1?"ggg"==o?s.eras[a].name:"gg"==o?s.eras[a].name[0]:s.eras[a].symbol:s.eras[0];case":":case"/":return s[o];case"K":var c=n.toString().match(/(\+|\-)(\d{2})(\d{2})/);return c?c[1]+c[2]+c[3]:"";case"zzz":case"zz":case"z":var d=-n.getTimezoneOffset(),p=void 0;switch(o){case"zzz":p=t.format(d/60,"d2",!1,!0)+s[":"]+t.format(d%60,"d2",!1,!0);break;case"zz":p=t.format(d/60,"d2",!1,!0);break;case"z":p=t.format(d/60,"d",!1,!0)}return d>=0?"+"+p:p}return u>1&&o[0]==o[u-1]&&('"'==o[0]||"'"==o[0])?o.substr(1,u-2):o},t._getEra=function(t,e){if(c(t)){for(n=0;n<e.eras.length;n++)if(t>=e.eras[n].start)return n}else if(s(t))for(var n=0;n<e.eras.length;n++)if(e.eras[n].name&&(0==e.eras[n].name.indexOf(t)||0==e.eras[n].symbol.indexOf(t)))return n;return-1},t._expandFormat=function(t){return e.culture.Globalize.calendar.patterns[t]||t},t._zeroPad=function(t,e){var n=t.toFixed(0),i=e-n.length+1;return i>0?Array(i).join("0")+n:n},t._h12=function(t){var n=e.culture.Globalize.calendar,i=t.getHours();return n.am&&n.am[0]&&0==(i%=12)&&(i=12),i},t._mul100=function(t){var e=t.toString(),n=e.indexOf(".");return e.indexOf("e")>-1?100*t:(n<0?e+="00":(n+=2,e=(e=e.replace(".","")+"00").substr(0,n)+"."+e.substr(n)),parseFloat(e))},t._CJK="a-z"+"u00c0-u017fu3000-u30ffu4e00-u9faf".replace(/u/g,"\\u")+"u1100-u11ffu3130-u318fua960-ua97fuac00-ud7afud7b0-ud7ff".replace(/u/g,"\\u"),t._dateFormatParts={},t}();e.Globalize=wt,e._updateCulture=function(){e.culture=window.wijmo.culture};var Ct=function(){function t(t){this.path=t}return Object.defineProperty(t.prototype,"path",{get:function(){return this._path},set:function(t){this._path=t,this._parts=t?t.split("."):[];for(var e=0;e<this._parts.length;e++){var n=this._parts[e],i=n.indexOf("[");i>-1&&(this._parts[e]=n.substr(0,i),this._parts.splice(++e,0,parseInt(n.substr(i+1))))}this._key=1==this._parts.length?this._parts[0]:null},enumerable:!0,configurable:!0}),t.prototype.getValue=function(t){if(t){if(this._key)return t[this._key];if(this._path&&this._path in t)return t[this._path];for(var e=0;e<this._parts.length&&t;e++)t=t[this._parts[e]]}return t},t.prototype.setValue=function(t,e){if(t){if(this._path in t)return void(t[this._path]=e);for(var n=0;n<this._parts.length-1;n++)if(null==(t=t[this._parts[n]]))return;t[this._parts[this._parts.length-1]]=e}},t}();e.Binding=Ct;var xt=function(){function t(){this._handlers=[]}return t.prototype.addHandler=function(t,e){t=E(t),this._handlers.push(new function(t,e){this.handler=t,this.self=e}(t,e))},t.prototype.removeHandler=function(t,e){t=E(t);for(var n=0;n<this._handlers.length;n++){var i=this._handlers[n];if((i.handler==t||null==t)&&(i.self==e||null==e)&&(this._handlers.splice(n,1),t&&e))break}},t.prototype.removeAllHandlers=function(){this._handlers.length=0},t.prototype.raise=function(t,e){void 0===e&&(e=jt.empty);for(var n=0;n<this._handlers.length;n++){var i=this._handlers[n];i.handler.call(i.self,t,e)}},Object.defineProperty(t.prototype,"hasHandlers",{get:function(){return this._handlers.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handlerCount",{get:function(){return this._handlers.length},enumerable:!0,configurable:!0}),t}();e.Event=xt;var jt=function(){function t(){}return t.empty=new t,t}();e.EventArgs=jt;var St=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cancel=!1,e}return ht(e,t),e}(jt);e.CancelEventArgs=St;var Et=function(t){function e(e,n,i){var o=t.call(this)||this;return o._name=e,o._oldVal=n,o._newVal=i,o}return ht(e,t),Object.defineProperty(e.prototype,"propertyName",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oldValue",{get:function(){return this._oldVal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"newValue",{get:function(){return this._newVal},enumerable:!0,configurable:!0}),e}(jt);e.PropertyChangedEventArgs=Et;var It=function(t){function e(e,n){var i=t.call(this)||this;return i._xhr=e,i._msg=n,i}return ht(e,t),Object.defineProperty(e.prototype,"request",{get:function(){return this._xhr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._msg},set:function(t){this._msg=t},enumerable:!0,configurable:!0}),e}(St);e.RequestErrorEventArgs=It;var Dt,Pt,Mt=function(){function t(e,n,i){void 0===n&&(n=null),void 0===i&&(i=!1);var o=this;this._pristine=!0,this._focus=!1,this._updating=0,this._fullUpdate=!1,this.gotFocus=new xt,this.lostFocus=new xt,this.refreshing=new xt,this.refreshed=new xt,this._updateWme(),b(null==t.getControl(e),"Element is already hosting a control.");var r,s=F(e);if(b(null!=s,"Cannot find the host element."),this._orgOuter=s.outerHTML,this._orgTag=s.tagName,this._orgAtts=s.attributes,"INPUT"!=s.tagName&&"SELECT"!=s.tagName||(s=this._replaceWithDiv(s)),this._e=s,s[t._CTRL_KEY]=this,1==i){this._szCtl=new vt(s.offsetWidth,s.offsetHeight);var a=this._handleResize.bind(this);this.addEventListener(window,"resize",a)}this.addEventListener(s,"focus",function(e){r&&clearTimeout(r),r=setTimeout(function(){r=null,o._updateFocusState()},t._FOCUS_INTERVAL)},!0),this.addEventListener(s,"blur",function(e){r&&clearTimeout(r),r=setTimeout(function(){r=null,o._updateFocusState()},t._FOCUS_INTERVAL)},!0);var l=this._handleDisabled.bind(this);if(this.addEventListener(s,"mousedown",l,!0),this.addEventListener(s,"mouseup",l,!0),this.addEventListener(s,"click",l,!0),this.addEventListener(s,"dblclick",l,!0),this.addEventListener(s,"keydown",l,!0),this.addEventListener(s,"wheel",l,lt(!0,!0)),null==t._touching&&(t._touching=!1,"ontouchstart"in window||"onpointerdown"in window)){var h=document.body,u=this._handleTouchStart,c=this._handleTouchEnd,d=lt(!0,!0);"ontouchstart"in window?(h.addEventListener("touchstart",u,d),h.addEventListener("touchend",c,d),h.addEventListener("touchcancel",c,d),h.addEventListener("touchleave",c,d)):"onpointerdown"in window&&(h.addEventListener("pointerdown",u,d),h.addEventListener("pointerup",c,d),h.addEventListener("pointerout",c,d),h.addEventListener("pointercancel",c,d),h.addEventListener("pointerleave",c,d))}}return t.prototype.getTemplate=function(){for(var t=Object.getPrototypeOf(this);t;t=Object.getPrototypeOf(t)){var e=t.constructor.controlTemplate;if(e)return e}return null},t.prototype.applyTemplate=function(e,n,i,o){var r=this,s=this._e;e&&R(s,e);var a=null;n&&(a=V(n,s));for(var l=s.querySelectorAll("a.wj-btn"),h=0;h<l.length;h++){var u=l[h];O(u,"role","button",!0),O(u,"href","",!0),O(u,"draggable",!1,!0)}var c=s.querySelectorAll("input"),d=1==c.length?c[0]:null;if(d&&(this._copyAttributes(d,s.attributes,t._rxInputAtts),this._copyAttributes(d,this._orgAtts,t._rxInputAtts)),d&&s.id){for(var p=s;p.parentElement;)p=p.parentElement;var g=p.querySelector('label[for="'+s.id+'"]');if(g instanceof HTMLLabelElement){var _=f(s.id+"_input");d.id=_,g.htmlFor=_}}if(d){var m=document.createEvent("HTMLEvents"),v=d.value;m.initEvent("change",!0,!1),this.addEventListener(d,"input",function(){r._pristine=!1,v=d.value},!0),this.gotFocus.addHandler(function(){v=d.value}),this.lostFocus.addHandler(function(){r._pristine&&(r._pristine=!1,r._updateState()),v!=d.value&&d.dispatchEvent(m)})}if(d?s.tabIndex=-1:s.getAttribute("tabindex")||(s.tabIndex=0),this._updateState(),i)for(var y in i){var b=i[y];if(this[y]=a.querySelector('[wj-part="'+b+'"]'),null==this[y]&&a.getAttribute("wj-part")==b&&(this[y]=a),null==this[y])throw'Missing template part: "'+b+'"';if(b==o){var w="name",C=s.attributes[w];C&&C.value&&this[y].setAttribute(w,C.value),(C=s.attributes[w="accesskey"])&&C.value&&(this[y].setAttribute(w,C.value),s.removeAttribute(w))}}return a},t.prototype.dispose=function(){for(var e=this._e.querySelectorAll(".wj-control"),n=0;n<e.length;n++){var i=t.getControl(e[n]);i&&i.dispose()}for(var o in this._toInv&&(clearTimeout(this._toInv),this._toInv=null),this.removeEventListener(),this)o.length>2&&0==o.indexOf("on")&&(s=this[o[2].toLowerCase()+o.substr(3)])instanceof xt&&s.removeAllHandlers();var r=this.collectionView;if(r instanceof Bt)for(var o in r){var s=r[o];s instanceof xt&&s.removeHandler(null,this)}this._e.parentNode&&(this._e.outerHTML=this._orgOuter),this._e[t._CTRL_KEY]=null,this._e=this._orgOuter=this._orgTag=null},t.getControl=function(e){var n=F(e);return n?D(n[t._CTRL_KEY],t,!0):null},Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightToLeft",{get:function(){return null==this._rtlDir&&(this._rtlDir=!!this._e&&"rtl"==getComputedStyle(this._e).direction),this._rtlDir},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this._e&&this._e.focus()},t.prototype.containsFocus=function(){var e=this._e,n=L();if(!e)return!1;for(var i=n;i;){if(i==e)return!0;i=i[t._OWNR_KEY]||i.parentElement}return!1},t.prototype.invalidate=function(e){var n=this;void 0===e&&(e=!0),this._rtlDir=null,this._fullUpdate=this._fullUpdate||e,this._toInv&&(clearTimeout(this._toInv),this._toInv=null),this.isUpdating||(this._toInv=setTimeout(function(){n.refresh(n._fullUpdate),n._toInv=null},t._REFRESH_INTERVAL))},t.prototype.refresh=function(t){var e=this;void 0===t&&(t=!0);var n=this.hostElement;n&&(this._rtlDir="rtl"==getComputedStyle(n).direction,A(n,"wj-rtl",this._rtlDir)),this.isUpdating||(this.onRefreshing(),setTimeout(function(){e.onRefreshed()})),!this.isUpdating&&this._toInv&&(clearTimeout(this._toInv),this._toInv=null,this._fullUpdate=!1,this._updateWme())},t.invalidateAll=function(e){if(e||(e=document.body),e.children)for(var n=0;n<e.children.length;n++)t.invalidateAll(e.children[n]);var i=t.getControl(e);i&&i.invalidate()},t.refreshAll=function(e){if(e||(e=document.body),e.children)for(var n=0;n<e.children.length;n++)t.refreshAll(e.children[n]);var i=t.getControl(e);i&&i.refresh()},t.disposeAll=function(e){var n=t.getControl(e);if(n)n.dispose();else if(e.children)for(var i=0;i<e.children.length;i++)t.disposeAll(e.children[i])},t.prototype.beginUpdate=function(){this._updating++},t.prototype.endUpdate=function(){this._updating--,this._updating<=0&&this.invalidate()},Object.defineProperty(t.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),t.prototype.deferUpdate=function(t){try{this.beginUpdate(),t()}finally{this.endUpdate()}},Object.defineProperty(t.prototype,"isTouching",{get:function(){return t._touching},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDisabled",{get:function(){return this._e&&null!=this._e.getAttribute("disabled")},set:function(t){(t=j(t,!0))!=this.isDisabled&&z(this._e,!t)},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){t&&y(this,t)},t.prototype.addEventListener=function(t,e,n,i){void 0===i&&(i=!1),t&&(t.addEventListener(e,n,i),null==this._listeners&&(this._listeners=[]),this._listeners.push({target:t,type:e,fn:n,capture:i}))},t.prototype.removeEventListener=function(t,e,n,i){var o=0;if(this._listeners)for(var r=0;r<this._listeners.length;r++){var s=this._listeners[r];null!=t&&t!=s.target||null!=e&&e!=s.type||(null==n||n==s.fn||n&&s.fn&&n.toString()==s.fn.toString())&&(null!=i&&i!=s.capture||(s.target.removeEventListener(s.type,s.fn,s.capture),this._listeners.splice(r,1),r--,o++))}return o},t.prototype.onGotFocus=function(t){this.gotFocus.raise(this,t)},t.prototype.onLostFocus=function(t){this.lostFocus.raise(this,t)},t.prototype.onRefreshing=function(t){this.refreshing.raise(this,t)},t.prototype.onRefreshed=function(t){this.refreshed.raise(this,t)},t.prototype._getProductInfo=function(){return"B0C3,Control"},t.prototype._updateWme=function(){var e=window.wijmo._updateWme;u(e)&&e(this,t._licKey)},t.prototype._hasPendingUpdates=function(){return null!=this._toInv},t.prototype._handleResize=function(){if(this._e.parentElement){var t=new vt(this._e.offsetWidth,this._e.offsetHeight);t.equals(this._szCtl)||(this._szCtl=t,this.invalidate())}},t.prototype._updateFocusState=function(){setTimeout(function(){for(var e=jt.empty,n=document.body.querySelectorAll(".wj-state-focused"),i=0;i<n.length;i++)(s=t.getControl(n[i]))&&s._focus&&!s.containsFocus()&&(s._focus=!1,s._updateState(),s.onLostFocus(e));var o=L();if(o)for(var r=o;r;){var s=t.getControl(r);s&&!s._focus&&s.containsFocus()&&(s._focus=!0,s._updateState(),s.onGotFocus(e)),r=r[t._OWNR_KEY]||r.parentElement}})},t.prototype._updateState=function(){var t=this.hostElement;if(t){A(t,"wj-state-focused",this._focus);var e=t.querySelector("input");if(e instanceof HTMLInputElement){A(t,"wj-state-empty",0==e.value.length),A(t,"wj-state-readonly",e.readOnly);var n=e.validationMessage;A(t,"wj-state-invalid",!this._pristine&&null!=n&&n.length>0)}}},t.prototype._handleTouchStart=function(e){null!=e.pointerType&&"touch"!=e.pointerType||(t._touching=!0)},t.prototype._handleTouchEnd=function(e){null!=e.pointerType&&"touch"!=e.pointerType||setTimeout(function(){t._touching=!1},800)},t.prototype._handleDisabled=function(t){this.isDisabled&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())},t.prototype._replaceWithDiv=function(t){var e=document.createElement("div");return t.parentElement.replaceChild(e,t),e.innerHTML=t.innerHTML,this._copyAttributes(e,t.attributes,/id|style|class/i),e},t.prototype._copyAttributes=function(t,e,n){if(t)for(var i=0;i<e.length;i++){var o=e[i].name;o.match(n)&&t.setAttribute(o,e[i].value)}},t._REFRESH_INTERVAL=10,t._FOCUS_INTERVAL=20,t._ANIM_DEF_DURATION=400,t._ANIM_DEF_STEP=35,t._CLICK_DELAY=800,t._CLICK_REPEAT=75,t._CLIPBOARD_DELAY=100,t._DRAG_SCROLL_EDGE=15,t._DRAG_SCROLL_STEP=10,t._CTRL_KEY="$WJ-CTRL",t._OWNR_KEY="$WJ-OWNR",t._SCRL_KEY="$WJ-SCRL",t._rxInputAtts=/name|tabindex|placeholder|autofocus|autocomplete|autocorrect|autocapitalize|spellcheck|readonly|minlength|maxlength|pattern|type/i,t}();e.Control=Mt,function(t){t[t.None=0]="None",t[t.Sum=1]="Sum",t[t.Cnt=2]="Cnt",t[t.Avg=3]="Avg",t[t.Max=4]="Max",t[t.Min=5]="Min",t[t.Rng=6]="Rng",t[t.Std=7]="Std",t[t.Var=8]="Var",t[t.StdPop=9]="StdPop",t[t.VarPop=10]="VarPop",t[t.CntAll=11]="CntAll",t[t.First=12]="First",t[t.Last=13]="Last"}(Dt=e.Aggregate||(e.Aggregate={})),e.getAggregate=K,function(t){t[t.Add=0]="Add",t[t.Remove=1]="Remove",t[t.Change=2]="Change",t[t.Reset=3]="Reset"}(Pt=e.NotifyCollectionChangedAction||(e.NotifyCollectionChangedAction={}));var Tt=function(t){function e(e,n,i){void 0===e&&(e=Pt.Reset),void 0===n&&(n=null),void 0===i&&(i=-1);var o=t.call(this)||this;return o.action=e,o.item=n,o.index=i,o}return ht(e,t),e.reset=new e(Pt.Reset),e}(jt);e.NotifyCollectionChangedEventArgs=Tt;var Rt=function(){function t(t,e){this._bnd=new Ct(t),this._asc=e}return Object.defineProperty(t.prototype,"property",{get:function(){return this._bnd.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ascending",{get:function(){return this._asc},enumerable:!0,configurable:!0}),t}();e.SortDescription=Rt;var At=function(t){function e(e){var n=t.call(this)||this;return n.newPageIndex=e,n}return ht(e,t),e}(St);e.PageChangingEventArgs=At;var Ot=function(){function t(){}return t.prototype.groupNameFromItem=function(t,e){return""},t.prototype.namesMatch=function(t,e){return t===e},t}();e.GroupDescription=Ot;var kt=function(t){function e(e,n){var i=t.call(this)||this;return i._bnd=new Ct(e),i._converter=n,i}return ht(e,t),Object.defineProperty(e.prototype,"propertyName",{get:function(){return this._bnd.path},enumerable:!0,configurable:!0}),e.prototype.groupNameFromItem=function(t,e){return this._converter?this._converter(t,this.propertyName):this._bnd.getValue(t)},e.prototype.namesMatch=function(t,e){return t===e},e}(Ot);e.PropertyGroupDescription=kt;var Nt=function(t){function e(){var e=this;return Lt?e.length=0:e=t.call(this)||this,e}return ht(e,t),e}(Array);e.ArrayBase=Nt;var Lt=!0;try{Nt.prototype=Array.prototype,Lt=Nt.prototype===Array.prototype}catch(pt){Lt=!1}var Ft=window.Symbol;!Lt&&Ft&&Ft.species&&Object.defineProperty(Nt,Ft.species,{get:function(){return Array},enumerable:!1,configurable:!1});var Vt=function(t){function e(e){var n=t.call(this)||this;if(n._updating=0,n.collectionChanged=new xt,e){e=I(e),n._updating++;for(var i=0;i<e.length;i++)n.push(e[i]);n._updating--}return n}return ht(e,t),e.prototype.push=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var i=this.length,o=0;e&&o<e.length;o++)i=t.prototype.push.call(this,e[o]),this._updating||this._raiseCollectionChanged(Pt.Add,e[o],i-1);return i},e.prototype.pop=function(){var e=t.prototype.pop.call(this);return this._raiseCollectionChanged(Pt.Remove,e,this.length),e},e.prototype.splice=function(e,n,i){var o;return n&&i?(o=t.prototype.splice.call(this,e,n,i),1==n?this._raiseCollectionChanged(Pt.Change,i,e):this._raiseCollectionChanged(),o):i?(o=t.prototype.splice.call(this,e,0,i),this._raiseCollectionChanged(Pt.Add,i,e),o):(o=t.prototype.splice.call(this,e,n),1==n?this._raiseCollectionChanged(Pt.Remove,o[0],e):this._raiseCollectionChanged(),o)},e.prototype.slice=function(e,n){return t.prototype.slice.call(this,e,n)},e.prototype.indexOf=function(e,n){return t.prototype.indexOf.call(this,e,n)},e.prototype.sort=function(e){var n=t.prototype.sort.call(this,e);return this._raiseCollectionChanged(),n},e.prototype.insert=function(t,e){this.splice(t,0,e)},e.prototype.remove=function(t){var e=this.indexOf(t);return e>-1&&(this.removeAt(e),!0)},e.prototype.removeAt=function(t){this.splice(t,1)},e.prototype.setAt=function(t,e){t>this.length&&(this.length=t),this.splice(t,1,e)},e.prototype.clear=function(){0!==this.length&&(this.splice(0,this.length),this._raiseCollectionChanged())},e.prototype.beginUpdate=function(){this._updating++},e.prototype.endUpdate=function(){this._updating>0&&(this._updating--,0==this._updating&&this._raiseCollectionChanged())},Object.defineProperty(e.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),e.prototype.deferUpdate=function(t){try{this.beginUpdate(),t()}finally{this.endUpdate()}},e.prototype.implementsInterface=function(t){return"INotifyCollectionChanged"==t},e.prototype.onCollectionChanged=function(t){void 0===t&&(t=Tt.reset),this.isUpdating||this.collectionChanged.raise(this,t)},e.prototype._raiseCollectionChanged=function(t,e,n){if(void 0===t&&(t=Pt.Reset),!this.isUpdating){var i=new Tt(t,e,n);this.onCollectionChanged(i)}},e}(Nt);e.ObservableArray=Vt;var Bt=function(){function t(t,e){var n=this;this._idx=-1,this._srtDsc=new Vt,this._grpDesc=new Vt,this._newItem=null,this._edtItem=null,this._pgSz=0,this._pgIdx=0,this._updating=0,this._stableSort=!1,this._canFilter=!0,this._canGroup=!0,this._canSort=!0,this._canAddNew=!0,this._canCancelEdit=!0,this._canRemove=!0,this._canChangePage=!0,this._trackChanges=!1,this._chgAdded=new Vt,this._chgRemoved=new Vt,this._chgEdited=new Vt,this.collectionChanged=new xt,this.sourceCollectionChanging=new xt,this.sourceCollectionChanged=new xt,this.currentChanged=new xt,this.currentChanging=new xt,this.pageChanged=new xt,this.pageChanging=new xt,this._srtDsc.collectionChanged.addHandler(function(){for(var t=n._srtDsc,e=0;e<t.length;e++)b(t[e]instanceof Rt,"sortDescriptions array must contain SortDescription objects.");n.canSort&&n.refresh()}),this._grpDesc.collectionChanged.addHandler(function(){for(var t=n._grpDesc,e=0;e<t.length;e++)b(t[e]instanceof Ot,"groupDescriptions array must contain GroupDescription objects.");n.canGroup&&n.refresh()}),this.sourceCollection=t||new Vt,e&&(this.beginUpdate(),y(this,e),this.endUpdate())}return t.prototype._copy=function(t,e){if("sortDescriptions"==t){this.sortDescriptions.clear();for(var n=I(e),i=0;i<n.length;i++)s(o=n[i])&&(o=new Rt(o,!0)),this.sortDescriptions.push(o);return!0}if("groupDescriptions"==t){for(this.groupDescriptions.clear(),n=I(e),i=0;i<n.length;i++){var o=n[i];s(o)&&(o=new kt(o)),this.groupDescriptions.push(o)}return!0}return!1},Object.defineProperty(t.prototype,"newItemCreator",{get:function(){return this._itemCreator},set:function(t){this._itemCreator=E(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortConverter",{get:function(){return this._srtCvt},set:function(t){t!=this._srtCvt&&(this._srtCvt=E(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortComparer",{get:function(){return this._srtCmp},set:function(t){t!=this._srtCmp&&(this._srtCmp=E(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useStableSort",{get:function(){return this._stableSort},set:function(t){this._stableSort=j(t)},enumerable:!0,configurable:!0}),t.prototype.getAggregate=function(t,e,n){return K(t,n?this._pgView:this._view,e)},Object.defineProperty(t.prototype,"trackChanges",{get:function(){return this._trackChanges},set:function(t){this._trackChanges=j(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsAdded",{get:function(){return this._chgAdded},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsRemoved",{get:function(){return this._chgRemoved},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsEdited",{get:function(){return this._chgEdited},enumerable:!0,configurable:!0}),t.prototype.clearChanges=function(){this._chgAdded.clear(),this._chgRemoved.clear(),this._chgEdited.clear()},t.prototype.implementsInterface=function(t){switch(t){case"ICollectionView":case"IEditableCollectionView":case"IPagedCollectionView":case"INotifyCollectionChanged":return!0}return!1},Object.defineProperty(t.prototype,"getError",{get:function(){return this._getError},set:function(t){this._getError=E(t)},enumerable:!0,configurable:!0}),t.prototype.onCollectionChanged=function(t){void 0===t&&(t=Tt.reset),t.action!=Pt.Change||this._committing||this._canceling||t.item==this.currentEditItem||t.item==this.currentAddItem||this._trackItemChanged(t.item),this.collectionChanged.raise(this,t)},t.prototype._raiseCollectionChanged=function(t,e,n){void 0===t&&(t=Pt.Reset);var i=new Tt(t,e,n);this.onCollectionChanged(i)},t.prototype._notifyItemChanged=function(t){var e=new Tt(Pt.Change,t,this.items.indexOf(t));this.onCollectionChanged(e)},t.prototype.onSourceCollectionChanging=function(t){return this.sourceCollectionChanging.raise(this,t),!t.cancel},t.prototype.onSourceCollectionChanged=function(t){this.sourceCollectionChanged.raise(this,t)},Object.defineProperty(t.prototype,"canFilter",{get:function(){return this._canFilter},set:function(t){this._canFilter=j(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canGroup",{get:function(){return this._canGroup},set:function(t){this._canGroup=j(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canSort",{get:function(){return this._canSort},set:function(t){this._canSort=j(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentItem",{get:function(){return this._pgView&&this._idx>-1&&this._idx<this._pgView.length?this._pgView[this._idx]:null},set:function(t){this.moveCurrentTo(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentPosition",{get:function(){return this._idx},set:function(t){this.moveCurrentToPosition(C(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filter",{get:function(){return this._filter},set:function(t){this._filter!=t&&(this._filter=E(t),this.canFilter&&this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupDescriptions",{get:function(){return this._grpDesc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this._pgView||!this._pgView.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortDescriptions",{get:function(){return this._srtDsc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourceCollection",{get:function(){return this._src},set:function(t){if(t!=this._src){if(!this.onSourceCollectionChanging(new St))return;var e=this.currentPosition;this.commitEdit(),this.commitNew(),null!=this._ncc&&this._ncc.collectionChanged.removeHandler(this._sourceChanged),this._src=I(t,!1),this._ncc=o(this._src,"INotifyCollectionChanged"),this._ncc&&this._ncc.collectionChanged.addHandler(this._sourceChanged,this),this.clearChanges(),this.refresh(),this.moveCurrentToFirst(),this.onSourceCollectionChanged(),this.currentPosition<0&&e>-1&&this.onCurrentChanged()}},enumerable:!0,configurable:!0}),t.prototype._sourceChanged=function(t,e){this._updating<=0&&this.refresh()},t.prototype.contains=function(t){return this._pgView.indexOf(t)>-1},t.prototype.moveCurrentTo=function(t){return this.moveCurrentToPosition(this._pgView.indexOf(t))},t.prototype.moveCurrentToFirst=function(){return this.moveCurrentToPosition(0)},t.prototype.moveCurrentToLast=function(){return this.moveCurrentToPosition(this._pgView.length-1)},t.prototype.moveCurrentToPrevious=function(){return this._idx>0&&this.moveCurrentToPosition(this._idx-1)},t.prototype.moveCurrentToNext=function(){return this.moveCurrentToPosition(this._idx+1)},t.prototype.moveCurrentToPosition=function(t){if(t>=-1&&t<this._pgView.length&&t!=this._idx){var e=new St;if(this.onCurrentChanging(e)){var n=this._pgView[t];this._edtItem&&n!=this._edtItem&&this.commitEdit(),this._newItem&&n!=this._newItem&&this.commitNew(),this._idx=t,this.onCurrentChanged()}}return this._idx==t},t.prototype.refresh=function(){this._newItem||this._edtItem?this._pendingRefresh=!0:this._updating<=0&&(this._performRefresh(),this.onCollectionChanged())},t.prototype._performRefresh=function(){if(!(this._updating>0)){this._pendingRefresh=!1;var t=this.currentItem;this._view=this._src?this._performFilter(this._src):[],this.canSort&&this._srtDsc.length>0&&(this._view==this._src&&(this._view=this._src.slice()),this._performSort(this._view)),this._groups=this.canGroup?this._createGroups(this._view):null,this._fullGroups=this._groups,this._groups&&(this._view=this._mergeGroupItems(this._groups)),this._pgIdx=v(this._pgIdx,0,this.pageCount-1),this._pgView=this._getPageView(),this._groups&&this.pageCount>1&&(this._groups=this._createGroups(this._pgView),this._mergeGroupItems(this._groups));var e=this._pgView.indexOf(t);e<0&&(e=Math.min(this._idx,this._pgView.length-1)),this._idx=e,this._digest=this._getGroupsDigest(this.groups),this.currentItem!==t&&this.onCurrentChanged()}},t.prototype._performSort=function(t){if(this._stableSort){var e=t.map(function(t,e){return{item:t,index:e}}),n=this._compareItems();e.sort(function(t,e){var i=n(t.item,e.item);return 0==i?t.index-e.index:i});for(var i=0;i<t.length;i++)t[i]=e[i].item}else t.sort(this._compareItems())},t.prototype._compareItems=function(){var t=this._srtDsc,e=this._srtCvt,n=this._srtCmp,i=!0,o=0;return function(r,s){for(var a=0;a<t.length;a++){var l=t[a],h=l._bnd.getValue(r),u=l._bnd.getValue(s);if(e&&(h=e(l,r,h,i),u=e(l,s,u,!1),i=!1),n&&null!=(o=n(h,u)))return l.ascending?+o:-o;if(h!=h&&(h=null),u!=u&&(u=null),"string"==typeof h&&"string"==typeof u){var c=h.toLowerCase(),d=u.toLowerCase();c!=d&&(h=c,u=d)}if(null!=h&&null==u)return-1;if(null==h&&null!=u)return 1;if(0!=(o=h<u?-1:h>u?1:0))return l.ascending?+o:-o}return 0}},t.prototype._performFilter=function(t){return this.canFilter&&this._filter?t.filter(this._filter,this):t},t.prototype.onCurrentChanged=function(t){void 0===t&&(t=jt.empty),this.currentChanged.raise(this,t)},t.prototype.onCurrentChanging=function(t){return this.currentChanging.raise(this,t),!t.cancel},Object.defineProperty(t.prototype,"items",{get:function(){return this._pgView},enumerable:!0,configurable:!0}),t.prototype.beginUpdate=function(){this._updating++},t.prototype.endUpdate=function(){this._updating--,this._updating<=0&&this.refresh()},Object.defineProperty(t.prototype,"isUpdating",{get:function(){return this._updating>0},enumerable:!0,configurable:!0}),t.prototype.deferUpdate=function(t){try{this.beginUpdate(),t()}finally{this.endUpdate()}},Object.defineProperty(t.prototype,"canAddNew",{get:function(){return this._canAddNew},set:function(t){this._canAddNew=j(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canCancelEdit",{get:function(){return this._canCancelEdit},set:function(t){this._canCancelEdit=j(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canRemove",{get:function(){return this._canRemove},set:function(t){this._canRemove=j(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentAddItem",{get:function(){return this._newItem},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentEditItem",{get:function(){return this._edtItem},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAddingNew",{get:function(){return null!=this._newItem},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEditingItem",{get:function(){return null!=this._edtItem},enumerable:!0,configurable:!0}),t.prototype.editItem=function(t){t!=this._edtItem&&this.moveCurrentTo(t)&&(this.commitEdit(),this._edtItem=t,this._edtClone={},this._extend(this._edtClone,this._edtItem))},t.prototype.commitEdit=function(){var t=this._edtItem;if(null!=t){this._committing=!0;var e=this._sameContent(t,this._edtClone),n=this._pendingRefresh;this._edtItem=null,this._edtClone=null;var i=this._pgView.indexOf(t),o=this._digest;this._performRefresh(),e||this._trackItemChanged(t),this._pgView.indexOf(t)!=i||o!=this._digest||n?this._raiseCollectionChanged():this._raiseCollectionChanged(Pt.Change,t,i),this._committing=!1}},t.prototype.cancelEdit=function(){var t=this._edtItem;if(null!=t){if(this._edtItem=null,!this.canCancelEdit)return void b(!1,"cannot cancel edits (canCancelEdit == false).");var e=this._src.indexOf(t);e>=0&&this._edtClone&&(this._extend(this._src[e],this._edtClone),this._edtClone=null,this._canceling=!0,this._raiseCollectionChanged(Pt.Change,t,e),this._canceling=!1,this._pendingRefresh&&(this._performRefresh(),this._raiseCollectionChanged()))}},t.prototype.addNew=function(){if(arguments.length>0&&b(!1,"addNew does not take any parameters, it creates the new items."),this.commitEdit(),this.commitNew(),!this.canAddNew)return b(!1,"cannot add items (canAddNew == false)."),null;var t,e=this.sourceCollection;if(null!=(t=this.newItemCreator?this.newItemCreator():e&&e.length?new e[0].constructor:{})){if(this._newItem=t,this._updating++,this._src.push(t),this._updating--,this._pgView!=this._src&&this._pgView.push(t),this.groups&&this.groups.length){var n=this.groups[this.groups.length-1];for(n.items.push(t);n.groups&&n.groups.length;)(n=n.groups[n.groups.length-1]).items.push(t)}this._raiseCollectionChanged(Pt.Add,t,this._pgView.length-1),this.moveCurrentTo(t)}return this._newItem},t.prototype.commitNew=function(){var t=this._newItem;if(null!=t){this._newItem=null;var e=this._pgView.indexOf(t),n=this._digest;if(this._performRefresh(),this._trackChanges){var i=this._chgEdited.indexOf(t);i>-1&&this._chgEdited.removeAt(i),this._chgAdded.indexOf(t)<0&&this._chgAdded.push(t)}this._pgView.indexOf(t)==e&&n==this._digest?this._raiseCollectionChanged(Pt.Change,t,e):this._raiseCollectionChanged()}},t.prototype.cancelNew=function(){var t=this._newItem;null!=t&&this.remove(t)},t.prototype.remove=function(t){var e=t==this._newItem;if(e&&(this._newItem=null),t==this._edtItem&&this.cancelEdit(),this.canRemove){var n=this._src.indexOf(t);if(n>-1){var i=this.currentItem;this._updating++,this._src.splice(n,1),this._updating--;var o=this._digest;if(this._performRefresh(),this._trackChanges){var r=this._chgAdded.indexOf(t);r>-1&&this._chgAdded.removeAt(r);var s=this._chgEdited.indexOf(t);s>-1&&this._chgEdited.removeAt(s),this._chgRemoved.indexOf(t)<0&&!e&&r<0&&this._chgRemoved.push(t)}this.sortDescriptions.length>0||this.pageSize>0&&this._pgIdx>-1||o!=this._getGroupsDigest(this.groups)?this._raiseCollectionChanged():this._raiseCollectionChanged(Pt.Remove,t,n),this.currentItem!==i&&this.onCurrentChanged()}}else b(!1,"cannot remove items (canRemove == false).")},t.prototype.removeAt=function(t){t=x(t),this.remove(this._pgView[t])},t.prototype._trackItemChanged=function(t){if(this._trackChanges){var e=this.sourceCollection;if(e&&e.indexOf(t)>-1){var n=this._chgEdited.indexOf(t),i=Pt.Change;if(n<0&&this._chgAdded.indexOf(t)<0)this._chgEdited.push(t);else if(n>-1)o=new Tt(i,t,n),this._chgEdited.onCollectionChanged(o);else if((n=this._chgAdded.indexOf(t))>-1){var o=new Tt(i,t,n);this._chgAdded.onCollectionChanged(o)}}}},t.prototype._extend=function(t,e){for(var n in e)t[n]=e[n]},t.prototype._sameContent=function(t,e){for(var n in e)if(!this._sameValue(t[n],e[n]))return!1;for(var n in t)if(!this._sameValue(t[n],e[n]))return!1;return!0},t.prototype._sameValue=function(t,e){return t===e||bt.equals(t,e)},Object.defineProperty(t.prototype,"canChangePage",{get:function(){return this._canChangePage},set:function(t){this._canChangePage=j(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPageChanging",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemCount",{get:function(){return this._pgView.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._pgIdx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageSize",{get:function(){return this._pgSz},set:function(t){t!=this._pgSz&&(this._pgSz=x(t),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalItemCount",{get:function(){return this._view.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageCount",{get:function(){return this.pageSize?Math.ceil(this.totalItemCount/this.pageSize):1},enumerable:!0,configurable:!0}),t.prototype.moveToFirstPage=function(){return this.moveToPage(0)},t.prototype.moveToLastPage=function(){return this.moveToPage(this.pageCount-1)},t.prototype.moveToPreviousPage=function(){return this.moveToPage(this.pageIndex-1)},t.prototype.moveToNextPage=function(){return this.moveToPage(this.pageIndex+1)},t.prototype.moveToPage=function(t){var e=v(t,0,this.pageCount-1);if(e!=this._pgIdx){this.canChangePage||b(!1,"cannot change pages (canChangePage == false).");var n=new At(e);this.onPageChanging(n)&&(this._pgIdx=e,this._pgView=this._getPageView(),this._idx=0,this.groupDescriptions&&0!=this.groupDescriptions.length?this.refresh():this.onCollectionChanged(),this.onPageChanged())}return this._pgIdx==t},t.prototype.onPageChanged=function(t){void 0===t&&(t=jt.empty),this.pageChanged.raise(this,t)},t.prototype.onPageChanging=function(t){return this.pageChanging.raise(this,t),!t.cancel},t.prototype._getFullGroup=function(t){var e=this._getGroupByPath(this._fullGroups,t.level,t._path);return null!=e&&(t=e),t},t.prototype._getGroupByPath=function(t,e,n){for(var i=0;i<t.length;i++){var o=t[i];if(o.level==e&&o._path==n)return o;if(o.level<e&&0==n.indexOf(o._path)&&null!=(o=this._getGroupByPath(o.groups,e,n)))return o}return null},t.prototype._getPageView=function(){if(this.pageSize<=0||this._pgIdx<0)return this._view;var t=this._pgSz*this._pgIdx,e=Math.min(t+this._pgSz,this._view.length);return this._view.slice(t,e)},t.prototype._createGroups=function(t){if(!this._grpDesc||!this._grpDesc.length)return null;for(var e=[],n={},i=null,o=0;o<t.length;o++)for(var s=t[o],a=e,l=this._grpDesc.length,h="",u=0;u<l;u++){var c=this._grpDesc[u],d=c.groupNameFromItem(s,u),p=u==l-1;!(i=n[h])&&r(d)&&(n[h]=i={});var f=this._getGroup(c,a,i,d,u,p);f._path=h+="/"+d,p&&f.items.push(s),a=f.groups}return e},t.prototype._getGroupsDigest=function(t){for(var e="",n=0;null!=t&&n<t.length;n++){var i=t[n];e+="{"+i.name+":"+(i.items?i.items.length:"*"),i.groups.length>0&&(e+=",",e+=this._getGroupsDigest(i.groups)),e+="}"}return e},t.prototype._mergeGroupItems=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(!i._isBottomLevel)for(var o=this._mergeGroupItems(i.groups),r=0,s=o.length;r<s;r++)i._items.push(o[r]);for(r=0,s=i._items.length;r<s;r++)e.push(i._items[r])}return e},t.prototype._getGroup=function(t,e,n,i,o,s){var a;if(n&&r(i)){if(a=n[i])return a}else for(var l=0;l<e.length;l++)if(t.namesMatch(e[l].name,i))return e[l];var h=new Ht(t,i,o,s);return e.push(h),n&&(n[i]=h),h},t}();e.CollectionView=Bt;var Ht=function(){function t(t,e,n,i){this._gd=t,this._name=e,this._level=n,this._isBottomLevel=i,this._groups=[],this._items=[]}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBottomLevel",{get:function(){return this._isBottomLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupDescription",{get:function(){return this._gd},enumerable:!0,configurable:!0}),t.prototype.getAggregate=function(t,e,n){var i=o(n,Bt);return K(t,(i?i._getFullGroup(this):this).items,e)},t}();e.CollectionViewGroup=Ht;var zt=function(){function t(t){this._showAutoTipBnd=this._showAutoTip.bind(this),this._hideAutoTipBnd=this._hideAutoTip.bind(this),this._html=!0,this._gap=6,this._showAtMouse=!1,this._showDelay=500,this._hideDelay=0,this._tips=[],this.popup=new xt,y(this,t)}return t.prototype.setTooltip=function(t,e){t=F(t),e=this._getContent(e);var n=this._indexOf(t);n>-1&&(this._detach(t),this._tips.splice(n,1)),e&&(this._attach(t),this._tips.push({element:t,content:e}))},t.prototype.getTooltip=function(t){t=F(t);for(var e=this._tips,n=0;n<e.length;n++)if(e[n].element==t)return e[n].content;return null},t.prototype.show=function(e,n,i){e=F(e),n=this._getContent(n),i||(i=yt.fromBoundingRect(e.getBoundingClientRect()));var o=t._eTip;o||(R(o=t._eTip=document.createElement("div"),"wj-tooltip"),o.style.visibility="none"),this._setContent(n);var r=new Wt(n);this.onPopup(r),r.content&&!r.cancel&&(document.body.appendChild(o),this._setContent(r.content),o.style.minWidth="",X(o,i=new yt(i.left-(o.offsetWidth-i.width)/2,i.top-this.gap,o.offsetWidth,i.height+2*this.gap),!0),document.addEventListener("mousedown",this._hideAutoTipBnd))},t.prototype.hide=function(){var e=t._eTip;e&&(N(e),e.innerHTML=""),document.removeEventListener("mousedown",this._hideAutoTipBnd)},t.prototype.dispose=function(){var t=this;this._tips.forEach(function(e){t._detach(e.element)}),this._tips.splice(0,this._tips.length)},Object.defineProperty(t.prototype,"isVisible",{get:function(){var e=t._eTip;return null!=e&&null!=e.parentElement&&e.offsetWidth>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._html},set:function(t){this._html=j(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gap",{get:function(){return this._gap},set:function(t){this._gap=C(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showAtMouse",{get:function(){return this._showAtMouse},set:function(t){this._showAtMouse=j(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showDelay",{get:function(){return this._showDelay},set:function(t){this._showDelay=x(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideDelay",{get:function(){return this._hideDelay},set:function(t){this._hideDelay=x(t)},enumerable:!0,configurable:!0}),t.prototype.onPopup=function(t){return this.popup&&this.popup.raise(this,t),!t.cancel},t.prototype._indexOf=function(t){for(var e=0;e<this._tips.length;e++)if(this._tips[e].element==t)return e;return-1},t.prototype._attach=function(t){t.addEventListener("mouseenter",this._showAutoTipBnd),t.addEventListener("mouseleave",this._hideAutoTipBnd),t.addEventListener("click",this._showAutoTipBnd)},t.prototype._detach=function(t){t.removeEventListener("mouseenter",this._showAutoTipBnd),t.removeEventListener("mouseleave",this._hideAutoTipBnd),t.removeEventListener("click",this._showAutoTipBnd)},t.prototype._showAutoTip=function(t){var e=this;if(!t.defaultPrevented)if("click"!=t.type||Mt._touching){var n="mouseenter"==t.type?this._showDelay:0;this._clearTimeouts(),this._toShow=setTimeout(function(){var n=e._indexOf(t.target);if(n>-1){var i=e._tips[n],o=e._showAtMouse?new yt(t.clientX,t.clientY,0,0):null;e.show(i.element,i.content,o),e._hideDelay>0&&(e._toHide=setTimeout(function(){e.hide()},e._hideDelay))}},n)}else this._hideAutoTip()},t.prototype._hideAutoTip=function(){this._clearTimeouts(),this.hide()},t.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null),this._toHide&&(clearTimeout(this._toHide),this._toHide=null)},t.prototype._getContent=function(t){if((t=w(t))&&"#"==t[0]){var e=F(t);e&&(t=e.innerHTML)}return t},t.prototype._setContent=function(e){var n=t._eTip;n&&(this.isContentHtml?n.innerHTML=e:n.textContent=e)},t}();e.Tooltip=zt;var Wt=function(t){function e(e){var n=t.call(this)||this;return n._content=w(e),n}return ht(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){this._content=w(t)},enumerable:!0,configurable:!0}),e}(St);e.TooltipEventArgs=Wt;var Gt=function(){function t(t){this._r=0,this._g=0,this._b=0,this._a=1,t&&this._parse(t)}return Object.defineProperty(t.prototype,"r",{get:function(){return this._r},set:function(t){this._r=v(C(t),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"g",{get:function(){return this._g},set:function(t){this._g=v(C(t),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this._b},set:function(t){this._b=v(C(t),0,255)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"a",{get:function(){return this._a},set:function(t){this._a=v(C(t),0,1)},enumerable:!0,configurable:!0}),t.prototype.equals=function(e){return e instanceof t&&this.r==e.r&&this.g==e.g&&this.b==e.b&&this.a==e.a},t.prototype.toString=function(){var t=Math.round(100*this.a);return t>99?"#"+((1<<24)+(this.r<<16)+(this.g<<8)+this.b).toString(16).slice(1):"rgba("+this.r+","+this.g+","+this.b+","+t/100+")"},t.fromRgba=function(e,n,i,o){void 0===o&&(o=1);var r=new t(null);return r.r=Math.round(v(C(e),0,255)),r.g=Math.round(v(C(n),0,255)),r.b=Math.round(v(C(i),0,255)),r.a=v(C(o),0,1),r},t.fromHsb=function(e,n,i,o){void 0===o&&(o=1);var r=t._hsbToRgb(v(C(e),0,1),v(C(n),0,1),v(C(i),0,1));return t.fromRgba(r[0],r[1],r[2],o)},t.fromHsl=function(e,n,i,o){void 0===o&&(o=1);var r=t._hslToRgb(v(C(e),0,1),v(C(n),0,1),v(C(i),0,1));return t.fromRgba(r[0],r[1],r[2],o)},t.fromString=function(e){var n=new t(null);return n._parse(w(e))?n:null},t.prototype.getHsb=function(){return t._rgbToHsb(this.r,this.g,this.b)},t.prototype.getHsl=function(){return t._rgbToHsl(this.r,this.g,this.b)},t.interpolate=function(e,n,i){i=v(C(i),0,1);var o=t._rgbToHsl(e.r,e.g,e.b),r=t._rgbToHsl(n.r,n.g,n.b),s=1-i,a=e.a*s+n.a*i,l=[o[0]*s+r[0]*i,o[1]*s+r[1]*i,o[2]*s+r[2]*i],h=t._hslToRgb(l[0],l[1],l[2]);return t.fromRgba(h[0],h[1],h[2],a)},t.toOpaque=function(e,n){if(1==(e=s(e)?t.fromString(e):D(e,t)).a)return e;n=null==n?t.fromRgba(255,255,255,1):s(n)?t.fromString(n):D(n,t);var i=e.a,o=1-i;return t.fromRgba(e.r*i+n.r*o,e.g*i+n.g*o,e.b*i+n.b*o)},t.prototype._parse=function(e){if("transparent"==(e=e.toLowerCase()))return this._r=this._g=this._b=this._a=0,!0;if(e&&0!=e.indexOf("#")&&0!=e.indexOf("rgb")&&0!=e.indexOf("hsl")){var n=document.createElement("div");n.style.color=e;var i=n.style.color;i==e&&((i=window.getComputedStyle(n).color)||(document.body.appendChild(n),i=window.getComputedStyle(n).color,N(n))),e=i.toLowerCase()}if(0==e.indexOf("#"))return 4==e.length?(this.r=parseInt(e[1]+e[1],16),this.g=parseInt(e[2]+e[2],16),this.b=parseInt(e[3]+e[3],16),this.a=1,!0):7==e.length&&(this.r=parseInt(e.substr(1,2),16),this.g=parseInt(e.substr(3,2),16),this.b=parseInt(e.substr(5,2),16),this.a=1,!0);if(0==e.indexOf("rgb")){var o=e.indexOf("("),r=e.indexOf(")");if(o>-1&&r>-1&&(s=e.substr(o+1,r-(o+1)).split(",")).length>2)return this.r=parseInt(s[0]),this.g=parseInt(s[1]),this.b=parseInt(s[2]),this.a=s.length>3?parseFloat(s[3]):1,!0}if(0==e.indexOf("hsl")&&(o=e.indexOf("("),r=e.indexOf(")"),o>-1&&r>-1)){var s=e.substr(o+1,r-(o+1)).split(",");if(s.length>2){var a=parseInt(s[0])/360,l=parseInt(s[1]),h=parseInt(s[2]);s[1].indexOf("%")>-1&&(l/=100),s[2].indexOf("%")>-1&&(h/=100);var u=t._hslToRgb(a,l,h);return this.r=u[0],this.g=u[1],this.b=u[2],this.a=s.length>3?parseFloat(s[3]):1,!0}}return!1},t._hslToRgb=function(e,n,i){var o,r,s;if(b(e>=0&&e<=1&&n>=0&&n<=1&&i>=0&&i<=1,"bad HSL values"),0==n)o=r=s=i;else{var a=i<.5?i*(1+n):i+n-i*n,l=2*i-a;o=t._hue2rgb(l,a,e+1/3),r=t._hue2rgb(l,a,e),s=t._hue2rgb(l,a,e-1/3)}return[Math.round(255*o),Math.round(255*r),Math.round(255*s)]},t._hue2rgb=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},t._rgbToHsl=function(t,e,n){b(t>=0&&t<=255&&e>=0&&e<=255&&n>=0&&n<=255,"bad RGB values"),t/=255,e/=255,n/=255;var i,o,r=Math.max(t,e,n),s=Math.min(t,e,n),a=(r+s)/2;if(r==s)i=o=0;else{var l=r-s;switch(o=a>.5?l/(2-r-s):l/(r+s),r){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return[i,o,a]},t._rgbToHsb=function(e,n,i){b(e>=0&&e<=255&&n>=0&&n<=255&&i>=0&&i<=255,"bad RGB values");var o=t._rgbToHsl(e,n,i);return t._hslToHsb(o[0],o[1],o[2])},t._hsbToRgb=function(e,n,i){var o=t._hsbToHsl(e,n,i);return t._hslToRgb(o[0],o[1],o[2])},t._hsbToHsl=function(t,e,n){b(t>=0&&t<=1&&e>=0&&e<=1&&n>=0&&n<=1,"bad HSB values");var i=v(n*(2-e)/2,0,1),o=1-Math.abs(2*i-1),r=v(o>0?n*e/o:e,0,1);return b(!isNaN(i)&&!isNaN(r),"bad conversion to HSL"),[t,r,i]},t._hslToHsb=function(t,e,n){b(t>=0&&t<=1&&e>=0&&e<=1&&n>=0&&n<=1,"bad HSL values");var i=v(1==n?1:(2*n+e*(1-Math.abs(2*n-1)))/2,0,1),o=v(i>0?2*(i-n)/i:e,0,1);return b(!isNaN(i)&&!isNaN(o),"bad conversion to HSB"),[t,o,i]},t}();e.Color=Gt;var Yt=function(){function t(){}return t.copy=function(e){t._copyPaste(w(e),null)},t.paste=function(e){t._copyPaste(null,E(e))},t._copyPaste=function(t,e){for(var n=L(),i=H(n,".wj-control");i&&Mt.getControl(i);)i=i.parentElement;if(i=i||document.body){var o=V('<textarea class="wj-clipboard" style="position:fixed;opacity:0"/>',i);s(t)&&(o.value=t),o.select(),o.onkeydown=function(t){t.preventDefault()},setTimeout(function(){n.focus(),N(o),u(e)&&e(o.value)},Mt._CLIPBOARD_DELAY)}},t}();e.Clipboard=Yt,e.showPopup=X,e.hidePopup=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1);var i=null;return n?i=G(function(n){t.style.opacity=(1-n).toString(),1==n&&(U(t,e),t.style.opacity="")}):U(t,e),i};var Kt=function(){function t(t){this._copyCss=!0,null!=t&&y(this,t)}return Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){this._title=w(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"copyCss",{get:function(){return this._copyCss},set:function(t){this._copyCss=j(t)},enumerable:!0,configurable:!0}),t.prototype.addCSS=function(t){this._css||(this._css=[]),this._css.push(t)},t.prototype.append=function(t){var e=this._getDocument(),n=e.body,i=!1;if(n)s(t)?n.appendChild(V(t)):t instanceof Node?(o=this._cloneNode(t),n.appendChild(o)):i=!0;else if(s(t))e.write(t);else if(t instanceof HTMLElement){var o=this._cloneNode(t);e.write(o.outerHTML)}else i=!0;i&&b(!1,"child parameter should be an HTML node or an HTML string.")},t.prototype.print=function(){var t=this;this._iframe&&(this._close(),setTimeout(function(){var e=t._iframe.contentWindow,n="onafterprint"in e&&!st();n&&(e.onafterprint=function(){N(t._iframe),t._iframe=null}),document.queryCommandSupported("print")?e.document.execCommand("print",!1,null):(e.focus(),e.print()),n||(N(t._iframe),t._iframe=null)},100))},t.prototype._cloneNode=function(t){var e=t.cloneNode(!0);return t instanceof HTMLElement&&e instanceof HTMLElement&&["select","textarea"].forEach(function(n){for(var i=t.querySelectorAll(n),o=e.querySelectorAll(n),r=0;r<i.length;r++)o[r].value=i[r].value}),e},t.prototype._getDocument=function(){return this._iframe||(this._iframe=document.createElement("iframe"),R(this._iframe,"wj-printdocument"),W(this._iframe,{position:"fixed",left:1e4,top:1e4}),document.body.appendChild(this._iframe),this._iframe.contentDocument.write('<body style="position:static"/>')),this._iframe.contentDocument},t.prototype._close=function(){var t=this._getDocument();if(t.close(),t.title=null!=this.title?this.title:document.title,t.title&&t.title.trim()||(t.title="\xa0"),this._copyCss){for(var e=document.head.querySelectorAll("link"),n=0;n<e.length;n++){var i=e[n];i.href.match(/\.css$/i)&&i.rel.match(/stylesheet/i)&&(s=Y(i.href,{async:!1}),this._addStyle(s.responseText))}var o=document.head.querySelectorAll("STYLE");for(n=0;n<o.length;n++)this._addStyle(o[n].textContent)}if(this._css)for(n=0;n<this._css.length;n++){var r=t.createElement("style"),s=Y(this._css[n],{async:!1});r.textContent=s.responseText,t.head.appendChild(r)}},t.prototype._addStyle=function(t){var e=this._getDocument(),n=e.createElement("style");n.textContent=t,e.head.appendChild(n)},t}();e.PrintDocument=Kt;var Xt="The Wijmo license in this application ";e.culture.Licensing=window.wijmo.culture.Licensing||{evl:"Wijmo Evaluation Version ({version})",prd:Xt+"is not valid for the <b>{control}</b> control.",ver:Xt+"is not valid for the version in use. The license version is <b>{licVer}</b>; the product version is <b>{version}</b>.",dmn:Xt+"is not valid for the current domain. The license domain is <b>{licDomain}</b>; the current domain is <b>{domain}</b>.",exp:Xt+"has expired. The license expiration date is <b>{expDate:d}</b>.",lic:Xt+"is invalid.",mss:Xt+"is not set.",ctc:'Please <a target="_blank" href="https://www.grapecity.com/en/licensing/wijmo">create a license</a> or contact GrapeCity: <a href="mailto:us.sales@grapecity.com">us.sales@grapecity.com</a>.',hdr:"Wijmo License",cls:"CLOSE"};var Ut=e.culture.Licensing,qt={};e._updateWme=function(t,e){var n=Mt._wme;if(!(n&&B(document.body,n)&&n.offsetWidth&&n.offsetHeight))if(e){var i=Z(t);qt[i]||(qt[i]=!0,function(t,e,n,i){var o=function(t,e){try{var n=t.indexOf(e="#"+e);if(n>-1)return{prefix:t.substring(0,n),licData:JSON.parse(function(t){if(!t)return"";var e=function(t){for(var e=t.split(""),n=e.length-5;n>=0;n--)et(e,n+1,n+3,nt),et(e,n,n+2,nt);return e.join("")}(t);e=e.split("").reverse().join("");var n=Math.ceil(e.length/2);return function(t){return decodeURIComponent(Array.prototype.map.call(atob(t),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}(e=(e=(e=e.substr(n)+e.substr(0,n)).replace("#","=")).replace("&","=="))}(t.substr(n+e.length)))}}catch(t){}return null}(t,e.algorithmCode);if(!o)return i();var r=o.licData,s=o.prefix+"#"+e.algorithmCode;if(function(t){for(var e=0,n=5381,i=0,o=t.length-1;o>=0;o--){var r=t.charCodeAt(o);e=r+(e<<6)+(e<<16)-e,n=r+((n<<5)+n),i=r+((i<<5)-i),i&=i}var s=e^n^i;return s<0&&(s=~s),s.toString(16).toUpperCase()}(s+JSON.stringify(r.D))!=r.H)return i();var a=window.msCrypto||window.crypto,l=a?a.subtle:null;if(!l)return n(r.D);var h={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},u={alg:"RS256",e:"AQAB",kty:"RSA",n:e.publicKey.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")};u=window.msCrypto?ot(JSON.stringify(u)):u;try{rt(l.importKey("jwk",u,h,!1,["verify"])).then(function(t){var e=s+function(t){return String.fromCharCode.apply(null,new Zt(t))}(it(function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}))}(JSON.stringify(r.D))));rt(l.verify(h,t,it(r.S),ot(e))).then(function(t){return t?n(r.D):i()})},function(){return i()})}catch(t){return n(r.D)}}(e,{algorithmCode:"B0",publicKey:"l6/zrbWoSbcLFwEetFh38rH3ErBZE9H+Cqix3R+wTlfA1wD5B+lUcCQn+EJ60I4RGrm0x1sFjkiLWwB0jAn6BWZv0W4WbqAKriOdeoivxDp1Wmjs3qkEDhvbsjPtfvwx2BHil6o+/tDrdMJQSGs18WZm2PoQLQuL+9VhZ4FNRHUQU3Jtioke/OZEGHJOdYVwvCGalzBad6QFOiVbDBQPePpS3++GJzOxN8SN/7lyS5/IdKiy3WJRaVGkB370+HbN6hKraDfUgReLX26yxRaKC/5aWnGAJ2NnWLoGyAGRcwT9dVjo4bcAZNrrA0U9JVKQxaSskhdv2p49XzJkltXx5w=="},function(n){J(t,e,n)},function(){J(t,e,null)}),setTimeout(function(){delete qt[i]},50))}else J(t,null,null)};var Zt=window.Uint8Array||TypedArray,Jt=function(){function t(t,e,n){void 0===e&&(e=null),void 0===n&&(n="_"),this._promptChar="_",this._mskArr=[],this._full=!0,this._hbInput=this._input.bind(this),this._hbKeyDown=this._keydown.bind(this),this._hbKeyPress=this._keypress.bind(this),this._hbCompositionStart=this._compositionstart.bind(this),this._hbCompositionEnd=this._compositionend.bind(this),this.mask=w(e),this.input=t,this.promptChar=w(n,!1),this._connect(!0),this._evtInput=document.createEvent("HTMLEvents"),this._evtInput.initEvent("input",!0,!1)}return Object.defineProperty(t.prototype,"input",{get:function(){return this._tbx},set:function(t){this._connect(!1),this._tbx=t,this._connect(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mask",{get:function(){return this._msk},set:function(t){t!=this._msk&&(this._msk=w(t,!0),this._parseMask(),this._valueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"promptChar",{get:function(){return this._promptChar},set:function(t){t!=this._promptChar&&(this._promptChar=w(t,!1),b(1==this._promptChar.length,"promptChar must be a string with length 1."),this._valueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskFull",{get:function(){return this._full},enumerable:!0,configurable:!0}),t.prototype.getMaskRange=function(){return this._mskArr.length?[this._firstPos,this._lastPos]:[0,this._tbx.value.length-1]},t.prototype.getRawValue=function(){var t=this._tbx.value,e="";if(!this.mask)return t;for(var n=0;n<this._mskArr.length&&n<t.length;n++)this._mskArr[n].literal||t[n]==this._promptChar||(e+=t[n]);return e},t.prototype.refresh=function(){this._parseMask(),this._valueChanged()},t.prototype._input=function(t){var e=this;this._composing?t.stopImmediatePropagation():setTimeout(function(){e._valueChanged()})},t.prototype._keydown=function(t){if(t.keyCode==dt.Back){var e=this._tbx.selectionStart;if(e<=this._firstPos&&this._tbx.selectionEnd==e)return t.preventDefault(),void(this._backSpace=!1)}this._backSpace=t.keyCode==dt.Back},t.prototype._keypress=function(t){t.ctrlKey||t.metaKey||t.altKey||this._composing||!this._preventKey(t.charCode)||t.preventDefault()},t.prototype._compositionstart=function(t){this._composing=!0},t.prototype._compositionend=function(t){var e=this;this._composing&&(this._composing=!1,setTimeout(function(){e._valueChanged()&&e._tbx.dispatchEvent(e._evtInput)}))},t.prototype._preventKey=function(t){if(t&&this._mskArr.length){var e=this._tbx,n=e.selectionStart,i=String.fromCharCode(t);if(n<this._firstPos&&k(e,n=this._firstPos),n>=this._mskArr.length)return!0;var o=this._mskArr[n];if(o.literal)this._validatePosition(n);else if(o.wildCard!=i&&!this._isCharValid(o.wildCard,i))return!0}return!1},t.prototype._connect=function(t){var e=this._tbx;e&&(b(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement,"INPUT or TEXTAREA element expected."),t?(this._autoComplete=e.autocomplete,this._spellCheck=e.spellcheck,e.autocomplete="off",e.spellcheck=!1,e.addEventListener("input",this._hbInput),e.addEventListener("keydown",this._hbKeyDown,!0),e.addEventListener("keypress",this._hbKeyPress,!0),e.addEventListener("compositionstart",this._hbCompositionStart,!0),e.addEventListener("compositionend",this._hbCompositionEnd,!0),e.addEventListener("blur",this._hbCompositionEnd,!0),this._valueChanged()):(e.autocomplete=this._autoComplete,e.spellcheck=this._spellCheck,e.removeEventListener("input",this._hbInput),e.removeEventListener("keydown",this._hbKeyDown,!0),e.removeEventListener("keypress",this._hbKeyPress,!0),e.removeEventListener("compositionstart",this._hbCompositionStart,!0),e.removeEventListener("compositionend",this._hbCompositionEnd,!0),e.removeEventListener("blur",this._hbCompositionEnd,!0)))},t.prototype._valueChanged=function(){if(!this._tbx||!this._msk)return!1;var t=this._tbx,e=t.value.length<2,n=t.selectionStart,i=n>0?t.value[n-1]:"",o=t.value;return t.value=this._applyMask(),e&&(n=this._firstPos+1),n>0&&(n>0?t.value[n-1]:"")==this._promptChar&&i!=this.promptChar&&n--,n==o.length&&(n=this._matchEnd),this._validatePosition(n),o!=t.value},t.prototype._applyMask=function(){this._full=!0,this._matchEnd=0;var t=this._tbx.value;if(!this._msk)return t;if(!t&&!this._tbx.required)return t;var e="",n=0,i=this._promptChar;t=this._handleVagueLiterals(t);for(var o=0;o<this._mskArr.length;o++){var r=this._mskArr[o],s=r.literal;if(s&&s==t[n]&&n++,r.wildCard){if(s=i,t){for(var a=n;a<t.length;a++)if(this._isCharValid(r.wildCard,t[a])){switch(s=t[a],r.charCase){case">":s=s.toUpperCase();break;case"<":s=s.toLowerCase()}s!=i&&(this._matchEnd=e.length+1);break}n=a+1}s==i&&(this._full=!1)}e+=s}return e},t.prototype._handleVagueLiterals=function(t){if(t.length>this._mskArr.length+1)return t;var e=t.length-this._mskArr.length;if(0!=e&&t.length>1){for(var n=-1,i=Math.max(0,this._tbx.selectionStart-e);i<this._mskArr.length;i++)if(this._mskArr[i].vague){n=i;break}if(n>-1)if(e<0){var o=Array(1-e).join(this._promptChar),r=n+e;r>-1&&(t=t.substr(0,r)+o+t.substr(r))}else{for(;n>0&&this._mskArr[n-1].literal;)n--;t=t.substr(0,n)+t.substr(n+e)}}return t},t.prototype._isCharValid=function(e,n){var i=this._promptChar;switch(e){case"0":return n>="0"&&n<="9"||n==i;case"9":return n>="0"&&n<="9"||" "==n||n==i;case"#":return n>="0"&&n<="9"||" "==n||"+"==n||"-"==n||n==i;case"L":return n>="a"&&n<="z"||n>="A"&&n<="Z"||n==i;case"l":return n>="a"&&n<="z"||n>="A"&&n<="Z"||" "==n||n==i;case"A":return n>="0"&&n<="9"||n>="a"&&n<="z"||n>="A"&&n<="Z"||n==i;case"a":return n>="0"&&n<="9"||n>="a"&&n<="z"||n>="A"&&n<="Z"||" "==n||n==i;case"\uff19":return n>="\uff10"&&n<="\uff19"||n==i;case"\uff2a":case"\uff27":return!("\uff27"==e&&t._X_DBCS_BIG_HIRA.indexOf(n)>-1)&&(n>="\u3041"&&n<="\u3096"||n==i);case"\uff2b":case"\uff2e":return!("\uff2e"==e&&t._X_DBCS_BIG_KATA.indexOf(n)>-1)&&(n>="\u30a1"&&n<="\u30fa"||n==i);case"\uff3a":return n<="!"||n>="\xff"||n==i;case"H":return n>="!"&&n<="\xff"||n==i;case"K":case"N":return!("N"==e&&t._X_SBCS_BIG_KATA.indexOf(n)>-1)&&(n>="\uff66"&&n<="\uff9f"||n==i)}return!1},t.prototype._validatePosition=function(t){var e=this._mskArr;if(this._backSpace)for(;t>0&&t<e.length&&e[t-1].literal;)t--;if(0==t||!this._backSpace)for(;t<e.length&&e[t].literal;)t++;L()==this._tbx&&k(this._tbx,t),this._backSpace=!1},t.prototype._parseMask=function(){this._mskArr=[],this._firstPos=-1,this._lastPos=-1;for(var t,n=this._msk,i="|",o=0;n&&o<n.length;o++)switch(n[o]){case"0":case"9":case"#":case"A":case"a":case"L":case"l":case"\uff19":case"\uff2a":case"\uff27":case"\uff2b":case"\uff2e":case"\uff3a":case"K":case"N":case"H":this._firstPos<0&&(this._firstPos=this._mskArr.length),this._lastPos=this._mskArr.length,this._mskArr.push(new Qt(n[o],i));break;case".":case",":case":":case"/":case"$":switch(n[o]){case".":case",":t=e.culture.Globalize.numberFormat[n[o]];break;case":":case"/":t=e.culture.Globalize.calendar[n[o]];break;case"$":t=e.culture.Globalize.numberFormat.currency.symbol}for(s=0;s<t.length;s++)this._mskArr.push(new Qt(t[s]));break;case"<":case">":case"|":i=n[o];break;case"\\":o<n.length-1&&o++,this._mskArr.push(new Qt(n[o]));break;default:this._mskArr.push(new Qt(n[o]))}for(o=0;o<this._mskArr.length;o++){var r=this._mskArr[o];if(r.literal)for(var s=0;s<o;s++){var a=this._mskArr[s];if(a.wildCard&&this._isCharValid(a.wildCard,r.literal)){r.vague=!0;break}}}},t._X_DBCS_BIG_HIRA="\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308e\u3095\u3096",t._X_DBCS_BIG_KATA="\u30a1\u30a3\u30a5\u30a7\u30a9\u30c3\u30e3\u30e5\u30e7\u30ee\u30f5\u30f6",t._X_SBCS_BIG_KATA="\uff67\uff68\uff69\uff6a\uff6b\uff6c\uff6d\uff6e\uff6f",t}();e._MaskProvider=Jt;var Qt=function(t,e){e?(this.wildCard=t,this.charCase=e):this.literal=t};e._MaskElement=Qt;var $t=function(){function t(t){this._isDown=!1,this._mousedownBnd=this._mousedown.bind(this),this._mouseupBnd=this._mouseup.bind(this),this._onClickBnd=this._onClick.bind(this),this.element=t,this._connect(!0)}return Object.defineProperty(t.prototype,"element",{get:function(){return this._e},set:function(t){this._connect(!1),this._e=D(t,HTMLElement,!0),this._connect(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=j(t)},enumerable:!0,configurable:!0}),t.prototype._connect=function(t){this._e&&(t?this._e.addEventListener("mousedown",this._mousedownBnd):this._e.removeEventListener("mousedown",this._mousedownBnd))},t.prototype._clearTimeouts=function(){this._toRepeat&&(clearInterval(this._toRepeat),this._toRepeat=null),this._toDelay&&(clearInterval(this._toDelay),this._toDelay=null)},t.prototype._mousedown=function(e){var n=this;this._isDown&&this._mouseup(null),this._disabled||(this._isDown=!0,t._stopEvents.forEach(function(t){document.addEventListener(t,n._mouseupBnd)}),this._clearTimeouts(),this._toDelay=setTimeout(function(){n._isDown&&(n._onClick(),n._toRepeat=setTimeout(n._onClickBnd,Mt._CLICK_REPEAT))},Mt._CLICK_DELAY))},t.prototype._mouseup=function(e){var n=this;this._isDown&&e&&"mouseup"==e.type&&e.preventDefault(),t._stopEvents.forEach(function(t){document.removeEventListener(t,n._mouseupBnd)}),this._clearTimeouts(),this._isDown=!1},t.prototype._onClick=function(){this._clearTimeouts(),this._e&&(this._e.click(),this._isDown&&(this._toRepeat=setTimeout(this._onClickBnd,Mt._CLICK_REPEAT)))},t._stopEvents=["mouseup","mouseout","keydown"],t}();e._ClickRepeater=$t;var te=null!=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i);e.isMobile=function(){return te};var ee=null!=navigator.userAgent.match(/Firefox\//);e.isFirefox=st;var ne=null!=navigator.userAgent.match(/^((?!chrome|android).)*safari/i);e.isSafari=function(){return ne};var ie=null!=navigator.userAgent.match(/Edge\//);e.isEdge=function(){return ie};var oe=null!=navigator.userAgent.match(/MSIE |Trident\/|Edge\//);e.isIE=at;var re=!1;e.isIE9=function(){return re};var se=!1;document.addEventListener("test",function(t){},{get passive(){return se=!0,!0}}),e.getEventOptions=lt;var ae=!1;document.createElement("div").focus({get preventScroll(){return ae=!0,!0}}),e.supportsFocusOptions=function(){return ae},e._startDrag=function(t,e){t.effectAllowed=e,st()&&t.setData("text","")},document.doctype&&navigator.appVersion.indexOf("MSIE 9")>-1&&(re=!0,document.addEventListener("mousemove",function(t){if(1==t.which){var e=H(t.target,".wj-control");if(e&&!e.style.cursor)for(var n=t.target;n;n=n.parentNode)if(n.attributes&&n.attributes.draggable)return n.dragDrop(),!1}}));var le="requestAnimationFrame";if(!window[le]){var he=0;window[le]=function(t){var e=Date.now(),n=16-(e-he),i=n>0?n:0;return he=e+i,setTimeout(function(){t(he)},i)},window.cancelAnimationFrame=clearTimeout}if(!window.atob){var ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ce=new RegExp("[^"+ue+"]");window.atob=function(t){var e,n,i,o,r=[],s=0,a=t.length;if(ce.test(t)||/=/.test(t)&&(/=[^=]/.test(t)||/={3}/.test(t)))throw new Error("Invalid base64 data");for(a%4>0&&(a=(t+=Array(4-a%4+1).join("=")).length);s<a;){for(n=[],o=s;s<o+4;)n.push(ue.indexOf(t.charAt(s++)));for(i=[((e=(n[0]<<18)+(n[1]<<12)+((63&n[2])<<6)+(63&n[3]))&255<<16)>>16,64===n[2]?-1:(65280&e)>>8,64===n[3]?-1:255&e],o=0;o<3;++o)(i[o]>=0||0===o)&&r.push(String.fromCharCode(i[o]))}return r.join("")},window.btoa=function(t){for(var e,n,i=[],o=0,r=t.length;o<r;)e=((n=[t.charCodeAt(o++),t.charCodeAt(o++),t.charCodeAt(o++)])[0]<<16)+((n[1]||0)<<8)+(n[2]||0),i.push(ue.charAt((e&63<<18)>>18),ue.charAt((258048&e)>>12),ue.charAt(isNaN(n[1])?64:(4032&e)>>6),ue.charAt(isNaN(n[2])?64:63&e));return i.join("")}}},GnYm:function(t,e,n){"use strict";var i=n("mrSG").__extends;Object.defineProperty(e,"__esModule",{value:!0});var o,r,s=n("Xyxl"),a=n("DogD"),l=n("GnYm")||e;window.wijmo=window.wijmo||{},window.wijmo.grid=window.wijmo.grid||{},window.wijmo.grid.detail=l,(r=o=e.DetailVisibilityMode||(e.DetailVisibilityMode={}))[r.Code=0]="Code",r[r.Selection=1]="Selection",r[r.ExpandSingle=2]="ExpandSingle",r[r.ExpandMulti=3]="ExpandMulti";var h=function(){function t(t,e){var n=this;this._mode=o.ExpandSingle,this._animated=!1,this._g=t,t.mergeManager=new u(t),t.rowHeaders.hostElement.addEventListener("click",this._hdrClick.bind(this)),t.formatItem.addHandler(this._formatItem,this),t.selectionChanged.addHandler(this._selectionChanged,this),t.resizedRow.addHandler(this._resizedRow,this),t.loadingRows.addHandler(function(){n.hideDetail()}),t.draggingRow.addHandler(function(t,e){e.row<t.rows.length-1&&t.rows[e.row+1]instanceof c&&(e.cancel=!0,n.hideDetail(e.row))}),t.formatItem.addHandler(function(t,e){e.panel==t.cells&&t.rows[e.row]instanceof c&&(e.cell.style.left="0")}),e&&a.copy(this,e)}return Object.defineProperty(t.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"detailVisibilityMode",{get:function(){return this._mode},set:function(t){(t=a.asEnum(t,o))!=this._mode&&(this._mode=t,this.hideDetail(),this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHeight",{get:function(){return this._maxHeight},set:function(t){this._maxHeight=a.asNumber(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAnimated",{get:function(){return this._animated},set:function(t){t!=this._animated&&(this._animated=a.asBoolean(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"createDetailCell",{get:function(){return this._createDetailCellFn},set:function(t){this._createDetailCellFn=a.asFunction(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disposeDetailCell",{get:function(){return this._disposeDetailCellFn},set:function(t){this._disposeDetailCellFn=a.asFunction(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowHasDetail",{get:function(){return this._rowHasDetailFn},set:function(t){this._rowHasDetailFn=a.asFunction(t,!0)},enumerable:!0,configurable:!0}),t.prototype.getDetailRow=function(t){var e=this._g.rows;return e[t=this._toIndex(t)]instanceof c?e[t]:t<e.length-1&&e[t+1]instanceof c?e[t+1]:null},t.prototype.isDetailVisible=function(t){return null!=this.getDetailRow(t)},t.prototype.isDetailAvailable=function(t){return t=this._toIndex(t),this._hasDetail(t)},t.prototype.hideDetail=function(t){var e=this._g.rows;if(null!=t){!(e[t=this._toIndex(t)]instanceof c)&&t<e.length-1&&e[t+1]instanceof c&&t++;var n=e[t];n instanceof c&&(this.disposeDetailCell&&this.disposeDetailCell(n),a.Control.disposeAll(n.detail),e.removeAt(t))}else for(var i=0;i<e.length;i++)e[i]instanceof c&&this.hideDetail(i)},t.prototype.showDetail=function(t,e){void 0===e&&(e=!1);var n=this._g,i=n.rows;if((t=this._toIndex(t))>0&&i[t]instanceof c&&t--,e){for(var o=n.selection,r=!1,s=0;s<i.length-1;s++)s!=t&&i[s+1]instanceof c&&(this.hideDetail(s),s<t&&t--,s<o.row&&(o.row--,o.row2--,r=!0));r&&n.select(o,!1)}if(!this.isDetailVisible(t)&&this._hasDetail(t)){var l=new c(i[t]);if(l.detail=this._createDetailCell(i[t]),l.detail)if(i.insert(t+1,l),this._animated){var h=l.detail.style;h.transform="translateY(-100%)",h.opacity="0",a.animate(function(e){e<1?(h.transform="translateY("+(100*-(1-e)).toFixed(0)+"%)",h.opacity=(e*e).toString()):(h.transform="",h.opacity="",a.Control.invalidateAll(l.detail),n.scrollIntoView(t+1,-1))})}else n.scrollIntoView(t+1,-1)}},t.prototype._toIndex=function(t){return t instanceof s.Row&&(t=t.index),a.asNumber(t,!1,!0)},t.prototype._hdrClick=function(t){if(!t.defaultPrevented)switch(this._mode){case o.ExpandMulti:case o.ExpandSingle:var e=this._g,n=e.hitTest(t);n.row>-1&&(this.isDetailVisible(n.row)?this.hideDetail(n.row):(e.select(new s.CellRange(n.row,0,n.row,e.columns.length-1)),this.showDetail(n.row,this._mode==o.ExpandSingle)),t.preventDefault())}},t.prototype._selectionChanged=function(t,e){var n=this;this._mode==o.Selection&&(this._toSel&&clearTimeout(this._toSel),this._toSel=setTimeout(function(){t.selection.row>-1?n.showDetail(t.selection.row,!0):n.hideDetail()},300))},t.prototype._formatItem=function(t,e){var n=this._g,i=e.panel.rows[e.row];if(e.panel==n.cells&&i instanceof c&&null!=i.detail)if(a.addClass(e.cell,"wj-detail"),e.cell.textContent="",e.cell.style.textAlign="",e.cell.appendChild(i.detail),null==i.height){a.Control.refreshAll(e.cell);var r=getComputedStyle(e.cell),s=i.detail.scrollHeight+parseInt(r.paddingTop)+parseInt(r.paddingBottom);this._maxHeight>0&&s>this._maxHeight&&(s=this._maxHeight),i.height=s,i.detail.style.height||(i.detail.style.height="100%");var l=i.detail.querySelector(".wj-flexgrid");l&&!l.style.height&&(l.style.height="100%")}else setTimeout(function(){a.Control.refreshAll(i.detail)});this._mode!=o.ExpandMulti&&this._mode!=o.ExpandSingle||e.panel!=n.rowHeaders||0!=e.col||!this._hasDetail(e.row)||(e.cell.innerHTML=e.row<n.rows.length-1&&n.rows[e.row+1]instanceof c?'<span class="wj-glyph-minus"></span>':'<span class="wj-glyph-plus"></span>')},t.prototype._resizedRow=function(t,e){var n=e.panel.rows[e.row];n instanceof c&&n.detail&&a.Control.refreshAll(n.detail)},t.prototype._hasVisibleDetail=function(t){return!(t instanceof c||t instanceof s.GroupRow||t instanceof s._NewRowTemplate)},t.prototype._hasDetail=function(t){return!a.isFunction(this._rowHasDetailFn)||this._rowHasDetailFn(this._g.rows[t])},t.prototype._createDetailCell=function(t,e){return this.createDetailCell?this.createDetailCell(t,e):null},t}();e.FlexGridDetailProvider=h;var u=function(t){function e(e){return t.call(this,e)||this}return i(e,t),e.prototype.getMergedRange=function(e,n,i,o){switch(void 0===o&&(o=!0),e.cellType){case s.CellType.Cell:if(e.rows[n]instanceof c)return new s.CellRange(n,0,n,e.columns.length-1);break;case s.CellType.RowHeader:if(e.rows[n]instanceof c)return new s.CellRange(n-1,i,n,i);if(n<e.rows.length-1&&e.rows[n+1]instanceof c)return new s.CellRange(n,i,n+1,i)}return t.prototype.getMergedRange.call(this,e,n,i,o)},e}(s.MergeManager);e.DetailMergeManager=u;var c=function(t){function e(e){var n=t.call(this)||this;return n.isReadOnly=!0,n}return i(e,t),Object.defineProperty(e.prototype,"detail",{get:function(){return this._detail},set:function(t){this._detail=t},enumerable:!0,configurable:!0}),e}(s.Row);e.DetailRow=c},J2jl:function(t,e,n){"use strict";function i(){var t,e;return(t=window.wijmo)&&(e=t.grid)&&e.detail}function o(){var t;return(t=window.wijmo)&&t.input}var r,s=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a=n("Xyxl"),l=n("DogD"),h=n("CcnG"),u=n("CcnG"),c=n("CcnG"),d=n("Ip0R"),p=n("gIcY"),f=n("8X1S");e.wjFlexGridMeta={selector:"wj-flex-grid",template:"<div><ng-content></ng-content></div>",inputs:["wjModelProperty","isDisabled","newRowAtTop","allowAddNew","allowDelete","allowDragging","allowMerging","allowResizing","allowSorting","quickAutoSize","autoScroll","autoSizeMode","autoGenerateColumns","childItemsPath","groupHeaderFormat","headersVisibility","showSelectedHeaders","showMarquee","itemFormatter","isReadOnly","imeEnabled","mergeManager","selectionMode","showGroups","showSort","showDropDown","showAlternatingRows","showErrors","validateEdits","treeIndent","itemsSource","autoClipboard","frozenRows","frozenColumns","cloneFrozenCells","deferResizing","sortRowIndex","stickyHeaders","preserveSelectedState","preserveOutlineState","keyActionTab","keyActionEnter","rowHeaderPath","virtualizationThreshold"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","beginningEditNg: beginningEdit","cellEditEndedNg: cellEditEnded","cellEditEndingNg: cellEditEnding","prepareCellForEditNg: prepareCellForEdit","formatItemNg: formatItem","resizingColumnNg: resizingColumn","resizedColumnNg: resizedColumn","autoSizingColumnNg: autoSizingColumn","autoSizedColumnNg: autoSizedColumn","draggingColumnNg: draggingColumn","draggingColumnOverNg: draggingColumnOver","draggedColumnNg: draggedColumn","sortingColumnNg: sortingColumn","sortedColumnNg: sortedColumn","resizingRowNg: resizingRow","resizedRowNg: resizedRow","autoSizingRowNg: autoSizingRow","autoSizedRowNg: autoSizedRow","draggingRowNg: draggingRow","draggingRowOverNg: draggingRowOver","draggedRowNg: draggedRow","deletingRowNg: deletingRow","deletedRowNg: deletedRow","loadingRowsNg: loadingRows","loadedRowsNg: loadedRows","rowEditStartingNg: rowEditStarting","rowEditStartedNg: rowEditStarted","rowEditEndingNg: rowEditEnding","rowEditEndedNg: rowEditEnded","rowAddedNg: rowAdded","groupCollapsedChangedNg: groupCollapsedChanged","groupCollapsedChangingNg: groupCollapsedChanging","itemsSourceChangedNg: itemsSourceChanged","selectionChangingNg: selectionChanging","selectionChangedNg: selectionChanged","scrollPositionChangedNg: scrollPositionChanged","updatingViewNg: updatingView","updatedViewNg: updatedView","updatingLayoutNg: updatingLayout","updatedLayoutNg: updatedLayout","pastingNg: pasting","pastedNg: pasted","pastingCellNg: pastingCell","pastedCellNg: pastedCell","copyingNg: copying","copiedNg: copied"],providers:[{provide:p.NG_VALUE_ACCESSOR,useFactory:f.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var g=function(t){function n(e,n,i,o){var r=t.call(this,f.WjDirectiveBehavior.getHostElement(e,n))||this;return r.isInitialized=!1,r._wjBehaviour=f.WjDirectiveBehavior.attach(r,e,n,i),new y(r,o),r.deferUpdate(function(){if(r.rows.defaultSize<10){var t=r.hostElement,e=getComputedStyle(t),n=getComputedStyle(document.body),i=2*parseInt(e.fontSize&&l.contains(document.body,t)?e.fontSize:n.fontSize);r.rows.defaultSize=i,r.columns.defaultSize=4*i,r.columnHeaders.rows.defaultSize=i,r.rowHeaders.columns.defaultSize=Math.round(1.25*i)}}),r.created(),r}return s(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=f.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjFlexGridMeta.outputs},n.decorators=[{type:h.Component,args:[{selector:e.wjFlexGridMeta.selector,template:e.wjFlexGridMeta.template,inputs:e.wjFlexGridMeta.inputs,outputs:e.wjFlexGridMeta.outputs,providers:[{provide:"WjComponent",useExisting:u.forwardRef(function(){return n})}].concat(e.wjFlexGridMeta.providers)}]}],n.ctorParameters=function(){return[{type:u.ElementRef,decorators:[{type:c.Inject,args:[u.ElementRef]}]},{type:u.Injector,decorators:[{type:c.Inject,args:[u.Injector]}]},{type:void 0,decorators:[{type:c.Inject,args:["WjComponent"]},{type:c.SkipSelf},{type:u.Optional}]},{type:c.ChangeDetectorRef,decorators:[{type:c.Inject,args:[c.ChangeDetectorRef]}]}]},n}(a.FlexGrid);e.WjFlexGrid=g,e.wjFlexGridColumnMeta={selector:"wj-flex-grid-column",template:"<div><ng-content></ng-content></div>",inputs:["asyncBindings","wjProperty","name","dataMap","dataType","binding","sortMemberPath","format","header","width","maxLength","minWidth","maxWidth","align","allowDragging","allowSorting","allowResizing","allowMerging","aggregate","isReadOnly","cssClass","isContentHtml","isSelected","visible","wordWrap","multiLine","mask","inputType","isRequired","showDropDown","dropDownCssClass","quickAutoSize"],outputs:["initialized","isSelectedChangePC: isSelectedChange"],providers:[]};var _=function(t){function n(e,n,i){var o=t.call(this)||this;o.isInitialized=!1,o.wjProperty="columns";var r=(o._wjBehaviour=f.WjDirectiveBehavior.attach(o,e,n,i)).parentBehavior.directive;return r.autoGenerateColumns&&(r.autoGenerateColumns=!1,r.columns.clear()),o.created(),o}return s(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.meta={outputs:e.wjFlexGridColumnMeta.outputs,changeEvents:{"grid.selectionChanged":["isSelected"]}},n.decorators=[{type:h.Component,args:[{selector:e.wjFlexGridColumnMeta.selector,template:e.wjFlexGridColumnMeta.template,inputs:e.wjFlexGridColumnMeta.inputs,outputs:e.wjFlexGridColumnMeta.outputs,providers:[{provide:"WjComponent",useExisting:u.forwardRef(function(){return n})}].concat(e.wjFlexGridColumnMeta.providers)}]}],n.ctorParameters=function(){return[{type:u.ElementRef,decorators:[{type:c.Inject,args:[u.ElementRef]}]},{type:u.Injector,decorators:[{type:c.Inject,args:[u.Injector]}]},{type:void 0,decorators:[{type:c.Inject,args:["WjComponent"]},{type:c.SkipSelf},{type:u.Optional}]}]},n}(a.Column);e.WjFlexGridColumn=_;var m,v=function(){function t(t,e,n,i,o,r,s){this.viewContainerRef=t,this.templateRef=e,this.elRef=n,this.domRenderer=o,this.cdRef=s,this.autoSizeRows=!0,this.forceFullEdit=!0,i instanceof g?this.grid=i:i instanceof _&&(this.column=i,this.grid=f.WjDirectiveBehavior.getBehavior(i).parentBehavior.directive)}return t._getTemplContextProp=function(t){return"$__cellTempl"+m[t]},t.prototype.ngOnInit=function(){this.ownerControl=this.column&&this.column.grid===this.grid?this.column:this.grid,this._attachToControl()},t.prototype.ngOnDestroy=function(){this.cellTypeStr&&(this.viewContainerRef.clear(),this.ownerControl[t._getTemplContextProp(this.cellType)]=null,this.grid.invalidate())},t.prototype._instantiateTemplate=function(t,e){return f.WjDirectiveBehavior.instantiateTemplate(t,this.viewContainerRef,this.templateRef,this.domRenderer,!1,e)},t.prototype._attachToControl=function(){if(this.cellTypeStr){var e=this.cellType=l.asEnum(this.cellTypeStr,m),n=this.ownerControl;n[t._getTemplContextProp(e)]=this,n instanceof a.Column&&(e===m.Cell||e===m.ColumnHeader||e===m.ColumnFooter)&&n._setFlag(a.RowColFlags.HasTemplate,!0),this.grid.invalidate()}},t.decorators=[{type:u.Directive,args:[{selector:"[wjFlexGridCellTemplate]",inputs:["wjFlexGridCellTemplate","cellTypeStr: cellType","cellOverflow","valuePaths","autoSizeRows","forceFullEdit"],exportAs:"wjFlexGridCellTemplate",providers:[{provide:"WjComponent",useExisting:u.forwardRef(function(){return t})}]}]}],t.ctorParameters=function(){return[{type:u.ViewContainerRef,decorators:[{type:c.Inject,args:[u.ViewContainerRef]}]},{type:u.TemplateRef,decorators:[{type:c.Inject,args:[u.TemplateRef]},{type:u.Optional}]},{type:u.ElementRef,decorators:[{type:c.Inject,args:[u.ElementRef]}]},{type:void 0,decorators:[{type:c.Inject,args:["WjComponent"]},{type:c.SkipSelf},{type:u.Optional}]},{type:u.Renderer,decorators:[{type:c.Inject,args:[u.Renderer]}]},{type:u.Injector,decorators:[{type:c.Inject,args:[u.Injector]}]},{type:c.ChangeDetectorRef,decorators:[{type:c.Inject,args:[c.ChangeDetectorRef]}]}]},t}();e.WjFlexGridCellTemplate=v,function(t){t[t.Cell=0]="Cell",t[t.CellEdit=1]="CellEdit",t[t.ColumnHeader=2]="ColumnHeader",t[t.RowHeader=3]="RowHeader",t[t.RowHeaderEdit=4]="RowHeaderEdit",t[t.TopLeft=5]="TopLeft",t[t.GroupHeader=6]="GroupHeader",t[t.Group=7]="Group",t[t.NewCellTemplate=8]="NewCellTemplate",t[t.ColumnFooter=9]="ColumnFooter",t[t.BottomLeft=10]="BottomLeft"}(m=e.CellTemplateType||(e.CellTemplateType={}));var y=function(t){function e(n,i){var o=t.call(this)||this;if(o._needsCdCheck=!1,o._lastApplyTimeStamp=0,o._noApplyLag=!1,o._startingEditing=!1,o._cellStampCounter=0,o._composing=!1,o.grid=n,o._gridCdRef=i,!e._templateTypes)for(var r in e._templateTypes=[],m)isNaN(r)&&e._templateTypes.push(r);var s=o;return o._baseCf=n.cellFactory,n.cellFactory=o,o._evtInput=document.createEvent("HTMLEvents"),o._evtInput.initEvent("input",!0,!1),o._evtBlur=document.createEvent("HTMLEvents"),o._evtBlur.initEvent("blur",!1,!1),n.prepareCellForEdit.addHandler(function(t,e){s._noApplyLag=!0}),n.cellEditEnded.addHandler(function(t,e){(e.range.col<0||e.range.col<n.columns.length&&!n.columns[e.range.col][v._getTemplContextProp(m.CellEdit)])&&(s._editChar=null),setTimeout(function(){s._noApplyLag=!1},300)}),n.beginningEdit.addHandler(function(t,e){s._startingEditing=!0}),n.hostElement.addEventListener("keydown",function(t){s._startingEditing=!1},!0),n.hostElement.addEventListener("keypress",function(t){var e=t.charCode>32?String.fromCharCode(t.charCode):null;e&&l.closest(t.target,".wj-flexgrid")===n.hostElement&&(!n.activeEditor||s._startingEditing?s._editChar=e:s._editChar&&(s._editChar+=e))},!0),n.hostElement.addEventListener("compositionstart",function(t){s._composing=!0},!0),n.hostElement.addEventListener("compositionend",function(t){s._composing=!1},!0),n.updatedView.addHandler(function(){o._needsCdCheck&&(o._needsCdCheck=!1,o._gridCdRef.markForCheck())},o),o}return s(e,t),e.prototype.updateCell=function(t,n,r,s,h){var u=this;this._cellStampCounter=(this._cellStampCounter+1)%1e7;var c=s[e._cellStampProp]=this._cellStampCounter;s.style.overflow&&(s.style.overflow="");var d=n,p=r;h&&!h.isSingleCell&&(n=h.row,r=h.col);var f,g=this,_=t.grid,y=_.editRange,b=t.rows[n],w=b.dataItem,C=!1,x=!1,j=!1,S=!1;switch(t.cellType){case a.CellType.Cell:if(y&&y.row===n&&y.col===r)f=m.CellEdit,x=j=!0;else if(b instanceof a.GroupRow){var E=!((S=w instanceof l.CollectionViewGroup)||b.hasChildren);r==t.columns.firstVisibleIndex?f=E?m.Cell:m.GroupHeader:(f=E?m.Cell:m.Group,x=!0)}else b instanceof a._NewRowTemplate?f=m.NewCellTemplate:i()&&i().DetailRow&&b instanceof i().DetailRow||(f=m.Cell);break;case a.CellType.ColumnHeader:f=m.ColumnHeader;break;case a.CellType.RowHeader:f=_.collectionView&&_.collectionView.currentEditItem===w?m.RowHeaderEdit:m.RowHeader,C=!0;break;case a.CellType.TopLeft:f=m.TopLeft,C=!0;break;case a.CellType.ColumnFooter:f=m.ColumnFooter,x=!0;break;case a.CellType.BottomLeft:f=m.BottomLeft,C=!0}var I=!1;if(null!=f){var D=S&&f==m.GroupHeader?_.columns.getColumn(w.groupDescription.propertyName):r>=0&&r<t.columns.length?t.columns[r]:null;if(D){var P=v._getTemplContextProp(f),M=(C?_:D)[P];if(M||(f===m.RowHeaderEdit?(P=v._getTemplContextProp(f=m.RowHeader),M=_[P]):f!==m.Group&&f!==m.GroupHeader||S||(P=v._getTemplContextProp(f=m.Cell),M=D[P])),M){var T;x&&(T=t.getCellData(n,r,!1)),I=!0;var R=s.getAttribute(a.FlexGrid._WJS_MEASURE),A=R&&"true"===R.toLowerCase();j&&this._baseCf.updateCell(t,d,p,s,h,!0);var O,k=s[P]||{},N=j&&this._composing&&_.imeEnabled;if(k.column===D&&k.viewRef&&k.templateContextProperty===P&&s.firstChild==k.rootElement)O=this._setViewRefContext(k.viewRef.context,b,D,w,T,M.valuePaths);else{if(j){var L=s.firstElementChild;L&&(N||s.focus(),L.style.display="none")}else s.textContent="";this._doDisposeCell(s);var F={};O=this._setViewRefContext(F,b,D,w,T,M.valuePaths);var V=M._instantiateTemplate(s,F);k.column=D,k.viewRef=V.viewRef,k.rootElement=V.rootElement,k.templateContextProperty=P,s[P]=k}if(M.cellOverflow&&(s.style.overflow=M.cellOverflow),A?M.cdRef.detectChanges():M.autoSizeRows&&!N?setTimeout(function(){if(c===s[e._cellStampProp]){var i=s.scrollHeight,o=t.rows,r=h&&h.rowSpan||1;if(n<o.length&&o[n].renderHeight*r<i-1){if(o.defaultSize=i/r,j){var a=g._isFullEdit();return _.refresh(),void _.startEditing(a)}}else j&&u._initEditInput(k,M,null)}},0):j&&setTimeout(function(){N?u._initImeEditInput(k,M):u._initEditInput(k,M,null)},0),j){g._cellEditorVars=O.localVars;var B=function(t,e){if(_.cellEditEnding.removeHandler(B),!e.stayInEditMode){var n=l.getActiveElement();n&&n.dispatchEvent(g._evtBlur),s.focus()}if(g._triggerEditorEvents(s),!e.cancel&&!e.stayInEditMode)for(var i=O.localVars,r=0,a=Object.getOwnPropertyNames(O.bindings);r<a.length;r++){var h=a[r];O.bindings[h].setValue(i,O.localVars.values[h])}var u=s.querySelectorAll(".wj-dropdown");[].forEach.call(u,function(t){var e=l.Control.getControl(t);e&&o()&&e instanceof o().DropDown&&(e.isDroppedDown=!1)})},H=function(t,e){_.cellEditEnded.removeHandler(H),g._cellEditorVars=null};_.cellEditEnding.addHandler(B),_.cellEditEnded.addHandler(H)}else this._baseCf.updateCell(t,d,p,s,h,!1)}}}I||(this._doDisposeCell(s),this._baseCf.updateCell(t,d,p,s,h))},e.prototype.getEditorValue=function(e){if(this._cellEditorVars){var n=e.editRange;return n&&n.isValid&&this._triggerEditorEvents(e.cells.getCellElement(n.row,n.col)),this._cellEditorVars.value}return t.prototype.getEditorValue.call(this,e)},e.prototype.disposeCell=function(t){this._doDisposeCell(t)},e.prototype._doDisposeCell=function(t){for(var n=e._templateTypes,i=0;i<n.length;i++){var o=v._getTemplContextProp(m[n[i]]),r=t[o];if(r&&r.viewRef){var s=(r.column||this.grid)[o];if(s){var a=s.viewContainerRef.indexOf(r.viewRef);a>-1&&s.viewContainerRef.remove(a)}r.viewRef=null,r.rootElement=null,r.column=null,r.templateContextProperty=null,t[o]=null}}},e.prototype._setViewRefContext=function(t,e,n,i,o,r){this._needsCdCheck=!0,t.row=e,t.col=n,t.item=i;var s={},a=t.cell||{},h={},u={localVars:a,bindings:h};if(a.row=e,a.col=n,a.item=i,a.value=o,a.values=s,r)for(var c=0,d=Object.getOwnPropertyNames(r);c<d.length;c++){var p=d[c],f=new l.Binding(r[p]);h[p]=f,s[p]=f.getValue(a)}return t.cell!==a&&(t.cell=a),u},e.prototype._initEditInput=function(t,n,i){var o=this;this._setFullEdit(n);var r=this._findInitialInput(t);if(r){var s=function(){r.removeEventListener("focus",s),setTimeout(function(){var t=null!=i?i:o._editChar;t&&(r.value=t,o._editChar=null,e._setSelectionRange(r,t.length,t.length),r.dispatchEvent(o._evtInput))},e._FOCUS_INTERVAL)};r.addEventListener("focus",s),r.focus()}},e.prototype._initImeEditInput=function(t,e){var n=this,i=l.getActiveElement();if(i&&i instanceof HTMLInputElement&&l.hasClass(i,"wj-grid-ime")){var o=function(r){i.removeEventListener("compositionend",o),l.setCss(i,a._ImeHandler._cssHidden),n._initEditInput(t,e,i.value)};i.addEventListener("compositionend",o);var r=this._findInitialInput(t);if(r){var s=r.getBoundingClientRect(),h=i.getBoundingClientRect(),u=window.getComputedStyle(i),c=parseFloat(u.left),d=parseFloat(u.top);l.setCss(i,{left:c+s.left-h.left+"px",top:d+s.top-h.top+"px",width:s.width+"px",height:s.height+"px"})}}},e.prototype._findInitialInput=function(t){var e=t&&t.rootElement&&t.rootElement.querySelectorAll("input,textarea");if(e)for(var n=0;n<e.length;n++){var i=e[n],o=window.getComputedStyle(i);if("none"!==o.display&&"visible"===o.visibility)return i}return null},e._setSelectionRange=function(t,e,n){if(void 0===n&&(n=e),l.contains(document.body,t)&&!t.disabled&&"none"!=t.style.display)try{t.setSelectionRange(l.asNumber(e),l.asNumber(n),l.isIE()?null:"backward"),t.focus()}catch(t){}},e.prototype._triggerEditorEvents=function(t){if(t)for(var e=t.querySelectorAll(".wj-control"),n=0;n<e.length;n++){var i=l.Control.getControl(e[n]);if(i){var o=f.WjDirectiveBehavior.getBehavior(i);o&&o.flushPendingEvents()}}},e.prototype._isFullEdit=function(){var t=this.grid;return!t.activeEditor||t._edtHdl._fullEdit},e.prototype._setFullEdit=function(t){var e=this.grid;t.forceFullEdit&&e.activeEditor&&(e._edtHdl._fullEdit=!0)},e._cellStampProp="__wjCellStamp",e._FOCUS_INTERVAL=l.Control._FOCUS_INTERVAL+20,e}(a.CellFactory),b=[g,_,v],w=function(){function t(){}return t.decorators=[{type:h.NgModule,args:[{imports:[f.WjDirectiveBaseModule,d.CommonModule],declarations:b.slice(),exports:b.slice()}]}],t.ctorParameters=function(){return[]},t}();e.WjGridModule=w},Xyxl:function(t,e,n){"use strict";function i(){var t;return(t=window.wijmo)&&t.input}var o=n("mrSG").__extends;Object.defineProperty(e,"__esModule",{value:!0});var r,s,a=n("DogD"),l=n("Xyxl")||e;window.wijmo=window.wijmo||{},window.wijmo.grid=l,a.culture.FlexGrid=window.wijmo.culture.FlexGrid||{groupHeaderFormat:"{name}: <b>{value}</b> ({count:n0} items)"},(s=r=e.HeadersVisibility||(e.HeadersVisibility={}))[s.None=0]="None",s[s.Column=1]="Column",s[s.Row=2]="Row",s[s.All=3]="All";var h=function(t){function e(e,n){var i=t.call(this,e,null,!0)||this;i._szClient=new a.Size(0,0),i._ptScrl=new a.Point(0,0),i._cellPadding=3,i._clipToScreen=!1,i._autoGenCols=!0,i._autoClipboard=!0,i._autoScroll=!0,i._readOnly=!1,i._indent=14,i._autoSizeMode=k.Both,i._hdrVis=r.All,i._alSorting=!0,i._alAddNew=!1,i._alDelete=!1,i._alResizing=O.Columns,i._alDragging=N.Columns,i._alMerging=S.None,i._ssHdr=r.None,i._shSort=!0,i._shGroups=!0,i._shAlt=!0,i._shErr=!0,i._shDropDown=!0,i._valEdt=!0,i._deferResizing=!1,i._pSel=!0,i._pOutline=!0,i._vt=0,i.itemsSourceChanging=new a.Event,i.itemsSourceChanged=new a.Event,i.scrollPositionChanged=new a.Event,i.selectionChanging=new a.Event,i.selectionChanged=new a.Event,i.loadingRows=new a.Event,i.loadedRows=new a.Event,i.updatingLayout=new a.Event,i.updatedLayout=new a.Event,i.resizingColumn=new a.Event,i.resizedColumn=new a.Event,i.autoSizingColumn=new a.Event,i.autoSizedColumn=new a.Event,i.draggingColumn=new a.Event,i.draggingColumnOver=new a.Event,i.draggedColumn=new a.Event,i.resizingRow=new a.Event,i.resizedRow=new a.Event,i.autoSizingRow=new a.Event,i.autoSizedRow=new a.Event,i.draggingRow=new a.Event,i.draggingRowOver=new a.Event,i.draggedRow=new a.Event,i.groupCollapsedChanging=new a.Event,i.groupCollapsedChanged=new a.Event,i.sortingColumn=new a.Event,i.sortedColumn=new a.Event,i.beginningEdit=new a.Event,i.prepareCellForEdit=new a.Event,i.cellEditEnding=new a.Event,i.cellEditEnded=new a.Event,i.rowEditStarting=new a.Event,i.rowEditStarted=new a.Event,i.rowEditEnding=new a.Event,i.rowEditEnded=new a.Event,i.rowAdded=new a.Event,i.deletingRow=new a.Event,i.deletedRow=new a.Event,i.copying=new a.Event,i.copied=new a.Event,i.pasting=new a.Event,i.pasted=new a.Event,i.pastingCell=new a.Event,i.pastedCell=new a.Event,i.formatItem=new a.Event,i.updatingView=new a.Event,i.updatedView=new a.Event,i._mappedColumns=null;var o=i.hostElement;a.isIE()&&(o.style.borderRadius="0px");var s=i.getTemplate();i.applyTemplate("wj-control wj-content wj-flexgrid",s,{_root:"root",_eSz:"sz",_eCt:"cells",_fCt:"fcells",_eTL:"tl",_eBL:"bl",_eCHdr:"ch",_eRHdr:"rh",_eCFtr:"cf",_eTLCt:"tlcells",_eBLCt:"blcells",_eCHdrCt:"chcells",_eCFtrCt:"cfcells",_eRHdrCt:"rhcells",_eMarquee:"marquee",_eFocus:"focus"}),i._tabIndex=o.tabIndex,o.tabIndex=-1;var l=i._getDefaultRowHeight();return i.deferUpdate(function(){i._rows=new j(i,l),i._cols=new x(i,4*l),i._hdrRows=new j(i,l),i._hdrCols=new x(i,Math.round(1.25*l)),i._ftrRows=new j(i,l),i._gpTL=new f(i,d.TopLeft,i._hdrRows,i._hdrCols,i._eTLCt),i._gpCHdr=new f(i,d.ColumnHeader,i._hdrRows,i._cols,i._eCHdrCt),i._gpRHdr=new f(i,d.RowHeader,i._rows,i._hdrCols,i._eRHdrCt),i._gpCells=new f(i,d.Cell,i._rows,i._cols,i._eCt),i._gpBL=new f(i,d.BottomLeft,i._ftrRows,i._hdrCols,i._eBLCt),i._gpCFtr=new f(i,d.ColumnFooter,i._ftrRows,i._cols,i._eCFtrCt),i._hdrRows.push(new b),i._hdrCols.push(new y),i._hdrCols[0].align="center",i._cf=new g,i._keyHdl=new L(i),i._mouseHdl=new F(i),i._edtHdl=new V(i),i._selHdl=new A(i),i._addHdl=new B(i),i._mrgMgr=new I(i),i._bndSortConverter=i._sortConverter.bind(i),i._bndScroll=i._scroll.bind(i),a.setAttribute(i.cells.hostElement,"role","grid"),i.selectionMode=D.CellRange,i.initialize(n)}),i.addEventListener(i._root,"scroll",function(t){i._updateScrollPosition()&&(i.finishEditing(),i._updateContent(!0))}),i.addEventListener(o,"focus",function(t){if(o.tabIndex>-1){var e=t.target;if(e instanceof HTMLElement&&e.tabIndex<0)return void i._setFocus(!0)}},!0),i}return o(e,t),e.prototype._handleResize=function(){this._rcBounds=null,t.prototype._handleResize.call(this)},Object.defineProperty(e.prototype,"headersVisibility",{get:function(){return this._hdrVis},set:function(t){(t=a.asEnum(t,r))!=this._hdrVis&&(this._hdrVis=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stickyHeaders",{get:function(){return this._stickyHdr},set:function(t){t!=this._stickyHdr&&(this._stickyHdr=a.asBoolean(t),this._updateStickyHeaders(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preserveSelectedState",{get:function(){return this._pSel},set:function(t){this._pSel=a.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preserveOutlineState",{get:function(){return this._pOutline},set:function(t){this._pOutline=a.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"virtualizationThreshold",{get:function(){return this._vt},set:function(t){this._vt=a.asNumber(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoGenerateColumns",{get:function(){return this._autoGenCols},set:function(t){this._autoGenCols=a.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoClipboard",{get:function(){return this._autoClipboard},set:function(t){this._autoClipboard=a.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoScroll",{get:function(){return this._autoScroll},set:function(t){this._autoScroll=a.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnLayout",{get:function(){for(var t=e._getSerializableProperties(y),n=new y,i=[],o=0;o<this.columns.length;o++){for(var r=this.columns[o],s={},l=0;l<t.length;l++){var h=t[l],u=r[h];u!=n[h]&&a.isPrimitive(u)&&"size"!=h&&(s[h]=u)}i.push(s)}return JSON.stringify({columns:i})},set:function(t){var e=JSON.parse(a.asString(t));if(!e||null==e.columns)throw"Invalid columnLayout data.";this.columns.clear(),this.initialize(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=a.asBoolean(t),this.finishEditing(),this.invalidate(!0),this._addHdl.updateNewRowTemplate(),a.toggleClass(this.hostElement,"wj-state-readonly",this.isReadOnly),this._setAria("readonly",this.isReadOnly?"true":null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imeEnabled",{get:function(){return null!=this._imeHdl},set:function(t){a.asBoolean(t)!=this.imeEnabled&&this.finishEditing()&&(this._imeHdl&&(this._imeHdl.dispose(),this._imeHdl=null),t&&(this._imeHdl=new z(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowResizing",{get:function(){return this._alResizing},set:function(t){this._alResizing=a.asEnum(t,O)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deferResizing",{get:function(){return this._deferResizing},set:function(t){this._deferResizing=a.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoSizeMode",{get:function(){return this._autoSizeMode},set:function(t){this._autoSizeMode=a.asEnum(t,k)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quickAutoSize",{get:function(){return this._quickSize},set:function(t){this._quickSize=a.asBoolean(t,!0)},enumerable:!0,configurable:!0}),e.prototype._getQuickAutoSize=function(){return a.isBoolean(this._quickSize)?this._quickSize:!this.formatItem.hasHandlers&&null==this.itemFormatter},Object.defineProperty(e.prototype,"allowSorting",{get:function(){return this._alSorting},set:function(t){this._alSorting=a.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowAddNew",{get:function(){return this._alAddNew},set:function(t){t!=this._alAddNew&&(this._alAddNew=a.asBoolean(t),this._addHdl.updateNewRowTemplate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"newRowAtTop",{get:function(){return this._addHdl.newRowAtTop},set:function(t){this._addHdl.newRowAtTop=a.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowDelete",{get:function(){return this._alDelete},set:function(t){t!=this._alDelete&&(this._alDelete=a.asBoolean(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowMerging",{get:function(){return this._alMerging},set:function(t){(t=a.asEnum(t,S))!=this._alMerging&&(this._alMerging=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSelectedHeaders",{get:function(){return this._ssHdr},set:function(t){(t=a.asEnum(t,r))!=this._ssHdr&&(this._ssHdr=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showMarquee",{get:function(){return!this._eMarquee.style.display},set:function(t){if(t!=this.showMarquee){var e=this._eMarquee.style;e.visibility="collapse",e.display=a.asBoolean(t)?"":"none",this.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSort",{get:function(){return this._shSort},set:function(t){t!=this._shSort&&(this._shSort=a.asBoolean(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showGroups",{get:function(){return this._shGroups},set:function(t){t!=this._shGroups&&(this._shGroups=a.asBoolean(t),this._bindGrid(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAlternatingRows",{get:function(){return this._shAlt},set:function(t){t!=this._shAlt&&(this._shAlt=a.asBoolean(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showErrors",{get:function(){return this._shErr},set:function(t){t!=this._shErr&&(this._clearCells(),this._shErr=a.asBoolean(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemValidator",{get:function(){return this._itemValidator},set:function(t){t!=this.itemValidator&&(this._itemValidator=a.asFunction(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validateEdits",{get:function(){return this._valEdt},set:function(t){this._valEdt=a.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupHeaderFormat",{get:function(){return this._gHdrFmt},set:function(t){t!=this._gHdrFmt&&(this._gHdrFmt=a.asString(t),this._bindGrid(!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowDragging",{get:function(){return this._alDragging},set:function(t){(t=a.asEnum(t,N))!=this._alDragging&&(this._alDragging=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._items},set:function(t){if(t!=this._items){var e=new a.CancelEventArgs;if(this.onItemsSourceChanging(e)){if(this._cv&&((n=a.tryCast(this._cv,a.CollectionView))&&n.sortConverter==this._bndSortConverter&&(n.sortConverter=null),this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=this._getCollectionView(t),this._lastCount=0,this._cv){this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this);var n=a.tryCast(this._cv,a.CollectionView);n&&!n.sortConverter&&(n.sortConverter=this._bndSortConverter)}this._bindGrid(!0);var i=D;this.selectionMode==i.ListBox&&(this.selectionMode=i.CellRange,this.selectionMode=i.ListBox),this.onItemsSourceChanged(e)}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editableCollectionView",{get:function(){return a.tryCast(this._cv,"IEditableCollectionView")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childItemsPath",{get:function(){return this._childItemsPath},set:function(t){t!=this._childItemsPath&&(a.assert(null==t||a.isArray(t)||a.isString(t),"childItemsPath should be an array or a string."),this._childItemsPath=t,this._bindGrid(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowHeaderPath",{get:function(){return this._rowHdrPath?this._rowHdrPath.path:null},set:function(t){t!=this.rowHeaderPath&&(t=a.asString(t),this._rowHdrPath=t?new a.Binding(t):null,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cells",{get:function(){return this._gpCells},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnHeaders",{get:function(){return this._gpCHdr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnFooters",{get:function(){return this._gpCFtr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowHeaders",{get:function(){return this._gpRHdr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeftCells",{get:function(){return this._gpTL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeftCells",{get:function(){return this._gpBL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),e.prototype.getColumn=function(t){return this.columns.getColumn(t)},Object.defineProperty(e.prototype,"frozenRows",{get:function(){return this.rows.frozen},set:function(t){this.rows.frozen=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frozenColumns",{get:function(){return this.columns.frozen},set:function(t){this.columns.frozen=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cloneFrozenCells",{get:function(){return this._fzClone},set:function(t){t!=this.cloneFrozenCells&&(this._fzClone=a.asBoolean(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortRowIndex",{get:function(){return this._sortRowIndex},set:function(t){t!=this._sortRowIndex&&(this._sortRowIndex=a.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollPosition",{get:function(){return this._ptScrl.clone()},set:function(t){var n=this._root,i=-t.x;if(this.rightToLeft)switch(e._getRtlMode()){case"rev":i=n.scrollWidth-n.clientWidth+t.x;break;case"neg":i=t.x;break;default:i=-t.x}n.scrollLeft=i,n.scrollTop=-t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientSize",{get:function(){return this._szClient},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlRect",{get:function(){return this._rcBounds||(this._rcBounds=a.getElementRect(this._root)),this._rcBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollSize",{get:function(){return new a.Size(this._gpCells.width,this._heightBrowser)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewRange",{get:function(){return this._gpCells.viewRange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellFactory",{get:function(){return this._cf},set:function(t){t!=this._cf&&(this._clearCells(),this._cf=a.asType(t,g,!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._clearCells(),this._itemFormatter=a.asFunction(t))},enumerable:!0,configurable:!0}),e.prototype.canEditCell=function(t,e){return this._edtHdl._allowEditing(t,e)},e.prototype.getCellData=function(t,e,n){return this.cells.getCellData(t,e,n)},e.prototype.getCellBoundingRect=function(t,e,n){return this.cells.getCellBoundingRect(t,e,n)},e.prototype.setCellData=function(t,e,n,i,o){return void 0===i&&(i=!0),void 0===o&&(o=!0),this.cells.setCellData(t,e,n,i,o)},e.prototype.hitTest=function(t,e){return a.isNumber(t)&&a.isNumber(e)&&(t=new a.Point(t,e)),a.isBoolean(e)&&e&&(this._rcBounds=null),new E(this,t)},e.prototype.getClipString=function(t){return this._edtHdl.getClipString(t)},e.prototype.setClipString=function(t,e){this._edtHdl.setClipString(t,e)},e.prototype.focus=function(){this._setFocus(!1)},e.prototype.dispose=function(){this.finishEditing(!0),this.itemsSource=null,t.prototype.dispose.call(this)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.finishEditing(),e&&(this._updateColumnTypes(),this.scrollPosition=this._ptScrl),this.refreshCells(e)},e.prototype.refreshCells=function(t,e,n){this.isUpdating||(t?this._updateLayout():this._updateContent(e,n))},e.prototype.autoSizeColumn=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=4),this.autoSizeColumns(t,t,e,n)},e.prototype.autoSizeColumns=function(t,n,i,o){var r=this;void 0===i&&(i=!1),void 0===o&&(o=4);var s=0,l=i?this.topLeftCells:this.columnHeaders,h=i?this.bottomLeftCells:this.columnFooters,u=i?this.rowHeaders:this.cells,c=this.viewRange;t=null==t?0:a.asInt(t),n=null==n?u.columns.length-1:a.asInt(n),c.row=Math.max(0,c.row-1e3),c.row2=Math.min(c.row2+1e3,this.rows.length-1),this.finishEditing()&&this.columns.deferUpdate(function(){a.setCss(r._eCt,{width:r._gpCells.width});var i=document.createElement("div");i.setAttribute(e._WJS_MEASURE,"true"),i.style.visibility="hidden",u.hostElement.parentElement.appendChild(i);for(var d=r._getCanvasContext(),p=t;p<=n&&p>-1&&p<u.columns.length;p++){var f=u.columns[p];if(f.isVisible){if(s=0,r.autoSizeMode&k.Headers){for(g=0;g<l.rows.length;g++)l.rows[g].isVisible&&(_=r._getDesiredWidth(l,g,p,i),s=Math.max(s,_));for(g=0;g<h.rows.length;g++)h.rows[g].isVisible&&(_=r._getDesiredWidth(h,g,p,i),s=Math.max(s,_))}if(r.autoSizeMode&k.Cells&&c.isValid)if(f._getQuickAutoSize()){var g=r._getWidestRow(u,c,p,d),_=r._getDesiredWidth(u,g,p,i);s=Math.max(s,_)}else for(g=c.row;g<=c.row2&&g<u.rows.length;g++)u.rows[g].isVisible&&(_=r._getDesiredWidth(u,g,p,i),s=Math.max(s,_));f.width=s+o+2}}r.cellFactory.disposeCell(i),a.removeChild(i)})},e.prototype.autoSizeRow=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0),this.autoSizeRows(t,t,e,n)},e.prototype.autoSizeRows=function(t,n,i,o){var r=this;void 0===i&&(i=!1),void 0===o&&(o=0);var s=0,l=i?this.topLeftCells:this.rowHeaders,h=i?this.columnHeaders:this.cells;i=a.asBoolean(i),o=a.asNumber(o),t=null==t?0:a.asInt(t),n=null==n?h.rows.length-1:a.asInt(n),this.finishEditing()&&this.rows.deferUpdate(function(){a.setCss(r._eCt,{width:r._gpCells.width});var i=document.createElement("div");i.setAttribute(e._WJS_MEASURE,"true"),i.style.visibility="hidden",h.hostElement.appendChild(i);for(var u={},c=t;c<=n&&c>-1&&c<h.rows.length;c++)if(h.rows[c].isVisible){if(s=0,r.autoSizeMode&k.Headers)for(p=0;p<l.columns.length;p++)l.columns[p].isVisible>0&&(_=r._getDesiredHeight(l,c,p,i),s=Math.max(s,_));if(r.autoSizeMode&k.Cells)for(var d=!0,p=0;p<h.columns.length;p++){var f=h.columns[p],g=f._getQuickAutoSize();if(f.isVisible&&(d||f.wordWrap||f.cssClass||f.dataType==a.DataType.Boolean||!g)){var _=void 0;if(g){var m={col:p,content:f.dataType==a.DataType.Number?"1":h.getCellData(c,p,!0)},v=JSON.stringify(m);null==(_=u[v])&&(_=r._getDesiredHeight(h,c,p,i),u[v]=_)}else _=r._getDesiredHeight(h,c,p,i);s=Math.max(s,_),d=!1}}h.rows[c].height=s+o}r.cellFactory.disposeCell(i),a.removeChild(i)})},Object.defineProperty(e.prototype,"treeIndent",{get:function(){return this._indent},set:function(t){t!=this._indent&&(this._indent=a.asNumber(t,!1,!0),this.columns.onCollectionChanged())},enumerable:!0,configurable:!0}),e.prototype.collapseGroupsToLevel=function(t){var e=this;this.finishEditing()&&this.deferUpdate(function(){var n=e.rows;n.deferUpdate(function(){for(var e=0;e<n.length;e++){var i=n[e];i instanceof w&&(i.isCollapsed=i.level>=t)}})})},Object.defineProperty(e.prototype,"selectionMode",{get:function(){return this._selHdl.selectionMode},set:function(t){(t=a.asEnum(t,D))!=this.selectionMode&&(this._clearCells(),this._selHdl.selectionMode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this._selHdl.selection.clone()},set:function(t){this._selHdl.selection=t},enumerable:!0,configurable:!0}),e.prototype.select=function(t,e){void 0===e&&(e=!0),this._selHdl.select(t,e)},e.prototype.getSelectedState=function(t,e){return this.cells.getSelectedState(t,e,null)},Object.defineProperty(e.prototype,"selectedRows",{get:function(){var t=[];if(this.selectionMode==D.ListBox)for(n=0;n<this.rows.length;n++)this.rows[n].isSelected&&t.push(this.rows[n]);else if(this.rows.length)for(var e=this.selection,n=e.topRow;n>-1&&n<=e.bottomRow;n++)t.push(this.rows[n]);return t},set:function(t){var e=this;a.assert(this.selectionMode==D.ListBox,"This property can be set only in ListBox mode."),t=a.asArray(t),this.deferUpdate(function(){for(var n=0,i=!0;n<e.rows.length;n++){var o=e.rows[n],r=t&&t.indexOf(o)>-1;r&&i&&(i=!1,e.select(n,e.selection.col)),o.isSelected=r}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItems",{get:function(){for(var t=this.selectedRows,e=0;e<t.length;e++)t[e]=t[e].dataItem;return t},set:function(t){var e=this;a.assert(this.selectionMode==D.ListBox,"This property can be set only in ListBox mode."),t=a.asArray(t),this.deferUpdate(function(){for(var n=0,i=!0;n<e.rows.length;n++){var o=e.rows[n],r=t&&t.indexOf(o.dataItem)>-1;r&&i&&(i=!1,e.select(n,e.selection.col)),o.isSelected=r}})},enumerable:!0,configurable:!0}),e.prototype.scrollIntoView=function(t,e,n){null==this._maxOffsetY&&this._updateLayout();var i=this.scrollPosition,o=this._szClient.width,r=this._szClient.height-this._gpCFtr.rows.getTotalSize(),s=this.cells._getFrozenPos();if((t=a.asInt(t))>-1&&t<this._rows.length&&t>=this._rows.frozen){var l=this._rows[t],h=this.cells.height>r?Math.round(l.pos/(this.cells.height-r)*100)/100:0,u=Math.round(this._maxOffsetY*h),c=l.pos-u,d=c+l.renderSize;d>r-i.y&&(i.y=Math.max(-c,r-d)),c-s.y<-i.y&&(i.y=-(c-s.y))}if((e=a.asInt(e))>-1&&e<this._cols.length&&e>=this._cols.frozen){var p=this._cols[e],f=p.pos+p.renderSize;f>-i.x+o&&(i.x=Math.max(-p.pos,o-f)),p.pos-s.x<-i.x&&(i.x=-(p.pos-s.x))}return!i.equals(this._ptScrl)&&(this.scrollPosition=i,n&&(this._updateScrollPosition(),this.refresh()),!0)},e.prototype.isRangeValid=function(t){return t.isValid&&t.bottomRow<this.rows.length&&t.rightCol<this.columns.length},e.prototype.startEditing=function(t,e,n,i){return void 0===t&&(t=!0),this._edtHdl.startEditing(t,e,n,i)},e.prototype.finishEditing=function(t){return this._edtHdl.finishEditing(t)},Object.defineProperty(e.prototype,"activeEditor",{get:function(){return this._edtHdl.activeEditor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editRange",{get:function(){return this._edtHdl.editRange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergeManager",{get:function(){return this._mrgMgr},set:function(t){t!=this._mrgMgr&&(this._mrgMgr=a.asType(t,I,!0),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.getMergedRange=function(t,e,n,i){return void 0===i&&(i=!0),this._mrgMgr?this._mrgMgr.getMergedRange(t,e,n,i):null},Object.defineProperty(e.prototype,"keyActionTab",{get:function(){return this._keyHdl._kaTab},set:function(t){this._keyHdl._kaTab=a.asEnum(t,R)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyActionEnter",{get:function(){return this._keyHdl._kaEnter},set:function(t){this._keyHdl._kaEnter=a.asEnum(t,R)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showDropDown",{get:function(){return this._shDropDown},set:function(t){t!=this._shDropDown&&(this._shDropDown=a.asBoolean(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.toggleDropDownList=function(){this._tglDropDown||(this._tglDropDown=!0,this._edtHdl._toggleListBox(null),this._tglDropDown=!1)},e.prototype.onItemsSourceChanging=function(t){return this.itemsSourceChanging.raise(this,t),!t.cancel},e.prototype.onItemsSourceChanged=function(t){this.itemsSourceChanged.raise(this,t)},e.prototype.onScrollPositionChanged=function(t){this.scrollPositionChanged.raise(this,t)},e.prototype.onSelectionChanging=function(t){return this.selectionChanging.raise(this,t),!t.cancel},e.prototype.onSelectionChanged=function(t){this.selectionChanged.raise(this,t)},e.prototype.onLoadingRows=function(t){return this.loadingRows.raise(this,t),!t.cancel},e.prototype.onLoadedRows=function(t){this.loadedRows.raise(this,t)},e.prototype.onUpdatingLayout=function(t){return this.updatingLayout.raise(this,t),!t.cancel},e.prototype.onUpdatedLayout=function(t){this.updatedLayout.raise(this,t)},e.prototype.onResizingColumn=function(t){return this.resizingColumn.raise(this,t),!t.cancel},e.prototype.onResizedColumn=function(t){this.resizedColumn.raise(this,t)},e.prototype.onAutoSizingColumn=function(t){return this.autoSizingColumn.raise(this,t),!t.cancel},e.prototype.onAutoSizedColumn=function(t){this.autoSizedColumn.raise(this,t)},e.prototype.onDraggingColumn=function(t){return this.draggingColumn.raise(this,t),!t.cancel},e.prototype.onDraggingColumnOver=function(t){return this.draggingColumnOver.raise(this,t),!t.cancel},e.prototype.onDraggedColumn=function(t){this.draggedColumn.raise(this,t)},e.prototype.onResizingRow=function(t){return this.resizingRow.raise(this,t),!t.cancel},e.prototype.onResizedRow=function(t){this.resizedRow.raise(this,t)},e.prototype.onAutoSizingRow=function(t){return this.autoSizingRow.raise(this,t),!t.cancel},e.prototype.onAutoSizedRow=function(t){this.autoSizedRow.raise(this,t)},e.prototype.onDraggingRow=function(t){return this.draggingRow.raise(this,t),!t.cancel},e.prototype.onDraggingRowOver=function(t){return this.draggingRowOver.raise(this,t),!t.cancel},e.prototype.onDraggedRow=function(t){this.draggedRow.raise(this,t)},e.prototype.onGroupCollapsedChanging=function(t){return this.groupCollapsedChanging.raise(this,t),!t.cancel},e.prototype.onGroupCollapsedChanged=function(t){this.groupCollapsedChanged.raise(this,t)},e.prototype.onSortingColumn=function(t){return this.sortingColumn.raise(this,t),!t.cancel},e.prototype.onSortedColumn=function(t){this.sortedColumn.raise(this,t)},e.prototype.onBeginningEdit=function(t){return this.beginningEdit.raise(this,t),!t.cancel},e.prototype.onPrepareCellForEdit=function(t){this.prepareCellForEdit.raise(this,t)},e.prototype.onCellEditEnding=function(t){return this.cellEditEnding.raise(this,t),!t.cancel&&!t.stayInEditMode},e.prototype.onCellEditEnded=function(t){this.cellEditEnded.raise(this,t)},e.prototype.onRowEditStarting=function(t){this.rowEditStarting.raise(this,t)},e.prototype.onRowEditStarted=function(t){this.rowEditStarted.raise(this,t)},e.prototype.onRowEditEnding=function(t){this.rowEditEnding.raise(this,t)},e.prototype.onRowEditEnded=function(t){this.rowEditEnded.raise(this,t)},e.prototype.onRowAdded=function(t){return this.rowAdded.raise(this,t),!t.cancel},e.prototype.onDeletingRow=function(t){return this.deletingRow.raise(this,t),!t.cancel},e.prototype.onDeletedRow=function(t){this.deletedRow.raise(this,t)},e.prototype.onCopying=function(t){return this.copying.raise(this,t),!t.cancel},e.prototype.onCopied=function(t){this.copied.raise(this,t)},e.prototype.onPasting=function(t){return this.pasting.raise(this,t),!t.cancel},e.prototype.onPasted=function(t){this.pasted.raise(this,t)},e.prototype.onPastingCell=function(t){return this.pastingCell.raise(this,t),!t.cancel},e.prototype.onPastedCell=function(t){this.pastedCell.raise(this,t)},e.prototype.onFormatItem=function(t){this.formatItem.raise(this,t)},e.prototype.onUpdatingView=function(t){return this.updatingView.raise(this,t),!t.cancel},e.prototype.onUpdatedView=function(t){this.updatedView.raise(this,t)},e.prototype._getShowErrors=function(){return this.showErrors&&this._hasValidation},e.prototype._getHasValidation=function(){return this._hasValidation},e.prototype._getError=function(t,e,n){if(a.isFunction(this.itemValidator)){if(t==this.cells)return this.itemValidator(e,n);if(t==this.rowHeaders)for(n=0;n<this.columns.length;n++)if(u=this.itemValidator(e,n))return u}var i=this._cv,o=i?i.getError:null;if(a.isFunction(o)){var r=t.rows,s=this.columns,l=r[e].dataItem;if(l)for(;e<r.length&&r[e].dataItem==l;e++){if(t==this.cells)return o(l,(h=this._getBindingColumn(this.cells,e,s[n])).binding);if(t==this.rowHeaders)for(n=0;n<s.length;n++){var h=this._getBindingColumn(this.cells,e,s[n]),u=o(l,h.binding);if(u)return u}}}return null},e.prototype._setAria=function(t,e){a.setAttribute(this.cells.hostElement,"aria-"+t,e)},e.prototype._setFocus=function(t){if(this.hostElement&&(t||!this.containsFocus())){var e=a.getActiveElement(),n=this.activeEditor,i=this._activeCell,o=this._eFocus,r="tabindex";if(n)a.contains(n,e)||(n.focus(),o.removeAttribute(r));else if(i){if(!a.contains(i,e)&&e!=this._root){var s=!1;if(a.isIE()){var l=i.getBoundingClientRect(),h=this._root.getBoundingClientRect();l.right>h.right&&(this._setFocusNoScroll(i),s=!0)}s||i.focus(),o.removeAttribute(r)}}else a.contains(o,e)||(o.tabIndex=this._tabIndex,o.focus());this.containsFocus()||(o.tabIndex=this._tabIndex,o.focus())}},e.prototype._setFocusNoScroll=function(t){if(t.tabIndex=this._tabIndex,a.supportsFocusOptions())t.focus({preventScroll:!0});else{var e=this.scrollPosition,n=t.style,i=n.position;n.position="fixed",t.focus(),n.position=i,this.scrollPosition=e}this._fixScroll()},e.prototype._getDefaultRowHeight=function(){var t=this.hostElement,e=document.body,n=null;if(e&&!a.contains(e,t)){for(var i=t;i;i=i.parentElement)n=i;n&&e.appendChild(n)}var o=this._eFocus.scrollHeight+2;return(o<=6||isNaN(o))&&(o=28),n&&a.removeChild(n),o},e.prototype._getDefaultCellPadding=function(){var t=getComputedStyle(this._eFocus);return parseInt(this.rightToLeft?t.paddingRight:t.paddingLeft)},e.prototype._getCollectionView=function(t){return a.asCollectionView(t)},e.prototype._getCanvasContext=function(){var t=document.createElement("canvas").getContext("2d"),e=getComputedStyle(this.hostElement);return t.font=e.fontSize+" "+e.fontFamily.split(",")[0],t},e.prototype._getWidestRow=function(t,e,n,i){for(var o=0,r=0,s=t.columns[n].dataType==a.DataType.Boolean,l=e.row;l<=e.row2;l++)if(t.rows[l].isVisible){var h=t.getCellData(l,n,!0),u=i.measureText(h).width;if(u>r&&(r=u,o=l),s)break}return o},e.prototype._getDesiredWidth=function(t,e,n,i){var o=this.getMergedRange(t,e,n),r=i.style;return this.cellFactory.updateCell(t,e,n,i,o),r.width=r.top=r.left="",i.offsetWidth/(o&&o.columnSpan>1?o.columnSpan:1)},e.prototype._getDesiredHeight=function(t,e,n,i){var o=this.getMergedRange(t,e,n),r=i.style;return this.cellFactory.updateCell(t,e,n,i,o),r.height=r.top=r.left="",i.offsetHeight/(o&&o.rowSpan>1?o.rowSpan:1)},e.prototype._getSortRowIndex=function(){return null!=this._sortRowIndex?this._sortRowIndex:this.columnHeaders.rows.length-1},e.prototype._sortConverter=function(t,e,n,i){var o;if(i){if(this._mappedColumns=null,this._cv)for(var r=this._cv.sortDescriptions,s=0;s<r.length;s++)(o=this.getColumn(r[s].property))&&o.dataMap&&(this._mappedColumns||(this._mappedColumns={}),this._mappedColumns[o.binding]=o.dataMap);this._mouseHdl._htDown&&this._mouseHdl._htDown.col>-1&&(o=this.columns[this._mouseHdl._htDown.col],this._mappedColumns&&o.dataMap&&(this._mappedColumns[o.binding]=o.dataMap))}if(this._mappedColumns){var a=this._mappedColumns[t.property];a&&a.sortByDisplayValues&&(n=a.getDisplayValue(n))}return n},e.prototype._bindGrid=function(t){var e=this;if(this.deferUpdate(function(){0==e._lastCount&&a.hasItems(e._cv)&&(t=!0);var n,i,o=e.selectionMode==D.ListBox;if(e.preserveSelectedState&&o&&!e.childItemsPath&&(n=e.selectedItems),e.preserveOutlineState&&a.isFunction(window.Map)&&e.rows.maxGroupLevel>-1)for(i=new Map,c=0;c<e.rows.length;c++){var r=e.rows[c];if(r instanceof w&&r.isCollapsed&&r.dataItem){var s=r.dataItem;s instanceof a.CollectionViewGroup&&(s=s._path),i.set(s,!0)}}t&&e.columns.deferUpdate(function(){e._bindColumns()});var l=new a.CancelEventArgs;e.onLoadingRows(l)&&(e.rows.deferUpdate(function(){e._bindRows()}),e.onLoadedRows(l));var h=0;if(n&&n.length)for(c=0;c<e.rows.length&&h<n.length;c++)n.indexOf(e.rows[c].dataItem)>-1&&(e.rows[c].isSelected=!0,h++);if(o&&0==h&&e._lastCount>0)for(var u=e.selection,c=u.topRow;c<=u.bottomRow&&c>-1&&c<e.rows.length;c++)e.rows[c].isSelected=!0;i&&e.rows.deferUpdate(function(){for(var t=0;t<e.rows.length;t++){var n=e.rows[t];if(n instanceof w){var o=n.dataItem;o instanceof a.CollectionViewGroup&&(o=o._path),i.get(o)&&(n.isCollapsed=!0)}}}),!e._lastCount&&e._cv&&e._cv.items&&(e._lastCount=e._cv.items.length)}),!this.rows.length){var n=this._selHdl.selection;n.row=n.row2=-1}this._cv&&this._syncSelection(t)},e.prototype._cvCollectionChanged=function(t,e){if(this.autoGenerateColumns&&0==this.columns.length)this._bindGrid(!0);else if(this.childItemsPath&&e.action!=a.NotifyCollectionChangedAction.Change)this._bindGrid(!1);else{switch(e.action){case a.NotifyCollectionChangedAction.Change:return void this.invalidate();case a.NotifyCollectionChangedAction.Add:if(e.index==this._cv.items.length-1){var n=this.rows.length;return this.rows[n-1]instanceof H&&n--,void this.rows.insert(n,new b(e.item))}a.assert(!1,"added item should be the last one.");break;case a.NotifyCollectionChangedAction.Remove:var i=this._findRow(e.item);if(i>-1)return this.rows.removeAt(i),void this._syncSelection(!1);a.assert(!1,"removed item not found on grid.")}this._bindGrid(!1)}},e.prototype._cvCurrentChanged=function(t,e){this._syncSelection(!1)},e.prototype._syncSelection=function(t){if(this._cv&&this.selectionMode!=D.None){var e=this.selection,n=e.row>-1&&e.row<this.rows.length?this.rows[e.row].dataItem:null;if(n instanceof a.CollectionViewGroup&&(n=null),(n!=this._cv.currentItem||t)&&(!this.childItemsPath||!this.editableCollectionView||!this.editableCollectionView.currentAddItem)){var i=this._getRowIndex(this._cv.currentPosition);i==e.row&&this.childItemsPath||(e.row=e.row2=i,this.select(e,!1),this.selectionMode&&this.scrollIntoView(e.row,-1))}}},e.prototype._getRowIndex=function(t){if(this._cv){if(t>-1){for(var e=this._cv.items[t];t<this.rows.length;t++)if(this.rows[t].dataItem===e)return t;return-1}if(1==this.rows.length&&this.rows[0]instanceof H)return 0;var n=this.selection.row,i=n>-1?this.rows[n]:null;return i&&(i instanceof w||null==i.dataItem)?n:-1}return this.selection.row},e.prototype._getCvIndex=function(t){if(this._cv&&t>-1&&t<this.rows.length){var e=this._cv.items,n=this.rows[t].dataItem;for(t=Math.min(t,e.length-1);t>-1;t--)if(e[t]===n)return t}return-1},e.prototype._findRow=function(t){for(var e=0;e<this.rows.length;e++)if(this.rows[e].dataItem==t)return e;return-1},e.prototype._updateLayout=function(){var t=new a.CancelEventArgs;if(this.onUpdatingLayout(t)){this._hasValidation=a.isFunction(this._itemValidator)||this._cv&&a.isFunction(this._cv.getError);var n=this._hdrVis&r.Row?this._hdrCols.getTotalSize():0,i=this._hdrVis&r.Column?this._hdrRows.getTotalSize():0,o=this._ftrRows.getTotalSize(),s=this._rows.getTotalSize()+o;s<1&&(s=1),this._heightBrowser=Math.min(s,e._getMaxSupportedCssHeight()),this._maxOffsetY=Math.max(0,s-this._heightBrowser),this._cellPadding=this._getDefaultCellPadding();var l=this._heightBrowser+i-o,h=this._gpCells.width,u=this._heightBrowser;!h&&this.rows.length&&(h=.1),!u&&this.columns.length&&(u=.1),this.rightToLeft?(a.setCss(this._eTL,{right:0,top:0,width:n,height:i}),a.setCss(this._eCHdr,{right:n,top:0,height:i}),a.setCss(this._eRHdr,{right:0,top:i,width:n}),a.setCss(this._eCt,{right:n,top:i,width:h,height:u}),a.setCss(this._fCt,{right:n,top:i}),a.setCss(this._eBL,{right:0,top:l,width:n,height:o}),a.setCss(this._eCFtr,{right:n,top:l,height:o})):(a.setCss(this._eTL,{left:0,top:0,width:n,height:i}),a.setCss(this._eCHdr,{left:n,top:0,height:i}),a.setCss(this._eRHdr,{left:0,top:i,width:n}),a.setCss(this._eCt,{left:n,top:i,width:h,height:u}),a.setCss(this._fCt,{left:n,top:i}),a.setCss(this._eBL,{left:0,top:l,width:n,height:o}),a.setCss(this._eCFtr,{left:n,top:l,height:o})),this._stickyHdr&&this._updateStickyHeaders(),a.setCss([this._eTL,this._eBL,this._eCHdr,this._eCFtr,this._eRHdr,this._eMarquee],{zIndex:this.frozenRows||this.frozenColumns?"3":""});var c=this._root,d=c.offsetWidth-c.clientWidth,p=c.offsetHeight-c.clientHeight;a.setCss(this._eSz,{width:n+d+this._gpCells.width,height:i+p+this._heightBrowser});var f=null;this.columns._updateStarSizes(c.clientWidth-n)&&(f=c.clientWidth,a.setCss(this._eCt,{width:this._gpCells.width})),this._szClient=new a.Size(c.clientWidth-n,c.clientHeight-i),this._rcBounds=null,this._updateScrollHandler(),this._updateContent(!1),a.setCss(this._eSz,{width:n+(d=c.offsetWidth-c.clientWidth)+this._gpCells.width,height:i+(p=c.offsetHeight-c.clientHeight)+this._heightBrowser}),this._szClient=new a.Size(c.clientWidth-n,c.clientHeight-i),f&&f!=c.clientWidth&&this.columns._updateStarSizes(c.clientWidth-n)&&(a.setCss(this._eCt,{width:this._gpCells.width}),this._updateContent(!1)),a.setCss([this._eCHdr,this._eCFtr,this._fCt],{width:this._szClient.width}),a.setCss([this._eRHdr,this._fCt],{height:this._szClient.height}),o&&(l=Math.min(l,this._szClient.height+i-o),a.setCss([this._eBL,this._eCFtr],{top:l})),this.onUpdatedLayout(t)}},e.prototype._updateStickyHeaders=function(){var t=!1,n=0;if(this._stickyHdr){for(var i=0,o=null,r=this.hostElement;r;r=r.parentElement){var s=r.getBoundingClientRect();null==o&&(o=s.top),i=Math.max(i,s.top)}n=-(o=Math.max(0,i-o-1)),t=o>0,this._rcBounds=null}this._eTL.style.top=this._eCHdr.style.top=t?-n+"px":"",a.toggleClass(this._eTL,e._WJS_STICKY,t),a.toggleClass(this._eCHdr,e._WJS_STICKY,t)},e.prototype._updateScrollHandler=function(){this._clipToScreen=this._getClipToScreen();var t=this._stickyHdr||this._clipToScreen;t!=this._scrollHandlerAttached&&(this._scrollHandlerAttached=t,t?this.addEventListener(window,"scroll",this._bndScroll,!0):this.removeEventListener(window,"scroll",this._bndScroll,!0))},e.prototype._getClipToScreen=function(){if(this.rows.length<=e._MIN_VIRT_ROWS)return!1;if(this._root.clientHeight!=this._root.scrollHeight)return!1;for(var t=this.hostElement;t&&t!=document.documentElement;t=t.parentElement)if("auto"==getComputedStyle(t).overflow)return!1;return!0},e.prototype._scroll=function(t){var e=this;a.contains(t.target,this.hostElement)&&(this._clipToScreen&&(this._afScrl&&cancelAnimationFrame(this._afScrl),this._afScrl=requestAnimationFrame(function(){e._afScrl=null,e.finishEditing(),e._updateContent(!0)})),this._stickyHdr&&(this._afSticky&&cancelAnimationFrame(this._afSticky),this._afSticky=requestAnimationFrame(function(){e._afSticky=null;var t=new a.CancelEventArgs;e.onUpdatingLayout(t)&&(e._updateStickyHeaders(),e.onUpdatedLayout(t))})))},e.prototype._updateScrollPosition=function(){var t=this._root,n=t.scrollTop,i=t.scrollLeft;this.rightToLeft&&"rev"==e._getRtlMode()&&(i=t.scrollWidth-t.clientWidth-i);var o=new a.Point(-Math.abs(i),-n);return!this._ptScrl.equals(o)&&(this._ptScrl=o,this.onScrollPositionChanged(),!0)},e.prototype._updateContent=function(t,e){var n=this._root,i=this.hostElement,o=this.cells.hostElement,s=a.getActiveElement(),l=a.contains(i,s)?s:null,h=this._activeCell,u=new a.CancelEventArgs;if(this.onUpdatingView(u)){if(a.setAttribute(o,"role",this.rows.maxGroupLevel<0?"grid":"treegrid"),this._offsetY=0,this._heightBrowser>this._szClient.height){var c=Math.round(-this._ptScrl.y/(this._heightBrowser-this._szClient.height)*100)/100;this._offsetY=Math.round(this._maxOffsetY*c)}this._updateScrollPosition();var d=this._gpCells._updateContent(t,e,this._offsetY);if(this._hdrVis&r.Column&&(!e||this._ssHdr&r.Column)&&this._gpCHdr._updateContent(t,e,0),this._hdrVis&r.Row&&(!e||this._ssHdr&r.Row)&&this._gpRHdr._updateContent(t,e,this._offsetY),this._hdrVis&&!e&&this._gpTL._updateContent(t,e,0),this._gpCFtr.rows.length&&(this._gpBL._updateContent(t,e,0),this._gpCFtr._updateContent(t,e,0)),this.showMarquee){var p=this._selHdl.selection,f=this._eMarquee;if(this.isRangeValid(p)){var g=this._getMarqueeRect(p),_=f.firstChild,m=f.offsetWidth-_.offsetWidth,v=f.offsetHeight-_.offsetHeight;a.setCss(f,{left:g.left+o.offsetLeft-m/2,top:g.top+o.offsetTop-v/2,width:g.width+m,height:g.height+v,visibility:g.width>0&&g.height>0?"":"collapse"})}else a.setCss(f,{left:0,top:0,width:0,height:0,visibility:"collapse"})}this._useFrozenDiv()&&(this._updateFrozenCells(e),d&&a.hasClass(d,"wj-frozen")&&(d=null)),this._activeCell=d,l&&(l!=n&&l!=this._eFocus&&a.contains(i,l)&&!a.contains(o,l)?(a.getActiveElement()!=l&&l.focus(),a.isIE()&&l instanceof HTMLInputElement&&!l.type.match(/checkbox|radio|range/i)&&l.setSelectionRange(l.selectionStart,l.selectionEnd)):this._setFocus(d!=h)),!l&&d&&(d.tabIndex=this._tabIndex),h&&h!=d&&h.removeAttribute("tabindex"),this._fixScroll(),this._rcBounds=null,this.onUpdatedView(u)}},e.prototype._fixScroll=function(){[this.hostElement,this._root?this._root.parentElement:null].forEach(function(t){t&&t.scrollTop&&(t.scrollTop=0)})},e.prototype._clearCells=function(){for(var t in this)if("_"==t[0]){var e=this[t];e instanceof f&&e._clearCells()}this.invalidate()},e.prototype._useFrozenDiv=function(){return a.isBoolean(this._fzClone)?this._fzClone:a.isIE()||a.isFirefox()||a.isSafari()||a.isMobile()},e.prototype._updateFrozenCells=function(t){if(this.frozenRows||this.frozenColumns){var e=this._eCt.querySelectorAll(".wj-frozen");if(t&&this._fCt.children.length==e.length){for(n=0;n<e.length;n++)this._fCt.children[n].className=e[n].className;return}if(a.setText(this._fCt,null),!this.activeEditor)for(var n=0;n<e.length;n++){var i=e[n].cloneNode(!0);i.style.pointerEvents="auto",this._fCt.appendChild(i)}}else a.setText(this._fCt,null)},e.prototype._getMarqueeRect=function(t){var e=this.getMergedRange(this.cells,t.topRow,t.leftCol)||new m(t.topRow,t.leftCol),n=this.getMergedRange(this.cells,t.bottomRow,t.rightCol)||new m(t.bottomRow,t.rightCol),i=this.cells.getCellBoundingRect(e.topRow,e.leftCol,!0),o=this.cells.getCellBoundingRect(n.bottomRow,n.rightCol,!0);if(this.rows.frozen){var r=Math.min(this.rows.length,this.rows.frozen),s=this.cells.getCellBoundingRect(r-1,0,!0);t.topRow>=r&&i.top<s.bottom&&(i.top=s.bottom),t.bottomRow>=r&&o.bottom<s.bottom&&(o.height=s.bottom-o.top)}if(this.columns.frozen){var l=Math.min(this.columns.length,this.columns.frozen);s=this.cells.getCellBoundingRect(0,l-1,!0),this.rightToLeft?(t.leftCol>=l&&i.right>s.left&&(i.left=s.left-i.width),t.rightCol>=l&&o.left>s.left&&(o.left=s.left)):(t.leftCol>=l&&i.left<s.right&&(i.left=s.right),t.rightCol>=l&&o.right<s.right&&(o.width=s.right-o.left))}return this.rightToLeft?new a.Rect(o.left,i.top,i.right-o.left,o.bottom-i.top):new a.Rect(i.left,i.top,o.right-i.left,o.bottom-i.top)},e.prototype._bindColumns=function(){for(var t=0;t<this.columns.length;t++)(l=this.columns[t])._getFlag(_.AutoGenerated)&&(this.columns.removeAt(t),t--);var e=this._cv,n=e?e.sourceCollection:null,i=n&&n.length?n[0]:null;if(i&&this.autoGenerateColumns)for(var o in i)for(var r=null,s=0;s<n.length&&s<1e3&&null==r;s++)if(a.isPrimitive(r=n[s][o])){var l=new y;l._setFlag(_.AutoGenerated,!0),l.binding=l.name=o,l.header=a.toHeaderCase(o),l.dataType=a.getType(r),l.dataType==a.DataType.Number&&(l.width=80);var h=Object.getOwnPropertyDescriptor(i,o);!h||h.writable||a.isFunction(h.set)||l._setFlag(_.ReadOnly,!0),this.columns.push(l)}this._updateColumnTypes()},e.prototype._updateColumnTypes=function(){var t=this._cv;if(a.hasItems(t))for(var e=t.items[0],n=this.columns,i=0;i<n.length;i++){var o=n[i];null==o.dataType&&o._binding&&(o.dataType=a.getType(o._binding.getValue(e)))}},e.prototype._getBindingColumn=function(t,e,n){return n},e.prototype._getRowHeaderPath=function(){return this._rowHdrPath},e.prototype._bindRows=function(){this.rows.clear();var t=this._cv;if(t&&t.items){var e=t.items,n=t.groups;if(this.childItemsPath)for(i=0;i<e.length;i++)this._addNode(e,i,0);else if(null!=n&&n.length>0&&this.showGroups)for(i=0;i<n.length;i++)this._addGroup(n[i]);else for(var i=0;i<e.length;i++)this._addBoundRow(e,i)}},e.prototype._addBoundRow=function(t,e){this.rows.push(new b(t[e]))},e.prototype._addNode=function(t,e,n){var i=new w,o=this.childItemsPath,r=a.isArray(o)?o[n]:o,s=t[e],l=s[r];if(i.dataItem=s,i.level=n,this.rows.push(i),a.isArray(l))for(var h=0;h<l.length;h++)this._addNode(l,h,n+1)},e.prototype._addGroup=function(t){var e=new w;if(e.level=t.level,e.dataItem=t,this.rows.push(e),t.isBottomLevel)for(var n=t.items,i=0;i<n.length;i++)this._addBoundRow(n,i);else for(i=0;i<t.groups.length;i++)this._addGroup(t.groups[i])},e._getSerializableProperties=function(t){var e=[];for(t=t.prototype;t!=Object.prototype;t=Object.getPrototypeOf(t))for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i],r=Object.getOwnPropertyDescriptor(t,o);r&&r.set&&r.get&&"_"!=o[0]&&!o.match(/disabled|required/)&&e.push(o)}return e},e.prototype._copy=function(t,e){if("columns"==t){this.columns.clear();for(var n=a.asArray(e),i=0;i<n.length;i++){var o=new y;a.copy(o,n[i]),this.columns.push(o)}return!0}return!1},e.prototype._isInputElement=function(t){if(t instanceof HTMLElement){if("true"==t.contentEditable)return!0;var e=t.tagName.match(/^(BUTTON|A|INPUT|TEXTAREA|SELECT|OPTION)$/i);return e&&e.length>0}return!1},e.prototype._wantsInput=function(t){return this._isInputElement(t)&&!this.activeEditor&&!this._edtHdl._isNativeCheckbox(t)&&!a.hasClass(t,"wj-grid-ime")&&a.contains(document.body,t)},e._getMaxSupportedCssHeight=function(){if(!e._maxCssHeight){var t=335e5;a.isIE()?t=15e5:a.isFirefox()&&(t=175e5),e._maxCssHeight=t}return e._maxCssHeight},e._getRtlMode=function(){if(!e._rtlMode){var t=a.createElement('<div dir="rtl" style="visibility:hidden;width:100px;height:100px;overflow:auto"><div style="width:2000px;height:2000px"></div></div>');document.body.appendChild(t);var n=t.scrollLeft;t.scrollLeft=-1e3;var i=t.scrollLeft;a.removeChild(t),e._rtlMode=i<0?"neg":n>0?"rev":"std"}return e._rtlMode},e._WJS_STICKY="wj-state-sticky",e._WJS_MEASURE="wj-state-measuring",e._WJS_UPDATING="wj-state-updating",e._MIN_VIRT_ROWS=200,e.controlTemplate='<div style="position:relative;width:100%;height:100%;overflow:hidden;max-width:inherit;max-height:inherit"><div wj-part="focus" aria-hidden="true" class="wj-cell" style="position:fixed;opacity:0;pointer-events:none;left:-10px;top:-10px">0</div><div wj-part="root" style="position:absolute;width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch;max-width:inherit;max-height:inherit"><div wj-part="cells" class="wj-cells" style="position:absolute"></div><div wj-part="marquee" aria-hidden="true" class="wj-marquee" style="display:none;pointer-events:none;"><div style="width:100%;height:100%"></div></div></div><div wj-part="fcells" aria-hidden="true" class="wj-cells" style="position:absolute;pointer-events:none;overflow:hidden"></div><div wj-part="rh" aria-hidden="true" style="position:absolute;overflow:hidden;outline:none"><div wj-part="rhcells" class="wj-rowheaders" style="position:relative"></div></div><div wj-part="cf" aria-hidden="true" style="position:absolute;overflow:hidden;outline:none"><div wj-part="cfcells" class="wj-colfooters" style="position:relative"></div></div><div wj-part="ch" aria-hidden="true" style="position:absolute;overflow:hidden;outline:none"><div wj-part="chcells" class="wj-colheaders" style="position:relative"></div></div><div wj-part="bl" aria-hidden="true" style="position:absolute;overflow:hidden;outline:none"><div wj-part="blcells" class="wj-bottomleft" style="position:relative"></div></div><div wj-part="tl" aria-hidden="true" style="position:absolute;overflow:hidden;outline:none"><div wj-part="tlcells" class="wj-topleft" style="position:relative"></div></div><div wj-part="sz" aria-hidden="true" style="position:relative;visibility:hidden"></div></div>',e}(a.Control);e.FlexGrid=h;var u=function(t){function e(e,n,i){var o=t.call(this)||this;return o._p=a.asType(e,f),o._rng=a.asType(n,m),o._data=i,o}return o(e,t),Object.defineProperty(e.prototype,"panel",{get:function(){return this._p},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"range",{get:function(){return this._rng.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"row",{get:function(){return this._rng.row},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"col",{get:function(){return this._rng.col},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),e}(a.CancelEventArgs);e.CellRangeEventArgs=u;var c=function(t){function e(e,n,i){var o=t.call(this,e,n)||this;return o._cell=a.asType(i,HTMLElement),o}return o(e,t),Object.defineProperty(e.prototype,"cell",{get:function(){return this._cell},enumerable:!0,configurable:!0}),e}(u);e.FormatItemEventArgs=c;var d,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._stayInEditMode=!1,e._refresh=!0,e}return o(e,t),Object.defineProperty(e.prototype,"stayInEditMode",{get:function(){return this._stayInEditMode},set:function(t){this._stayInEditMode=a.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"refresh",{get:function(){return this._refresh},set:function(t){this._refresh=a.asBoolean(t)},enumerable:!0,configurable:!0}),e}(u);e.CellEditEndingEventArgs=p,function(t){t[t.None=0]="None",t[t.Cell=1]="Cell",t[t.ColumnHeader=2]="ColumnHeader",t[t.RowHeader=3]="RowHeader",t[t.TopLeft=4]="TopLeft",t[t.ColumnFooter=5]="ColumnFooter",t[t.BottomLeft=6]="BottomLeft"}(d=e.CellType||(e.CellType={}));var f=function(){function t(t,e,n,i,o){this._offsetY=0,this._g=a.asType(t,h),this._ct=a.asInt(e),this._rows=a.asType(n,j),this._cols=a.asType(i,x),this._e=a.asType(o,HTMLElement),this._vrb=new m}return Object.defineProperty(t.prototype,"grid",{get:function(){return this._g},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellType",{get:function(){return this._ct},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewRange",{get:function(){return this._getViewRange()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._cols.getTotalSize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._rows.getTotalSize()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this._cols},enumerable:!0,configurable:!0}),t.prototype.getCellData=function(t,e,n){var i,o=this._rows[a.asNumber(t,!1,!0)],r=null;if(a.isString(e)&&(e=this._cols.indexOf(e))<0)throw"Invalid column name or binding.";i=this._cols[a.asNumber(e,!1,!0)];var s=this._g?this._g._getBindingColumn(this,t,i):i;if(!s.binding||!o.dataItem||o.dataItem instanceof a.CollectionViewGroup?o._ubv&&(r=o._ubv[i._hash]):r=s._binding.getValue(o.dataItem),null==r)switch(this._ct){case d.ColumnHeader:t!=this._rows.length-1&&s==i||(r=s.header);break;case d.ColumnFooter:if(s.aggregate!=a.Aggregate.None&&o instanceof w){var l=this._g.collectionView;if(l){var h=a.tryCast(l,a.CollectionView);r=h?h.getAggregate(s.aggregate,s.binding):a.getAggregate(s.aggregate,l.items,s.binding)}}break;case d.Cell:if(s.aggregate!=a.Aggregate.None&&o instanceof w){var u=a.tryCast(o.dataItem,a.CollectionViewGroup);u&&(r=u.getAggregate(s.aggregate,s.binding,this._g.collectionView))}}return n&&(this.cellType==d.Cell&&s.dataMap&&(r=s.dataMap.getDisplayValue(r)),r=null!=r?a.Globalize.format(r,s.format):""),r},t.prototype.setCellData=function(t,e,n,i,o){void 0===i&&(i=!0),void 0===o&&(o=!0);var r,s=this._rows[a.asNumber(t,!1,!0)];if(a.isString(e)&&(e=this._cols.indexOf(e))<0)throw"Invalid column name or binding.";r=this._cols[a.asNumber(e,!1,!0)];var l=this._g?this._g._getBindingColumn(this,t,r):r;if(this._ct==d.Cell){if(l.dataMap&&null!=n&&(l.isRequired||""!=n)){var h=l.dataMap,u=h.getKeyValue(n);if(null==u&&null==h.getDisplayValue(null)){if(null==h.getDisplayValue(n)&&(!h.isEditable||h.displayMemberPath!=h.selectedValuePath))return!1}else n=u}var c=a.DataType.Object;if(l.dataType)c=l.dataType;else{var p=this.getCellData(t,e,!1);c=a.getType(p)}if(a.isBoolean(l.isRequired))if(l.isRequired||""!==n&&null!==n){if(l.isRequired&&(""===n||null===n))return!1}else n=null,i=!1;if(i&&(n=a.changeType(n,c,l.format),c!=a.DataType.Object&&a.getType(n)!=c))return!1}if(s.dataItem&&l.binding){var f=l._binding,g=s.dataItem,_=f.getValue(g);if(n!==_&&!a.DateTime.equals(n,_)){f.setValue(g,n);var m=this._g.collectionView;if(m instanceof a.CollectionView&&g!=m.currentEditItem){var v=new a.NotifyCollectionChangedEventArgs(a.NotifyCollectionChangedAction.Change,g,m.items.indexOf(g));m.onCollectionChanged(v)}}}else s._ubv||(s._ubv={}),s._ubv[r._hash]=n;return o&&this._g&&this._g.invalidate(),!0},t.prototype.getCellBoundingRect=function(t,e,n){var i=this.rows[t],o=this.columns[e],r=new a.Rect(o.pos,i.pos,o.renderSize,i.renderSize);if(this._g.rightToLeft&&(r.left=this.hostElement.clientWidth-r.right,!a.isIE()&&!a.isFirefox())){var s=this.hostElement.parentElement;r.left-=s.offsetWidth-s.clientWidth}if(!n){var l=this.hostElement.getBoundingClientRect();r.left+=l.left,r.top+=l.top-this._offsetY}return t<this.rows.frozen&&(r.top-=this._g.scrollPosition.y),e<this.columns.frozen&&(r.left-=this._g.scrollPosition.x*(this._g.rightToLeft?-1:1)),r},t.prototype.getCellElement=function(e,n){for(var i=this.hostElement.children,o=Math.min(e+2,i.length),r=0;r<o;r++)for(var s=i[r].children,a=Math.min(n+2,s.length),l=0;l<a;l++){var h=s[l],u=h[t._INDEX_KEY];if(u&&(u.row==e&&u.col==n||u.rng&&u.rng.contains(e,n)))return h}return null},t.prototype.getSelectedState=function(t,e,n){var i=this._g,o=i.selectionMode,s=i._selHdl.selection,a=D,l=P;if(o!=a.None)switch(this._ct){case d.Cell:if(n||(n=i.getMergedRange(this,t,e)),n){if(n.contains(s.row,s.col))return i.showMarquee?l.None:l.Cursor;if(n.intersects(s))return l.Selected}if(s.row==t&&s.col==e)return i.showMarquee?l.Active:l.Cursor;if(i.rows[t].isSelected||i.columns[e].isSelected)return l.Selected;if(n)switch(o){case a.Row:case a.RowRange:case a.ListBox:if(n.containsRow(s.row))return l.Selected}return s=i._selHdl._adjustSelection(s),o==D.ListBox?l.None:s.containsRow(t)&&s.containsColumn(e)?l.Selected:l.None;case d.ColumnHeader:if(i.showSelectedHeaders&r.Column&&(i.columns[e].isSelected||s.containsColumn(e)||s.intersectsColumn(n))&&(n&&(t=n.bottomRow),t==this.rows.length-1))return l.Selected;break;case d.RowHeader:if(i.showSelectedHeaders&r.Row&&(i.rows[t].isSelected||s.containsRow(t)||s.intersectsRow(n))&&(n&&(e=n.rightCol),e==this.columns.length-1))return l.Selected}return l.None},Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._e},enumerable:!0,configurable:!0}),t.prototype._getOffsetY=function(){return this._offsetY},t.prototype._updateContent=function(t,e,n){var i=this._g,o=this._e,r=this._rows,s=this._cols,a=this._ct;if(a==d.ColumnHeader||a==d.ColumnFooter||a==d.RowHeader){var l=i._ptScrl,h=o.style;a==d.RowHeader?h.top=l.y+"px":i.rightToLeft?h.right=l.x+"px":h.left=l.x+"px"}this._offsetY!=n&&(t=!1,this._offsetY=n);var u=this._getViewRange(),c=u;if(r.length<=i.virtualizationThreshold?c=new m(0,0,r.length-1,s.length-1):c.isValid&&i.isTouching&&(c=new m(Math.max(u.row-6,r.frozen),Math.max(u.col-1,s.frozen),Math.min(u.row2+6,r.length-1),Math.min(u.col2+1,s.length-1))),t&&!e&&this._vrb.contains(u)&&!r.frozen&&!s.frozen)return this._activeCell;t&&c.equals(this._vrb)||(e=!1),t&&!e&&this._ct!=d.TopLeft&&this._reorderCells(c,this._vrb),this._activeCell=null,this._vru=u,this._vrb=c,this._cf=i.cellFactory;var p=0;for(this._ct==d.Cell&&(p=this._renderColHdrRow(c,e)),f=0;f<r.frozen&&f<r.length;f++)p=this._renderRow(f,c,e,p);for(var f=c.topRow;f<=c.bottomRow&&f>-1;f++)p=this._renderRow(f,c,e,p);for(;o.childElementCount>p;){var g=o.lastElementChild;o.removeChild(g),this._removeExtraCells(g,0)}return this._activeCell},t.prototype._updateScrollPosition=function(){var t=this._g,e=t._ptScrl,n=this.hostElement.style;this.cellType==d.RowHeader?n.top=e.y+"px":t.rightToLeft?n.right=e.x+"px":n.left=e.x+"px"},t.prototype._clearCells=function(){for(var t=this.hostElement,e=t.childElementCount-1;e>=0;e--){var n=t.children[e];t.removeChild(n);for(var i=n.childElementCount-1;i>=0;i--)this._cf.disposeCell(n.children[i])}},t.prototype._reorderCells=function(t,e){if(!(this._rows.frozen>0||this._cols.frozen>0||t.columnSpan!=e.columnSpan||t.rowSpan!=e.rowSpan)&&e.isValid&&t.isValid&&t.intersects(e)&&t.row!=e.row){var n=t.row-e.row,i=Math.max(1,t.rowSpan-1),o=this._e;if(0!=n&&Math.abs(n)<i){var r=this._ct==d.Cell?1:0,s=o.childElementCount;if(n>0){var a=r,l=Math.min(r+n,s-1);(h=this._createRange(a,l))&&l<s-1&&o.appendChild(h.extractContents())}if(n<0){l=s,a=Math.max(r,l+n);var h=this._createRange(a,l);if(h&&a>r){var u=o.children[r];o.insertBefore(h.extractContents(),u)}}}}},t.prototype._createRange=function(t,e){var n;return e>t&&e<=this._e.childElementCount&&t>-1&&((n=document.createRange()).setStart(this._e,t),n.setEnd(this._e,e)),n},t.prototype._renderColHdrRow=function(t,e){var n=this._e.children[0];n||(n=a.createElement('<div class="wj-row" tabindex="-1" role="row"></div>',this._e)),a.setAttribute(n,"aria-selected",null);var i=0,o=this._g._getRowHeaderPath();for(o&&(i=this._renderRowHdrCell(n,-1,o.path)),r=0;r<this.columns.frozen&&r<this.columns.length;r++)i=this._renderColHdrCell(n,r,t,e,i);for(var r=t.leftCol;r<=t.rightCol&&r>-1;r++)i=this._renderColHdrCell(n,r,t,e,i);return this._removeExtraCells(n,i),1},t.prototype._renderColHdrCell=function(e,n,i,o,r){var s=this.columns[n];if(s.renderSize<=0)return r;var l=e.children[r];l||(l=a.createElement('<div class="wj-cell" tabindex="-1" role="columnheader"></div>',e)),o||(l.textContent=this.columns[n].header,a.setCss(l,{position:"fixed",top:-32e3,height:.1,left:s.pos,width:s.renderWidth,overflow:"hidden",opacity:"0",pointerEvents:"none"}));var h=this.grid;if(h.allowSorting){var u="none";switch(h._getBindingColumn(this,0,s).currentSort){case"+":u="ascending";break;case"-":u="descending"}a.setAttribute(l,"aria-sort",u)}return h.isReadOnly||(a.setAttribute(l,"aria-readonly",s.isReadOnly),a.setAttribute(l,"aria-required",s.getIsRequired())),l[t._INDEX_KEY]={row:-1,col:n,panel:this},r+1},t.prototype._renderRowHdrCell=function(e,n,i){var o=e.children[0];return o||(o=a.createElement('<div class="wj-cell" tabindex="-1"></div>',e)),o.setAttribute("role",n<0?"columnheader":"rowheader"),o.textContent=i?i.toString():"",a.setCss(o,{position:"fixed",left:-32e3,top:-32e3,width:.1,height:.1,overflow:"hidden",opacity:"0"}),o[t._INDEX_KEY]={row:n,col:-1,panel:this},1},t.prototype._renderRow=function(t,e,n,i){var o=this._g,r=this.rows[t];if(r.renderSize<=0)return i;var s=this._e.children[i];if(s||(s=a.createElement('<div class="wj-row" tabindex="-1"></div>',this._e),this._ct==d.Cell&&s.setAttribute("role","row")),this._ct==d.Cell){switch(o.selectionMode){case D.Row:case D.RowRange:case D.ListBox:var l=r.isSelected||this._g._selHdl.selection.containsRow(t);a.setAttribute(s,"aria-selected",!!l)}a.setAttribute(s,"aria-level",r instanceof w?r.level+1:null),a.setAttribute(s,"aria-expanded",r instanceof w?!r.isCollapsed:null)}var h=0;if(this._ct==d.Cell){var u=this._g._getRowHeaderPath();u&&(h=this._renderRowHdrCell(s,t,u.getValue(r.dataItem)))}for(c=0;c<this.columns.frozen&&c<this.columns.length;c++)h=this._renderCell(s,t,c,e,n,h);for(var c=e.leftCol;c<=e.rightCol&&c>-1;c++)h=this._renderCell(s,t,c,e,n,h);return this._removeExtraCells(s,h),i+1},t.prototype._renderCell=function(e,n,i,o,r,s){var l=this._g,h=l.getMergedRange(this,n,i);if(h){for(u=Math.max(o.row,h.row);u<n;u++)if(this.rows[u].isVisible)return s;for(var u=Math.max(o.col,h.col);u<i;u++)if(this.columns[u].isVisible)return s}var c=this.columns[i];if(c.renderSize<=0&&(!h||h.getRenderSize(this).width<=0))return s;var p=e.children[s],f=P,g=this.getSelectedState(n,i,h),_=g==f.Cursor||g==f.Active;return p&&r?(a.toggleClass(p,"wj-state-active",_),a.toggleClass(p,"wj-state-selected",g==f.Cursor),a.toggleClass(p,"wj-state-multi-selected",g==f.Selected),_&&(this._activeCell=p),s+1):(p||((p=document.createElement("div")).tabIndex=-1,this._ct==d.Cell&&p.setAttribute("role","gridcell"),e.appendChild(p)),_&&(this._activeCell=p),l.cellFactory.updateCell(this,n,i,p,h),p[t._INDEX_KEY]={row:n,col:i,rng:h,panel:this},this._ct==d.Cell&&(a.setAttribute(p,"aria-selected",g!=f.None),a.setAttribute(p,"aria-readonly",!l.canEditCell(n,i)||null),a.setAttribute(p,"aria-required",c.getIsRequired())),s+1)},t.prototype._removeExtraCells=function(t,e){for(;t.childElementCount>e;){var n=t.lastElementChild;t.removeChild(n),this._cf.disposeCell(n)}},t.prototype._getViewRange=function(){var t=this._g,e=t._ptScrl,n=this._rows,i=this._cols,o=new m(0,0,n.length-1,i.length-1);if(this._ct==d.Cell||this._ct==d.RowHeader){var r=-e.y+this._offsetY,s=t._szClient.height;if((u=Math.min(n.frozen,n.length-1))>0&&(r+=c=n[u-1].pos,s-=c),o.row=Math.min(n.length-1,Math.max(n.frozen,n.getItemAt(r+1))),o.row2=n.getItemAt(r+s+1),t._clipToScreen){var a=t.hostElement.getBoundingClientRect();a.top<0&&(o.row=Math.max(o.row,n.getItemAt(-a.top-t._ptScrl.y)-1)),a.bottom>innerHeight&&(o.row2=Math.min(o.row2,n.getItemAt(-a.top-t._ptScrl.y+innerHeight)+1))}}if(this._ct==d.Cell||this._ct==d.ColumnHeader){var l=-e.x,h=t._szClient.width,u=Math.min(i.frozen,i.length-1);if(u>0){var c=i[u-1].pos;l+=c,h-=c}o.col=Math.min(i.length-1,Math.max(i.frozen,i.getItemAt(l+1))),o.col2=i.getItemAt(l+h+1)}return n.length<=n.frozen&&(o.row=o.row2=-1),i.length<=i.frozen&&(o.col=o.col2=-1),o},t.prototype._getFrozenPos=function(){var t=this._rows.frozen,e=this._cols.frozen,n=t>0?this._rows[t-1]:null,i=e>0?this._cols[e-1]:null;return new a.Point(i?i.pos+i.renderSize:0,n?n.pos+n.renderSize:0)},t._INDEX_KEY="wj-cell-index",t}();e.GridPanel=f;var g=function(){function t(){}return t.prototype.updateCell=function(e,n,o,r,s,l){var h=e.grid,u=h.rightToLeft,p=d,f=e.rows,g=e.columns,_=f[n],v=g[o],y=n,b=o,C=_ instanceof w?_:null,x=_ instanceof H?_:null,j=v.renderWidth,S=_.renderHeight,E=e.cellType,I="wj-cell",D={display:""};if(0!=l&&r.firstElementChild&&(1==r.childNodes.length&&"checkbox"==r.firstElementChild.type||(r.textContent="")),s&&!s.isSingleCell){y=s.row2,b=s.col2,v=g[o=s.col],C=(_=f[n=s.row])instanceof w?_:null;var M=s.getRenderSize(e);S=M.height,j=M.width}var T=h._getBindingColumn(e,n,v),R=T.dataType==a.DataType.Boolean&&!T.dataMap,A=v.pos,O=_.pos;if(h._useFrozenDiv()&&E==p.Cell&&!h.editRange?(n<f.frozen&&o>=g.frozen&&(A+=h._ptScrl.x),o<g.frozen&&n>=f.frozen&&(O+=h._ptScrl.y)):(n<f.frozen&&(O-=h._ptScrl.y),o<g.frozen&&(A-=h._ptScrl.x)),u?D.right=A+"px":D.left=A+"px",D.top=O-e._getOffsetY()+"px",D.width=j+"px",D.height=S+"px",D.zIndex="",(n<f.frozen||o<g.frozen)&&(D.zIndex=n<f.frozen&&o<g.frozen?2:1),E==p.Cell?(C&&(I+=" wj-group"),h.showAlternatingRows&&_.visibleIndex%2!=0&&(s&&s.row!=s.row2||(I+=" wj-alt")),(n<f.frozen||o<g.frozen)&&(I+=" wj-frozen"),x&&(I+=" wj-new"),_.cssClass&&(I+=" "+_.cssClass),T.cssClass&&(I+=" "+T.cssClass)):(I+=" wj-header",h.showAlternatingRows&&n%2!=0&&(I+=" wj-header-alt")),(E==p.Cell||E==p.RowHeader)&&h._getShowErrors()){var k=h._getError(e,n,o);a.setAttribute(r,"title",k),k&&(I+=" wj-state-invalid")}var L=P,F=e.getSelectedState(n,o,s);switch(F!=L.None&&E==p.Cell&&!R&&h.editRange&&h.editRange.contains(n,o)&&(F=L.None),F){case L.Active:I+=" wj-state-active";break;case L.Cursor:I+=" wj-state-selected wj-state-active";break;case L.Selected:I+=" wj-state-multi-selected"}if(y==f.frozen-1&&(I+=" wj-frozen-row"),b==g.frozen-1&&(I+=" wj-frozen-col"),(T.wordWrap||_.wordWrap)&&(I+=" wj-wrap"),(T.multiLine||_.multiLine)&&(I+=" wj-multiline"),D.textAlign=T.getAlignment(),D.textAlignLast=D.textJustify="","justify-all"==D.textAlign&&(D.textAlign=D.textAlignLast="justify",D.textJustify="distribute"),D.paddingLeft=D.paddingRight=D.paddingTop=D.paddingBottom="",E==p.Cell&&h.rows.maxGroupLevel>-1&&o==h.columns.firstVisibleIndex&&h.treeIndent){var V=C?Math.max(0,C.level):h.rows.maxGroupLevel+1,B=h.treeIndent*V+h._cellPadding;u?D.paddingRight=B+"px":D.paddingLeft=B+"px"}if(0!=l){var z=e.getCellData(n,o,!1),W=e.getCellData(n,o,!0);if(E==p.Cell&&o==h.columns.firstVisibleIndex&&C&&C.hasChildren&&!this._isEditingCell(h,n,o))W||(W=C.getGroupHeader()),r.innerHTML=this._getTreeIcon(C)+" "+W,D.textAlign="";else if(E==p.ColumnHeader&&T.currentSort&&h.showSort&&(y==h._getSortRowIndex()||T!=v))I+=" wj-sort-"+("+"==T.currentSort?"asc":"desc"),r.innerHTML=a.escapeHtml(W)+"&nbsp;"+this._getSortIcon(T);else if(E!=p.RowHeader||o!=h.rowHeaders.columns.length-1||W)if(E!=p.Cell||T.dataType!=a.DataType.Boolean||T.dataMap||C&&!a.isBoolean(z))if(E==p.Cell&&this._isEditingCell(h,n,o)){var G=T.inputType;if(T.inputType||(G=T.dataType!=a.DataType.Number||T.dataMap?"text":"tel"),!T.dataMap&&!T.mask){var Y=e.getCellData(n,o,!1);if(a.isNumber(Y)){var K=Y.toString(),X=T.format;if(X&&Y!=Math.round(Y)){var U=K.match(/\.(\d+)/)[1].length;X=X.replace(/([a-z])(\d*)(.*)/gi,"$01"+U+"$3")}W=a.Globalize.formatNumber(Y,X,!0)}}r.innerHTML=(T.multiLine||_.multiLine)&&"checkbox"!=G?"<textarea></textarea>":'<input type="'+G+'"/>';var q=r.children[0];a.addClass(q,"wj-grid-editor wj-form-control"),a.disableAutoComplete(q),q.value=W,q.required=T.getIsRequired(),T.maxLength&&(q.maxLength=T.maxLength),q.style.textAlign=T.getAlignment(),D.paddingTop=D.paddingBottom="0px",T.mask&&new a._MaskProvider(q,T.mask),h._edtHdl._edt=q}else E==p.Cell&&(_.isContentHtml||T.isContentHtml)?r.innerHTML=W:r.textContent=W||"";else{var Z=r.firstChild;Z instanceof HTMLInputElement&&"checkbox"==Z.type||(r.innerHTML='<input type="checkbox" class="wj-cell-check" tabindex="-1"/>',Z=r.firstChild),Z.checked=1==z,Z.indeterminate=null==z,Z.disabled=!h.canEditCell(n,o),Z.disabled&&(Z.style.cursor="default"),h.editRange&&h.editRange.contains(n,o)&&(h._edtHdl._edt=Z)}else{var J=h.editableCollectionView,Q=J?J.currentEditItem:null;Q&&_.dataItem==Q?r.innerHTML='<span class="wj-glyph-pencil"></span>':_ instanceof H&&(r.innerHTML='<span class="wj-glyph-asterisk"></span>')}if(E==p.Cell&&i()&&T.dataMap&&h.showDropDown&&0!=T.showDropDown&&h.canEditCell(n,o)){t._ddIcon||(t._ddIcon=a.createElement('<div role="button" class="'+t._WJC_DROPDOWN+'"><span class="wj-glyph-down"></span></div>'));var $=t._ddIcon.cloneNode(!0);r.appendChild($)}}switch(E){case p.RowHeader:a.setAttribute(r,"draggable",C||x||!_.allowDragging||0==(h.allowDragging&N.Rows)?null:"true");break;case p.ColumnHeader:a.setAttribute(r,"draggable",v.allowDragging&&0!=(h.allowDragging&N.Columns)?"true":null)}r.className!=I&&(r.className=I);var tt=r.style;for(var et in D)tt[et]=D[et];if(h._edtHdl._edt&&h._edtHdl._edt.parentElement==r){var nt=h._root,it=nt.getBoundingClientRect(),ot=r.getBoundingClientRect(),rt=it.top+nt.clientHeight-ot.top,st=it.left+nt.clientWidth-ot.left;ot.height>rt&&(r.style.height=rt+"px"),ot.width>st&&(r.style.width=st+"px")}if(h.itemFormatter&&h.itemFormatter(e,n,o,r),h.formatItem.hasHandlers){var at=t._fmtRng;at?at.setRange(n,o,y,b):at=t._fmtRng=new m(n,o,y,b);var lt=new c(e,at,r);h.onFormatItem(lt)}},t.prototype.disposeCell=function(t){},t.prototype.getEditorValue=function(t){var e=t._edtHdl._edt;if(e instanceof HTMLInputElement&&"checkbox"==e.type)return e.checked;if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){var n=e.maxLength;return a.isNumber(n)&&n>-1&&e.value.length>n?e.value.substr(0,n):e.value}return null},t.prototype._isEditingCell=function(t,e,n){return t.editRange&&t.editRange.contains(e,n)},t.prototype._getTreeIcon=function(e){return'<span class="'+t._WJC_COLLAPSE+" wj-glyph-"+(e.isCollapsed?"":"down-")+(e.grid.rightToLeft?"left":"right")+'"></span>'},t.prototype._getSortIcon=function(t){return'<span class="wj-glyph-'+("+"==t.currentSort?"up":"down")+'"></span>'},t._WJC_COLLAPSE="wj-elem-collapse",t._WJC_DROPDOWN="wj-elem-dropdown",t}();e.CellFactory=g;var _,m=function(){function t(t,e,n,i){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=t),void 0===i&&(i=e),this.setRange(t,e,n,i)}return t.prototype.setRange=function(t,e,n,i){void 0===t&&(t=-1),void 0===e&&(e=-1),void 0===n&&(n=t),void 0===i&&(i=e),this._row=a.asInt(t),this._col=a.asInt(e),this._row2=a.asInt(n),this._col2=a.asInt(i)},Object.defineProperty(t.prototype,"row",{get:function(){return this._row},set:function(t){this._row=a.asInt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"col",{get:function(){return this._col},set:function(t){this._col=a.asInt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row2",{get:function(){return this._row2},set:function(t){this._row2=a.asInt(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"col2",{get:function(){return this._col2},set:function(t){this._col2=a.asInt(t)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this._row,this._col,this._row2,this._col2)},Object.defineProperty(t.prototype,"rowSpan",{get:function(){return Math.abs(this._row2-this._row)+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnSpan",{get:function(){return Math.abs(this._col2-this._col)+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRow",{get:function(){return Math.min(this._row,this._row2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRow",{get:function(){return Math.max(this._row,this._row2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftCol",{get:function(){return Math.min(this._col,this._col2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightCol",{get:function(){return Math.max(this._col,this._col2)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isValid",{get:function(){return this._row>-1&&this._col>-1&&this._row2>-1&&this._col2>-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingleCell",{get:function(){return this._row==this._row2&&this._col==this._col2},enumerable:!0,configurable:!0}),t.prototype.contains=function(e,n){var i=a.tryCast(e,t);if(i)return i.topRow>=this.topRow&&i.bottomRow<=this.bottomRow&&i.leftCol>=this.leftCol&&i.rightCol<=this.rightCol;if(a.isInt(e)&&a.isInt(n))return e>=this.topRow&&e<=this.bottomRow&&n>=this.leftCol&&n<=this.rightCol;throw"contains expects a CellRange or row/column indices."},t.prototype.containsRow=function(t){return a.asInt(t)>=this.topRow&&t<=this.bottomRow},t.prototype.containsColumn=function(t){return a.asInt(t)>=this.leftCol&&t<=this.rightCol},t.prototype.intersects=function(t){return this.intersectsRow(t)&&this.intersectsColumn(t)},t.prototype.intersectsRow=function(t){return t&&!(this.bottomRow<t.topRow||this.topRow>t.bottomRow)},t.prototype.intersectsColumn=function(t){return t&&!(this.rightCol<t.leftCol||this.leftCol>t.rightCol)},t.prototype.getRenderSize=function(t){var e=new a.Size(0,0);if(this.isValid){for(var n=this.topRow;n<=this.bottomRow;n++)e.height+=t.rows[n].renderSize;for(var i=this.leftCol;i<=this.rightCol;i++)e.width+=t.columns[i].renderSize}return e},t.prototype.equals=function(e){return e instanceof t&&this._row==e._row&&this._col==e._col&&this._row2==e._row2&&this._col2==e._col2},t}();e.CellRange=m,function(t){t[t.Visible=1]="Visible",t[t.AllowResizing=2]="AllowResizing",t[t.AllowDragging=4]="AllowDragging",t[t.AllowMerging=8]="AllowMerging",t[t.AllowSorting=16]="AllowSorting",t[t.AutoGenerated=32]="AutoGenerated",t[t.Collapsed=64]="Collapsed",t[t.ParentCollapsed=128]="ParentCollapsed",t[t.Selected=256]="Selected",t[t.ReadOnly=512]="ReadOnly",t[t.HtmlContent=1024]="HtmlContent",t[t.WordWrap=2048]="WordWrap",t[t.MultiLine=4096]="MultiLine",t[t.HasTemplate=8192]="HasTemplate",t[t.RowDefault=3]="RowDefault",t[t.ColumnDefault=23]="ColumnDefault"}(_=e.RowColFlags||(e.RowColFlags={}));var v=function(){function t(){this._list=null,this._pos=0,this._idx=-1,this._vidx=-1}return Object.defineProperty(t.prototype,"visible",{get:function(){return this._getFlag(_.Visible)},set:function(t){this._setFlag(_.Visible,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return!!this._getFlag(_.Visible)&&(!this._getFlag(_.ParentCollapsed)||this instanceof H)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pos",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this._idx},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this._list&&this._list._dirty&&this._list._update(),this.isVisible?this._vidx:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._sz},set:function(t){t!=this._sz&&(this._sz=a.asNumber(t,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderSize",{get:function(){if(!this.isVisible)return 0;var t=this._sz,e=this._list;return e&&((null==t||t<0)&&(t=Math.round(e.defaultSize)),null!=e.minSize&&t<e.minSize&&(t=e.minSize),null!=e.maxSize&&t>e.maxSize&&(t=e.maxSize)),null!=this._szMin&&t<this._szMin&&(t=this._szMin),null!=this._szMax&&t>this._szMax&&(t=this._szMax),Math.round(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowResizing",{get:function(){return this._getFlag(_.AllowResizing)},set:function(t){this._setFlag(_.AllowResizing,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowDragging",{get:function(){return this._getFlag(_.AllowDragging)},set:function(t){this._setFlag(_.AllowDragging,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowMerging",{get:function(){return this._getFlag(_.AllowMerging)},set:function(t){this._setFlag(_.AllowMerging,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSelected",{get:function(){return this._getFlag(_.Selected)},set:function(t){if(this._setFlag(_.Selected,t,!0)){var e=this.grid;e&&e.refreshCells(!1,!0,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return this._getFlag(_.ReadOnly)},set:function(t){this._setFlag(_.ReadOnly,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isContentHtml",{get:function(){return this._getFlag(_.HtmlContent)},set:function(t){this.isContentHtml!=t&&(this._setFlag(_.HtmlContent,t),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._getFlag(_.WordWrap)},set:function(t){this._setFlag(_.WordWrap,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"multiLine",{get:function(){return this._getFlag(_.MultiLine)},set:function(t){this._setFlag(_.MultiLine,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssClass",{get:function(){return this._cssClass},set:function(t){t!=this._cssClass&&(this._cssClass=a.asString(t),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){return this._list?this._list._g:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this.grid?this.grid.collectionView:null},enumerable:!0,configurable:!0}),t.prototype.onPropertyChanged=function(){this._list&&(this._list._dirty=!0,this.grid.invalidate())},t.prototype._getFlag=function(t){return 0!=(this._f&t)},t.prototype._setFlag=function(t,e,n){return e!=this._getFlag(t)&&(this._f=e?this._f|t:this._f&~t,n||this.onPropertyChanged(),!0)},t}();e.RowCol=v;var y=function(t){function e(n){var i=t.call(this)||this;return i._f=_.ColumnDefault,i._hash=e._ctr.toString(36),e._ctr++,n&&a.copy(i,n),i}return o(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataType",{get:function(){return this._type},set:function(t){t=a.asEnum(t,a.DataType),this._type!=t&&(this._type=t,this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){return this._required},set:function(t){this._required=a.asBoolean(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showDropDown",{get:function(){return this._showDropDown},set:function(t){t!=this._showDropDown&&(this._showDropDown=a.asBoolean(t,!0),this.grid&&this.grid.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownCssClass",{get:function(){return this._ddCssClass},set:function(t){this._ddCssClass=a.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputType",{get:function(){return this._inpType},set:function(t){this._inpType=a.asString(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask=a.asString(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLength",{get:function(){return this._maxLen},set:function(t){this._maxLen=a.asNumber(t,!0,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binding",{get:function(){return this._binding?this._binding.path:null},set:function(t){if(t!=this.binding){var e=a.asString(t);if(this._binding=e?new a.Binding(e):null,!this._type&&this.grid&&this._binding){var n=this.grid.collectionView;n&&n.sourceCollection&&n.sourceCollection.length&&(this._type=a.getType(this._binding.getValue(n.sourceCollection[0])))}this.onPropertyChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortMemberPath",{get:function(){return this._bindingSort?this._bindingSort.path:null},set:function(t){if(t!=this.sortMemberPath){var e=a.asString(t);this._bindingSort=e?new a.Binding(e):null,this.onPropertyChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return null!=this._szStar?this._szStar:this.size},set:function(t){null!=e._parseStarSize(t)?(this._szStar=t,this.onPropertyChanged()):(this._szStar=null,this.size=a.asNumber(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._szMin},set:function(t){t!=this._szMin&&(this._szMin=a.asNumber(t,!0,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._szMax},set:function(t){t!=this._szMax&&(this._szMax=a.asNumber(t,!0,!0),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quickAutoSize",{get:function(){return this._quickSize},set:function(t){this._quickSize=a.asBoolean(t,!0)},enumerable:!0,configurable:!0}),e.prototype._getQuickAutoSize=function(){return!!this.grid._getQuickAutoSize()&&(a.isBoolean(this._quickSize)?this._quickSize:!(this.isContentHtml||this.wordWrap||this.multiLine||this._getFlag(_.HasTemplate)))},Object.defineProperty(e.prototype,"renderWidth",{get:function(){return this.renderSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!=t&&(this._align=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),e.prototype.getAlignment=function(){var t=this._align;if(null==t&&(t="",!this._map))switch(this._type){case a.DataType.Boolean:t="center";break;case a.DataType.Number:t="right"}return t},e.prototype.getIsRequired=function(){return null!=this._required?this._required:this.dataType!=a.DataType.String||null!=this.dataMap||null!=this._mask&&this._mask.length>0},Object.defineProperty(e.prototype,"header",{get:function(){return this._hdr?this._hdr:this.binding},set:function(t){this._hdr!=t&&(this._hdr=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataMap",{get:function(){return this._map},set:function(t){this._map!=t&&(this._map&&this._map.mapChanged.removeHandler(this.onPropertyChanged,this),a.isArray(t)&&(t=new T(t,null,null)),this._map=a.asType(t,T,!0),this._map&&this._map.mapChanged.addHandler(this.onPropertyChanged,this),this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._fmt},set:function(t){this._fmt!=t&&(this._fmt=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowSorting",{get:function(){return this._getFlag(_.AllowSorting)},set:function(t){this._setFlag(_.AllowSorting,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentSort",{get:function(){var t=this.grid?this.grid.collectionView:null,e=t?t.sortDescriptions:null,n=e&&e.length?this._getBindingSort():null;if(n)for(var i=0;i<e.length;i++)if(e[i].property==n)return e[i].ascending?"+":"-";return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aggregate",{get:function(){return null!=this._agg?this._agg:a.Aggregate.None},set:function(t){(t=a.asEnum(t,a.Aggregate))!=this._agg&&(this._agg=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),e.prototype._getBindingSort=function(){return this.sortMemberPath?this.sortMemberPath:this.binding?this.binding:null},e._parseStarSize=function(t){if(a.isString(t)&&t.length>0&&"*"==t[t.length-1]){var e=1==t.length?1:1*t.substr(0,t.length-1);if(e>0&&!isNaN(e))return e}return null},e._ctr=0,e}(v);e.Column=y;var b=function(t){function e(e){var n=t.call(this)||this;return n._f=_.ColumnDefault,n._data=e,n}return o(e,t),Object.defineProperty(e.prototype,"dataItem",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.size},set:function(t){this.size=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderHeight",{get:function(){return this.renderSize},enumerable:!0,configurable:!0}),e}(v);e.Row=b;var w=function(t){function e(){var e=t.call(this)||this;return e._level=-1,e.isReadOnly=!0,e}return o(e,t),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(t){a.asInt(t),t!=this._level&&(this._level=t,this.onPropertyChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasChildren",{get:function(){if(null!=this.grid&&null!=this._list){this._list._update();var t=this.index<this._list.length-1?this._list[this.index+1]:null,n=a.tryCast(t,e),i=a.tryCast(t,H);return null!=t&&null==i&&(null==n||n.level>this.level)}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCollapsed",{get:function(){return this._getFlag(_.Collapsed)},set:function(t){a.asBoolean(t),t!=this.isCollapsed&&null!=this._list&&this._setCollapsed(t)},enumerable:!0,configurable:!0}),e.prototype.getGroupHeader=function(){var t=this.grid,e=t.groupHeaderFormat?t.groupHeaderFormat:a.culture.FlexGrid.groupHeaderFormat,n=a.tryCast(this.dataItem,a.CollectionViewGroup);if(n&&e){var i=n.groupDescription.propertyName,o=n.name,r=t.getColumn(i),s=this.isContentHtml;r&&(s=s||r.isContentHtml,r.header&&(i=r.header),r.dataMap?o=r.dataMap.getDisplayValue(o):r.format&&(o=a.Globalize.format(o,r.format)));var l=n.getAggregate(a.Aggregate.CntAll,null,t.collectionView);return a.format(e,{name:a.escapeHtml(i),value:s?o:a.escapeHtml(o),level:n.level,count:l})}return""},e.prototype._setCollapsed=function(t){var n=this,i=this.grid,o=i.rows,r=this.getCellRange(),s=new u(i.cells,new m(this.index,-1));i.onGroupCollapsedChanging(s)&&(i.deferUpdate(function(){o.deferUpdate(function(){n._setFlag(_.Collapsed,t,!0);for(var i=r.topRow+1;i<=r.bottomRow&&i>-1&&i<o.length;i++){o[i]._setFlag(_.ParentCollapsed,t,!0);var s=o[i];s instanceof e&&s.isCollapsed&&(i=s.getCellRange().bottomRow)}})}),i.onGroupCollapsedChanged(s))},e.prototype.getCellRange=function(){for(var t=this._list,n=this.index,i=t.length-1,o=n+1;o<=i;o++){var r=a.tryCast(t[o],e);if(null!=r&&r.level<=this.level){i=o-1;break}}return new m(n,0,i,this.grid.columns.length-1)},e}(b);e.GroupRow=w;var C=function(t){function e(e,n){var i=t.call(this)||this;return i._frozen=0,i._vlen=0,i._szDef=28,i._szTot=0,i._dirty=!1,i._g=a.asType(e,h),i._szDef=a.asNumber(n,!1,!0),i}return o(e,t),Object.defineProperty(e.prototype,"defaultSize",{get:function(){return this._szDef},set:function(t){this._szDef!=t&&(this._szDef=a.asNumber(t,!1,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frozen",{get:function(){return this._frozen},set:function(t){t!=this._frozen&&(this._frozen=a.asNumber(t,!1,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),e.prototype.isFrozen=function(t){return t<this.frozen},Object.defineProperty(e.prototype,"minSize",{get:function(){return this._szMin},set:function(t){t!=this._szMin&&(this._szMin=a.asNumber(t,!0,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._szMax},set:function(t){t!=this._szMax&&(this._szMax=a.asNumber(t,!0,!0),this._dirty=!0,this._g.invalidate())},enumerable:!0,configurable:!0}),e.prototype.getTotalSize=function(){return this._dirty&&this._update(),this._szTot},Object.defineProperty(e.prototype,"visibleLength",{get:function(){return this._dirty&&this._update(),this._vlen},enumerable:!0,configurable:!0}),e.prototype.getItemAt=function(t){if(this._dirty&&this._update(),t<=0&&this.length>0)return 0;t=Math.round(t);for(var e,n,i=this.length,o=0,r=i-1;o<=r;)if((n=this[e=o+r>>>1])._pos>t&&e>0)r=e-1;else{if(!(n._pos+n.renderSize<=t&&e<i-1)){for(;e>0&&!this[e].visible;)e--;for(;e<i-1&&!this[e].visible;)e++;return e}o=e+1}return r},e.prototype.getNextCell=function(t,e,n){var i;switch(e){case M.Next:for(i=t+1;i<this.length;i++)if(this[i].renderSize>0)return i;break;case M.Prev:for(i=t-1;i>=0;i--)if(this[i].renderSize>0)return i;break;case M.End:for(i=this.length-1;i>=0;i--)if(this[i].renderSize>0)return i;break;case M.Home:for(i=0;i<this.length;i++)if(this[i].renderSize>0)return i;break;case M.NextPage:return(i=this.getItemAt(this[t].pos+n))<0?this.getNextCell(t,M.End,n):i==t&&i<this.length-1?i+1:i;case M.PrevPage:return(i=this.getItemAt(this[t].pos-n))<0?this.getNextCell(t,M.Home,n):i==t&&i>0?i-1:i}return t},e.prototype.canMoveElement=function(t,e){if(e==t)return!1;if(t<0||t>=this.length||e>=this.length)return!1;e<0&&(e=this.length-1);for(var n=Math.min(t,e),i=Math.max(t,e),o=n;o<=i;o++)if(!this[o].allowDragging)return!1;return!(this[e]instanceof H)},e.prototype.moveElement=function(t,e){if(this.canMoveElement(t,e)){var n=this[t];this.removeAt(t),e<0&&(e=this.length),this.insert(e,n)}},e.prototype.onCollectionChanged=function(e){void 0===e&&(e=a.NotifyCollectionChangedEventArgs.reset),this._dirty=!0,this._g.invalidate(),t.prototype.onCollectionChanged.call(this,e)},e.prototype.push=function(e){return e._list=this,t.prototype.push.call(this,e)},e.prototype.splice=function(e,n,i){return i&&(i._list=this),t.prototype.splice.call(this,e,n,i)},e.prototype.beginUpdate=function(){this._update(),t.prototype.beginUpdate.call(this)},e.prototype._update=function(){if(this._dirty&&!this.isUpdating){this._dirty=!1;for(var t=0,e=0,n=void 0,i=void 0,o=0;o<this.length;o++)(i=this[o])._idx=o,i._vidx=t,i._list=this,i._pos=e,(n=i.renderSize)>0&&(e+=n,t++);return this._vlen=t,this._szTot=e,!0}return!1},e}(a.ObservableArray);e.RowColCollection=C;var x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._firstVisible=-1,e}return o(e,t),e.prototype.getColumn=function(t){var e=a.isNumber(t)?t:this.indexOf(t);return e>-1?this[e]:null},e.prototype.indexOf=function(e){if(e instanceof y)return t.prototype.indexOf.call(this,e);for(n=0;n<this.length;n++)if(this[n].name==e)return n;for(var n=0;n<this.length;n++)if(this[n].binding==e)return n;return-1},Object.defineProperty(e.prototype,"firstVisibleIndex",{get:function(){return this._dirty&&this._update(),this._firstVisible},enumerable:!0,configurable:!0}),e.prototype._update=function(){if(t.prototype._update.call(this)){this._firstVisible=-1;for(var e=0;e<this.length;e++)if(this[e].visible){this._firstVisible=e;break}return!0}return!1},e.prototype._updateStarSizes=function(t){for(var e,n=0,i=0;i<this.length;i++)(r=this[i]).isVisible&&(r._szStar?(n+=y._parseStarSize(r._szStar),e=r):t-=r.renderWidth);if(e){var o=t;for(i=0;i<this.length;i++){var r=this[i];r.isVisible&&r._szStar&&(r==e&&o>0?r._sz=o:(r._sz=Math.max(0,Math.round(y._parseStarSize(r._szStar)/n*t)),o-=r.renderWidth))}return this._dirty=!0,this._update(),!0}return!1},e}(C);e.ColumnCollection=x;var j=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._maxLevel=-1,e}return o(e,t),Object.defineProperty(e.prototype,"maxGroupLevel",{get:function(){return this._dirty&&this._update(),this._maxLevel},enumerable:!0,configurable:!0}),e.prototype._update=function(){if(t.prototype._update.call(this)){this._maxLevel=-1;for(var e=0;e<this.length;e++){var n=a.tryCast(this[e],w);n&&n.level>this._maxLevel&&(this._maxLevel=n.level)}return!0}return!1},e}(C);e.RowCollection=j;var S,E=function(){function t(e,n){var i;if(this._row=-1,this._col=-1,this._edge=0,e instanceof Element)(R=(T=a.closest(e,".wj-cell"))?T[f._INDEX_KEY]:null)&&(this._row=R.row,this._col=R.col,this._rng=R.rng,this._p=R.panel,this._g=R.panel.grid);else{if(e instanceof h)i=this._g=e;else{if(!(e instanceof f))throw"First parameter should be a FlexGrid or GridPanel.";this._p=e,i=this._g=this._p.grid}var o;n instanceof MouseEvent&&(o=n,"mousedown"==n.type&&(i._rcBounds=null)),n=a.mouseToPage(n),this._pt=n.clone();var s=i.controlRect,l=i._szClient,u=i.topLeftCells,c=i._eTL,p=i.headersVisibility,g=r,_=p&g.Row?u.columns.getTotalSize():0,m=p&g.Column?u.rows.getTotalSize():0,v=p&g.Column?m+c.offsetTop:0,y=i._eBL,b=y.offsetHeight;if(n.x-=s.left,n.y-=s.top,this._g.rightToLeft&&(n.x=s.width-n.x),!this._p&&n.x>=0&&n.y>=c.offsetTop&&l&&n.x<=l.width+_&&n.y<=l.height+v&&(this._p=n.y<v?n.x<_?i.topLeftCells:i.columnHeaders:n.y<y.offsetTop?n.x<_?i.rowHeaders:i.cells:n.x<_?i.bottomLeftCells:i.columnFooters),null!=this._p){var w=this._p.rows,C=this._p.columns,x=this._p.cellType,j=d,S=this._p._getFrozenPos(),E=x==j.TopLeft||x==j.ColumnHeader?m:x==j.BottomLeft||x==j.ColumnFooter?b:w.getTotalSize(),I=x==j.TopLeft||x==j.BottomLeft||x==j.RowHeader?_:C.getTotalSize();x==j.RowHeader||x==j.Cell?(n.y-=m,(n.y>S.y||S.y<=0)&&(n.y-=i._ptScrl.y,n.y+=this._p._getOffsetY())):x!=j.BottomLeft&&x!=j.ColumnFooter||(n.y-=y.offsetTop),x!=j.ColumnHeader&&x!=j.Cell&&x!=j.ColumnFooter||(n.x-=_,(n.x>S.x||S.x<=0)&&(n.x-=i._ptScrl.x)),x!=j.ColumnHeader&&x!=j.TopLeft||(n.y-=v-m),this._edge=0;var D=t._SZEDGE[this._g.isTouching?1:0];if(this._g.isTouching&&(n.x-=(D=t._SZEDGE[1])/2),this._row=n.y>E?-1:w.getItemAt(n.y),this._col=n.x>I?-1:C.getItemAt(n.x),this._row<0||this._col<0)return void(this._p=null);if(this._col>-1){var P=C[this._col];n.x-P.pos<=D&&(this._edge|=1),P.pos+P.renderSize-n.x<=D&&(this._edge|=4)}if(this._row>-1){var M=w[this._row];n.y-M.pos<=D&&(this._edge|=2),M.pos+M.renderSize-n.y<=D&&(this._edge|=8)}}if(!(8&this._edge)&&o instanceof MouseEvent){var T=a.closest(o.target,".wj-cell"),R=T?T[f._INDEX_KEY]:null;R&&!R.rng&&R.panel==this._p&&this._row!=R.row&&(this._row=R.row)}}}return Object.defineProperty(t.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cellType",{get:function(){return this._p?this._p.cellType:d.None},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panel",{get:function(){return this._p},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grid",{get:function(){return this._p?this._p.grid:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this._row},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"col",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){return this._rng||(this._rng=new m(this._row,this._col)),this._rng},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeLeft",{get:function(){return 0!=(1&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeTop",{get:function(){return 0!=(2&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeRight",{get:function(){return 0!=(4&this._edge)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeBottom",{get:function(){return 0!=(8&this._edge)},enumerable:!0,configurable:!0}),t._SZEDGE=[5,30],t}();e.HitTestInfo=E,function(t){t[t.None=0]="None",t[t.Cells=1]="Cells",t[t.ColumnHeaders=2]="ColumnHeaders",t[t.RowHeaders=4]="RowHeaders",t[t.AllHeaders=6]="AllHeaders",t[t.All=7]="All"}(S=e.AllowMerging||(e.AllowMerging={}));var I=function(){function t(t){this._g=t}return t.prototype.getMergedRange=function(t,e,n,i){void 0===i&&(i=!0);var o,r,s=t.cellType,l=t.columns,h=t.rows,u=h[e],c=l[n];if(u instanceof H)return null;if(u instanceof w&&u.dataItem instanceof a.CollectionViewGroup){if(o=new m(e,n),c.aggregate==a.Aggregate.None){for(;o.col>0&&l[o.col-1].aggregate==a.Aggregate.None&&o.col!=l.frozen;)o.col--;for(;o.col2<l.length-1&&l[o.col2+1].aggregate==a.Aggregate.None&&o.col2+1!=l.frozen;)o.col2++}for(;o.col<n&&!l[o.col].visible;)o.col++;return o.isSingleCell?null:o}var p=!1;switch(this._g.allowMerging){case S.None:p=!0;break;case S.Cells:p=s!=d.Cell;break;case S.ColumnHeaders:p=s!=d.ColumnHeader&&s!=d.TopLeft;break;case S.RowHeaders:p=s!=d.RowHeader&&s!=d.TopLeft;break;case S.AllHeaders:p=s==d.Cell}if(p)return null;if(l[n].allowMerging){o=new m(e,n);var f=0,g=h.length-1;e>=h.frozen?!i||s!=d.Cell&&s!=d.RowHeader||(f=(r=t._getViewRange()).topRow,g=r.bottomRow):g=h.frozen-1;for(var _=e-1;_>=f&&this._mergeCell(t,_,n,e,n);_--)o.row=_;for(var v=e+1;v<=g&&this._mergeCell(t,e,n,v,n);v++)o.row2=v;for(;o.row<e&&!h[o.row].visible;)o.row++;if(!o.isSingleCell)return o}if(h[e].allowMerging){o=new m(e,n);var y=0,b=l.length-1;n>=l.frozen?!i||s!=d.Cell&&s!=d.ColumnHeader||(y=(r=t._getViewRange()).leftCol,b=r.rightCol):b=l.frozen-1;for(var C=n-1;C>=y&&this._mergeCell(t,e,C,e,n);C--)o.col=C;for(var x=n+1;x<=b&&this._mergeCell(t,e,n,e,x);x++)o.col2=x;for(;o.col<n&&!l[o.col].visible;)o.col++;if(!o.isSingleCell)return o}return null},t.prototype._mergeCell=function(t,e,n,i,o){var r=t.rows[e],s=t.rows[i];if(r instanceof w||r instanceof H||s instanceof w||s instanceof H)return!1;if(e!=i&&t.rows.isFrozen(e)!=t.rows.isFrozen(i))return!1;if(n!=o&&t.columns.isFrozen(n)!=t.columns.isFrozen(o))return!1;if(e!=i){if(n>0&&(r.allowMerging&&this._mergeCell(t,e,n-1,e,n)||s.allowMerging&&this._mergeCell(t,i,n-1,i,n)))return!1;if(o<t.columns.length-1&&(r.allowMerging&&this._mergeCell(t,e,o,e,o+1)||s.allowMerging&&this._mergeCell(t,i,o,i,o+1)))return!1}return t.getCellData(e,n,!0)==t.getCellData(i,o,!0)},t}();e.MergeManager=I;var D,P,M,T=function(){function t(t,e,n){if(this.mapChanged=new a.Event,a.isArray(t)&&!e&&!n){for(var i=[],o=0;o<t.length;o++)i.push({value:t[o]});t=i,e=n="value"}this._cv=a.asCollectionView(t),this._keyPath=a.asString(e,!1),this._displayPath=a.asString(n,!1),this._cv.collectionChanged.addHandler(this.onMapChanged,this)}return Object.defineProperty(t.prototype,"sortByDisplayValues",{get:function(){return 1!=this._sortByKey},set:function(t){this._sortByKey=!a.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValuePath",{get:function(){return this._keyPath},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayMemberPath",{get:function(){return this._displayPath},enumerable:!0,configurable:!0}),t.prototype.getKeyValue=function(t){var e=this._displayPath,n=this._indexOf(t,e,!0);return n<0&&(n=this._indexOf(t,e,!1)),n>-1?this._cv.sourceCollection[n][this._keyPath]:null},t.prototype.getDisplayValue=function(t){if(!this._hash){this._hash={};var e=this._cv.sourceCollection;if(e&&this._keyPath&&this._displayPath)for(var n=e.length-1;n>=0;n--){var i=e[n];this._hash[i[this._keyPath]]=i[this._displayPath]}}var o=this._hash[t];return null!=o?o:t},t.prototype.getDisplayValues=function(t){var e=[];if(this._cv&&this._displayPath)for(var n=this._cv.items,i=0;i<n.length;i++)e.push(n[i][this._displayPath]);return e},t.prototype.getKeyValues=function(){var t=[];if(this._cv&&this._keyPath)for(var e=this._cv.items,n=0;n<e.length;n++)t.push(e[n][this._keyPath]);return t},Object.defineProperty(t.prototype,"isEditable",{get:function(){return this._editable},set:function(t){this._editable=a.asBoolean(t)},enumerable:!0,configurable:!0}),t.prototype.onMapChanged=function(t){this._hash=null,this.mapChanged.raise(this,t)},t.prototype._indexOf=function(t,e,n){var i=-1,o=-1;if(this._cv&&e)for(var r=null!=t?t.toString():"",s=n?r:r.toLowerCase(),a=this._cv.sourceCollection,l=0;l<a.length;l++){var h=a[l],u=h[e];if(u==t?i=l:n||u.length!=s.length||u.toLowerCase()!=s?null!=u&&u.toString()==r&&(i=l):i=l,i==l){if(!this._cv.filter||this._cv.filter(h))return i;o<0&&(o=i)}}return o},t}();e.DataMap=T,function(t){t[t.None=0]="None",t[t.Cell=1]="Cell",t[t.CellRange=2]="CellRange",t[t.Row=3]="Row",t[t.RowRange=4]="RowRange",t[t.ListBox=5]="ListBox"}(D=e.SelectionMode||(e.SelectionMode={})),function(t){t[t.None=0]="None",t[t.Selected=1]="Selected",t[t.Cursor=2]="Cursor",t[t.Active=3]="Active"}(P=e.SelectedState||(e.SelectedState={})),function(t){t[t.None=0]="None",t[t.Next=1]="Next",t[t.Prev=2]="Prev",t[t.NextPage=3]="NextPage",t[t.PrevPage=4]="PrevPage",t[t.Home=5]="Home",t[t.End=6]="End",t[t.NextCell=7]="NextCell",t[t.PrevCell=8]="PrevCell"}(M=e.SelMove||(e.SelMove={}));var R,A=function(){function t(t){this._sel=new m(0,0),this._mode=D.CellRange,this._g=t}return Object.defineProperty(t.prototype,"selectionMode",{get:function(){return this._mode},set:function(t){if(t!=this._mode){var e=D;if(t==e.ListBox||this._mode==e.ListBox)for(var n=this._g.rows,i=0;i<n.length;i++){var o=n[i],r=t==D.ListBox&&this._sel.containsRow(i);o._setFlag(_.Selected,r,!0)}switch(t){case e.None:this._sel.setRange(-1,-1);break;case e.Cell:this._sel.row2=this._sel.row,this._sel.col2=this._sel.col;break;case e.Row:this._sel.row2=this._sel.row}this._mode=t,this._g.invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this._sel},set:function(t){this.select(t)},enumerable:!0,configurable:!0}),t.prototype.select=function(t,e){void 0===e&&(e=!0),a.isNumber(t)&&a.isNumber(e)&&(t=new m(t,e),e=!0),t=a.asType(t,m);var n=this._g,i=this._sel,o=t,r=!1;switch(n.selectionMode){case D.Cell:t.row2=t.row,t.col2=t.col;break;case D.Row:t.row2=t.row;break;case D.ListBox:r=!0}var s=o.equals(i);if(r&&o.row>-1&&!n.rows[o.row].isSelected&&(s=!1),s)e&&n.scrollIntoView(o.row,o.col);else{var l=new u(n.cells,o);if(n.onSelectionChanging(l)){if(r&&(o.row!=i.row||o.rowSpan>1||i.rowSpan>1)){for(var h=0;h<n.rows.length;h++)n.rows[h]._setFlag(_.Selected,o.containsRow(h),!0);n.refreshCells(!1,!0,!0)}if(o.row=Math.min(o.row,n.rows.length-1),o.row2=Math.min(o.row2,n.rows.length-1),this._sel=o,n.refreshCells(!1,!0,!0),e&&n.scrollIntoView(o.row,o.col),n.collectionView){var c=n._getCvIndex(o.row);n.collectionView.moveCurrentToPosition(c)}n.onSelectionChanged(l)}}},t.prototype.moveSelection=function(t,e,n){var i,o,r=this._g,s=r.rows,a=r.columns,l=this._getReferenceCell(t,e,n),h=Math.max(0,r._szClient.height-r.columnHeaders.height);if(e==M.NextCell)o=a.getNextCell(l.col,M.Next,h),i=l.row,o==l.col&&(i=s.getNextCell(i,M.Next,h))>l.row&&(o=a.getNextCell(0,M.Next,h),o=a.getNextCell(o,M.Prev,h)),r.select(i,o);else if(e==M.PrevCell)o=a.getNextCell(l.col,M.Prev,h),i=l.row,o==l.col&&(i=s.getNextCell(i,M.Prev,h))<l.row&&(o=a.getNextCell(a.length-1,M.Prev,h),o=a.getNextCell(o,M.Next,h)),r.select(i,o);else if(i=s.getNextCell(l.row,t,h),o=a.getNextCell(l.col,e,h),n){var u=r._selHdl._sel;r.select(new m(i,o,u.row2,u.col2))}else r.select(i,o)},t.prototype._getReferenceCell=function(t,e,n){var i=this._g,o=i._selHdl._sel,r=i.getMergedRange(i.cells,o.row,o.col);if(!r||r.isSingleCell)return o;switch(r=r.clone(),t){case M.Next:case M.NextCell:r.row=r.bottomRow;break;case M.None:r.row=o.row}switch(e){case M.Next:case M.NextCell:r.col=r.rightCol;break;case M.None:r.col=o.col}return r},t.prototype._adjustSelection=function(t){switch(this._mode){case D.Cell:return new m(t.row,t.col,t.row,t.col);case D.Row:return new m(t.row,0,t.row,this._g.columns.length-1);case D.RowRange:case D.ListBox:return new m(t.row,0,t.row2,this._g.columns.length-1)}return t},t}();e._SelectionHandler=A,function(t){t[t.None=0]="None",t[t.MoveDown=1]="MoveDown",t[t.MoveAcross=2]="MoveAcross",t[t.Cycle=3]="Cycle",t[t.CycleOut=4]="CycleOut"}(R=e.KeyAction||(e.KeyAction={}));var O,k,N,L=function(){function t(t){this._kaTab=R.None,this._kaEnter=R.MoveDown,this._g=t;var e=t.hostElement;t.addEventListener(e,"keypress",this._keypress.bind(this)),t.addEventListener(e,"keydown",this._keydown.bind(this))}return t.prototype._keydown=function(t){var e=this._g,n=e.selection,i=t.ctrlKey||t.metaKey,o=t.shiftKey,r=!0;if(this._altDown=!1,!e._wantsInput(t.target)){var s=t.defaultPrevented&&!(t.target instanceof HTMLInputElement);if(e.isRangeValid(n)&&!s&&(!e.activeEditor||!e._edtHdl._keydown(t))){var l=a.tryCast(e.rows[n.row],w),h=e.editableCollectionView,c=t.keyCode;if(e.autoClipboard){if(i&&(67==c||45==c)){var d=new u(e.cells,n);if(e.onCopying(d)){var p=e.getClipString()+"\r\n";a.Clipboard.copy(p),e.onCopied(d)}return void t.stopPropagation()}if(i&&86==c||o&&45==c){if(!e.isReadOnly){var f=new u(e.cells,n);e.onPasting(f)&&a.Clipboard.paste(function(t){e.setClipString(t),e.onPasted(f)})}return void t.stopPropagation()}}if(e.rightToLeft)switch(c){case a.Key.Left:c=a.Key.Right;break;case a.Key.Right:c=a.Key.Left}var g=M,_=D;switch(c){case a.Key.Space:if(o&&n.isValid)switch(e.selectionMode){case _.CellRange:case _.Row:case _.RowRange:case _.ListBox:e.select(new m(n.row,0,n.row,e.columns.length-1))}else if(i&&n.isValid)switch(e.selectionMode){case _.CellRange:e.select(new m(0,n.col,e.rows.length-1,n.col))}else(r=this._startEditing(!0,t))&&setTimeout(function(){var t=e.activeEditor;t&&(t.disabled||t.readOnly?e.finishEditing():"checkbox"==t.type?(t.checked=!t.checked,e.finishEditing()):a.setSelectionRange(t,t.value.length))});break;case 65:if(i)switch(e.selectionMode){case _.CellRange:case _.Row:case _.RowRange:case _.ListBox:e.select(new m(0,0,e.rows.length-1,e.columns.length-1))}else r=!1;break;case a.Key.Left:i||t.altKey?r=!1:n.isValid&&0==n.col&&null!=l&&!l.isCollapsed&&l.hasChildren?l.isCollapsed=!0:this._moveSel(g.None,i?g.Home:g.Prev,o);break;case a.Key.Right:i||t.altKey?r=!1:n.isValid&&0==n.col&&null!=l&&l.isCollapsed?l.isCollapsed=!1:this._moveSel(g.None,i?g.End:g.Next,o);break;case a.Key.Up:i?r=!1:(this._altDown=t.altKey,t.altKey?r=e._edtHdl._toggleListBox(t):this._moveSel(g.Prev,g.None,o));break;case a.Key.Down:i?r=!1:(this._altDown=t.altKey,t.altKey?r=e._edtHdl._toggleListBox(t):this._moveSel(g.Next,g.None,o));break;case a.Key.PageUp:this._altDown=t.altKey,this._moveSel(t.altKey?g.Home:g.PrevPage,g.None,o);break;case a.Key.PageDown:this._altDown=t.altKey,this._moveSel(t.altKey?g.End:g.NextPage,g.None,o);break;case a.Key.Home:this._moveSel(i?g.Home:g.None,g.Home,o);break;case a.Key.End:this._moveSel(i?g.End:g.None,g.End,o);break;case a.Key.Tab:r=this._performKeyAction(e.keyActionTab,o);break;case a.Key.Enter:r=this._performKeyAction(e.keyActionEnter,o),!o&&h&&null!=h.currentEditItem&&e._edtHdl._commitRowEdits();break;case a.Key.Escape:if(r=!1,h&&(h.currentAddItem||h.currentEditItem)){var v=new u(e.cells,e.selection);v.cancel=!0,e.onRowEditEnding(v),h.currentAddItem&&h.cancelNew(),h.currentEditItem&&h.cancelEdit(),e.onRowEditEnded(v),r=!0}e._mouseHdl.resetMouseState();break;case a.Key.Delete:case a.Key.Back:r=this._deleteSel(t);break;case a.Key.F2:r=this._startEditing(!0,t);break;case a.Key.F4:r=e._edtHdl._toggleListBox(t);break;default:r=!1}r&&(e.containsFocus()||e.focus(),t.preventDefault(),t.stopPropagation())}}},t.prototype._performKeyAction=function(t,e){var n=M;switch(t){case R.MoveDown:return this._moveSel(e?n.Prev:n.Next,n.None,!1),!0;case R.MoveAcross:return this._moveSel(n.None,e?n.Prev:n.Next,!1),!0;case R.Cycle:return this._moveSel(n.None,e?n.PrevCell:n.NextCell,!1),!0;case R.CycleOut:var i=this._g.selection;return this._moveSel(n.None,e?n.PrevCell:n.NextCell,!1),!i.equals(this._g.selection)}return!1},t.prototype._keypress=function(t){var e=this._g;if(!e._wantsInput(t.target)&&!t.defaultPrevented)if(this._altDown)t.preventDefault();else if(e.activeEditor)e._edtHdl._keypress(t);else if(t.charCode>a.Key.Space&&this._startEditing(!1,t)&&e.activeEditor){var n=a.getActiveElement();if(n instanceof HTMLInputElement&&"checkbox"!=n.type){var i=e._selHdl.selection,o=e.getCellData(i.row,i.col,!0),r=e.getCellData(i.row,i.col,!1);n.value=String.fromCharCode(t.charCode),a.isNumber(r)&&o.indexOf("%")>-1&&(n.value+="%"),a.setSelectionRange(n,1),n.dispatchEvent(e._edtHdl._evtInput),e._edtHdl._keypress(t),t.preventDefault()}}},t.prototype._moveSel=function(t,e,n){this._g.selectionMode!=D.None&&this._g._selHdl.moveSelection(t,e,n)},t.prototype._deleteSel=function(t){var e=this._g,n=e.editableCollectionView,i=e.selection,o=e.rows,r=[],s=new m,a=new p(e.cells,s,t),l=D;if(e.allowDelete&&!e.isReadOnly&&(null==n||n.canRemove&&!n.isAddingNew&&!n.isEditingItem))switch(e.selectionMode){case l.CellRange:if(0==i.leftCol&&i.rightCol==e.columns.length-1)for(h=i.topRow;h>-1&&h<=i.bottomRow;h++)r.push(o[h]);break;case l.ListBox:for(h=0;h<o.length;h++)o[h].isSelected&&r.push(o[h]);break;case l.Row:i.topRow>-1&&r.push(o[i.topRow]);break;case l.RowRange:for(var h=i.topRow;h>-1&&h<=i.bottomRow;h++)r.push(o[h])}if(r.length>0){if(e.deferUpdate(function(){n&&n.beginUpdate();for(var t=r.length-1;t>=0;t--){var i=r[t];s.setRange(i.index,-1),e.onDeletingRow(a)&&(n&&i.dataItem?n.remove(i.dataItem):e.rows.removeAt(i.index),e.onDeletedRow(a))}n&&n.endUpdate()}),e.selectionMode==l.ListBox){var u=e.selection.row;u>-1&&u<e.rows.length&&(e.rows[u].isSelected=!0)}return e.childItemsPath&&e.collectionView&&e.collectionView.refresh(),!0}if(!e.isReadOnly&&0==r.length){var c=!1,d=e.scrollPosition;return e.deferUpdate(function(){for(var t=i.topRow;t<=i.bottomRow;t++){var o=e.rows[t];if(!o.isReadOnly)for(var r=i.leftCol;r<=i.rightCol;r++){var l=e._getBindingColumn(e.cells,t,e.columns[r]);l.getIsRequired()||l.isReadOnly||e.getCellData(t,r,!0)&&(s.setRange(t,r),a.cancel=!1,e.onBeginningEdit(a)&&(n&&(c||(c=!0,n.beginUpdate()),n.editItem(o.dataItem),e._edtHdl._edItem=n.currentEditItem),e.setCellData(t,r,"",!0,!1),e.onCellEditEnding(a),e.onCellEditEnded(a)))}}e.selection=i,e.scrollPosition=d,c&&n.endUpdate()}),!0}return!1},t.prototype._startEditing=function(t,e,n,i){return this._g._edtHdl.startEditing(t,n,i,!0,e)},t}();e._KeyboardHandler=L,function(t){t[t.None=0]="None",t[t.Columns=1]="Columns",t[t.Rows=2]="Rows",t[t.Both=3]="Both",t[t.ColumnsAllCells=4|t.Columns]="ColumnsAllCells",t[t.RowsAllCells=4|t.Rows]="RowsAllCells",t[t.BothAllCells=4|t.Both]="BothAllCells"}(O=e.AllowResizing||(e.AllowResizing={})),function(t){t[t.None=0]="None",t[t.Headers=1]="Headers",t[t.Cells=2]="Cells",t[t.Both=3]="Both"}(k=e.AutoSizeMode||(e.AutoSizeMode={})),function(t){t[t.None=0]="None",t[t.Columns=1]="Columns",t[t.Rows=2]="Rows",t[t.Both=3]="Both"}(N=e.AllowDragging||(e.AllowDragging={}));var F=function(){function t(t){var e=this;this._tsLast=0;var n=t.hostElement;this._g=t,this._dvMarker=a.createElement('<div class="wj-marker">&nbsp;</div>'),t.addEventListener(n,"mousedown",function(n){if(t._rcBounds=null,!n.defaultPrevented&&0==n.button){var r=n.target;if(!t.containsFocus()){var s=r instanceof HTMLElement&&r.tabIndex>-1?r:t._eFocus;t._setFocusNoScroll(s)}if(setTimeout(function(){n.defaultPrevented||t.focus()}),a.closest(n.target,".wj-flexgrid")!=t.hostElement||!t.activeEditor&&t._isInputElement(r)){var l=t.hitTest(n);switch(l.cellType){case d.Cell:t.select(l.range);break;case d.ColumnHeader:case d.ColumnFooter:t.scrollIntoView(-1,l.col);break;case d.RowHeader:t.scrollIntoView(l.row,-1)}return}var h=document;t.removeEventListener(h,"mousemove"),t.removeEventListener(h,"mouseup"),t.addEventListener(h,"mousemove",i),t.addEventListener(h,"mouseup",o),e._isDown=!0,e._mousedown(n)}});var i=function(t){e._mousemove(t)},o=function(n){e._isDown=!1,t.removeEventListener(document,"mousemove"),t.removeEventListener(document,"mouseup"),e._mouseup(n)};t.addEventListener(n,"mouseup",function(t){e._tsLast=Date.now()}),t.addEventListener(n,"mouseenter",function(e){t._rcBounds=null}),t.addEventListener(n,"mousemove",this._hover.bind(this)),t.addEventListener(n,"dblclick",this._dblclick.bind(this)),t.addEventListener(n,"click",this._click.bind(this)),t.addEventListener(n,"selectstart",function(e){t._isInputElement(e.target)||e.preventDefault()}),t.addEventListener(n,"wheel",function(e){var n=t.cells.hostElement.parentElement,i=e.deltaY;if(i&&!e.ctrlKey&&!e.metaKey&&n.scrollHeight>n.offsetHeight&&a.closest(e.target,".wj-flexgrid")==t.hostElement){switch(e.deltaMode){case 1:n.scrollTop+=t.rows.defaultSize*(i<0?-1:1);break;case 2:n.scrollTop+=n.clientHeight*(i<0?-1:1);break;case 0:default:a.isSafari()&&(i=a.clamp(i,-150,150)),n.scrollTop+=i}e.preventDefault(),e.stopImmediatePropagation()}}),t.addEventListener(n,"dragstart",this._dragstart.bind(this)),t.addEventListener(n,"dragover",this._dragover.bind(this)),t.addEventListener(n,"dragleave",this._dragover.bind(this)),t.addEventListener(n,"drop",this._drop.bind(this)),t.addEventListener(n,"dragend",this._dragend.bind(this)),this._enableTouchResizing()}return t.prototype.resetMouseState=function(){this._dragSource&&a.removeClass(this._dragSource,"wj-state-dragsrc"),this._showDragMarker(null);var t=this._g.hostElement;t&&(t.style.cursor="");var e=this._g;e.removeEventListener(document,"mousemove"),e.removeEventListener(document,"mouseup"),this._tsLast=Date.now(),this._eMouse=null,this._isDown=null,this._htDown=null,this._lbSelRows=null,this._szRowCol=null,this._szArgs=null,this._dragSource=null},t.prototype._enableTouchResizing=function(){var t=this,e=this._g,n=e.hostElement,i="ontouchstart"in window?["touchstart","touchmove","touchend"]:"onpointerdown"in window?["pointerdown","pointermove","pointerup"]:null;i&&(e.addEventListener(n,i[0],function(i){if((null==i.pointerType||"touch"==i.pointerType)&&!a.closest(i.target,".wj-elem-filter")){var o=a.closest(i.target,".wj-cell");o instanceof HTMLElement&&(e._rcBounds=null,t._htDown=null,t._hover(i),t._szRowCol&&(o.removeAttribute("draggable"),n.style.touchAction="none",t._mousedown(i),i.preventDefault()))}}),e.addEventListener(n,i[1],function(e){null!=e.pointerType&&"touch"!=e.pointerType||t._szRowCol&&(t._mousemove(e),e.preventDefault())}),e.addEventListener(n,i[2],function(e){if(a.Control._touching=!1,(null==e.pointerType||"touch"==e.pointerType)&&t._szRowCol){if(t._szArgs)t._finishResizing(t._eMouse);else{var i=a.closest(e.target,".wj-cell");i instanceof HTMLElement&&i.click()}t.resetMouseState(),n.style.touchAction=""}}))},t.prototype._mousedown=function(t){var e=this._g,n=e.hitTest(t),i=n.cellType,o=t.ctrlKey||t.metaKey;if(this._selDown=e.selection,n.panel==e.cells){if(a.closestClass(t.target,g._WJC_DROPDOWN))return e._edtHdl._toggleListBox(t,n.range),void t.preventDefault();if(e.editRange&&e.editRange.contains(n.range))return}var r=a.getActiveElement();if(t.target!=r||!e._isInputElement(t.target)){if(i==d.None)return e.finishEditing(),void(t.target!=e._root&&e._edtHdl._commitRowEdits());if(this._htDown=n,this._eMouse=t,null!=this._szRowCol)return r!=e._eFocus&&(e._eFocus.tabIndex=0,e._eFocus.focus()),void this._handleResizing(t);switch(i){case d.Cell:o&&e.selectionMode==D.ListBox&&this._startListBoxSelection(n.row),this._mouseSelect(t,t.shiftKey);break;case d.RowHeader:0==(this._g.allowDragging&N.Rows)&&(o&&e.selectionMode==D.ListBox&&this._startListBoxSelection(n.row),this._mouseSelect(t,t.shiftKey),t.preventDefault(),e.focus())}if(i==d.Cell&&e.rows.maxGroupLevel>-1&&a.closestClass(t.target,g._WJC_COLLAPSE)){var s=a.tryCast(e.rows[n.row],w);if(s)return o?e.collapseGroupsToLevel(s.isCollapsed?s.level+1:s.level):s.isCollapsed=!s.isCollapsed,void this.resetMouseState()}}},t.prototype._mousemove=function(t){if(null!=this._htDown){if(0==t.buttons&&this._eMouse&&t.timeStamp-this._eMouse.timeStamp>600)return void this.resetMouseState();if(this._eMouse=t,this._szRowCol)this._handleResizing(t);else switch(this._htDown.cellType){case d.Cell:this._mouseSelect(t,!0);break;case d.RowHeader:0==(this._g.allowDragging&N.Rows)&&this._mouseSelect(t,!0)}}},t.prototype._mouseup=function(t){if(!this._g.isTouching||!(this._dragSource||t.target instanceof HTMLHtmlElement)){var e=this._g,n=e.hitTest(t),i=this._htDown,o=D;if(i&&!t.defaultPrevented)if(this._szArgs)this._finishResizing(t);else if(i.panel!=e.topLeftCells||this._szArgs)i.panel!=e.columnHeaders||t.dataTransfer?i.panel==e.cells&&(t.ctrlKey||t.metaKey||t.shiftKey||n.panel==i.panel&&n.range.equals(i.range)&&e.selection.equals(this._selDown)&&e._edtHdl.startEditing(!0,n.row,n.col,!0,t)):n.panel==i.panel&&n.col==i.col&&!n.edgeRight&&n.col>-1&&this._clickSort(t,n);else if(n.panel==i.panel&&n.row==i.row&&n.col==i.col&&e.rows.length&&e.columns.length)switch(e.selectionMode){case o.CellRange:case o.RowRange:case o.ListBox:e.select(new m(0,0,e.rows.length-1,e.columns.length-1))}this.resetMouseState()}},t.prototype._click=function(t){Date.now()-this._tsLast>50&&!t.pointerType&&this._handleClick(t)},t.prototype._handleClick=function(t){var e=this._g,n=t.target,i=new E(n,null);if(!t.defaultPrevented&&i.grid==e&&!e._isInputElement(n))if(i.panel==e.topLeftCells)e.select(new m(0,0,e.rows.length-1,e.columns.length-1));else if(i.panel==e.columnHeaders)this._clickSort(t,i);else if(i.panel==e.rowHeaders)e.select(new m(i.row,0,i.row,e.columns.length-1));else if(i.panel==e.cells)if(i.row<0)this._clickSort(t,i);else if(a.closestClass(n,g._WJC_COLLAPSE)){var o=e.rows[i.row];o instanceof w&&(t.ctrlKey?e.collapseGroupsToLevel(o.isCollapsed?o.level+1:o.level):o.isCollapsed=!o.isCollapsed)}else a.closestClass(n,g._WJC_DROPDOWN)?e._edtHdl._toggleListBox(t,i.range):e.select(i.range)},t.prototype._clickSort=function(t,e){var n=this._g,i=n.collectionView,o=t.ctrlKey||t.metaKey;if(i&&i.canSort&&n.allowSorting){var r=n._getBindingColumn(e.panel,e.row,e.panel.columns[e.col]),s=r?r._getBindingSort():null;if(r.allowSorting&&s){for(var l=e.grid.collectionView.sortDescriptions,h=null,c=0;c<l.length;c++)if(l[c].property==s){h=!l[c].ascending;break}if(null==h){if(o)return;h=!0}var d=new u(e.panel,e.range);n.onSortingColumn(d)&&(n._edtHdl._commitRowEdits(),o?l.clear():l.splice(0,l.length,new a.SortDescription(s,h)),n.onSortedColumn(d))}}},t.prototype._dblclick=function(t){var e,n=this._g,i=n.hitTest(t),o=i.cellType,r=n.selection,s=i.range;if(!t.defaultPrevented)if(i.edgeRight&&n.allowResizing&O.Columns){if(o==d.ColumnHeader||o==d.Cell&&4&n.allowResizing){t.preventDefault(),t.ctrlKey&&r.containsColumn(i.col)&&(s=r);for(var a=s.leftCol;a<=s.rightCol;a++)n.columns[a].allowResizing&&(e=new u(n.cells,new m(-1,a)),n.onAutoSizingColumn(e)&&n.onResizingColumn(e)&&(n.autoSizeColumn(a),n.onResizedColumn(e),n.onAutoSizedColumn(e)))}else o==d.TopLeft&&i.panel.columns[i.col].allowResizing&&(t.preventDefault(),e=new u(i.panel,new m(-1,i.col)),n.onAutoSizingColumn(e)&&n.onResizingColumn(e)&&(n.autoSizeColumn(i.col,!0),n.onAutoSizedColumn(e),n.onResizedColumn(e)));this.resetMouseState()}else if(i.edgeBottom&&n.allowResizing&O.Rows){if(o==d.RowHeader||o==d.Cell&&4&n.allowResizing){t.ctrlKey&&r.containsRow(i.row)&&(s=r);for(var l=s.topRow;l<=s.bottomRow;l++)n.rows[l].allowResizing&&(e=new u(n.cells,new m(l,-1)),n.onAutoSizingRow(e)&&n.onResizingRow(e)&&(n.autoSizeRow(l),n.onResizedRow(e),n.onAutoSizedRow(e)))}else o==d.TopLeft&&i.panel.rows[i.row].allowResizing&&(e=new u(i.panel,new m(i.row,-1)),n.onAutoSizingRow(e)&&n.onResizingRow(e)&&(n.autoSizeRow(i.row,!0),n.onResizedRow(e),n.onAutoSizedRow(e)));this.resetMouseState()}},t.prototype._hover=function(t){if(null==this._htDown){var e=this._g,n=e.hitTest(t),i=n.cellType,o="";return this._szRowCol=null,(i==d.ColumnHeader||i==d.TopLeft||i==d.Cell&&4&e.allowResizing)&&n.edgeRight&&0!=(e.allowResizing&O.Columns)&&(this._szRowCol=this._getResizeCol(n)),(i==d.RowHeader||i==d.TopLeft||i==d.Cell&&4&e.allowResizing)&&n.edgeBottom&&0!=(e.allowResizing&O.Rows)&&(this._szRowCol=this._getResizeRow(n)),this._szRowCol instanceof y?o="col-resize":this._szRowCol instanceof b&&(o="row-resize"),this._szStart=this._szRowCol?this._szRowCol.renderSize:0,e.hostElement.style.cursor=o,n}return null},t.prototype._getResizeCol=function(t){for(var e=t.panel.columns,n=e[t.col],i=t.col+1;i<e.length;i++)if((o=e[i]).visible){o.size<1&&(n=o);break}if(t.col==e.length-1&&(t.cellType==d.TopLeft||t.cellType==d.RowHeader))for(e=this._g.columns,i=0;i<e.length;i++){var o=e[i];if(o.visible){o.size<1&&(n=o);break}}return n.allowResizing?n:null},t.prototype._getResizeRow=function(t){for(var e=t.panel.rows,n=e[t.row],i=t.row+1;i<e.length;i++)if((o=e[i]).visible){o.size<1&&(n=o);break}if(t.row==e.length-1&&(t.cellType==d.TopLeft||t.cellType==d.ColumnHeader))for(e=this._g.rows,i=0;i<e.length;i++){var o=e[i];if(o.visible){o.size<1&&(n=o);break}}return n.allowResizing?n:null},t.prototype._mouseSelect=function(t,e){var n=this,i=this._g;if(this._htDown&&this._htDown.panel&&i.selectionMode!=D.None){var o=new E(this._htDown.panel,t);this._handleSelection(o,e),!a.isIE9()&&t.button>=0&&t.target!=i._root&&(o=new E(i,t)).cellType!=d.Cell&&o.cellType!=d.RowHeader&&setTimeout(function(){n._mouseSelect(n._eMouse,e)},100)}},t.prototype._handleResizing=function(e){if(e.preventDefault(),this._szRowCol instanceof y){var n=this._g,i=a.mouseToPage(e).x,o=Math.round(Math.max(t._SZ_MIN,this._szStart+(i-this._htDown.point.x)*(n.rightToLeft?-1:1)));this._szRowCol.renderSize!=o&&(null==this._szArgs&&(s=n.rowHeaders.columns.indexOf(this._szRowCol)>-1?n.rowHeaders:n.cells,this._szArgs=new u(s,new m(-1,this._szRowCol.index))),this._szArgs.cancel=!1,n.onResizingColumn(this._szArgs)&&(n.deferResizing?this._showResizeMarker(o):this._szRowCol.width=o))}if(this._szRowCol instanceof b){n=this._g;var r=a.mouseToPage(e).y;if(o=Math.round(Math.max(t._SZ_MIN,this._szStart+(r-this._htDown.point.y))),this._szRowCol.renderSize!=o){if(null==this._szArgs){var s=n.columnHeaders.rows.indexOf(this._szRowCol)>-1?n.columnHeaders:n.cells;this._szArgs=new u(s,new m(this._szRowCol.index,-1))}this._szArgs.cancel=!1,n.onResizingRow(this._szArgs)&&(n.deferResizing?this._showResizeMarker(o):this._szRowCol.height=o)}}},t.prototype._dragstart=function(t){var e=this._g,n=this._htDown;if(n){if(this._dragSource=null,!this._szRowCol){var i=new u(n.panel,n.range);if(n.cellType==d.ColumnHeader&&e.allowDragging&N.Columns&&n.col>-1&&e.columns[n.col].allowDragging)e.onDraggingColumn(i)?this._dragSource=t.target:t.preventDefault();else if(n.cellType==d.RowHeader&&e.allowDragging&N.Rows&&n.row>-1&&e.rows[n.row].allowDragging){var o=e.rows[n.row];o instanceof w||o instanceof H||(e.onDraggingRow(i)?this._dragSource=t.target:t.preventDefault())}}this._dragSource&&t.dataTransfer&&!t.defaultPrevented&&(a._startDrag(t.dataTransfer,"move"),t.stopPropagation(),a.addClass(this._dragSource,"wj-state-dragsrc"),e.beginUpdate(),this._updating=!0)}},t.prototype._dragend=function(t){this._updating&&(this._g.endUpdate(),this._updating=!1),this.resetMouseState()},t.prototype._dragover=function(t){var e=this._g,n=e.hitTest(t),i=!1,o=new u(e.cells,n.range);if(this._htDown&&n.cellType==this._htDown.cellType&&(n.cellType==d.ColumnHeader?(o.cancel=!e.columns.canMoveElement(this._htDown.col,n.col),i=e.onDraggingColumnOver(o)):n.cellType==d.RowHeader&&(o.cancel=!e.rows.canMoveElement(this._htDown.row,n.row),i=e.onDraggingRowOver(o))),i?(t.dataTransfer.dropEffect="move",this._showDragMarker(n),t.preventDefault(),t.stopPropagation()):this._showDragMarker(null),this._htDown&&e.autoScroll){var r=e._rcBounds,s=e.scrollPosition,l=a.Control._DRAG_SCROLL_EDGE,h=a.Control._DRAG_SCROLL_STEP;this._htDown.panel==e.columnHeaders?(t.pageX-r.left<l&&(s.x+=h),r.right-t.pageX<l&&(s.x-=h)):this._htDown.panel==e.rowHeaders&&(t.pageY-r.top<l&&(s.y+=h),r.bottom-t.pageY<l&&(s.y-=h)),s.equals(e._ptScrl)||(e.scrollPosition=s)}},t.prototype._drop=function(t){var e=this._g,n=e.hitTest(t);if(this._htDown&&n.cellType==this._htDown.cellType){var i=e.selection,o=new u(e.cells,n.range,this._htDown);n.cellType==d.ColumnHeader?(e.columns.moveElement(this._htDown.col,n.col),e.select(i.row,n.col),e.onDraggedColumn(o)):n.cellType==d.RowHeader&&(e.rows.moveElement(this._htDown.row,n.row),e.select(n.row,i.col),e.onDraggedRow(o))}this.resetMouseState()},t.prototype._showResizeMarker=function(t){var e=this._g,n=this._dvMarker,i=e.cells.hostElement;n.parentElement!=i&&i.appendChild(n);var o,r=this._szArgs.panel.cellType;this._szRowCol instanceof y?(o={left:this._szRowCol.pos+t-1,top:-1e3,right:"",bottom:0,width:3,height:""},e.rightToLeft&&(o.left=i.clientWidth-o.left-o.width),r!=d.TopLeft&&r!=d.RowHeader||(o.left-=e.topLeftCells.hostElement.offsetWidth)):(o={left:-1e3,top:this._szRowCol.pos+t-1,right:0,bottom:"",width:"",height:3},r!=d.TopLeft&&r!=d.ColumnHeader||(o.top-=e.topLeftCells.hostElement.offsetHeight)),a.setCss(n,o)},t.prototype._showDragMarker=function(t){var e=this._g,n=this._dvMarker;if(!t||!t.panel)return a.removeChild(n),void(this._rngTarget=null);if(!t.range.equals(this._rngTarget)){this._rngTarget=t.range;var i=t.panel.hostElement;n.parentElement!=i&&i.appendChild(n);var o={left:0,top:0,width:6,height:6,right:"",bottom:""};switch(t.cellType){case d.ColumnHeader:o.height=t.panel.height;var r=e.columns[t.col];o.left=r.pos-o.width/2,t.col>this._htDown.col&&(o.left+=r.renderWidth),e.rightToLeft&&(o.left=n.parentElement.clientWidth-o.left-o.width);break;case d.RowHeader:o.width=t.panel.width;var s=e.rows[t.row];o.top=s.pos-o.height/2,t.row>this._htDown.row&&(o.top+=s.renderHeight)}a.setCss(n,o)}},t.prototype._finishResizing=function(e){var n=this._g,i=n.selection,o=this._szArgs,r=this._eMouse&&this._eMouse.ctrlKey;if(o&&!o.cancel){if(o.col>-1){var s=o.col,l=a.mouseToPage(e).x,h=Math.round(Math.max(t._SZ_MIN,this._szStart+(l-this._htDown.point.x)*(this._g.rightToLeft?-1:1)));if(o.panel.columns[s].width=Math.round(h),n.onResizedColumn(o),r&&this._htDown.cellType==d.ColumnHeader&&i.containsColumn(s))for(var c=i.leftCol;c<=i.rightCol;c++)n.columns[c].allowResizing&&c!=s&&(o=new u(n.cells,new m(-1,c)),n.onResizingColumn(o)&&(n.columns[c].size=n.columns[s].size,n.onResizedColumn(o)))}if(o.row>-1){s=o.row;var p=a.mouseToPage(e).y;if(h=Math.round(Math.max(t._SZ_MIN,this._szStart+(p-this._htDown.point.y))),o.panel.rows[s].height=Math.round(h),n.onResizedRow(o),r&&this._htDown.cellType==d.RowHeader&&i.containsRow(s))for(var f=i.topRow;f<=i.bottomRow;f++)n.rows[f].allowResizing&&f!=s&&(o=new u(n.cells,new m(f,-1)),n.onResizingRow(o)&&(n.rows[f].size=n.rows[s].size,n.onResizedRow(o)))}}},t.prototype._startListBoxSelection=function(t){var e=this._g.rows;this._lbSelState=!e[t].isSelected,this._lbSelRows={};for(var n=0;n<e.length;n++)e[n].isSelected&&(this._lbSelRows[n]=!0)},t.prototype._handleSelection=function(t,e){var n=this._g,i=n.rows,o=n._selHdl.selection,r=new m(t.row,t.col);if(t.row>-1&&t.col>-1)if(null!=this._lbSelRows){var s=!1;r=new m(t.row,t.col,this._htDown.row,this._htDown.col);for(var a=0;a<i.length;a++){var l=r.containsRow(a)?this._lbSelState:null!=this._lbSelRows[a];if(l!=i[a].isSelected){var h=new u(n.cells,new m(a,o.col,a,o.col2));n.onSelectionChanging(h)&&(i[a]._setFlag(_.Selected,l,!0),s=!0,n.onSelectionChanged(h))}}s&&n.refreshCells(!1,!0,!0),n.scrollIntoView(t.row,t.col)}else t.cellType==d.RowHeader&&(r.col=0,r.col2=n.columns.length-1),e&&(r.row2=o.row2,r.col2=o.col2),n.select(r)},t._SZ_MIN=0,t}();e._MouseHandler=F;var V=function(){function t(t){var e=this;this._fullEdit=!1,this._list=null,this._g=t,this._evtInput=document.createEvent("HTMLEvents"),this._evtInput.initEvent("input",!0,!1),t.selectionChanging.addHandler(function(n,i){if(e.finishEditing()){var o=t._selHdl.selection.row;if(o!=i.row){var r=t.rows.length;(o>-1&&o<r?t.rows[o].dataItem:null)!=(i.row>-1&&i.row<r?t.rows[i.row].dataItem:null)&&e._commitRowEdits()}}else i.cancel=!0}),t.lostFocus.addHandler(function(){if(!t.containsFocus()){var n=a.getActiveElement();n&&"fixed"==getComputedStyle(n).position||e._commitRowEdits()}}),t.addEventListener(t.hostElement,"mousedown",function(n){if(!n.defaultPrevented&&0==n.button&&!t._mouseHdl._szRowCol){var i=t.hitTest(n);if(i.cellType!=d.Cell&&i.cellType!=d.None)e.finishEditing();else if(i.cellType!=d.None){var o=a.tryCast(n.target,HTMLInputElement);e._isNativeCheckbox(o)&&(o!=e.activeEditor&&(n.preventDefault(),e.startEditing(!1,i.row,i.col,!0,n)&&(o=e.activeEditor)),!o||"checkbox"!=o.type||o.disabled||o.readOnly||(o.checked=!o.checked,o.focus(),e.finishEditing()))}}},!0),t.addEventListener(t.hostElement,"click",function(t){e._isNativeCheckbox(t.target)&&t.preventDefault()})}return t.prototype.startEditing=function(t,e,n,i,o){void 0===t&&(t=!0);var r=this._g;if(e=a.asNumber(e,!0,!0),n=a.asNumber(n,!0,!0),null==e&&(e=r.selection.row),null==n&&(n=r.selection.col),null==i&&(i=!0),!this._allowEditing(e,n))return!1;var s=r.getMergedRange(r.cells,e,n,!1);s||(s=new m(e,n));var l=r.rows[e].dataItem;if(r.select(s,!0),!r.rows[e]||l!=r.rows[e].dataItem)return!1;if(s.equals(this._rng))return!0;if(this.activeEditor&&!this.finishEditing())return!1;var h=new u(r.cells,s,o);if(!r.onBeginningEdit(h))return!1;var c=r.editableCollectionView,d=!1;c&&((d=(l=r.rows[e].dataItem)!=c.currentEditItem)&&r.onRowEditStarting(h),c.editItem(l),d&&(r.onRowEditStarted(h),this._edItem=l)),this._fullEdit=a.asBoolean(t),this._rng=s,this._list=null;var p=r.columns[n].dataMap;p&&(this._list=p.getDisplayValues(l)),s.isSingleCell?this._updateEditorCell(e,n,d):r.refresh(!1);var f=this._edt;if(f){if("checkbox"==f.type)this._fullEdit=!1;else if(i){var g=a.culture.Globalize.numberFormat["%"]||"%";if(a.isNumber(r.getCellData(e,n,!1))&&f.value.indexOf(g)>-1){for(var _=f.value,v=0,y=_.length;y>0&&_[y-1]==g;)y--;for(;v<y&&_[v]==g;)v++;a.setSelectionRange(f,v,y)}else a.setSelectionRange(f,0,f.value.length);r._setFocusNoScroll(f)}if(r.onPrepareCellForEdit(h),f.disabled||f.readOnly)return!1}return null!=f&&!f.disabled&&!f.readOnly},t.prototype.finishEditing=function(t){var e=this._edt;if(!e)return this._removeListBox(),!0;var n=this._g,i=this._rng,o=new p(n.cells,i),r=n.containsFocus(),s=n.hostElement.querySelector(".wj-control.wj-state-focused");if(s){var l=a.Control.getControl(s);l&&l.onLostFocus(o)}if(o.cancel=t,!t&&n.validateEdits){var h=this._getValidationError();if(h){o.cancel=!0;var u=e.parentElement;u&&(a.toggleClass(u,"wj-state-invalid",!0),u.title=h,o.stayInEditMode=!0)}}if(!n.onCellEditEnding(o)&&o.stayInEditMode)return r?setTimeout(function(){e.select()}):e.select(),!1;if(!o.cancel){o.data=n.cells.getCellData(i.topRow,i.leftCol,!1);for(var c=n.cellFactory.getEditorValue(n),d=i.topRow;d<=i.bottomRow&&d<n.rows.length;d++)for(var f=i.leftCol;f<=i.rightCol&&f<n.columns.length;f++)n.cells.setCellData(d,f,c,!0,!1)}this._edt=null,this._rng=null,this._list=null,this._removeListBox();var g=a.closest(e,".wj-cell");return a.contains(g,a.getActiveElement())&&g.focus(),o.cancel||!o.refresh?this._updateEditorCell(i.row,i.col,!1):n.refresh(!1),r&&n.focus(),n.onCellEditEnded(o),!0},Object.defineProperty(t.prototype,"activeEditor",{get:function(){return this._edt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editRange",{get:function(){return this._rng},enumerable:!0,configurable:!0}),t.prototype.getClipString=function(t){var e=this._g,n="",i=!0;if(!t)switch(t=e.selection,e.selectionMode){case D.Row:case D.RowRange:t.col=0,t.col2=e.columns.length-1;break;case D.ListBox:t.col=0,t.col2=e.columns.length-1;for(var o=0;o<e.rows.length;o++)e.rows[o].isSelected&&e.rows[o].isVisible&&(t.row=t.row2=o,n&&(n+="\n"),n+=this.getClipString(t));return n}for(var r=(t=a.asType(t,m)).topRow;r<=t.bottomRow;r++)if(e.rows[r].isVisible){i||(n+="\n"),i=!1;for(var s=t.leftCol,l=!0;s<=t.rightCol;s++)if(e.columns[s].isVisible){l||(n+="\t"),l=!1;var h=e.cells.getCellData(r,s,!0).toString();(h=h.replace(/\t/g," ")).indexOf("\n")>-1&&(h='"'+h.replace(/"/g,'""')+'"'),n+=h}}return n},t.prototype.setClipString=function(t,e){var n=this,i=this._g,o=null==e;if(!e)switch(e=i.selection,i.selectionMode){case D.Row:case D.RowRange:case D.ListBox:e.col=0,e.col2=i.columns.length-1}e=a.asType(e,m);var r=this._parseClipString(a.asString(t));o&&!e.isSingleCell&&r.length&&this._expandClipRows(r,e);var s,l=new m(e.topRow,e.leftCol),h=i.editableCollectionView,c=e.topRow;i.deferUpdate(function(){h&&h.beginUpdate();for(var t=0;t<r.length&&c<i.rows.length;t++,c++)if(i.rows[c].isVisible)for(var o=r[t],a=e.leftCol,d=0;d<o.length&&a<i.columns.length;d++,a++)i.columns[a].isVisible?n._allowEditing(c,a)&&(s=new u(i.cells,new m(c,a),o[d]),i.onPastingCell(s)&&(h&&(h.editItem(i.rows[c].dataItem),n._edItem=h.currentEditItem),i.cells.setCellData(c,a,s.data)&&i.onPastedCell(s)),l.row2=Math.max(l.row2,c),l.col2=Math.max(l.col2,a)):d--;else t--;h&&h.endUpdate(),i.select(l)})},t.prototype._isNativeCheckbox=function(t){return t instanceof HTMLInputElement&&"checkbox"==t.type&&!t.disabled&&!t.readOnly&&a.hasClass(t,"wj-cell-check")&&a.closest(t,".wj-flexgrid")==this._g.hostElement},t.prototype._parseClipString=function(t){var e=[];t=(t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n")).replace(/\n+$/g,"");var n=0,i=0;for(n=0;n<t.length;n++){var o='"'==t[n]&&t[n+1]>=" ",r=!1,s=!1;for(i=n;i<t.length&&!s;i++){var a=t[i];switch(a){case'"':o&&(r=!r);break;case"\t":case"\n":r||(this._parseClipCell(e,t,n,i,"\n"==a),n=i,s=!0)}}if(i==t.length){this._parseClipCell(e,t,n,t.length,!1);break}}return 0==e.length&&e.push([""]),e},t.prototype._parseClipCell=function(t,e,n,i,o){t.length||t.push([]);var r=e.substr(n,i-n),s=r.length;s>1&&'"'==r[0]&&'"'==r[s-1]&&(r=(r=r.substr(1,s-2)).replace(/""/g,'"')),t[t.length-1].push(r),o&&t.push([])},t.prototype._expandClipRows=function(t,e){for(var n=t.length,i=0,o=0;o<n;o++)i=Math.max(i,t[o].length);for(var r=this._g,s=0,a=0,l=e.topRow;l<=e.bottomRow;l++)r.rows[l].isVisible&&s++;for(h=e.leftCol;h<=e.rightCol;h++)r.columns[h].isVisible&&a++;if((s>1||a>1)&&(1==s&&(s=n),1==a&&(a=i),a%i==0&&s%n==0)){for(var h=i;h<a;h++)for(l=0;l<n;l++)t[l].push(t[l%n][h%i]);for(l=n;l<s;l++)t.push(t[l%n])}},t.prototype._updateEditorCell=function(t,e,n){var i=this._g,o=i.cells.getCellElement(t,e),s=i._useFrozenDiv()&&(t<i.frozenRows||e<i.frozenColumns);if(!o||s||i._hasPendingUpdates())i.refresh(!1);else if(this._updateCell(o),(n=n||i._getHasValidation())&&i.headersVisibility&r.Row){var a=i.rowHeaders,l=a.getCellElement(t,a.columns.length-1);l&&this._updateCell(l)}},t.prototype._updateCell=function(t){var e=new E(t,null),n=h._WJS_UPDATING;e.panel&&(a.addClass(t,n),e.grid.cellFactory.updateCell(e.panel,e.row,e.col,t,e.range),a.removeClass(t,n))},t.prototype._getValidationError=function(){var t=this._g;if(t._getHasValidation()){var e=this._rng.row,n=this._rng.col,i=t.cellFactory.getEditorValue(t),o=t.getCellData(e,n,!1);if(t.setCellData(e,n,i,!0,!1)){var r=t._getError(t.cells,e,n);return t.setCellData(e,n,o,!0,!1),r}}return null},t.prototype._allowEditing=function(t,e){var n=this._g;if(n.isReadOnly||n.selectionMode==D.None)return!1;if(t<0||t>=n.rows.length||n.rows[t].isReadOnly||!n.rows[t].isVisible)return!1;if(e<0||e>=n.columns.length)return!1;var i=n._getBindingColumn(n.cells,t,n.columns[e]);return!(!i||i.isReadOnly||!i.isVisible)},t.prototype._commitRowEdits=function(){var t=this._g;if(this.finishEditing()&&this._edItem){var e=t.editableCollectionView;if(e&&e.currentEditItem){var n=new u(t.cells,t.selection);t.onRowEditEnding(n),e.commitEdit(),t.onRowEditEnded(n)}this._edItem=null}},t.prototype._keydown=function(t){var e=this._edt;switch(t.keyCode){case a.Key.F2:return this._fullEdit=!this._fullEdit,t.preventDefault(),!0;case a.Key.F4:return this._toggleListBox(t),t.preventDefault(),!0;case a.Key.Space:return!e||"checkbox"!=e.type||e.disabled||e.readOnly||(e.checked=!e.checked,this.finishEditing(),t.preventDefault()),!0;case a.Key.Enter:if(t.preventDefault(),e&&t.altKey){var n=t.target;if(n instanceof HTMLTextAreaElement){var i=n.value,o=n.selectionStart,r=n.selectionEnd;return n.value=i.substr(0,o)+"\n"+i.substr(r),a.setSelectionRange(n,o+1),!0}}return!this.finishEditing();case a.Key.Tab:return t.preventDefault(),!this.finishEditing();case a.Key.Escape:return t.preventDefault(),this.finishEditing(!0),!0;case a.Key.Up:case a.Key.Down:case a.Key.Left:case a.Key.Right:case a.Key.PageUp:case a.Key.PageDown:case a.Key.Home:case a.Key.End:if(this._lbx)return this._keydownListBox(t);if(t.altKey)switch(t.keyCode){case a.Key.Up:case a.Key.Down:return this._toggleListBox(t),t.preventDefault(),!0}if(!this._fullEdit&&this.finishEditing())return!1}return!0},t.prototype._keydownListBox=function(t){var e=!0;if(this._lbx)switch(t.keyCode){case a.Key.Up:t.altKey?this._toggleListBox(t):this._lbx.selectedIndex>0&&this._lbx.selectedIndex--;break;case a.Key.Down:t.altKey?this._toggleListBox(t):this._lbx.selectedIndex++;break;case a.Key.Home:case a.Key.PageUp:this._lbx.selectedIndex=0;break;case a.Key.End:case a.Key.PageDown:this._lbx.selectedIndex=this._lbx.collectionView.items.length-1;break;default:e=!1}return!!e&&(t.preventDefault(),!0)},t.prototype._keypress=function(t){var e=this._edt;if(e&&"checkbox"!=e.type&&this._list&&this._list.length>0&&t.charCode>=32&&a.getActiveElement()==e){var n=e.selectionStart,i=e.value.substr(0,n);n++,i+=String.fromCharCode(t.charCode);var o=this._findString(this._list,i,!0);o<0&&(o=this._findString(this._list,i,!1)),o>-1&&(e.value=this._list[o],a.setSelectionRange(e,n,e.value.length),e.dispatchEvent(this._evtInput),t.preventDefault())}},t.prototype._findString=function(t,e,n){n||(e=e.toLowerCase());for(var i=0;i<t.length;i++){var o=t[i];if(n||(o=o.toLowerCase()),0==o.indexOf(e))return i}return-1},t.prototype._toggleListBox=function(t,e){var n=this._g,o=n._selHdl.selection;if(e||(e=o),this._lbx&&(this._removeListBox(),o.contains(e)))return n.activeEditor?n.activeEditor.focus():n.containsFocus()||n.focus(),!0;var r=n.isTouching,s=n._getBindingColumn(n.cells,e.row,n.columns[e.col]);return!(!i()||!s.dataMap||!1===s.showDropDown||!i()||!this.startEditing(!0,e.row,e.col,!r,t)||(this._lbx=this._createListBox(),this._lbx.showSelection(),r&&this._lbx.focus(),0))},t.prototype._createListBox=function(){var t=this,e=this._g,n=this._rng,o=e.rows[n.row],r=e._getBindingColumn(e.cells,n.row,e.columns[n.col]),s=document.createElement("div"),l=new(i().ListBox)(s);this._removeListBox(),a.addClass(s,"wj-dropdown-panel wj-grid-listbox"),l.maxHeight=4*o.renderHeight,l.isContentHtml=r.isContentHtml,l.itemsSource=r.dataMap.getDisplayValues(o.dataItem),l.selectedValue=e.activeEditor?e.activeEditor.value:e.getCellData(n.row,n.col,!0),a.addClass(s,r.dropDownCssClass),l.addEventListener(l.hostElement,"click",function(){t._removeListBox(),e.focus(),t.finishEditing()}),l.lostFocus.addHandler(function(){t._removeListBox()}),l.selectedIndexChanged.addHandler(function(){var n=e.activeEditor;n&&(n.value=t._lbx.selectedValue,n.dispatchEvent(t._evtInput),a.setSelectionRange(n,0,n.value.length))});var h=e.cells.getCellElement(n.row,n.col);return h?a.showPopup(s,h,!1,!1,!1):(a.showPopup(s,e.getCellBoundingRect(n.row,n.col)),s[a.Control._OWNR_KEY]=e.hostElement),l},t.prototype._removeListBox=function(){var t=this._lbx;t&&(this._lbx=null,a.hidePopup(t.hostElement,function(){t.dispose()}))},t}();e._EditHandler=V;var B=function(){function t(t){this._nrt=new H,this._g=t,this._keydownBnd=this._keydown.bind(this),this._attach()}return Object.defineProperty(t.prototype,"newRowAtTop",{get:function(){return this._top},set:function(t){t!=this.newRowAtTop&&(this._top=a.asBoolean(t),this.updateNewRowTemplate())},enumerable:!0,configurable:!0}),t.prototype.updateNewRowTemplate=function(){var t=this._g,e=t.editableCollectionView,n=t.rows,i=e&&e.canAddNew&&t.allowAddNew&&!t.isReadOnly,o=n.indexOf(this._nrt),r=this._top?0:n.length-1,s=!1;if(!i&&o>-1){var a=t.selection;a.row==o&&t.select(a.row-1,a.col),n.removeAt(o)}else i&&(o<0?s=!0:o!=r&&(n.removeAt(o),s=!0),s&&(this._top?n.insert(0,this._nrt):n.push(this._nrt)),this._nrt&&this._nrt._setFlag(_.ParentCollapsed,!1))},t.prototype._attach=function(){var t=this._g;t&&(t.beginningEdit.addHandler(this._beginningEdit,this),t.pastingCell.addHandler(this._beginningEdit,this),t.rowEditEnded.addHandler(this._rowEditEnded,this),t.loadedRows.addHandler(this.updateNewRowTemplate,this),t.hostElement.addEventListener("keydown",this._keydownBnd,!0))},t.prototype._detach=function(){var t=this._g;t&&(t.beginningEdit.removeHandler(this._beginningEdit),t.pastingCell.removeHandler(this._beginningEdit),t.rowEditEnded.removeHandler(this._rowEditEnded),t.loadedRows.removeHandler(this.updateNewRowTemplate),t.hostElement.removeEventListener("keydown",this._keydownBnd,!0))},t.prototype._keydown=function(t){t.defaultPrevented||t.keyCode!=a.Key.Escape||null==this._g.activeEditor&&this._top&&this._nrt.dataItem&&(this._nrt.dataItem=null,this._g.invalidate())},t.prototype._beginningEdit=function(t,e){if(!e.cancel){var n=this._g.rows[e.row];if(a.tryCast(n,H)){var i=this._g.editableCollectionView;if(i&&i.canAddNew)if(this._top){if(null==this._nrt.dataItem){var o=null,r=i.sourceCollection,s=i.newItemCreator;o=a.isFunction(s)?s():r&&r.length?new r[0].constructor:{},this._nrt.dataItem=o}}else o=i.currentAddItem&&i.currentAddItem==n.dataItem?i.currentAddItem:i.addNew(),i.moveCurrentTo(o),this.updateNewRowTemplate(),this._g.refresh(!0),this._g.onRowAdded(e),e.cancel&&i.cancelNew()}}},t.prototype._rowEditEnded=function(t,e){var n=this,i=this._g.editableCollectionView,o=this._nrt.dataItem;if(i)if(i.isAddingNew)i.commitNew();else if(o&&!e.cancel){this._nrt.dataItem=null;var r=i.addNew();for(var s in o)r[s]=o[s];this._g.onRowAdded(e),e.cancel?i.cancelNew():i.commitNew(),setTimeout(function(){n._g.select(0,n._g.columns.firstVisibleIndex),n.updateNewRowTemplate()},20)}},t}();e._AddNewHandler=B;var H=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(b);e._NewRowTemplate=H;var z=function(){function t(e){this._compStartBnd=this._compositionstart.bind(this),this._updateImeFocusBnd=this._updateImeFocus.bind(this),this._mouseDownBnd=this._mousedown.bind(this),this._mouseUpBnd=this._mouseup.bind(this),this._g=e,this._tbx=a.createElement('<input class="wj-grid-editor wj-form-control wj-grid-ime"/>'),a.disableAutoComplete(this._tbx),a.setCss(this._tbx,t._cssHidden),e.cells.hostElement.parentElement.appendChild(this._tbx),this._updateImeFocus();var n=e.hostElement,i=e.addEventListener.bind(this);i(this._tbx,"compositionstart",this._compStartBnd),i(n,"blur",this._updateImeFocusBnd),i(n,"focus",this._updateImeFocusBnd),i(n,"mousedown",this._mouseDownBnd,!0),i(n,"mouseup",this._mouseUpBnd,!0),e.cellEditEnded.addHandler(this._cellEditEnded,this),e.selectionChanged.addHandler(this._updateImeFocus,this)}return t.prototype.dispose=function(){var t=this._g,e=t.hostElement,n=t.removeEventListener.bind(this);n(this._tbx,"compositionstart",this._compStartBnd),n(e,"blur",this._updateImeFocusBnd),n(e,"focus",this._updateImeFocusBnd),n(e,"mousedown",this._mouseDownBnd),n(e,"mouseup",this._mouseUpBnd),t.cellEditEnded.removeHandler(this._cellEditEnded),t.selectionChanged.removeHandler(this._updateImeFocus),a.removeChild(this._tbx)},t.prototype._cellEditEnded=function(){a.setCss(this._tbx,t._cssHidden),this._tbx.value=""},t.prototype._compositionstart=function(){var t=this,e=this._g;if(null==e.activeEditor){var n=e._selHdl.selection;if(e.startEditing(!1,n.row,n.col,!1)){var i=e.cells.hostElement,o=e.columns[(n=e.editRange).col].pos+i.offsetLeft,r=e.rows[n.row].pos+i.offsetTop,s=e.getCellBoundingRect(n.row,n.col);if(!n.isSingleCell){var l=e.cells.getCellElement(n.row,n.col);s.width=l.offsetWidth,s.height=l.offsetHeight}n.row<e.frozenRows&&(r+=i.parentElement.scrollTop),n.col<e.frozenColumns&&(o+=i.parentElement.scrollLeft);var h=e.activeEditor;a.setCss(this._tbx,{position:"absolute",pointerEvents:"",opacity:"",left:o,top:r,width:s.width-1,height:s.height-1,zIndex:h&&h.parentElement?h.parentElement.style.zIndex:""}),h instanceof HTMLInputElement&&"minLength,maxLength,pattern".split(",").forEach(function(e){a.setAttribute(t._tbx,e,h.getAttribute(e))}),e._edtHdl._edt=this._tbx}}},t.prototype._mousedown=function(t){this._isMouseDown=!0,this._updateImeFocus()},t.prototype._mouseup=function(t){this._isMouseDown=!1,this._updateImeFocus()},t.prototype._updateImeFocus=function(){var t=this._g,e=a.getActiveElement();if(!t.activeEditor&&!t.isTouching&&!this._isMouseDown&&a.contains(t.hostElement,e)){var n=this._tbx;this._enableIme()?e!=n&&(n.disabled=!1,n.select()):n.disabled=!0}},t.prototype._enableIme=function(){var t=this._g,e=t.selection,n=e.isValid?t._getBindingColumn(t.cells,e.row,t.columns[e.col]):null;return!!t.canEditCell(e.row,e.col)&&!(!n||n.dataType==a.DataType.Boolean)},t._cssHidden={position:"fixed",pointerEvents:"none",opacity:0,left:-10,top:-10,width:0},t}();e._ImeHandler=z},c5I9:function(t,e,n){"use strict";var i=n("mrSG").__extends;Object.defineProperty(e,"__esModule",{value:!0});var o=n("DogD"),r=n("c5I9")||e;window.wijmo=window.wijmo||{},window.wijmo.chart=r,e.DataPoint=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e};var s=function(t){function e(e){var n=t.call(this)||this;return n._engine=e,n}return i(e,t),Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),e}(o.CancelEventArgs);e.RenderEventArgs=s;var a,l,h=function(t){function e(e,n,i){var o=t.call(this,e)||this;return o._index=n,o._count=i,o}return i(e,t),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e}(s);e.SeriesRenderingEventArgs=h,(l=a=e.ImageFormat||(e.ImageFormat={}))[l.Png=0]="Png",l[l.Jpeg=1]="Jpeg",l[l.Svg=2]="Svg";var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._palette=null,e._selectionMode=m.None,e._defPalette=q.standard,e._notifyCurrentChanged=!0,e._legendHost=null,e._needBind=!1,e.rendering=new o.Event,e.rendered=new o.Event,e.selectionChanged=new o.Event,e}return i(e,t),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._items!=t&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=o.asCollectionView(t),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearCachedValues(),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"palette",{get:function(){return this._palette},set:function(t){t!=this._palette&&(this._palette=o.asArray(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plotMargin",{get:function(){return this._plotMargin},set:function(t){t!=this._plotMargin&&(this._plotMargin=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"legend",{get:function(){return this._legend},set:function(t){t!=this._legend&&(this._legend=o.asType(t,X),null!=this._legend&&(this._legend._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._header},set:function(t){t!=this._header&&(this._header=o.asString(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footer",{get:function(){return this._footer},set:function(t){t!=this._footer&&(this._footer=o.asString(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerStyle",{get:function(){return this._headerStyle},set:function(t){t!=this._headerStyle&&(this._headerStyle=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerStyle",{get:function(){return this._footerStyle},set:function(t){t!=this._footerStyle&&(this._footerStyle=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(t){(t=o.asEnum(t,m))!=this._selectionMode&&(this._selectionMode=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=o.asFunction(t),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.onRendered=function(t){this.rendered.raise(this,t)},e.prototype.onRendering=function(t){this.rendering.raise(this,t)},e.prototype.saveImageToFile=function(t){var e,n,i,o;t&&0!==t.length&&-1!==t.indexOf(".")||(t="image.png"),o=t.split("."),e=o[0].toLowerCase(),n=o[1].toLowerCase(),i=a[n[0].toUpperCase()+n.substring(1)],this.saveImageToDataUrl(i,function(t){d.downloadImage(t,e,n)})},e.prototype.saveImageToDataUrl=function(t,e){var n=o.asEnum(t,a,!1),i=a[n].toLowerCase();i&&i.length&&this._exportToImage(i,function(t){e.call(e,t)})},e.prototype._exportToImage=function(t,e){var n,i=new Image,r=this._currentRenderEngine.element;n=d.getDataUri(r),"svg"===t?e.call(null,n):(i.onload=function(){var n,s=document.createElement("canvas"),a=r.parentNode||r,l=o.getElementRect(a);s.width=l.width,s.height=l.height;var h=s.getContext("2d");h.fillStyle="#ffffff",h.fillRect(0,0,l.width,l.height);var u=window.getComputedStyle(a,null).getPropertyValue("padding-left").replace("px",""),c=window.getComputedStyle(a,null).getPropertyValue("padding-top").replace("px","");h.drawImage(i,+u||0,+c||0),n=s.toDataURL("image/"+t),e.call(null,n),s=null},i.src=n)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.isUpdating||this._refreshChart()},e.prototype.onSelectionChanged=function(t){this.selectionChanged.raise(this,t)},e.prototype.onLostFocus=function(e){this._tooltip&&this._tooltip.isVisible&&this._tooltip.hide(),t.prototype.onLostFocus.call(this,e)},e.prototype._cvCollectionChanged=function(t,e){this._clearCachedValues(),this._bindChart()},e.prototype._cvCurrentChanged=function(t,e){this._notifyCurrentChanged&&this._bindChart()},e.prototype._getColor=function(t){var e=this._defPalette;return null!=this._palette&&this._palette.length>0&&(e=this._palette),e[t%e.length]},e.prototype._getColorLight=function(t){var e=this._getColor(t);return this._getLightColor(e)},e.prototype._getLightColor=function(t){var e=new o.Color(t);return null!=e&&-1===t.indexOf("-")&&(1==e.a&&-1==t.indexOf("rgba")&&(e.a*=.7),t=e.toString()),t},e.prototype._bindChart=function(){this._needBind=!0,this.invalidate()},e.prototype._clearCachedValues=function(){},e.prototype._render=function(t,e){void 0===e&&(e=!0);var n=this._getHostSize(),i=n.width,r=n.height;if(0!=i){if(isNaN(i)&&(i=D._WIDTH),(0==r||isNaN(r))&&(r=D._HEIGHT),t.beginRender(),i>0&&r>0){t.setViewportSize(i,r),this._rectChart=new o.Rect(0,0,i,r),this._prepareRender();var s=new o.Rect(0,0,i,r);this._chartRectId="chartRect"+(1e6*Math.random()).toFixed(),t.addClipRect(s,this._chartRectId),this._renderHeader(t,s),this._renderFooter(t,s),this._renderLegends(t,s),this._renderChart(t,s,e)}t.endRender()}},e.prototype._renderHeader=function(t,e){t.startGroup(D._CSS_HEADER,this._chartRectId),e=this._drawTitle(t,e,this.header,this.headerStyle,!1),t.endGroup()},e.prototype._renderFooter=function(t,e){t.startGroup(D._CSS_FOOTER,this._chartRectId),e=this._drawTitle(t,e,this.footer,this.footerStyle,!0),t.endGroup()},e.prototype._renderLegends=function(t,e){var n,i,r=this.legend,s=e.width,a=e.height,l=r._getPosition(s,a);switch(n=r._getDesiredSize(t,l,s,a),l){case j.Right:i=new o.Point(s-=n.width,e.top+.5*(a-n.height));break;case j.Left:e.left+=n.width,s-=n.width,i=new o.Point(0,e.top+.5*(a-n.height));break;case j.Top:a-=n.height,i=new o.Point(.5*(s-n.width),e.top),e.top+=n.height;break;case j.Bottom:i=new o.Point(.5*(s-n.width),e.top+(a-=n.height))}e.width=s,e.height=a,n?(this._legendHost=t.startGroup(D._CSS_LEGEND,this._chartRectId),this._rectLegend=new o.Rect(i.x,i.y,n.width,n.height),this.legend._render(t,i,l,n.width,n.height),t.endGroup()):(this._legendHost=null,this._rectLegend=null)},e.prototype._prepareRender=function(){},e.prototype._renderChart=function(t,e,n){},e.prototype._performBind=function(){},e.prototype._getDesiredLegendSize=function(t,e,n,i){return null},e.prototype._renderLegend=function(t,e,n,i,o,r){},e.prototype._getHitTestItem=function(t){return null},e.prototype._getHitTestValue=function(t){return null},e.prototype._getHitTestLabel=function(t){return null},e.prototype._refreshChart=function(){this._needBind&&(this._needBind=!1,this._performBind()),this.hostElement&&this._render(this._currentRenderEngine)},e.prototype._drawTitle=function(t,e,n,i,r){var s=D._CSS_TITLE,a=r?D._CSS_FOOTER:D._CSS_HEADER,l=null;if(r?this._rectFooter=null:this._rectHeader=null,null!=n){var h=null,u=null,c=null,d=null;i&&(i.fontSize&&(h=i.fontSize),i.foreground&&(u=i.foreground),i.fill&&(u=i.fill),i.fontFamily&&(c=i.fontFamily),i.halign&&(d=i.halign)),t.fontSize=h,t.fontFamily=c,l=t.measureString(n,s,a,i),e.height-=l.height,u||(u=D._FG),t.textFill=u,r?("left"==d?D._renderText(t,n,new o.Point(e.left,e.bottom),0,0,s,a,i):"right"==d?D._renderText(t,n,new o.Point(e.left+e.width,e.bottom),2,0,s,a,i):D._renderText(t,n,new o.Point(e.left+.5*e.width,e.bottom),1,0,s,a,i),this._rectFooter=new o.Rect(e.left,e.bottom,e.width,l.height)):(this._rectHeader=new o.Rect(e.left,e.top,e.width,l.height),e.top+=l.height,"left"==d?D._renderText(t,n,new o.Point(e.left,0),0,0,s,a,i):"right"==d?D._renderText(t,n,new o.Point(e.left+e.width,0),2,0,s,a,i):D._renderText(t,n,new o.Point(e.left+.5*e.width,0),1,0,s,a,i)),t.textFill=null,t.fontSize=null,t.fontFamily=null}return e},e.prototype.pageToControl=function(t,e){return this._toControl(t,e)},e.prototype._toControl=function(t,e){o.isNumber(t)&&o.isNumber(e)?t=new o.Point(t,e):t instanceof MouseEvent&&(t=o.mouseToPage(t)),o.asType(t,o.Point);var n=t.clone(),i=this._getHostOffset();n.x-=i.x,n.y-=i.y;var r=this._getHostComputedStyle();if(r){var s=parseInt(r.paddingLeft.replace("px",""));s&&!isNaN(s)&&(n.x-=s);var a=parseInt(r.paddingTop.replace("px",""));a&&!isNaN(a)&&(n.y-=a)}return n},e.prototype._highlightItems=function(t,e,n){if(n)for(i=0;i<t.length;i++)o.addClass(t[i],e);else for(var i=0;i<t.length;i++)o.removeClass(t[i],e)},e.prototype._parseMargin=function(t){var e={};if(o.isNumber(t)&&!isNaN(t))e.top=e.bottom=e.left=e.right=o.asNumber(t);else if(o.isString(t)){var n=o.asString(t).split(" ",4),i=NaN,r=NaN,s=NaN,a=NaN;n&&(4==n.length?(i=parseFloat(n[0]),a=parseFloat(n[1]),r=parseFloat(n[2]),s=parseFloat(n[3])):2==n.length?(i=r=parseFloat(n[0]),s=a=parseFloat(n[1])):1==n.length&&(i=r=s=a=parseFloat(n[1])),isNaN(i)||(e.top=i),isNaN(r)||(e.bottom=r),isNaN(s)||(e.left=s),isNaN(a)||(e.right=a))}return e},e.prototype._showToolTip=function(t,e){var n=this,i=this._tooltip.showDelay;n._clearTimeouts(),i>0?n._toShow=setTimeout(function(){n._tooltip.show(n.hostElement,t,e),n._tooltip.hideDelay>0&&(n._toHide=setTimeout(function(){n._tooltip.hide()},n._tooltip.hideDelay))},i):(n._tooltip.show(n.hostElement,t,e),n._tooltip.hideDelay>0&&(n._toHide=setTimeout(function(){n._tooltip.hide()},n._tooltip.hideDelay)))},e.prototype._hideToolTip=function(){this._clearTimeouts(),this._tooltip.hide()},e.prototype._clearTimeouts=function(){this._toShow&&(clearTimeout(this._toShow),this._toShow=null),this._toHide&&(clearTimeout(this._toHide),this._toHide=null)},e.prototype._getHostOffset=function(){var t=o.getElementRect(this.hostElement);return new o.Point(t.left,t.top)},e.prototype._getHostSize=function(){var t=new o.Size,e=this.hostElement,n=this._getHostComputedStyle(),i=e.offsetWidth,r=e.offsetHeight;if(n){var s=parseFloat(n.paddingLeft.replace("px","")),a=parseFloat(n.paddingRight.replace("px","")),l=parseFloat(n.paddingTop.replace("px","")),h=parseFloat(n.paddingBottom.replace("px",""));isNaN(s)||(i-=s),isNaN(a)||(i-=a),isNaN(l)||(r-=l),isNaN(h)||(r-=h);var u=parseFloat(n.borderLeftWidth.replace("px","")),c=parseFloat(n.borderRightWidth.replace("px","")),d=parseFloat(n.borderTopWidth.replace("px","")),p=parseFloat(n.borderBottomWidth.replace("px",""));isNaN(u)||(i-=u),isNaN(c)||(i-=c),isNaN(d)||(r-=d),isNaN(p)||(r-=p),t.width=i,t.height=r}return t},e.prototype._getHostComputedStyle=function(){var t=this.hostElement;return t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(this.hostElement):null},e.prototype._find=function(t,e){for(var n=[],i=0;i<t.childElementCount;i++){var o=t.childNodes.item(i);if(e.indexOf(o.nodeName)>=0)n.push(o);else{var r=this._find(o,e);if(r.length>0)for(var s=0;s<r.length;s++)n.push(r[s])}}return n},e._WIDTH=300,e._HEIGHT=200,e._SELECTION_THRESHOLD=15,e}(o.Control);e.FlexChartBase=u;var c=function(){function t(){this._keys={},this._keys.seriesName=null,this._keys.pointIndex=null,this._keys.x=null,this._keys.y=null,this._keys.value=null,this._keys.name=null}return t.prototype.replace=function(t,e){var n=this;return o.format(t,{},function(t,i,o,r){return n.getValue(i,e,o)})},t.prototype.getValue=function(t,e,n){switch(t){case"seriesName":return e.series?e.series.name:"";case"pointIndex":return null!=e.pointIndex?e.pointIndex.toFixed():"";case"x":return n?o.Globalize.format(e.x,n):e._xfmt;case"y":return n?o.Globalize.format(e.y,n):e._yfmt;case"value":return n?o.Globalize.format(e.value,n):e.value;case"name":return e.name}return e.item&&(0==t.indexOf("item.")&&(t=t.substr(5)),t in e.item)?n?o.Globalize.format(e.item[t],n):e.item[t]:""},t}();e._KeyWords=c;var d=function(){function t(){}return t.downloadImage=function(t,e,n){var i=document.createElement("a"),r="image/"+n;if(navigator.msSaveOrOpenBlob){t=t.substring(t.indexOf(",")+1);var s,a,l,h=atob(t),u=[];for(s=0;s<h.length;s+=512){a=h.slice(s,s+512);for(var c=new Array(a.length),d=0;d<a.length;d++)c[d]=a.charCodeAt(d);var p=new Uint8Array(c);u.push(p)}l=new Blob(u,{type:r}),navigator.msSaveOrOpenBlob(l,e+"."+n)}else i.download=e+"."+n,i.href=t,document.body.appendChild(i),i.addEventListener("click",function(t){o.removeChild(i)}),i.click()},t.getDataUri=function(e){var n,i,r,s,a,l,h,u,c,d,p=document.createElement("div"),f=e.cloneNode(!0);return"svg"==e.tagName?(i=(n=o.getElementRect(e.parentNode||e)).width||0,r=n.height||0,s=e.viewBox.baseVal&&0!==e.viewBox.baseVal.width?e.viewBox.baseVal.width:i,a=e.viewBox.baseVal&&0!==e.viewBox.baseVal.height?e.viewBox.baseVal.height:r):(i=(l=e.getBBox()).x+l.width,r=l.y+l.height,f.setAttribute("transform",f.getAttribute("transform").replace(/translate\(.*?\)/,"")),s=i,a=r,(u=document.createElementNS("http://www.w3.org/2000/svg","svg")).appendChild(f),f=u),f.setAttribute("version","1.1"),f.setAttributeNS(t.xmlns,"xmlns","http://www.w3.org/2000/svg"),f.setAttributeNS(t.xmlns,"xmlns:xlink","http://www.w3.org/1999/xlink"),f.setAttribute("width",i),f.setAttribute("height",r),f.setAttribute("viewBox","0 0 "+s+" "+a),o.addClass(f,e.parentNode&&e.parentNode.getAttribute("class")||""),p.appendChild(f),h=t.getStyles(e),(c=document.createElement("style")).setAttribute("type","text/css"),c.innerHTML="<![CDATA[\n"+h+"\n]]>",(d=document.createElement("defs")).appendChild(c),f.insertBefore(d,f.firstChild),"data:image/svg+xml;base64,"+window.btoa(window.unescape(encodeURIComponent(t.doctype+p.innerHTML)))},t.getStyles=function(t){var e="",n=document.styleSheets;return null==n||0===n.length?null:([].forEach.call(n,function(n){try{if(null==n.cssRules||0===n.cssRules.length)return!0}catch(t){if("SecurityError"==t.name)return console.log("SecurityError. Can't read: "+n.href),!0}[].forEach.call(n.cssRules,function(n){var i,o=n.style;if(null==o)return!0;try{i=t.querySelector(n.selectorText)}catch(t){console.warn('Invalid CSS selector "'+n.selectorText+'"',t)}i?e+=n.selectorText+" { "+o.cssText+" }\n":n.cssText.match(/^@font-face/)&&(e+=n.cssText+"\n")})}),e)},t.doctype='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',t.xmlns="http://www.w3.org/2000/xmlns/",t}(),p=function(t){function e(e,n){var i=t.call(this,e,null,!0)||this;i._areas=[],i._keywords=new c,i._startAngle=0,i._innerRadius=0,i._offset=0,i._reversed=!1,i._isAnimated=!1,i._selectedItemPosition=j.None,i._selectedItemOffset=0,i._rotationAngle=0,i._center=new o.Point,i._selectedOffset=new o.Point,i._selectedIndex=-1,i._angles=[],i._colRowLens=[],i._values=[],i._labels=[],i._pels=[],i._sum=0,i.applyTemplate("wj-control wj-flexchart wj-flexpie",null,null),i._currentRenderEngine=new G(i.hostElement),i._legend=new X(i),i._tooltip=new x,i._tooltip.content="<b>{name}</b><br/>{value}",i._tooltip.showDelay=0,i._lbl=new nt,i._lbl._chart=i;var r=i;return i.hostElement.addEventListener("mousemove",function(t){var e=r._tooltip;if(e.content&&!r.isTouching){var n=r.hitTest(t);if(n.distance<=e.threshold){var i=r._getLabelContent(n,r.tooltip.content);r._showToolTip(i,new o.Rect(t.clientX,t.clientY,5,5))}else r._hideToolTip()}}),i.hostElement.addEventListener("click",function(t){var e=!0;if(r.selectionMode!=m.None){var n=r.hitTest(t),i=D._SELECTION_THRESHOLD;r.tooltip&&r.tooltip.threshold&&(i=r.tooltip.threshold),n.distance<=i?(n.pointIndex!=r._selectionIndex&&r.selectedItemPosition!=j.None&&(e=!1),n.pointIndex!=r._selectionIndex&&r._select(n.pointIndex,!0)):r._selectedIndex>=0&&r._select(null)}if(e&&r.isTouching){var s=r._tooltip;if(s.content)if((n=r.hitTest(t)).distance<=s.threshold){var a=r._getLabelContent(n,r.tooltip.content);r._showToolTip(a,new o.Rect(t.clientX,t.clientY,5,5))}else r._hideToolTip()}}),i.hostElement.addEventListener("mouseleave",function(t){r._hideToolTip()}),i.initialize(n),i.refresh(),i}return i(e,t),Object.defineProperty(e.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=o.asString(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindingName",{get:function(){return this._bindingName},set:function(t){t!=this._bindingName&&(this._bindingName=o.asString(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startAngle",{get:function(){return this._startAngle},set:function(t){t!=this._startAngle&&(this._startAngle=o.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},set:function(t){t!=this._offset&&(this._offset=o.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"innerRadius",{get:function(){return this._innerRadius},set:function(t){t!=this._innerRadius&&(this._innerRadius=o.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversed",{get:function(){return this._reversed},set:function(t){t!=this._reversed&&(this._reversed=o.asBoolean(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItemPosition",{get:function(){return this._selectedItemPosition},set:function(t){(t=o.asEnum(t,j,!0))!=this._selectedItemPosition&&(this._selectedItemPosition=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItemOffset",{get:function(){return this._selectedItemOffset},set:function(t){t!=this._selectedItemOffset&&(this._selectedItemOffset=o.asNumber(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnimated",{get:function(){return this._isAnimated},set:function(t){t!=this._isAnimated&&(this._isAnimated=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataLabel",{get:function(){return this._lbl},set:function(t){t!=this._lbl&&(this._lbl=t,this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){if(t!=this._selectedIndex){var e=o.asNumber(t,!0);this._select(e,!0)}},enumerable:!0,configurable:!0}),e.prototype._getLabelsForLegend=function(){return this._labels},e.prototype.hitTest=function(t,e){var n=this._toControl(t,e),i=new U(this,n),o=null;if(D._contains(this._rectHeader,n))i._chartElement=Y.Header;else if(D._contains(this._rectFooter,n))i._chartElement=Y.Footer;else if(D._contains(this._rectLegend,n))i._chartElement=Y.Legend,null!==(o=this.legend._hitTest(n))&&o>=0&&o<this._areas.length&&i._setData(null,o);else if(D._contains(this._rectChart,n)){for(var r,s=this._areas.length,a=NaN,l=0;l<s;l++){var h=n.clone();if(0!=this._rotationAngle){var u=this._center.x,c=this._center.y,d=-u+h.x,p=-c+h.y,f=Math.sqrt(d*d+p*p),g=Math.atan2(p,d)-this._rotationAngle*Math.PI/180;h.x=u+f*Math.cos(g),h.y=c+f*Math.sin(g)}l==this._selectedIndex&&(h.x-=this._selectedOffset.x,h.y-=this._selectedOffset.y);var _=this._areas[l];if(_.contains(h)&&(i._setData(null,_.tag),i._dist=0,l!=this._selectedIndex))break;var m=_.distance(h);void 0!==m&&(isNaN(a)||m<a)&&(a=m,r=_)}0!==i._dist&&null!=r&&(i._setData(null,r.tag),i._dist=a),i._chartElement=Y.ChartArea}else i._chartElement=Y.None;return i},e.prototype._performBind=function(){if(this._initData(),this._cv){this._selectionIndex=this._cv.currentPosition;var t=this._cv.items;if(t)for(var e=t.length,n=0;n<e;n++)this._sum+=Math.abs(this._getBindData(t[n],this._values,this._labels,this.binding,this.bindingName))}},e.prototype._initData=function(){this._sum=0,this._values=[],this._labels=[]},e.prototype._getBindData=function(t,e,n,i,r){var s,a=0;if(i&&(s=t[i]),a=0,o.isNumber(s)?a=o.asNumber(s):s&&(a=parseFloat(s.toString())),!isNaN(a)&&isFinite(a)?e.push(a):e.push(a=0),r&&t){var l=t[r];l&&(l=l.toString()),n.push(l)}else n.push(a.toString());return a},e.prototype._render=function(e,n){void 0===n&&(n=!0),this._selectionAnimationID&&clearInterval(this._selectionAnimationID),t.prototype._render.call(this,e,n)},e.prototype._prepareRender=function(){this._areas=[]},e.prototype._renderChart=function(t,n,i){var r,a,l=this._rectChart.clone();new o.Size(l.width,l.height),this.onRendering(new s(t)),this._pieGroup=t.startGroup("wj-slice-group",null,!0);var h=this._parseMargin(this.plotMargin),u=this.dataLabel,c=u.content&&u.position==J.Outside,d=c?(o.isNumber(u.offset)?u.offset:0)+24:0;isNaN(h.left)&&(h.left=c?d:e._MARGIN),isNaN(h.right)&&(h.right=c?d:e._MARGIN),isNaN(h.top)&&(h.top=c?d:e._MARGIN),isNaN(h.bottom)&&(h.bottom=c?d:e._MARGIN),n.top+=h.top,n.height=(a=n.height-(h.top+h.bottom))>0?a:24,n.left+=h.left,n.width=(r=n.width-(h.left+h.right))>0?r:24,this._renderData(t,n,this._pieGroup),t.endGroup(),this._rotationAngle=0,this._highlightCurrent(),this.dataLabel.content&&this.dataLabel.position!=J.None&&this._renderLabels(t),this.onRendered(new s(t))},e.prototype._getDesiredLegendSize=function(t,e,n,i){var r=new o.Size,s=new o.Size(n,i),a=this._getLabelsForLegend(),l=a.length,h=0,u=0;this._colRowLens=[];for(var c=0;c<l;c++){var d=this._measureLegendItem(t,a[c]);e?(u+d.height>i&&(r.height=i,this._colRowLens.push(h),h=0,u=0),h<d.width&&(h=d.width),u+=d.height):(h+d.width>n&&(r.width=n,this._colRowLens.push(u),u=0,h=0),u<d.height&&(u=d.height),h+=d.width)}return e?(r.height<u&&(r.height=u),this._colRowLens.push(h),r.width=this._colRowLens.reduce(function(t,e){return t+e},0),r.width>s.width/2&&(r.width=s.width/2)):(r.width<h&&(r.width=h),this._colRowLens.push(u),r.height=this._colRowLens.reduce(function(t,e){return t+e},0),r.height>s.height/2&&(r.height=s.height/2)),r},e.prototype._renderLegend=function(t,e,n,i,r,s){for(var a=this,l=a._rectLegend,h=a._getLabelsForLegend(),u=h.length,c=0,d=e.clone(),p=0;p<u;p++){var f=a._measureLegendItem(t,h[p]);i?d.y+f.height>l.top+l.height+1&&(d.x+=this._colRowLens[c],c++,d.y=e.y):d.x+f.width>l.left+l.width+1&&(d.y+=this._colRowLens[c],c++,d.x=e.x);var g=new o.Rect(d.x,d.y,f.width,f.height);a._drawLegendItem(t,g,p,h[p]),n.push(g),i?d.y+=f.height:d.x+=f.width}},e.prototype._renderData=function(t,e,n){this._pels=[],this._angles=[];var i=this.innerRadius,o=this.offset;if(this._sum>0){var r=(this.startAngle+180)*Math.PI/180,s=e.left+.5*e.width,a=e.top+.5*e.height,l=Math.min(.5*e.width,.5*e.height);this._center.x=s,this._center.y=a;var h=Math.max(o,this.selectedItemOffset);h>0&&(o*=l/=1+h),this._radius=l,this._renderPie(t,l,i*l,r,o),this._highlightCurrent()}},e.prototype._renderPie=function(t,e,n,i,o){this._renderSlices(t,this._values,this._sum,e,n,i,2*Math.PI,o)},e.prototype._getCenter=function(){return this._center},e.prototype._renderSlices=function(t,e,n,i,o,r,s,a){for(var l,h,u,c=e.length,d=r,p=1==this.reversed,f=this._center,g=1===c?360:359.9/360,_=0;_<c;_++){h=f.x,u=f.y,l=t.startGroup("wj-slice"),t.fill=this._getColorLight(_),t.stroke=this._getColor(_);var m=Math.abs(e[_]),v=Math.abs(m-n)<1e-10?s:s*m/n;v=Math.min(v,s*g);var y=p?d-.5*v:d+.5*v;a>0&&v<s&&(h+=a*Math.cos(y),u+=a*Math.sin(y)),this._renderSlice(t,h,u,y,_,i,o,d,v,s),p?d-=v:d+=v,t.endGroup(),this._pels.push(l)}},e.prototype._renderSlice=function(t,e,n,i,r,s,a,l,h,u){var c=this,d=!!this.reversed;if(this._angles.push(i),this.itemFormatter){var p=new U(this,new o.Point(e+s*Math.cos(i),n+s*Math.sin(i)),Y.SeriesSymbol);p._setData(null,r),this.itemFormatter(t,p,function(){c._drawSlice(t,r,d,e,n,s,a,l,h)})}else this._drawSlice(t,r,d,e,n,s,a,l,h)},e.prototype._renderLabels=function(t){var e=this._areas.length,n=this.dataLabel,i=n.position,r="wj-data-label",s=this._rotationAngle,a=n.connectingLine,l=n.offset?n.offset:0;t.stroke="null",t.fill="transparent",t.strokeWidth=1,t.startGroup("wj-data-labels");for(var h=0;h<e;h++){var u=this._areas[h];if(u){var c=u.radius,d=u.langle+s,p=1,g=1;i==J.Center||i===J.Radial||i===J.Circular?c*=.5*(1+(u.innerRadius||0)/u.radius):((d=f.clampAngle(d))<=-170||d>=170?(p=2,g=1):d>=-100&&d<=-80?(p=1,g=2):d>=-10&&d<=10?(p=0,g=1):d>=80&&d<=100?(p=1,g=0):-180<d&&d<-90?(p=2,g=2):-90<=d&&d<0?(p=0,g=2):0<d&&d<90?(p=0,g=0):90<d&&d<180&&(p=2,g=0),i==J.Inside&&(p=2-p,g=2-g)),d*=Math.PI/180;var _=0,m=0,v=0;h==this._selectedIndex&&this.selectedItemOffset>0&&(v=this.selectedItemOffset),v>0&&(_=Math.cos(d)*v*this._radius,m=Math.sin(d)*v*this._radius);var y=c;i==J.Outside?y+=l:i==J.Inside&&(y-=l);var b=u.center.x,w=u.center.y,C=b-this._center.x,x=w-this._center.y;if(0!=this._rotationAngle){var j=Math.sqrt(C*C+x*x),S=Math.atan2(x,C)+this._rotationAngle*Math.PI/180;b=this._center.x+j*Math.cos(S),w=this._center.y+j*Math.sin(S)}var E=new o.Point(b+_+y*Math.cos(d),w+m+y*Math.sin(d));n.border&&i!=J.Center&&(0==p?E.x+=2:2==p&&(E.x-=2),0==g?E.y+=2:2==g&&(E.y-=2));var I=new U(this,E);I._setData(null,h);var P=this._getLabelContent(I,n.content),M=new $(t,I,E,P);if(n.onRendering&&(n.onRendering(M)?(P=M.text,E=M.point):P=null),P){var T,R=180*Math.atan2(w-E.y,b-E.x)/Math.PI;if(R=(R+360)%360,i===J.Radial||i===J.Circular?(i===J.Radial?R>90&&R<270&&(R+=180):(R>180&&R<360&&(R+=180),R-=90),(T=D._renderRotatedText(t,P,E,p,g,E,R,r).getBBox()).left=T.x,T.top=T.y):T=D._renderText(t,P,E,p,g,r),n.border&&t.drawRect(T.left-2,T.top-2,T.width+4,T.height+4,"wj-data-label-border"),a){var A=new o.Point(u.center.x+_+c*Math.cos(d),u.center.y+m+c*Math.sin(d));t.drawLine(E.x,E.y,A.x,A.y,"wj-data-label-line")}}}}t.endGroup()},e.prototype._drawSlice=function(t,e,n,i,r,s,a,l,h){var u;n?a>0?(0!=h&&t.drawDonutSegment(i,r,s,a,l-h,h),(u=new v(new o.Point(i,r),s,a,l-h,h,this.startAngle)).tag=e,this._areas.push(u)):(0!=h&&t.drawPieSegment(i,r,s,l-h,h),(u=new g(new o.Point(i,r),s,l-h,h,this.startAngle)).tag=e,this._areas.push(u)):(a>0?(0!=h&&t.drawDonutSegment(i,r,s,a,l,h),(u=new v(new o.Point(i,r),s,a,l,h,this.startAngle)).tag=e,this._areas.push(u)):(0!=h&&t.drawPieSegment(i,r,s,l,h),(u=new g(new o.Point(i,r),s,l,h,this.startAngle)).tag=e,this._areas.push(u)),l+=h)},e.prototype._measureLegendItem=function(t,e){var n=new o.Size;if(n.width=W._LEGEND_ITEM_WIDTH,n.height=W._LEGEND_ITEM_HEIGHT,e){var i=t.measureString(e,D._CSS_LABEL,D._CSS_LEGEND);n.width+=i.width,n.height<i.height&&(n.height=i.height)}return n.width+=3*W._LEGEND_ITEM_MARGIN,n.height+=2*W._LEGEND_ITEM_MARGIN,n},e.prototype._drawLegendItem=function(t,e,n,i){t.strokeWidth=1;var r=W._LEGEND_ITEM_MARGIN,s=null,a=null;null===s&&(s=this._getColorLight(n)),null===a&&(a=this._getColor(n)),t.fill=s,t.stroke=a;var l=e.top+.5*e.height,h=W._LEGEND_ITEM_HEIGHT;t.drawRect(e.left+r,l-.5*h,W._LEGEND_ITEM_WIDTH,h,null),null!=i&&D._renderText(t,i.toString(),new o.Point(e.left+h+2*r,l),0,1,D._CSS_LABEL)},e.prototype._getLabelContent=function(t,e){return o.isString(e)?this._keywords.replace(e,t):o.isFunction(e)?e(t):null},e.prototype._select=function(t,e){if(void 0===e&&(e=!1),this._highlight(!1,this._selectionIndex),this._selectionIndex=t,this.selectionMode==m.Point){var n=this._cv;n&&(this._notifyCurrentChanged=!1,n.moveCurrentToPosition(t),this._notifyCurrentChanged=!0)}!this.isAnimated&&(this.selectedItemOffset>0||this.selectedItemPosition!=j.None)?(this._selectedIndex=null==t?-1:t,this.invalidate()):this._highlight(!0,this._selectionIndex,e),this.onSelectionChanged()},e.prototype._highlightCurrent=function(){if(this.selectionMode!=m.None){var t=-1,e=this._cv;e&&(t=e.currentPosition),this._highlight(!0,t)}},e.prototype._highlight=function(t,e,n){if(void 0===n&&(n=!1),this.selectionMode==m.Point&&void 0!==e&&null!==e&&e>=0){var i=this._pels[e];if(t){if(i){i.parentNode.appendChild(i);var o=this._find(i,["ellipse"]);this._highlightItems(this._find(i,["path","ellipse"]),D._CSS_SELECTION,t)}var r=this._angles[e];if(this.selectedItemPosition!=j.None&&0!=r){var s=0;this.selectedItemPosition==j.Left?s=180:this.selectedItemPosition==j.Top?s=-90:this.selectedItemPosition==j.Bottom&&(s=90);var a=s*Math.PI/180-r;a*=180/Math.PI,n&&this.isAnimated?this._animateSelectionAngle(a,.5):(this._rotationAngle=a,this._pieGroup.transform.baseVal.getItem(0).setRotate(a,this._center.x,this._center.y))}var l=this.selectedItemOffset;if(l>0&&o&&0==o.length){var h=this._selectedOffset.x=Math.cos(r)*l*this._radius,u=this._selectedOffset.y=Math.sin(r)*l*this._radius;i&&i.setAttribute("transform","translate("+h.toFixed()+","+u.toFixed()+")")}this._selectedIndex=e}else i&&(i.parentNode.insertBefore(i,i.parentNode.childNodes.item(e)),i.removeAttribute("transform"),this._highlightItems(this._find(i,["path","ellipse"]),D._CSS_SELECTION,t)),this._selectedIndex==e&&(this._selectedIndex=-1)}},e.prototype._animateSelectionAngle=function(t,e){var n=f.clampAngle(this._rotationAngle),i=(t=f.clampAngle(t))-n,r=this,s=n,a=r._pieGroup;r._selectionAnimationID&&clearInterval(this._selectionAnimationID),this._selectionAnimationID=o.animate(function(t){a==r._pieGroup&&(r._rotationAngle=n=s+i*t,r._pieGroup.transform.baseVal.getItem(0).setRotate(n,r._center.x,r._center.y),1==t&&clearInterval(r._selectionAnimationID),t>.99&&(r.selectedItemOffset>0||r.selectedItemPosition!=j.None)&&r.invalidate())},1e3*e)},e.prototype._getHitTestItem=function(t){var e,n=null;return(e=null!=this._cv?this._cv.items:this.itemsSource)&&t<e.length&&(n=e[t]),n},e.prototype._getHitTestValue=function(t){return this._values[t]},e.prototype._getHitTestLabel=function(t){return this._labels[t]},e._MARGIN=4,e}(u);e.FlexPie=p;var f=function(){function t(){}return t.clampAngle=function(t,e){void 0===e&&(e=0);var n=(t+180)%360-180;return n<-180+(e<0?e+360:e)&&(n+=360),n},t}(),g=function(){function t(t,e,n,i,o){void 0===o&&(o=0),this._isFull=!1,this._center=t,this._radius=e,this._originAngle=n,this._originSweep=i,i>=2*Math.PI&&(this._isFull=!0),this._sweep=.5*i*180/Math.PI,this._angle=f.clampAngle(180*n/Math.PI+this._sweep),this._radius2=e*e,this._startAngle=o}return t.prototype.contains=function(t){var e=t.x-this._center.x,n=t.y-this._center.y;if(e*e+n*n<=this._radius2){var i=180*Math.atan2(n,e)/Math.PI,o=f.clampAngle(this._angle,this._startAngle)-f.clampAngle(i,this._startAngle);if(this._isFull||Math.abs(o)<=this._sweep)return!0}return!1},t.prototype.distance=function(t){if(this.contains(t))return 0;var e=t.x-this._center.x,n=t.y-this._center.y,i=e*e+n*n,o=180*Math.atan2(n,e)/Math.PI,r=f.clampAngle(this._angle,this._startAngle)-f.clampAngle(o,this._startAngle);return this._isFull||Math.abs(r)<=this._sweep?Math.sqrt(i)-this._radius:void 0},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),t}();e._PieSegment=g;var _,m,v=function(){function t(t,e,n,i,o,r){void 0===r&&(r=0),this._isFull=!1,this._center=t,this._radius=e,this._iradius=n,this._originAngle=i,this._originSweep=o,o>=2*Math.PI&&(this._isFull=!0),this._sweep=.5*o*180/Math.PI,this._angle=f.clampAngle(180*i/Math.PI+this._sweep),this._radius2=e*e,this._iradius2=n*n,this._startAngle=r}return t.prototype.contains=function(t){var e=t.x-this._center.x,n=t.y-this._center.y,i=e*e+n*n;if(i>=this._iradius2&&i<=this._radius2){var o=180*Math.atan2(n,e)/Math.PI,r=f.clampAngle(this._angle,this._startAngle)-f.clampAngle(o,this._startAngle);if(this._isFull||Math.abs(r)<=this._sweep)return!0}return!1},t.prototype.distance=function(t){if(this.contains(t))return 0},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"langle",{get:function(){return this._angle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return this._originAngle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sweep",{get:function(){return this._originSweep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerRadius",{get:function(){return this._iradius},enumerable:!0,configurable:!0}),t}();e._DonutSegment=v,function(t){t[t.None=0]="None",t[t.Stacked=1]="Stacked",t[t.Stacked100pc=2]="Stacked100pc"}(_=e.Stacking||(e.Stacking={})),function(t){t[t.None=0]="None",t[t.Series=1]="Series",t[t.Point=2]="Point"}(m=e.SelectionMode||(e.SelectionMode={}));var y=function(t){function e(e,n){var i=t.call(this,e,null,!0)||this;i._series=new o.ObservableArray,i._axes=new T,i._pareas=new N,i._interpolateNulls=!1,i._legendToggle=!1,i._symbolSize=10,i._dataInfo=new w,i.__barPlotter=null,i.__linePlotter=null,i.__areaPlotter=null,i.__bubblePlotter=null,i.__financePlotter=null,i.__funnelPlotter=null,i._plotters=[],i._rotated=!1,i._stacking=_.None,i._xlabels=[],i._xvals=[],i._lblAreas=[],i._colRowLens=[],i._bindingSeparator=",",i.seriesVisibilityChanged=new o.Event,i.applyTemplate("wj-control wj-flexchart",null,null);var r=i;return r._series.collectionChanged.addHandler(function(){for(var t=r._series,e=0;e<t.length;e++){var n=o.tryCast(t[e],z);if(!n)throw"chartSeries array must contain SeriesBase objects.";n._chart=r,n.axisX&&(n.axisX._chart=r),n.axisY&&(n.axisY._chart=r)}r.invalidate()}),i._currentRenderEngine=new G(i.hostElement),i._hitTester=new ft(i),i._legend=new X(i),i._tooltip=new x,i._tooltip.showDelay=0,i._lbl=new et,i._lbl._chart=i,i._initAxes(),r._axes.collectionChanged.addHandler(function(){for(var t=r._axes,e=0;e<t.length;e++){var n=o.tryCast(t[e],P);if(!n)throw"axes array must contain Axis objects.";n._chart=r}r.invalidate()}),r._pareas.collectionChanged.addHandler(function(){for(var t=r._pareas,e=0;e<t.length;e++){var n=o.tryCast(t[e],O);if(!n)throw"plotAreas array must contain PlotArea objects.";n._chart=r}r.invalidate()}),i._keywords=new c,i.hostElement.addEventListener("click",function(t){var e=r._tooltip;if(e.content&&r.isTouching){var n=r.hitTest(t);if(n.distance<=e.threshold){var i=r._getLabelContent(n,r._tooltip.content);r._showToolTip(i,new o.Rect(t.clientX,t.clientY,5,5))}else r._hideToolTip()}}),i.hostElement.addEventListener("mousemove",function(t){var e=r._tooltip;if(e.content&&!r.isTouching){var n=r.hitTest(t);if(n.distance<=e.threshold){var i=r._getLabelContent(n,r._tooltip.content);r._showToolTip(i,new o.Rect(t.clientX,t.clientY,5,5))}else r._hideToolTip()}}),i.hostElement.addEventListener("mouseleave",function(t){r._hideToolTip()}),i.hostElement.addEventListener("click",function(t){if(r.selectionMode!=m.None){var e=r._hitTestData(t),n=D._SELECTION_THRESHOLD;r.tooltip&&r.tooltip.threshold&&(n=r.tooltip.threshold),e.distance<=n&&e.series?r._select(e.series,e.pointIndex):r.selectionMode==m.Series&&(e=r.hitTest(t)).chartElement==Y.Legend&&e.series?r._select(e.series,null):r._select(null,null)}!0===r.legendToggle&&(e=r.hitTest(t)).chartElement==Y.Legend&&e.series&&(e.series.visibility==L.Legend?e.series.visibility=L.Visible:e.series.visibility==L.Visible&&(e.series.visibility=L.Legend),r.focus())}),i.initialize(n),i}return i(e,t),e.prototype._initAxes=function(){this._axisX=new P(j.Bottom),this._axisY=new P(j.Left),this._axisX.majorGrid=!1,this._axisX.name="axisX",this._axisY.majorGrid=!0,this._axisY.majorTickMarks=I.None,this._axisY.name="axisY",this._axisX._chart=this,this._axisY._chart=this,this._axes.push(this._axisX),this._axes.push(this._axisY)},Object.defineProperty(e.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisX",{get:function(){return this._axisX},set:function(t){if(t!=this._axisX){var e=this._axisX=o.asType(t,P);this.beginUpdate(),e&&(void 0===e.majorGrid&&(e.majorGrid=!1),void 0===e.name&&(e.name="axisX"),void 0==e.position&&(e.position=j.Bottom),e._axisType=S.X,e._chart=this),this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"axisY",{get:function(){return this._axisY},set:function(t){if(t!=this._axisY){var e=this._axisY=o.asType(t,P);this.beginUpdate(),e&&(void 0===e.majorGrid&&(e.majorGrid=!0),void 0===e.name&&(e.name="axisY"),e.majorTickMarks=I.None,void 0==e.position&&(e.position=j.Left),e._axisType=S.Y,e._chart=this),this.endUpdate()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"plotAreas",{get:function(){return this._pareas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=o.asString(t,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindingX",{get:function(){return this._bindingX},set:function(t){t!=this._bindingX&&(this._bindingX=o.asString(t,!0),this._bindChart())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){t!=this._symbolSize&&(this._symbolSize=o.asNumber(t,!1,!0),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interpolateNulls",{get:function(){return this._interpolateNulls},set:function(t){t!=this._interpolateNulls&&(this._interpolateNulls=o.asBoolean(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"legendToggle",{get:function(){return this._legendToggle},set:function(t){t!=this._legendToggle&&(this._legendToggle=o.asBoolean(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataLabel",{get:function(){return this._lbl},set:function(t){t!=this._lbl&&(this._lbl=o.asType(t,et),this._lbl&&(this._lbl._chart=this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this._selection},set:function(t){t!=this._selection&&(this._selection=o.asType(t,z,!0),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.onSeriesVisibilityChanged=function(t){this.seriesVisibilityChanged.raise(this,t)},e.prototype.hitTest=function(t,e){var n=this._toControl(t,e),i=new U(this,n),o=null;if(D._contains(this._rectHeader,n))i._chartElement=Y.Header;else if(D._contains(this._rectFooter,n))i._chartElement=Y.Footer;else if(D._contains(this._rectLegend,n))i._chartElement=Y.Legend,null!==(o=this.legend._hitTest(n))&&o>=0&&o<this.series.length&&(this._getChartType()===C.Bar?i._setData(this.series[this.series.length-1-o]):i._setData(this.series[o]));else if(D._contains(this._rectChart,n)){var r=this._hitTestLabels(n);if(r)i._chartElement=Y.DataLabel,i._dist=0,i._setDataPoint(r.tag);else{for(var s=this._hitTester.hitTest(n),a=null,l=null,h=this.series.length-1;h>=0;h--)if(this.series[h].hitTest!==W.prototype.hitTest){var u=this.series[h].hitTest(t);if(u&&((!a||u.distance<a.distance)&&(a=u,l=h),0===u.distance))break}s&&s.area?a&&a.distance<s.distance?i=a:a&&a.distance==s.distance&&l>s.area.tag.seriesIndex?i=a:(i._setDataPoint(s.area.tag),i._dist=s.distance):a&&(i=a),D._contains(this.axisX._axrect,n)?i._chartElement=Y.AxisX:D._contains(this.axisY._axrect,n)?i._chartElement=Y.AxisY:D._contains(this._plotRect,n)?i._chartElement=Y.PlotArea:D._contains(this._rectChart,n)&&(i._chartElement=Y.ChartArea)}}else i._chartElement=Y.None;return i},e.prototype.pointToData=function(t,e){return o.isNumber(t)&&o.isNumber(e)&&(t=new o.Point(t,e)),t instanceof MouseEvent?(t=new o.Point(t.pageX,t.pageY),t=this._toControl(t)):t=t.clone(),t.x=this.axisX.convertBack(t.x),t.y=this.axisY.convertBack(t.y),t},e.prototype.dataToPoint=function(t,e){o.isNumber(t)&&o.isNumber(e)&&(t=new o.Point(t,e)),o.asType(t,o.Point);var n=t.clone();return n.x=this.axisX.convert(n.x),n.y=this.axisY.convert(n.y),n},e.prototype._copy=function(t,e){if("series"==t){this.series.clear();for(var n=o.asArray(e),i=0;i<n.length;i++){var r=this._createSeries();o.copy(r,n[i]),this.series.push(r)}return!0}return!1},e.prototype._createSeries=function(){return new W},e.prototype._clearCachedValues=function(){for(var t=0;t<this._series.length;t++){var e=this._series[t];null==e.itemsSource&&e._clearValues()}},e.prototype._performBind=function(){if(this._xDataType=null,this._xlabels.splice(0),this._xvals.splice(0),this._cv){var t=this._cv.items;if(t){for(var e=t.length,n=0;n<e;n++){var i=t[n];if(this._bindingX){var r=i[this._bindingX];o.isNumber(r)?(this._xvals.push(o.asNumber(r)),this._xDataType=o.DataType.Number):o.isDate(r)&&(this._xvals.push(o.asDate(r).valueOf()),this._xDataType=o.DataType.Date),this._xlabels.push(i[this._bindingX])}}this._xvals.length==e?this._xlabels.splice(0):this._xvals.splice(0)}}},e.prototype._hitTestSeries=function(t,e){var n=this._toControl(t),i=new U(this,n),o=this._hitTester.hitTestSeries(n,e);return o&&o.area&&(i._setDataPoint(o.area.tag),i._chartElement=Y.PlotArea,i._dist=o.distance),i},e.prototype._hitTestData=function(t){var e=this._toControl(t),n=new U(this,e),i=this._hitTester.hitTest(e,!0);return i&&i.area&&(n._setDataPoint(i.area.tag),n._dist=i.distance),n},e.prototype._hitTestLabels=function(t){for(var e=null,n=this._lblAreas.length,i=0;i<n;i++)if(this._lblAreas[i].contains(t)){e=this._lblAreas[i];break}return e},e._dist2=function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},e._dist=function(t,e,n){return Math.sqrt(D._distToSegmentSquared(t,e,n))},e._distToSegmentSquared=function(t,e,n){var i=D._dist2(e,n);if(0==i)return D._dist2(t,e);var r=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/i;return D._dist2(t,r<0?e:r>1?n:new o.Point(e.x+r*(n.x-e.x),e.y+r*(n.y-e.y)))},e.prototype._isRotated=function(){return this._getChartType()==C.Bar?!this._rotated:this._rotated},e.prototype._getChartType=function(){return null},e.prototype._prepareRender=function(){this._hitTester.clear()},e.prototype._renderChart=function(t,e,n){var i=this._rectChart.clone(),r=new o.Size(i.width,i.height);(v=this._getPlotter(null)).stacking=this._stacking,this._curPlotter!=v&&(this._curPlotter&&this._curPlotter.unload(),this._curPlotter=v),v.load();var a=this._isRotated();this._dataInfo.analyse(this._series,a,v.stacking,this._xvals.length>0?this._xvals:null,this.axisX.logBase>0,this.axisY.logBase>0);var l=v.adjustLimits(this._dataInfo,e.clone());if(a){var h=this._dataInfo.getDataTypeX();h||(h=this._xDataType),this.axisX._updateActualLimits(this._dataInfo.getDataTypeY(),l.left,l.right),this.axisY._updateActualLimits(h,l.top,l.bottom,this._xlabels,this._xvals)}else{var u=this._dataInfo.getDataTypeX();u||(u=this._xDataType),this.axisX._updateActualLimits(u,l.left,l.right,this._xlabels,this._xvals),this.axisY._updateActualLimits(this._dataInfo.getDataTypeY(),l.top,l.bottom)}var c=this._getAxes();if(this._updateAuxAxes(c,a),this._layout(e,r,t),t.startGroup(D._CSS_PLOT_AREA),t.fill="transparent",t.stroke=null,this.plotAreas.length>0)for(g=0;g<this.plotAreas.length;g++)this.plotAreas[g]._render(t);else{var d=this._plotRect;t.drawRect(d.left,d.top,d.width,d.height)}t.endGroup();var p=this._series.length;this._clearPlotters();for(var f={},g=0;g<p;g++){var _=this._series[g];if(((j=_.visibility)==L.Visible||j==L.Plot)&&_.getValues(0)){var m=_._getAxisY(),v=this._getPlotter(_);if(!m||m==this.axisY||v instanceof _t)v.seriesCount++;else{var y=m._uniqueId;f[y]?f[y].count+=1:f[y]={count:1,index:0}}}}if(this.onRendering(new s(t)),this._getChartType()!==C.Funnel)for(g=0;g<c.length;g++){var b=c[g];x=t.startGroup(b.axisType==S.X?D._CSS_AXIS_X:D._CSS_AXIS_Y,this._chartRectId),b._hostElement=n?x:b._hostElement,b._render(t),t.endGroup()}for(t.startGroup("wj-series-group"),this._plotrectId="plotRect"+(1e6*Math.random()).toFixed(),t.addClipRect(this._plotRect,this._plotrectId),g=0;g<p;g++){var w=this._series[g];w._pointIndexes=[],v=this._getPlotter(w),w._plotter=v;var x=t.startGroup(w.cssClass,v.clipping?this._plotrectId:null);w._hostElement=n?x:w._hostElement;var j=w.visibility,E=w.axisX,I=w.axisY;if(E||(E=this.axisX),I||(I=this.axisY),j==L.Visible||j==L.Plot){var P,M,T=f[I._uniqueId];T?(P=T.index,M=T.count,T.index++,w.onRendering(t,P,M)||v.plotSeries(t,E,I,w,this,P,M)):(P=v.seriesIndex,M=v.seriesCount,v.seriesIndex++,w.onRendering(t,P,M)||v.plotSeries(t,E,I,w,this,P,M)),w.onRendered(t)}t.endGroup()}t.endGroup(),this._lblAreas=[],this.dataLabel.content&&this.dataLabel.position!=Z.None&&this._renderLabels(t),this._highlightCurrent(),this.onRendered(new s(t))},e.prototype._getDesiredLegendSize=function(t,e,n,i){var r=new o.Size,s=this.series,a=s.length,l=0,h=0;this._colRowLens=[];for(var u=0;u<a;u++){var c=o.tryCast(s[u],z),d=c.visibility;if(c.name&&d!=L.Hidden&&d!=L.Plot)for(var p=c.legendItemLength(),f=0;f<p;f++){var g=c.measureLegendItem(t,f);e?(l+g.height>i&&(r.height=i,this._colRowLens.push(h),h=0,l=0),h<g.width&&(h=g.width),l+=g.height):(h+g.width>n&&(r.width=n,this._colRowLens.push(l),l=0,h=0),l<g.height&&(l=g.height),h+=g.width)}}return e?(r.height<l&&(r.height=l),this._colRowLens.push(h),r.width=this._colRowLens.reduce(function(t,e){return t+e},0),r.width>n/2&&(r.width=n/2)):(r.width<h&&(r.width=h),this._colRowLens.push(l),r.height=this._colRowLens.reduce(function(t,e){return t+e},0),r.height>i/2&&(r.height=i/2)),r},e.prototype._renderLegend=function(t,e,n,i,r,s){var a,l=this.series,h=l.length,u=e.clone(),c=0;if(this._getChartType()===C.Bar)for(d=h-1;d>=0;d--)a=o.tryCast(l[d],z),c=this._renderLegendElements(t,a,e,u,n,i,r,s,c);else for(var d=0;d<h;d++)a=o.tryCast(l[d],z),c=this._renderLegendElements(t,a,e,u,n,i,r,s,c)},e.prototype._renderLegendElements=function(t,e,n,i,r,s,a,l,h){var u=this._rectLegend,c=h;if(!e)return c;var d=e.visibility;if(!e.name||d==L.Hidden||d==L.Plot)return e._legendElement=null,r.push(null),c;var p=e.legendItemLength(),f=t.startGroup(e.cssClass);d==L.Legend?(f.setAttribute("opacity","0.5"),e._legendElement=f):e._legendElement=d==L.Visible?f:null;for(var g=0;g<p;g++){var _=e.measureLegendItem(t,g);s?i.y+_.height>u.top+u.height+1&&(i.x+=this._colRowLens[c],c++,i.y=n.y):i.x+_.width>u.left+u.width+1&&(i.y+=this._colRowLens[c],c++,i.x=n.x);var m=new o.Rect(i.x,i.y,_.width,_.height);d!=L.Legend&&d!=L.Visible||e.drawLegendItem(t,m,g),r.push(m),s?i.y+=_.height:i.x+=_.width}return t.endGroup(),c},e.prototype._renderLabels=function(t){var n=this.series,i=n.length;t.stroke="null",t.fill="transparent",t.strokeWidth=1,t.startGroup(e._CSS_DATA_LABELS);for(var o=0;o<i;o++){var r=this._hitTester._map[o];r&&n[o]._renderLabels(t,r,this,this._lblAreas)}t.endGroup()},e.prototype._getAxes=function(){for(var t=[this.axisX,this.axisY],e=this.series.length,n=0;n<e;n++){var i=this.series[n],o=i.axisX;o&&-1===t.indexOf(o)&&t.push(o);var r=i.axisY;r&&-1===t.indexOf(r)&&t.push(r)}return t},e.prototype._clearPlotters=function(){for(var t=this._plotters.length,e=0;e<t;e++)this._plotters[e].clear()},e.prototype._initPlotter=function(t){t.chart=this,t.dataInfo=this._dataInfo,t.hitTester=this._hitTester,this._plotters.push(t)},Object.defineProperty(e.prototype,"_barPlotter",{get:function(){return null===this.__barPlotter&&(this.__barPlotter=new _t,this._initPlotter(this.__barPlotter)),this.__barPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_linePlotter",{get:function(){return null===this.__linePlotter&&(this.__linePlotter=new mt,this._initPlotter(this.__linePlotter)),this.__linePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_areaPlotter",{get:function(){return null===this.__areaPlotter&&(this.__areaPlotter=new vt,this._initPlotter(this.__areaPlotter)),this.__areaPlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_bubblePlotter",{get:function(){return null===this.__bubblePlotter&&(this.__bubblePlotter=new yt,this._initPlotter(this.__bubblePlotter)),this.__bubblePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_financePlotter",{get:function(){return null===this.__financePlotter&&(this.__financePlotter=new bt,this._initPlotter(this.__financePlotter)),this.__financePlotter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_funnelPlotter",{get:function(){return null===this.__funnelPlotter&&(this.__funnelPlotter=new wt,this._initPlotter(this.__funnelPlotter)),this.__funnelPlotter},enumerable:!0,configurable:!0}),e.prototype._getPlotter=function(t){var e,n=this._getChartType(),i=!1;if(t){var o=t._getChartType();null!==o&&void 0!==o&&o!=n&&(n=o,i=!0)}switch(n){case C.Column:this._barPlotter.isVolume=!1,this._barPlotter.width=.7,e=this._barPlotter;break;case C.Bar:this._barPlotter.rotated=!this._rotated,this._barPlotter.isVolume=!1,this._barPlotter.width=.7,e=this._barPlotter;break;case C.Line:this._linePlotter.hasSymbols=!1,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,e=this._linePlotter;break;case C.Scatter:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!1,this._linePlotter.isSpline=!1,e=this._linePlotter;break;case C.LineSymbols:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!1,e=this._linePlotter;break;case C.Area:this._areaPlotter.isSpline=!1,e=this._areaPlotter;break;case C.Bubble:e=this._bubblePlotter;break;case C.Candlestick:(r=this._financePlotter).isCandle=!0,r.isEqui=!1,r.isArms=!1,r.isVolume=!1,e=r;break;case C.HighLowOpenClose:var r=this._financePlotter;r.isCandle=!1,r.isEqui=!1,r.isArms=!1,r.isVolume=!1,e=r;break;case C.Spline:this._linePlotter.hasSymbols=!1,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!0,e=this._linePlotter;break;case C.SplineSymbols:this._linePlotter.hasSymbols=!0,this._linePlotter.hasLines=!0,this._linePlotter.isSpline=!0,e=this._linePlotter;break;case C.SplineArea:this._areaPlotter.isSpline=!0,e=this._areaPlotter;break;case C.Funnel:e=this._funnelPlotter;break;default:throw"Invalid chart type."}return e.rotated=this._rotated,n==C.Bar&&(e.rotated=!e.rotated),i&&(e.rotated=this._isRotated()),e},e.prototype._layout=function(t,e,n){this.plotAreas.length>0?this._layoutMultiple(t,e,n):this._layoutSingle(t,e,n)},e.prototype._layoutSingle=function(t,e,n){for(var i=t.width,r=t.height,s=new o.Size(i,.75*r),a=new o.Size(r,.75*i),l=0,h=0,u=i,c=r,d=0,p=0,f=i,g=r,_=this._getAxes(),m=0;m<_.length;m++){var v=(E=_[m]).origin,y=E._getPosition();if(E.axisType==S.X){(C=E._getHeight(n,i))>s.height&&(C=s.height),E._desiredSize=new o.Size(s.width,C);var b=E._hasOrigin=o.isNumber(v)&&v>this.axisY._getMinNum()&&v<this.axisY._getMaxNum(),w=Math.min(.25*i,E._annoSize.width);y==j.Bottom?(l=Math.max(l,.5*w),u=Math.min(u,i-.5*w),b?(D=this._convertY(v,p,g),g-=Math.max(0,D+C-g)):g-=C):y==j.Top&&(l=Math.max(l,.5*w),u=Math.min(u,i-.5*w),b?(D=this._convertY(v,p,g),p+=Math.max(0,p-(D-C))):p+=C)}else if(E.axisType==S.Y){var C=E._getHeight(n,r);C>a.height&&(C=a.height),E._desiredSize=new o.Size(a.width,C),b=E._hasOrigin=o.isNumber(v)&&v>this.axisX._getMinNum()&&v<this.axisX._getMaxNum(),y==j.Left?(E._actualAngle<0?c=Math.min(c,r-E._annoSize.height):E._actualAngle>0?h=Math.max(h,E._annoSize.height):(h=Math.max(h,E._annoSize.height),c=Math.min(c,r-E._annoSize.height)),b?(M=this._convertX(v,d,f),d+=Math.max(0,d-(M-C))):d+=C):y==j.Right&&(E._actualAngle>0?c=Math.min(c,r-E._annoSize.height):E._actualAngle<0?h=Math.max(h,E._annoSize.height):(h=Math.max(h,E._annoSize.height),c=Math.min(c,r-E._annoSize.height)),b?(M=this._convertX(v,d,f),f-=Math.max(0,M+C-f)):f-=C)}}var x=this._parseMargin(this.plotMargin);for(l=d=isNaN(x.left)?Math.max(l,d)+t.left:x.left,u=f=isNaN(x.right)?Math.min(u,f)+t.left:e.width-x.right,h=p=isNaN(x.top)?Math.max(h,p)+t.top:x.top,c=g=isNaN(x.bottom)?Math.min(c,g)+t.top:e.height-x.bottom,i=Math.max(1,u-l),r=Math.max(1,c-h),this._plotRect=new o.Rect(l,h,i,r),n.stroke=null,m=0;m<_.length;m++){var E=_[m];if(v=E.origin,y=E._getPosition(),E.axisType==S.X){var I;if(E._hasOrigin){var D=this._convertY(v,this._plotRect.top,this._plotRect.bottom);y==j.Bottom?(I=new o.Rect(l,D,i,E._desiredSize.height),g+=Math.max(0,I.bottom-this._plotRect.bottom)):y==j.Top?(I=new o.Rect(l,D-E._desiredSize.height,i,E._desiredSize.height),p-=Math.max(0,this._plotRect.top-I.top)):I=new o.Rect(l,D,i,1)}else y==j.Bottom?(I=new o.Rect(l,g,i,E._desiredSize.height),g+=E._desiredSize.height):y==j.Top?(I=new o.Rect(l,p-E._desiredSize.height,i,E._desiredSize.height),p-=E._desiredSize.height):I=new o.Rect(l,p,i,1);E._layout(I,this._plotRect)}else if(E.axisType==S.Y){var P;if(E._hasOrigin){var M=this._convertX(v,this._plotRect.left,this._plotRect.right);y==j.Left?(P=new o.Rect(M-E._desiredSize.height,h,r,E._desiredSize.height),d-=E._desiredSize.height):y==j.Right?(P=new o.Rect(M,h,r,E._desiredSize.height),f+=E._desiredSize.height):P=new o.Rect(M,h,r,1)}else y==j.Left?(P=new o.Rect(d-E._desiredSize.height,h,r,E._desiredSize.height),d-=E._desiredSize.height):y==j.Right?(P=new o.Rect(f,h,r,E._desiredSize.height),f+=E._desiredSize.height):P=new o.Rect(d,h,r,1);E._layout(P,this._plotRect)}}},e.prototype._layoutMultiple=function(t,e,n){for(var i=t.width,r=t.height,s=[],a=[],l=this._getAxes(),h=l.length,u=0;u<h;u++)if((I=l[u])._plotrect=null,I.axisType==S.X){for(var c=I.plotArea?I.plotArea.column:0;s.length<=c;)s.push(new b);s[c].axes.push(I)}else if(I.axisType==S.Y){for(var d=I.plotArea?I.plotArea.row:0;a.length<=d;)a.push(new b);a[d].axes.push(I)}for(var p=s.length,f=a.length,g=new o.Size(i,.3*r),_=new o.Size(r,.3*i),m=0,v=0,y=i,w=r,C=0;C<p;C++)for((N=s[C]).right=i,N.bottom=r,u=0;u<N.axes.length;u++){var x=(I=N.axes[u])._getHeight(n,I.axisType==S.X?i:r);x>g.height&&(x=g.height);var E=new o.Size(g.width,x);I._desiredSize=E,0==C&&(N.left=Math.max(N.left,.5*I._annoSize.width)),C==p-1&&(N.right=Math.min(N.right,i-.5*I._annoSize.width)),(V=I._getPosition())==j.Bottom?N.bottom-=E.height:V==j.Top&&(N.top+=E.height)}for(W=0;W<f;W++)for((N=a[W]).right=i,N.bottom=r,u=0;u<N.axes.length;u++){var I=N.axes[u],D=new o.Size(_.width,I._getHeight(n,I.axisType==S.X?i:r));D.height>_.height&&(D.height=_.height),I._desiredSize=D,0==W&&(N.top=Math.max(N.top,.5*I._annoSize.width)),W==f-1&&(N.bottom=Math.min(N.bottom,r-.5*I._annoSize.width)),(V=I._getPosition())==j.Left?N.left+=D.height:V==j.Right&&(N.right-=D.height)}var P=0,M=0,T=i,R=r;for(C=0;C<p;C++)N=s[C],P=Math.max(P,N.left),M=Math.max(M,N.top),T=Math.min(T,N.right),R=Math.min(R,N.bottom);for(W=0;W<f;W++)N=a[W],P=Math.max(P,N.left),M=Math.max(M,N.top),T=Math.min(T,N.right),R=Math.min(R,N.bottom);P=m=Math.max(m,P),T=y=Math.min(y,T),M=v=Math.max(v,M),R=w=Math.min(w,R),this._plotRect=new o.Rect(m,v,y-m,w-v);var A=this._plotRect.clone(),O=m,k=this.plotAreas._calculateWidths(this._plotRect.width,p);for(C=0;C<p;C++){R=w,M=v;var N=s[C],L=k[C];for(u=0;u<N.axes.length;u++){var F,V=(I=N.axes[u])._getPosition(),B=new o.Rect(O,A.top,L,A.height);V==j.Bottom?(F=new o.Rect(O,R,L,I._desiredSize.height),R+=I._desiredSize.height):V==j.Top&&(F=new o.Rect(O,M-I._desiredSize.height,L,I._desiredSize.height),M-=I._desiredSize.height),I._layout(F,B)}for(u=0;u<this.plotAreas.length;u++)(K=this.plotAreas[u]).column==C&&K._setPlotX(O,L);O+=L}for(var H=v,z=this.plotAreas._calculateHeights(this._plotRect.height,f),W=0;W<f;W++){P=m,T=y,N=a[W];var G=z[W];for(u=0;u<N.axes.length;u++){var Y;V=(I=N.axes[u])._getPosition(),B=new o.Rect(A.left,H,A.width,G),I._plotrect?(B.left=I._plotrect.left,B.width=I._plotrect.width):k&&k.length>0&&(B.width=k[0]),V==j.Left?(Y=new o.Rect(P-I._desiredSize.height,H,G,I._desiredSize.height),P-=I._desiredSize.height):V==j.Right&&(Y=new o.Rect(T,H,G,I._desiredSize.height),T+=I._desiredSize.height),I._layout(Y,B)}for(u=0;u<this.plotAreas.length;u++){var K=this.plotAreas[u];K.row==W&&K._setPlotY(H,G)}H+=G}},e.prototype._convertX=function(t,e,n){var i=this.axisX;return i.reversed?n-(n-e)*(t-i._getMinNum())/(i._getMaxNum()-i._getMinNum()):e+(n-e)*(t-i._getMinNum())/(i._getMaxNum()-i._getMinNum())},e.prototype._convertY=function(t,e,n){var i=this.axisY;return i.reversed?e+(n-e)*(t-i._getMinNum())/(i._getMaxNum()-i._getMinNum()):n-(n-e)*(t-i._getMinNum())/(i._getMaxNum()-i._getMinNum())},e.prototype._getLabelContent=function(t,e){return o.isString(e)?this._keywords.replace(e,t):o.isFunction(e)?e(t):null},e.prototype._select=function(t,e){var n=!1;if(t==this._selection&&e==this._selectionIndex||(n=!0),this._selection&&this._highlight(this._selection,!1,this._selectionIndex),this._selection=t,this._selectionIndex=e,this._selection&&this._highlight(this._selection,!0,this._selectionIndex),this.selectionMode==m.Point){var i=t?t.collectionView:this._cv;i&&(this._notifyCurrentChanged=!1,i.moveCurrentToPosition(t?e:-1),this._notifyCurrentChanged=!0)}n&&this.onSelectionChanged()},e.prototype._highlightCurrent=function(){if(this.selectionMode!=m.None){var t=this._selection,e=-1;if(t){var n=t.collectionView;n||(n=this._cv),n&&(e=n.currentPosition),this._highlight(t,!0,e)}}},e.prototype._highlight=function(t,e,n){if(t=o.asType(t,z,!0),this.selectionMode==m.Series){var i=this.series.indexOf(t),r=t.hostElement;e?r.parentNode.appendChild(r):r.parentNode.insertBefore(r,r.parentNode.childNodes.item(i)),a=this._find(r,["rect","ellipse","polyline","polygon","line","path"]),this._highlightItems(a,D._CSS_SELECTION,e),t.legendElement&&this._highlightItems(this._find(t.legendElement,["rect","ellipse","line"]),D._CSS_SELECTION,e)}else if(this.selectionMode==m.Point)if(i=this.series.indexOf(t),r=t.hostElement,e){r.parentNode.appendChild(r);var s=t.getPlotElement(n);s&&("g"!=s.nodeName&&this._highlightItems([s],D._CSS_SELECTION,e),a=this._find(s,["line","rect","ellipse","path","polygon"]),this._highlightItems(a,D._CSS_SELECTION,e))}else{r.parentNode.insertBefore(r,r.parentNode.childNodes.item(i));var a=this._find(r,["rect","ellipse","line","path","polygon"]);this._highlightItems(a,D._CSS_SELECTION,e)}},e.prototype._updateAuxAxes=function(t,e){for(var n=2;n<t.length;n++){var i,r,s=t[n];s._chart=this;for(var a=[],l=0;l<this.series.length;l++){var h=this.series[l];h.axisX!=s&&h.axisY!=s||a.push(h)}for(l=0;l<a.length;l++){var u=a[l].getDataRect()||a[l]._getDataRect();u&&(s.axisType==S.X&&!e||s.axisType==S.Y&&e?((void 0===i||u.left<i)&&(i=u.left),(void 0===r||u.right>r)&&(r=u.right)):((void 0===i||u.top<i)&&(i=u.top),(void 0===r||u.bottom>r)&&(r=u.bottom)))}var c=a[0].getDataType(0);null==c&&(c=o.DataType.Number),t[n]._updateActualLimits(c,i,r)}},e._contains=function(t,e){return!(!t||!e)&&e.x>=t.left&&e.x<=t.right&&e.y>=t.top&&e.y<=t.bottom},e._intersects=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)},e._toOADate=function(t){return t.valueOf()},e._fromOADate=function(t){return new Date(t)},e._renderText=function(t,e,n,i,r,s,a,l,h){var u=t.measureString(e,s,a,l),c=n.x,d=n.y;switch(i){case 1:c-=.5*u.width;break;case 2:c-=u.width}switch(r){case 1:d+=.5*u.height;break;case 0:d+=u.height}var p=new o.Rect(c,d-u.height,u.width,u.height);return h?h(p)?(t.drawString(e,new o.Point(c,d),s,l),p):null:(t.drawString(e,new o.Point(c,d),s,l),p)},e._renderRotatedText=function(t,e,n,i,r,s,a,l,h,u){var c=t.measureString(e,l,h,u),d=n.x,p=n.y;switch(i){case 1:d-=.5*c.width;break;case 2:d-=c.width}switch(r){case 1:p+=.5*c.height;break;case 0:p+=c.height}return t.drawStringRotated(e,new o.Point(d,p),s,a,l,u)},e._CSS_AXIS_X="wj-axis-x",e._CSS_AXIS_Y="wj-axis-y",e._CSS_LINE="wj-line",e._CSS_GRIDLINE="wj-gridline",e._CSS_TICK="wj-tick",e._CSS_GRIDLINE_MINOR="wj-gridline-minor",e._CSS_TICK_MINOR="wj-tick-minor",e._CSS_LABEL="wj-label",e._CSS_LEGEND="wj-legend",e._CSS_HEADER="wj-header",e._CSS_FOOTER="wj-footer",e._CSS_TITLE="wj-title",e._CSS_SELECTION="wj-state-selected",e._CSS_PLOT_AREA="wj-plot-area",e._CSS_DATA_LABELS="wj-data-labels",e._FG="#666",e._epoch=new Date(1899,11,30).getTime(),e._msPerDay=864e5,e}(u);e.FlexChartCore=y;var b=function(){function t(){this._axes=new Array,this.left=0,this.right=0,this.top=0,this.bottom=0}return Object.defineProperty(t.prototype,"axes",{get:function(){return this._axes},enumerable:!0,configurable:!0}),t}(),w=function(){function t(){this.stackAbs={},this._xvals=null}return t.prototype.analyse=function(e,n,i,r,s,a){var l=this;this.minY=NaN,this.maxY=NaN,this.minX=NaN,this.maxX=NaN,this.minXp=NaN,this.minYp=NaN,this.dx=0;var h={},u={},c={};if(this.dataTypeX=null,this.dataTypeY=null,this._xvals=r,null!=r)for(var d=r.length,p=0;p<d;p++)D=r[p],(isNaN(this.minX)||this.minX>D)&&(this.minX=D),(isNaN(this.maxX)||this.maxX<D)&&(this.maxX=D),D>0&&(isNaN(this.minXp)||this.minXp>D)&&(this.minXp=D),p>0&&(x=Math.abs(D-r[p-1]),!isNaN(x)&&(x<this.dx||0==this.dx)&&(this.dx=x));for(p=0;p<e.length;p++){var f=e[p],g=f._getChartType(),m=void 0!==f.chartType,v=f.visibility;if(v!=L.Hidden&&v!=L.Legend){var y,b=f.getDataRect();b&&(!isNaN(this.minX)&&this.minX<b.left&&(y=b.right,b.left=this.minX,b.width=y-this.minX),!isNaN(this.maxX)&&this.maxX>b.right&&(b.width=this.maxX-b.left),!isNaN(this.minY)&&this.minY<b.top&&(y=b.bottom,b.top=this.minY,b.height=y-this.minY),!isNaN(this.maxY)&&this.maxY>b.bottom&&(b.height=this.maxY-b.top));var w=null;if(n?f._isCustomAxisY()||(w=f.getValues(1)):f._isCustomAxisX()||(w=f.getValues(1)),w)for(this.dataTypeX||(this.dataTypeX=f.getDataType(1)),E=0;E<w.length;E++)if(t.isValid(I=w[E])&&((isNaN(this.minX)||this.minX>I)&&(this.minX=I),(isNaN(this.maxX)||this.maxX<I)&&(this.maxX=I),E>0&&(!g||g==C.Column||g==C.Bar))){var x=Math.abs(I-w[E-1]);!isNaN(x)&&x>0&&(x<this.dx||0==this.dx)&&(this.dx=x)}var j=null,S=!1;if(n?(S=f._isCustomAxisX(),j=f.getValues(0)):(S=f._isCustomAxisY(),j=f.getValues(0)),j&&(this.dataTypeY||S||(this.dataTypeY=f.getDataType(0)),isNaN(this.minX)?this.minX=0:w||r||(this.minX=Math.min(this.minX,0)),isNaN(this.maxX)?this.maxX=j.length-1:w||r||(this.maxX=Math.max(this.maxX,j.length-1)),!S))for(var E=0;E<j.length;E++){var I=j[E],D=w?o.asNumber(w[E],!0):r?o.asNumber(r[E],!0):E;o.isArray(I)?I.forEach(function(t){l._parseYVal(t,D,m,c,h,u)}):this._parseYVal(I,D,m,c,h,u)}var P=f.getDataRect(new o.Rect(this.minX,this.minY,this.maxX-this.minX,this.maxY-this.minY),b);P&&(this.minX=P.left,this.maxX=P.right,this.minY=P.top,this.maxY=P.bottom)}}if(i==_.Stacked){for(var M in h)h[M]>this.maxY&&(this.maxY=h[M]);for(var M in u)u[M]<this.minY&&(this.minY=u[M])}else if(i==_.Stacked100pc)for(var M in this.minY=0,this.maxY=1,c){var T=c[M];if(isFinite(T)&&0!=T){var R=h[M],A=u[M];isFinite(R)&&(R=Math.min(R/T,this.maxY)),isFinite(A)&&(A=Math.max(A/T,this.minY))}}this.stackAbs=c,s&&(n?this.minY=isNaN(this.minYp)?1:this.minYp:this.minX=isNaN(this.minXp)?1:this.minXp),a&&(n?this.minX=isNaN(this.minXp)?1:this.minXp:this.minY=isNaN(this.minYp)?1:this.minYp)},t.prototype._parseYVal=function(e,n,i,o,r,s){t.isValid(e)&&(null!=e&&(isNaN(this.minY)||this.minY>e)&&(this.minY=e),null!=e&&(isNaN(this.maxY)||this.maxY<e)&&(this.maxY=e),e>0&&(isNaN(this.minYp)||this.minYp>e)&&(this.minYp=e),i||(e>0?isNaN(r[n])?r[n]=e:r[n]+=e:isNaN(s[n])?s[n]=e:s[n]+=e,isNaN(o[n])?o[n]=Math.abs(e):o[n]+=Math.abs(e)))},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinXp=function(){return this.minXp},t.prototype.getMinYp=function(){return this.minYp},t.prototype.getDeltaX=function(){return this.dx},t.prototype.getDataTypeX=function(){return this.dataTypeX},t.prototype.getDataTypeY=function(){return this.dataTypeY},t.prototype.getStackedAbsSum=function(t){var e=this.stackAbs[t];return isFinite(e)?e:0},t.prototype.getXVals=function(){return this._xvals},t.isValid=function(t){return isFinite(t)},t}();e._DataInfo=w;var C,x=function(t){function e(){var e=t.call(this)||this;return e._content="<b>{seriesName}</b><br/>{x} {y}",e._threshold=15,e}return i(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(t){t!=this._content&&(this._content=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"threshold",{get:function(){return this._threshold},set:function(t){t!=this._threshold&&(this._threshold=o.asNumber(t))},enumerable:!0,configurable:!0}),e}(o.Tooltip);e.ChartTooltip=x,function(t){t[t.Column=0]="Column",t[t.Bar=1]="Bar",t[t.Scatter=2]="Scatter",t[t.Line=3]="Line",t[t.LineSymbols=4]="LineSymbols",t[t.Area=5]="Area",t[t.Bubble=6]="Bubble",t[t.Candlestick=7]="Candlestick",t[t.HighLowOpenClose=8]="HighLowOpenClose",t[t.Spline=9]="Spline",t[t.SplineSymbols=10]="SplineSymbols",t[t.SplineArea=11]="SplineArea",t[t.Funnel=12]="Funnel"}(C=e.ChartType||(e.ChartType={}));var j,S,E,I,D=function(t){function e(e,n){var i=t.call(this,e,null)||this;return i._chartType=C.Column,i.initialize(n),i}return i(e,t),e.prototype._getChartType=function(){return this._chartType},Object.defineProperty(e.prototype,"chartType",{get:function(){return this._chartType},set:function(t){(t=o.asEnum(t,C))!=this._chartType&&(this._chartType=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotated",{get:function(){return this._rotated},set:function(t){t!=this._rotated&&(this._rotated=o.asBoolean(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stacking",{get:function(){return this._stacking},set:function(t){(t=o.asEnum(t,_))!=this._stacking&&(this._stacking=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(t){t!=this._options&&(this._options=t,this.invalidate())},enumerable:!0,configurable:!0}),e}(y);e.FlexChart=D,function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Top=2]="Top",t[t.Right=3]="Right",t[t.Bottom=4]="Bottom",t[t.Auto=5]="Auto"}(j=e.Position||(e.Position={})),function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(S=e.AxisType||(e.AxisType={})),function(t){t[t.Auto=0]="Auto",t[t.Show=1]="Show"}(E=e.OverlappingLabels||(e.OverlappingLabels={})),function(t){t[t.None=0]="None",t[t.Outside=1]="Outside",t[t.Inside=2]="Inside",t[t.Cross=3]="Cross"}(I=e.TickMark||(e.TickMark={}));var P=function(){function t(e){this._GRIDLINE_WIDTH=1,this._LINE_WIDTH=1,this._TICK_WIDTH=1,this._TICK_HEIGHT=4,this._TICK_OVERLAP=1,this._TICK_LABEL_DISTANCE=4,this._minorGrid=!1,this._labels=!0,this._axisLine=!0,this._isTimeAxis=!1,this._labelPadding=5,this.rangeChanged=new o.Event,this._customConvert=null,this._customConvertBack=null,this.__uniqueId=t._id++,this._position=e,e==j.Bottom||e==j.Top?this._axisType=S.X:(this._axisType=S.Y,this._axisLine=!1),this._minorTickMarks=I.None,this._overlap=E.Auto}return Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actualMin",{get:function(){return this._isTimeAxis?new Date(this._actualMin):this._actualMin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actualMax",{get:function(){return this._isTimeAxis?new Date(this._actualMax):this._actualMax},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},set:function(t){t!=this._min&&(this._min=o.isDate(t)?o.asDate(t,!0):o.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(t){t!=this._max&&(this._max=o.isDate(t)?o.asDate(t,!0):o.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reversed",{get:function(){return this._reversed},set:function(t){this._reversed!=t&&(this._reversed=o.asBoolean(t),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){(t=o.asEnum(t,j,!1))!=this._position&&(this._position=t,this._position==j.Bottom||this._position==j.Top?this._axisType=S.X:this._position!=j.Left&&this._position!=j.Right||(this._axisType=S.Y),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"majorUnit",{get:function(){return this._majorUnit},set:function(t){t!=this._majorUnit&&(this._majorUnit=o.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minorUnit",{get:function(){return this._minorUnit},set:function(t){t!=this._minorUnit&&(this._minorUnit=o.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=o.asString(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){t!=this._title&&(this._title=o.asString(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=o.asString(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"majorGrid",{get:function(){return this._majorGrid},set:function(t){t!=this._majorGrid&&(this._majorGrid=o.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"majorTickMarks",{get:function(){return this._majorTickMarks},set:function(t){(t=o.asEnum(t,I,!0))!=this._majorTickMarks&&(this._majorTickMarks=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minorGrid",{get:function(){return this._minorGrid},set:function(t){t!=this._minorGrid&&(this._minorGrid=o.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minorTickMarks",{get:function(){return this._minorTickMarks},set:function(t){(t=o.asEnum(t,I,!0))!=this._minorTickMarks&&(this._minorTickMarks=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisLine",{get:function(){return this._axisLine},set:function(t){t!=this._axisLine&&(this._axisLine=o.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labels",{get:function(){return this._labels},set:function(t){t!=this._labels&&(this._labels=o.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelAlign",{get:function(){return this._labelAlign},set:function(t){t!=this._labelAlign&&(this._labelAlign=o.asString(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelAngle",{get:function(){return this._labelAngle},set:function(t){t!=this._labelAngle&&(this._labelAngle=o.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"origin",{get:function(){return this._origin},set:function(t){t!=this._origin&&(this._origin=o.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overlappingLabels",{get:function(){return this._overlap},set:function(t){(t=o.asEnum(t,E,!0))!=this._overlap&&(this._overlap=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._items!=t&&(this._cv&&(this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=o.asCollectionView(t),null!=this._cv&&this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding},set:function(t){t!=this._binding&&(this._binding=o.asString(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemFormatter",{get:function(){return this._ifmt},set:function(t){this._ifmt!=t&&(this._ifmt=o.asFunction(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logBase",{get:function(){return this._logBase},set:function(t){t!=this._logBase&&(this._logBase=o.asNumber(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"plotArea",{get:function(){return this._parea},set:function(t){t!=this._parea&&(this._parea=o.asType(t,O,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelPadding",{get:function(){return this._labelPadding},set:function(t){t!=this._labelPadding&&(this._labelPadding=o.asNumber(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_groupClass",{get:function(){return this.axisType===S.X?y._CSS_AXIS_X:y._CSS_AXIS_Y},enumerable:!0,configurable:!0}),t.prototype.onRangeChanged=function(t){this.rangeChanged.raise(this,t)},t.prototype._getPosition=function(){if(this.axisType==S.X){if(this.position==j.Auto)return j.Bottom}else if(this.axisType==S.Y&&this.position==j.Auto)return j.Left;return this.position},t.prototype._isOverlapped=function(t,e,n,i){var o=this._lbls;if(null!=o&&o.length>1)for(var r=o.length,s=this._values&&this._values.length==r?this._values:null,a=0,l=0,h=0;h<r;h++){var u=s?s[h]:h;if(u>=this._actualMin&&u<=this._actualMax){var c=e*(u-this._actualMin)/(this._actualMax-this._actualMin),d=t.measureString(o[h],n,this._groupClass);if(this.axisType==S.X){if(h>0&&Math.abs(c-a)<Math.max(d.width,l)+12)return!0;a=c,l=d.width}}}return!1},t.prototype._getHeight=function(t,e){this._actualAngle=null;var n=D._CSS_LABEL,i=D._CSS_TITLE,r=this._actualMax-this._actualMin,s=this._nicePrecision(r);(s<0||s>15)&&(s=0);var a=.1*r,l=this._lbls,h=this.labelAngle;if(this.labels&&this._chart._getChartType()!==C.Funnel){if(a=this._updateAutoFormat(a),null!=l&&l.length>0){var u=l.length,c=this._values&&this._values.length==u?this._values:null;this._annoSize=new o.Size;for(var d=0;d<u;d++){var p=c?c[d]:d;p>=this._actualMin&&p<=this._actualMax&&((g=t.measureString(l[d],n,this._groupClass)).width>this._annoSize.width&&(this._annoSize.width=g.width),g.height>this._annoSize.height&&(this._annoSize.height=g.height))}null==h&&(this._isOverlapped(t,e,n,this.axisType)?h=this._actualAngle=-45:this._actualAngle=0)}else{var f=this._formatValue(this._actualMin-a),g=t.measureString(f,n,this._groupClass);this._annoSize=g,f=this._formatValue(this._actualMax+a),(g=t.measureString(f,n,this._groupClass)).width>this._annoSize.width&&(this._annoSize.width=g.width),g.height>this._annoSize.height&&(this._annoSize.height=g.height)}if(h){h>90?h=90:h<-90&&(h=-90);var _=h*Math.PI/180,m=this._annoSize.width,v=this._annoSize.height;this._annoSize.width=m*Math.abs(Math.cos(_))+v*Math.abs(Math.sin(_)),this._annoSize.height=m*Math.abs(Math.sin(_))+v*Math.abs(Math.cos(_))}}else this._annoSize=new o.Size;v=2*(this._labelPadding||5),v+=this._axisType==S.X?this._annoSize.height:this._annoSize.width+this._TICK_LABEL_DISTANCE+2;var y=this._TICK_OVERLAP;b==I.Outside?y=1:b==I.Inside?y=-1:b==I.Cross&&(y=0);var b=this.majorTickMarks;return null==b&&(b=I.Outside),b!=I.None&&(v+=.5*(1+y)*this._TICK_HEIGHT),this._title&&(this._szTitle=t.measureString(f=this._title,i,this._groupClass),v+=this._szTitle.height),t.fontSize=null,v},t.prototype._updateAutoFormat=function(t){if(this._isTimeAxis){var e=this.format,n=new R(.001*(this._actualMax-this._actualMin)/10*R.TicksPerSecond),i=o.isNumber(this._majorUnit)?R.fromDays(this._majorUnit):A.NiceTimeSpan(n,e);e||(this._tfmt=A.GetTimeDefaultFormat(1e3*i.TotalSeconds,0)),t=i.TotalSeconds}return t},t.prototype._updateActualLimitsByChartType=function(t,e,n){if(t&&t.length>0&&!this._isTimeAxis){var i=this._chart._getChartType();i!=C.Column&&i!=C.Bar&&(e-=.5,n+=.5)}return{min:e,max:n}},t.prototype._updateActualLimits=function(t,e,n,i,r){void 0===i&&(i=null),void 0===r&&(r=null);var s=this._actualMin,a=this._actualMax;this._isTimeAxis=t==o.DataType.Date;var l=this._updateActualLimitsByChartType(i,e,n);e=l.min,n=l.max;var h=this._min,u=this._max;if(o.isDate(h)&&(h=h.valueOf()),o.isDate(u)&&(u=u.valueOf()),this._actualMin=null!=h&&this._chart&&this._chart._stacking!==_.Stacked100pc?h:e,this._actualMax=null!=u&&this._chart&&this._chart._stacking!==_.Stacked100pc?u:n,this._actualMin==this._actualMax&&(this._actualMin-=.5,this._actualMax+=.5),this.logBase>0){var c=this.logBase,d=Math.log(c);if(!this._max){var p=Math.ceil(Math.log(this._actualMax)/d);this._actualMax=Math.pow(c,p)}if(!this._min){var f=Math.floor(Math.log(this._actualMin)/d);this._actualMin=Math.pow(c,f)}(this._actualMin<=0||!o.isNumber(this._actualMin))&&(this._actualMin=1),this._actualMax<this._actualMin&&(this._actualMax=this._actualMin+1)}if((s!=this._actualMin&&(o.isNumber(s)||o.isNumber(this._actualMin))||a!=this._actualMax&&(o.isNumber(a)||o.isNumber(this._actualMax)))&&this.onRangeChanged(),this._items){this._values=[],this._lbls=[];var g=this._items.length,m="value",v="text";if(this.binding){var y=this.binding.split(",");2==y.length&&(m=y[0],v=y[1])}for(var b=0;b<g;b++){var w=this._items[b],C=w[m];o.isNumber(C)&&(this._values.push(C),this._lbls.push(w[v]))}}else this._lbls=i,this._values=r},t.prototype._layout=function(t,e){var n=this.axisType==S.Y;this._plotrect=e,this._axrect=n?new o.Rect(t.left,t.top,t.height,t.width):t},t.prototype._hasVisibileSeries=function(){for(var t,e=this._chart.series,n=0,i=e.length;n<i;n++)if((t=e[n].visibility)==L.Plot||t==L.Visible)return!0;return!1},t.prototype._render=function(e){if(this.position!=j.None&&this._hasVisibileSeries()){this._vals={};var n=0;this.labelAngle&&((n=this.labelAngle)>90?n=90:n<-90&&(n=-90)),null==this.labelAngle&&null!=this._actualAngle&&(n=this._actualAngle);var i=D._FG,r=this._actualMax-this._actualMin;if(o.isNumber(r)){var s=this._calcMajorUnit();0==s&&(s=.1*this._niceTickNumber(r));var a=Math.min(t.MAX_MAJOR,Math.floor(r/s)+1),l=[],h=[];this._rects=[],this._vals.major=l,this._vals.hasLbls=[];var u=Math.floor(this._actualMin/s)*s;u<this._actualMin&&(u+=s);var c=!1;if(this._lbls&&this._lbls.length>0)if(h=this._lbls,0==this._values.length)for(c=!0,m=0;m<h.length;m++)l.push(m);else l=this._values;else this._isTimeAxis?this._createTimeLabels(u,a,l,h):this.logBase?this._createLogarithmicLabels(this._actualMin,this._actualMax,this.majorUnit,l,h,!0):this._createLabels(u,a,s,l,h);a=Math.min(l.length,h.length),e.textFill=i;var d=this._TICK_HEIGHT,p=this._TICK_OVERLAP,f=this.majorTickMarks;null==f&&(f=I.Outside),f==I.Outside?p=1:f==I.Inside?p=-1:f==I.Cross&&(p=0);for(var g=.5*(p-1)*d,_=.5*(1+p)*d,m=0;m<a;m++){var v=!0,y=l[m],b=this.labels;if(b&&(c||this.itemsSource)&&this.majorUnit&&m%this.majorUnit!=0&&(b=!1),y>=this._actualMin&&y<=this._actualMax){var w=e.textFill;v=this._renderLabelsAndTicks(e,m,y,h[m],n,f,b,g,_),e.textFill=w}this._vals.hasLbls.push(v)}}(this.minorGrid||this.minorTickMarks!=I.None)&&this._renderMinor(e,l,c),e.stroke=i,e.fontSize=null,this._renderLineAndTitle(e),e.stroke=null,e.fontSize=null,e.textFill=null,e.strokeWidth=null}},t.prototype._renderLineAndTitle=function(t){var e=this._getPosition(),n=e!=j.Top&&e!=j.Right,i=D._CSS_TITLE,r=D._CSS_LINE;if(this.axisType==S.Y)if(n)this._title&&(s=new o.Point(this._axrect.left+.5*this._szTitle.height,this._axrect.top+.5*this._axrect.height),D._renderRotatedText(t,this._title,s,1,1,s,-90,i,this._groupClass)),this.axisLine&&t.drawLine(this._axrect.right,this._axrect.top,this._axrect.right,this._axrect.bottom,r);else{if(this._title){var s=new o.Point(this._axrect.right-.5*this._szTitle.height,this._axrect.top+.5*this._axrect.height);D._renderRotatedText(t,this._title,s,1,1,s,90,i,this._groupClass)}this.axisLine&&t.drawLine(this._axrect.left,this._axrect.top,this._axrect.left,this._axrect.bottom,r)}else n?(this.axisLine&&t.drawLine(this._axrect.left,this._axrect.top,this._axrect.right,this._axrect.top,r),this._title&&D._renderText(t,this._title,new o.Point(this._axrect.left+.5*this._axrect.width,this._axrect.bottom),1,2,i)):(this.axisLine&&t.drawLine(this._axrect.left,this._axrect.bottom,this._axrect.right,this._axrect.bottom,r),this._title&&D._renderText(t,this._title,new o.Point(this._axrect.left+.5*this._axrect.width,this._axrect.top),1,0,i))},t.prototype._renderMinor=function(t,e,n){var i=this._getPosition(),o=this.axisType==S.Y,r=i!=j.Top&&i!=j.Right;if(this.logBase){if(this.minorUnit>0){var s=[];this._createLogarithmicLabels(this._actualMin,this._actualMax,this.minorUnit,s,null,!1);for(var a=[],l=0;l<s.length;l++){var h=s[l];-1==e.indexOf(h)&&h>this._actualMin&&a.push(h)}this._renderMinors(t,a,o,r)}}else this._createMinors(t,e,o,r,n)},t.prototype._renderRotatedText=function(t,e,n,i,o,r,s,a,l,h,u){if(this.itemFormatter){var c=this._getFormattedItem(t,e,n,i,l);c?(n=c.text,l=c.cls):n=null}D._renderRotatedText(t,n,i,o,r,s,a,l,h,u)},t.prototype._getFormattedItem=function(t,e,n,i,o){if(this.itemFormatter){var r=i.clone();return this.axisType==S.X?r.y=this.position==j.Top?this._plotrect.top:this._plotrect.bottom:r.x=this.position==j.Right?this._plotrect.right:this._plotrect.left,this.itemFormatter(t,{val:e,text:n,pos:r,cls:o})}},t.prototype._renderLabelsAndTicks=function(t,e,n,i,r,s,a,l,h){var u=this._getPosition(),c=!0,d=this.axisType==S.Y,p=u!=j.Top&&u!=j.Right,f=this.labelPadding||5,g=this._TICK_WIDTH,_=this._getLabelAlign(d),m=D._CSS_LABEL,v=D._CSS_GRIDLINE,y=D._CSS_TICK,b=D._FG,w=D._FG,C=this._GRIDLINE_WIDTH,x=n!=this._actualMin&&this.majorGrid;if(d){var P=this.convert(n);x&&(t.stroke=b,t.strokeWidth=C,t.drawLine(this._plotrect.left,P,this._plotrect.right,P,v)),t.stroke=w,t.strokeWidth=g,p?(s!=I.None&&t.drawLine(this._axrect.right-l,P,this._axrect.right-h,P,y),a&&(T=new o.Point(this._axrect.right-h-this._TICK_LABEL_DISTANCE-f,P),r>0?90==r?this._renderRotatedText(t,n,i,T,1,0,T,r,m,this._groupClass):this._renderRotatedText(t,n,i,T,2,1,T,r,m,this._groupClass):r<0?-90==r?this._renderRotatedText(t,n,i,T,1,2,T,r,m,this._groupClass):this._renderRotatedText(t,n,i,T,2,1,T,r,m,this._groupClass):this._renderLabel(t,n,i,T,2,_,m))):(s!=I.None&&t.drawLine(this._axrect.left+l,P,this._axrect.left+h,P,y),a&&(T=new o.Point(this._axrect.left+h+this._TICK_LABEL_DISTANCE+f,P),r>0?90==r?this._renderRotatedText(t,n,i,T,1,2,T,r,m,this._groupClass):this._renderRotatedText(t,n,i,T,0,1,T,r,m,this._groupClass):r<0?-90==r?this._renderRotatedText(t,n,i,T,1,0,T,r,m,this._groupClass):this._renderRotatedText(t,n,i,T,0,1,T,r,m,this._groupClass):this._renderLabel(t,n,i,T,0,_,m)))}else{var M=this.convert(n);if(this.overlappingLabels==E.Auto&&this._xCross(M)&&(a=!1),x&&(t.stroke=b,t.strokeWidth=C,t.drawLine(M,this._plotrect.top,M,this._plotrect.bottom,v)),t.stroke=w,t.strokeWidth=g,p)c=!1,a&&(T=new o.Point(M,this._axrect.top+h+f),c=0!=r?this._renderRotatedLabel(t,n,i,T,_,r,m,p):this._renderLabel(t,n,i,T,_,0,m)),s!=I.None&&c&&(M=this.convert(n),t.drawLine(M,this._axrect.top+l,M,this._axrect.top+h,y));else{if(a){var T=new o.Point(M,this._axrect.bottom-h-f);c=0!=r?this._renderRotatedLabel(t,n,i,T,_,r,m,p):this._renderLabel(t,n,i,T,_,2,m)}s!=I.None&&(M=this.convert(n),t.drawLine(M,this._axrect.bottom-l,M,this._axrect.bottom-h,y))}}return c},t.prototype._xCross=function(t){for(var e=this._rects.length,n=0;n<e;n++){var i=this._rects[n];if(t>=i.left&&t<=i.right)return!0}return!1},t.prototype._createMinors=function(e,n,i,r,s){if(n&&n.length>1){for(var a=this.majorUnit?this._isTimeAxis?24*this.majorUnit*3600*1e3:this.majorUnit:n[1]-n[0],l=o.isNumber(this.minorUnit)?this._isTimeAxis?24*this.minorUnit*3600*1e3:this.minorUnit:.5*a,h=[],u=n[0];u>this._actualMin&&h.length<t.MAX_MINOR;u-=l)-1==n.indexOf(u)&&h.push(u);for(u=n[0]+l;u<this._actualMax&&h.length<t.MAX_MINOR;u+=l)-1==n.indexOf(u)?h.push(u):s&&this.majorUnit&&u%this.majorUnit!=0&&h.push(u);this._renderMinors(e,h,i,r)}},t.prototype._renderMinors=function(t,e,n,i){var o=this._TICK_HEIGHT,r=this._TICK_WIDTH,s=this._TICK_OVERLAP,a=D._FG,l=this.minorTickMarks,h=!0;this._vals.minor=e,l==I.Outside?s=1:l==I.Inside?s=-1:l==I.Cross?s=0:h=!1;for(var u=.5*(s-1)*o,c=.5*(1+s)*o,d=e?e.length:0,p=this.minorGrid,f=this._plotrect,g=this._GRIDLINE_WIDTH,_=D._FG,m=D._CSS_GRIDLINE_MINOR,v=D._CSS_TICK_MINOR,y=0;y<d;y++)if(e[y]>=this.actualMin&&e[y]<=this.actualMax)if(n){var b=this.convert(e[y]);h&&(t.stroke=a,t.strokeWidth=r,i?t.drawLine(this._axrect.right-u,b,this._axrect.right-c,b,v):t.drawLine(this._axrect.left+u,b,this._axrect.left+c,b,v)),p&&(t.stroke=_,t.strokeWidth=g,t.drawLine(f.left,b,f.right,b,m))}else{var w=this.convert(e[y]);h&&(t.stroke=a,t.strokeWidth=r,i?t.drawLine(w,this._axrect.top+u,w,this._axrect.top+c,v):t.drawLine(w,this._axrect.bottom-u,w,this._axrect.bottom-c,v)),p&&(t.stroke=_,t.strokeWidth=g,t.drawLine(w,f.top,w,f.bottom,m))}},t.prototype._renderLabel=function(t,e,n,i,r,s,a){var l=!1;if(this.itemFormatter){var h=this._getFormattedItem(t,e,n,i,a);h?(n=h.text,a=h.cls):n=null}if(n){var u=this._rects,c=this.overlappingLabels==E.Auto&&!o.isNumber(this._actualAngle),d=D._renderText(t,n,i,r,s,a,this._groupClass,null,function(t){if(c)for(var e=u.length,n=0;n<e;n++)if(D._intersects(u[n],t))return!1;return!0});d&&(d.left+=4,d.width+=8,u.push(d),l=!0)}return l},t.prototype._renderRotatedLabel=function(t,e,n,i,r,s,a,l){if(this.itemFormatter){var h=this._getFormattedItem(t,e,n,i,a);h?(n=h.text,a=h.cls):n=null}if(n){var u=t.measureString(n,a,this._groupClass),c=.5*u.height,d=.5*u.width*Math.abs(Math.sin(s*Math.PI/180)),p=.5*u.width,f=.5*(u.width*Math.abs(Math.cos(s*Math.PI/180))+u.height*Math.abs(Math.sin(s*Math.PI/180))),g=new o.Point(i.x,i.y),_=new o.Point(i.x,i.y);this.labelAlign||(r=90==s||-90==s?1:l?s>0?0:2:s>0?2:0),l?(i.y+=c+d,g.y+=c+d-.5*u.height):(i.y-=c+d-u.height,g.y-=c+d-.5*u.height);var m=0;2===r?(g.x-=f,i.x-=p+f,m=g.x+f-u.height-2):0===r?(g.x+=f,i.x-=p-f,m=g.x-f):(i.x-=p,m=g.x-u.height/2);var v=new o.Rect(m,_.y,u.height+2,u.width),y=this._rects;if(this.overlappingLabels==E.Auto)for(var b=y.length,w=0;w<b;w++)if(D._intersects(y[w],v))return!1;return D._renderRotatedText(t,n,i,0,2,g,s,a,this._groupClass),this._rects.push(v),!0}return!1},t.prototype._getLabelAlign=function(t){var e=1;if(this.labelAlign){var n=this.labelAlign.toLowerCase();t?"top"==n?e=0:"bottom"==n&&(e=2):"left"==n?e=0:"right"==n&&(e=2)}return e},t.prototype.convert=function(t,e,n){var i=null==e?this._actualMax:e,o=null==n?this._actualMin:n;if(i==o)return 0;var r=this._axrect.left,s=this._axrect.width,a=this._axrect.top,l=this._axrect.height;if(null!=this._customConvert){var h=this._customConvert(t,o,i);return this.axisType==S.Y?a+h*l:r+h*s}if(this.logBase){if(t<=0)return NaN;var u=Math.log(i/o);return this._reversed?this.axisType==S.Y?a+Math.log(t/o)/u*l:r+s-Math.log(t/o)/u*s:this.axisType==S.Y?a+l-Math.log(t/o)/u*l:r+Math.log(t/o)/u*s}return this._reversed?this.axisType==S.Y?a+(t-o)/(i-o)*l:r+s-(t-o)/(i-o)*s:this.axisType==S.Y?a+l-(t-o)/(i-o)*l:r+(t-o)/(i-o)*s},t.prototype.convertBack=function(t){if(this._actualMax==this._actualMin)return 0;var e,n=this._plotrect.left,i=this._plotrect.width,o=this._plotrect.top,r=this._plotrect.height,s=this._actualMax-this._actualMin,a=this.logBase;return null!=this._customConvertBack?this._customConvertBack(this.axisType==S.Y?(t-o)/r:(t-n)/i,this._actualMin,this._actualMax):a?(e=this._reversed?this.axisType==S.Y?(t-o)/r:1-(t-n)/i:this.axisType==S.Y?1-(t-o)/r:(t-n)/i,Math.pow(a,(Math.log(this._actualMin)+(Math.log(this._actualMax)-Math.log(this._actualMin))*e)/Math.log(a))):this._reversed?this.axisType==S.Y?this._actualMin+(t-o)*s/r:this._actualMin+(n+i-t)*s/i:this.axisType==S.Y?this._actualMax-(t-o)*s/r:this._actualMin+(t-n)*s/i},Object.defineProperty(t.prototype,"axisType",{get:function(){var t=this._chart;if(t){if(t.axisX==this)return S.X;if(t.axisY==this)return S.Y}return this._axisType},enumerable:!0,configurable:!0}),t.prototype._getMinNum=function(){return this._actualMin},t.prototype._getMaxNum=function(){return this._actualMax},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._cvCollectionChanged=function(t,e){this._invalidate()},t.prototype._createLabels=function(t,e,n,i,o){for(var r=0;r<e;r++){var s=(t+n*r).toFixed(14),a=parseFloat(s),l=this._formatValue(a);i.push(a),o.push(l)}},t.prototype._createLogarithmicLabels=function(t,e,n,i,o,r){var s=this.logBase,a=Math.log(s),l=Math.floor(Math.log(t)/a),h=Math.ceil(Math.log(e)/a),u=s,c=!0;n>0&&(c=!1,u=n),u<s&&(u=s);var d=(h-l+1)*s/u,p=1;if(r){var f=this._getPosition(),g=this._getAnnoNumber(f==j.Left||f==j.Right);d>g?p=Math.floor(d/g+1):c&&(d<=.2*g?u=.2*s:d<=.1*g&&(u=.1*s))}for(var _=l;_<=h;_+=p)if(c)for(var m=Math.pow(s,_),v=0;v*u<s-1;v++)(y=m*(1+v*u))>=t&&y<=e&&(0==v?(i.unshift(y),o&&o.unshift(this._formatValue(y))):(i.push(y),o&&o.push(this._formatValue(y))));else{var y=Math.pow(u,_);y>=t&&y<=e&&(i.push(y),o&&o.push(this._formatValue(y)))}},t.prototype._createTimeLabels=function(t,e,n,i){var r=this._actualMin,s=this._actualMax,a=new Date(r),l=new Date(s),h=this._format,u=this._getAnnoNumber(this._axisType==S.Y);u>12&&(u=12);var c=new R(.001*(this._actualMax-this._actualMin)/u*R.TicksPerSecond),d=o.isNumber(this._majorUnit)?R.fromDays(this._majorUnit):A.NiceTimeSpan(c,h);h||(this._tfmt=h=A.GetTimeDefaultFormat(1e3*d.TotalSeconds,0));var p=d.Ticks,f=A.RoundTime(r,d.TotalDays,!1);isFinite(f)&&(r=f);var g=A.RoundTime(s,d.TotalDays,!0);isFinite(g)&&(s=g);var _=new Date(r);if(new Date(s),d.TotalDays>=365&&!o.isNumber(this._majorUnit)){(_=new Date(a.getFullYear(),1,1))<a&&_.setFullYear(_.getFullYear()+1);var m=d.TotalDays/365;for(m-=m%1,b=_;b<=l&&m;b.setFullYear(b.getFullYear()+m))C=b.valueOf(),n.push(C),i.push(this._formatValue(C))}else if(d.TotalDays>=30&&!o.isNumber(this._majorUnit)){(_=new Date(a.getFullYear(),a.getMonth(),1))<a&&_.setMonth(_.getMonth()+1);var v=d.TotalDays/30;for(v-=v%1,b=_;b<=l;b.setMonth(b.getMonth()+v))C=b.valueOf(),n.push(C),i.push(this._formatValue(C))}else{var y=1e3*p/R.TicksPerSecond,b=_,w=a.getTime()-b.getTime();for(w>y&&(b=new Date(b.getTime()+Math.floor(w/y)*y));b<=l&&y;b=new Date(b.getTime()+y))if(b>=a){var C=b.valueOf();n.push(C),i.push(this._formatValue(C))}}},t.prototype._formatValue=function(t){if(this._isTimeAxis)return o.Globalize.format(new Date(t),this._format?this._format:this._tfmt);if(this._format)return o.Globalize.format(t,this._format);var e=t==Math.round(t)?"n0":"n";return o.Globalize.format(t,e)},t.prototype._calcMajorUnit=function(){var t=this._majorUnit;if(!o.isNumber(t)){var e=this._actualMax-this._actualMin,n=this._nicePrecision(e),i=e/this._getAnnoNumber(this.axisType==S.Y);(t=this._niceNumber(2*i,-n,!0))<i&&(t=this._niceNumber(i,1-n,!1)),t<i&&(t=this._niceTickNumber(i))}return t},t.prototype._getAnnoNumber=function(t){var e=t?this._annoSize.height:this._annoSize.width,n=t?this._axrect.height:this._axrect.width;if(e>0&&n>0){var i=Math.floor(n/(e+6));return i<=0&&(i=1),i}return 10},t.prototype._nicePrecision=function(t){if(!o.isNumber(t)||t<=0)return 0;var e,n=Math.log(t)/Math.LN10;e=n>=0?Math.floor(n):Math.ceil(n);var i=t/Math.pow(10,e);return i<3&&(e=1-e,(i=t/Math.pow(10,e))<3&&(e+=1)),e},t.prototype._niceTickNumber=function(t){if(0==t)return t;t<0&&(t=-t);var e=Math.log(t)/Math.LN10,n=Math.floor(e),i=t/Math.pow(10,n),o=10;return i<=1?o=1:i<=2?o=2:i<=5&&(o=5),o*Math.pow(10,n)},t.prototype._niceNumber=function(t,e,n){if(0==t)return t;t<0&&(t=-t);var i=t/Math.pow(10,e),o=10;return n?i<1.5?o=1:i<3?o=2:i<4.5?o=4:i<7&&(o=5):i<=1?o=1:i<=2?o=2:i<=5&&(o=5),o*Math.pow(10,e)},Object.defineProperty(t.prototype,"_uniqueId",{get:function(){return this.__uniqueId},enumerable:!0,configurable:!0}),t.MAX_MAJOR=1e3,t.MAX_MINOR=2e3,t._id=0,t}();e.Axis=P;var M,T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getAxis=function(t){var e=this.indexOf(t);return e>-1?this[e]:null},e.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return e;return-1},e}(o.ObservableArray);e.AxisCollection=T,function(t){t[t.tickf7=-7]="tickf7",t[t.tickf6=-6]="tickf6",t[t.tickf5=-5]="tickf5",t[t.tickf4=-4]="tickf4",t[t.tickf3=-3]="tickf3",t[t.tickf2=-2]="tickf2",t[t.tickf1=-1]="tickf1",t[t.second=1]="second",t[t.minute=60]="minute",t[t.hour=3600]="hour",t[t.day=86400]="day",t[t.week=604800]="week",t[t.month=2678400]="month",t[t.year=31536e3]="year",t[t.maxtime=Number.MAX_VALUE]="maxtime"}(M||(M={}));var R=function(){function t(t){this.ticks=t}return Object.defineProperty(t.prototype,"Ticks",{get:function(){return this.ticks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalSeconds",{get:function(){return this.ticks/1e7},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"TotalDays",{get:function(){return this.ticks/1e7/86400},enumerable:!0,configurable:!0}),t.fromSeconds=function(e){return new t(1e7*e)},t.fromDays=function(e){return new t(1e7*e*24*60*60)},t.TicksPerSecond=1e7,t}(),A=function(){function t(t){o.isDate(t)?this.init(t):o.isNumber(t)&&this.init(D._fromOADate(t))}return t.prototype.init=function(t){this.year=t.getFullYear(),this.month=t.getMonth(),this.day=t.getDate(),this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds()},t.prototype.getTimeAsDateTime=function(){return this.hour>=24&&(this.hour-=24,this.day+=1),this.month<0?this.month=1:this.month>11&&(this.month=12),this.day<1?this.day=1:this.day>28&&2==this.month?this.day=28:this.day>30&&(4==this.month||4==this.month||6==this.month||9==this.month||11==this.month)?this.day=30:this.day>31&&(this.day=31),this.second>59&&(this.second=59),this.minute>59&&(this.minute=59),new Date(this.year,this.month,this.day,this.hour,this.minute,this.second)},t.prototype.getTimeAsDouble=function(){return this.getTimeAsDateTime().valueOf()},t.tround=function(t,e,n){var i=t/e*e;return i-=i%1,n&&i!=t&&(i+=e-=e%1),i},t.RoundTime=function(e,n,i){var o=24*n*60*60;if(o>0){var r=new t(e);return o<M.minute?(r.second=this.tround(r.second,o,i),r.getTimeAsDouble()):(r.second=0,o<M.hour?(r.minute=this.tround(r.minute,o/=M.minute,i),r.getTimeAsDouble()):(r.minute=0,o<M.day?(r.hour=this.tround(r.hour,o/=M.hour,i),r.getTimeAsDouble()):(r.hour=0,o<M.month?(r.day=this.tround(r.day,o/=M.day,i),r.getTimeAsDouble()):(r.day=1,o<M.year?(o/=M.month,1!=r.month&&(r.month=this.tround(r.month,o,i)),r.getTimeAsDouble()):(r.month=1,r.year=this.tround(r.year,o/=M.year,i),r.getTimeAsDouble())))))}var s=e-o,a=s/n*n;return i&&a!=s&&(a+=n),o+a},t.TimeSpanFromTmInc=function(t){var e=R.fromSeconds(1);if(t!=M.maxtime)if(t>M.tickf1)e=R.fromSeconds(t);else{var n=t,i=1;for(n+=7;n>0;)i*=10,n--;e=new R(i)}return e},t.manualTimeInc=function(t){var e=M.second;if(null==t||0==t.length)return e;var n=t.indexOf("f");if(n>=0){var i=-1;if(n>0&&"%"==t.substr(n-1,1))i=-1;else for(var o=1;o<6&&!(n+o>=t.length)&&"f"==t.substr(n+o,1);o++)i--;e=i}else t.indexOf("s")>=0?e=M.second:t.indexOf("m")>=0?e=M.minute:t.indexOf("h")>=0||t.indexOf("H")?e=M.hour:t.indexOf("d")>=0?e=M.day:t.indexOf("M")>=0?e=M.month:t.indexOf("y")>=0&&(e=M.year);return e},t.getNiceInc=function(t,e,n){for(var i=0;i<t.length;i++){var o=t[i]*n;if(e<=o)return o}return 0},t.NiceTimeSpan=function(e,n){var i=M.second;null!=n&&n.length>0&&(i=t.manualTimeInc(n));var o=0,r=0;if(i<M.second&&e.TotalSeconds<10){for(o=e.Ticks,r=t.TimeSpanFromTmInc(i).Ticks;o>10*r;)r*=10;var s=r;return o>s&&(s*=2),o>s&&(s=5*r),o>s&&(s=10*r),new R(s)}if(0==(o=Math.ceil(e.TotalSeconds)))return t.TimeSpanFromTmInc(i);if(r=1,i<M.minute){if(o<M.minute&&0!=(r=t.getNiceInc([1,2,5,10,15,30],o,i)))return R.fromSeconds(r);i=M.minute}if(i<M.hour){if(o<M.hour&&0!=(r=t.getNiceInc([1,2,5,10,15,30],o,i)))return R.fromSeconds(r);i=M.hour}if(i<M.day){if(o<M.day&&0!=(r=t.getNiceInc([1,3,6,12],o,i)))return R.fromSeconds(r);i=M.day}if(i<M.month){if(o<M.month&&0!=(r=t.getNiceInc([1,2,7,14],o,i)))return R.fromSeconds(r);i=M.month}if(i<M.year){if(o<M.year&&0!=(r=t.getNiceInc([1,2,3,4,6],o,i)))return R.fromSeconds(r);i=M.year}return o<(r=100*M.year)&&0==(r=t.getNiceInc([1,2,5,10,20,50],o,i))&&(r=100*M.year),R.fromSeconds(r)},t.NiceTimeUnit=function(e,n){var i=R.fromDays(e);return(i=t.NiceTimeSpan(i,n)).TotalDays},t.GetTimeDefaultFormat=function(t,e){if(!o.isNumber(t)||!o.isNumber(e))return"";var n="s",i=R.fromSeconds(.001*(t-e)),r=i.TotalSeconds;if(r>=M.year)n="yyyy";else if(r>=M.month)n="MMM yyyy";else if(r>=M.day)n="MMM d";else if(r>=M.hour)n="ddd H:mm";else if(r>=.5*M.hour)n="H:mm";else if(r>=1)n="H:mm:ss";else if(r>0){var s=i.Ticks;for(n="s.";s<R.TicksPerSecond;)s*=10,n+="f"}return n},t.secInYear=86400,t}(),O=function(){function t(t){this._row=0,this._col=0,this._rect=new o.Rect(0,0,0,0),t&&o.copy(this,t)}return Object.defineProperty(t.prototype,"row",{get:function(){return this._row},set:function(t){t!=this._row&&(this._row=o.asInt(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"column",{get:function(){return this._col},set:function(t){t!=this._col&&(this._col=o.asInt(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=o.asString(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._invalidate())},enumerable:!0,configurable:!0}),t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._render=function(t){t.drawRect(this._rect.left,this._rect.top,this._rect.width,this._rect.height,null,this.style)},t.prototype._setPlotX=function(t,e){this._rect.left=t,this._rect.width=e},t.prototype._setPlotY=function(t,e){this._rect.top=t,this._rect.height=e},t}();e.PlotArea=O;var k,N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getPlotArea=function(t){var e=this.indexOf(t);return e>-1?this[e]:null},e.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e].name==t)return e;return-1},e.prototype._getWidth=function(t){for(var e=0;e<this.length;e++){var n=this[e];if(n.column==t&&0==n.row)return n.width}},e.prototype._getHeight=function(t){for(var e=0;e<this.length;e++){var n=this[e];if(n.row==t&&0==n.column)return n.height}},e.prototype._calculateWidths=function(t,e){if(e<=0)throw"ncols";for(var n=[],i=0;i<e;i++){var o=this._getWidth(i);n[i]=new V(o)}return this._calculateLengths(t,e,n)},e.prototype._calculateHeights=function(t,e){if(e<=0)throw"nrows";for(var n=[],i=0;i<e;i++){var o=this._getHeight(i);n[i]=new V(o)}return this._calculateLengths(t,e,n)},e.prototype._calculateLengths=function(t,e,n){for(var i=[e],o=0,r=0,s=0;s<e;s++)n[s].isAbsolute?(i[s]=n[s].value,o+=i[s]):n[s].isStar?r+=n[s].value:n[s].isAuto&&r++;var a=(t-o)/r;for(s=0;s<e;s++)n[s].isStar?i[s]=a*n[s].value:n[s].isAuto&&(i[s]=a),i[s]<0&&(i[s]=0);return i},e}(o.ObservableArray);e.PlotAreaCollection=N,function(t){t[t.Auto=0]="Auto",t[t.Pixel=1]="Pixel",t[t.Star=2]="Star"}(k||(k={}));var L,F,V=function(){function t(t){void 0===t&&(t=null),this._unitType=k.Auto,t&&((t=t.toString()).indexOf("*")>=0?(this._unitType=k.Star,t=t.replace("*",""),this._value=parseFloat(t),isNaN(this._value)&&(this._value=1)):(this._unitType=k.Pixel,this._value=parseFloat(t),isNaN(this._value)&&(this._unitType=k.Auto,this._value=1)))}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStar",{get:function(){return this._unitType==k.Star},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAbsolute",{get:function(){return this._unitType==k.Pixel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isAuto",{get:function(){return this._unitType==k.Auto},enumerable:!0,configurable:!0}),t}();!function(t){t[t.Visible=0]="Visible",t[t.Plot=1]="Plot",t[t.Legend=2]="Legend",t[t.Hidden=3]="Hidden"}(L=e.SeriesVisibility||(e.SeriesVisibility={})),function(t){t[t.Dot=0]="Dot",t[t.Box=1]="Box"}(F=e.Marker||(e.Marker={}));var B=function(){};e.DataArray=B;var H=function(t){function e(e){var n=t.call(this)||this;return n._series=o.asType(e,z),n}return i(e,t),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),e}(o.EventArgs);e.SeriesEventArgs=H;var z=function(){function t(t){this._altStyle=null,this._symbolMarker=F.Dot,this._visibility=L.Visible,this.rendering=new o.Event,this.rendered=new o.Event,t&&this.initialize(t)}return Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"altStyle",{get:function(){return this._altStyle},set:function(t){t!=this._altStyle&&(this._altStyle=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolStyle",{get:function(){return this._symbolStyle},set:function(t){t!=this._symbolStyle&&(this._symbolStyle=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolSize",{get:function(){return this._symbolSize},set:function(t){t!=this._symbolSize&&(this._symbolSize=o.asNumber(t,!0,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolMarker",{get:function(){return this._symbolMarker},set:function(t){(t=o.asEnum(t,F,!0))!=this._symbolMarker&&(this._symbolMarker=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binding",{get:function(){return this._binding?this._binding:this._chart?this._chart.binding:null},set:function(t){t!=this._binding&&(this._binding=o.asString(t,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bindingX",{get:function(){return this._bindingX?this._bindingX:this._chart?this._chart.bindingX:null},set:function(t){t!=this._bindingX&&(this._bindingX=o.asString(t,!0),this._clearValues(),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._itemsSource},set:function(t){t!=this._itemsSource&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._itemsSource=t,this._cv=o.asCollectionView(t),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._clearValues(),this._itemsSource=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collectionView",{get:function(){return this._cv?this._cv:this._chart?this._chart.collectionView:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hostElement",{get:function(){return this._hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"legendElement",{get:function(){return this._legendElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cssClass",{get:function(){return this._cssClass},set:function(t){this._cssClass=o.asString(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibility",{get:function(){return this._visibility},set:function(t){(t=o.asEnum(t,L))!=this._visibility&&(this._visibility=t,this._clearValues(),this._invalidate(),this._chart&&this._chart.onSeriesVisibilityChanged(new H(this)))},enumerable:!0,configurable:!0}),t.prototype.hitTest=function(t,e){return o.isNumber(t)&&o.isNumber(e)?t=new o.Point(t,e):t instanceof MouseEvent&&(t=new o.Point(t.pageX,t.pageY)),o.asType(t,o.Point),this._chart?this._chart._hitTestSeries(t,this._chart.series.indexOf(this)):null},t.prototype.getPlotElement=function(t){if(this.hostElement&&t<this._pointIndexes.length){var e=this._pointIndexes[t];if(e<this.hostElement.childNodes.length)return this.hostElement.childNodes[e]}return null},Object.defineProperty(t.prototype,"axisX",{get:function(){return this._axisX},set:function(t){if(t!=this._axisX){if(this._axisX=o.asType(t,P,!0),this._axisX){var e=this._axisX._chart=this._chart;e&&-1==e.axes.indexOf(this._axisX)&&e.axes.push(this._axisX)}this._invalidate()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisY",{get:function(){return this._axisY},set:function(t){if(t!=this._axisY){if(this._axisY=o.asType(t,P,!0),this._axisY){var e=this._axisY._chart=this._chart;e&&-1==e.axes.indexOf(this._axisY)&&e.axes.push(this._axisY)}this._invalidate()}},enumerable:!0,configurable:!0}),t.prototype.initialize=function(t){t&&o.copy(this,t)},t.prototype.pointToData=function(t){return o.asType(t,o.Point),(t=t.clone()).x=this._getAxisX().convertBack(t.x),t.y=this._getAxisY().convertBack(t.y),t},t.prototype.dataToPoint=function(t){return o.asType(t,o.Point),(t=t.clone()).x=this._getAxisX().convert(t.x),t.y=this._getAxisY().convert(t.y),t},t.prototype.onRendering=function(t,e,n){var i=new h(t,e,n);return this.rendering.raise(this,i),i.cancel},t.prototype.onRendered=function(t){this.rendered.raise(this,new s(t))},Object.defineProperty(t.prototype,"_chart",{get:function(){return this.__chart},set:function(t){t!==this.__chart&&(this.__chart=t)},enumerable:!0,configurable:!0}),t.prototype._getSymbolSize=function(){return null!=this.symbolSize?this.symbolSize:this.chart.symbolSize},Object.defineProperty(t.prototype,"_plotter",{get:function(){return this.chart&&!this.__plotter&&(this.__plotter=this.chart._getPlotter(this)),this.__plotter},set:function(t){t!=this.__plotter&&(this.__plotter=t)},enumerable:!0,configurable:!0}),t.prototype.getDataType=function(t){return 0==t?this._valueDataType:1==t?this._xvalueDataType:null},t.prototype.getValues=function(t){if(0==t)return null==this._values&&(this._valueDataType=null,null!=this._cv?(n=this._bindValues(this._cv.items,this._getBinding(0)),this._values=n.values,this._valueDataType=n.dataType):null!=this.binding&&null!=this._chart&&null!=this._chart.collectionView&&(n=this._bindValues(this._chart.collectionView.items,this._getBinding(0)),this._values=n.values,this._valueDataType=n.dataType)),this._values;if(1==t){if(null==this._xvalues){this._xvalueDataType=null;var e=this;if(null!=this.bindingX)if(null!=e._cv)n=this._bindValues(e._cv.items,this.bindingX,!0),this._xvalueDataType=n.dataType,this._xvalues=n.values;else{if(null==this._bindingX)return null;if(null!=e._chart&&null!=e._chart.collectionView){var n=this._bindValues(e._chart.collectionView.items,this.bindingX,!0);this._xvalueDataType=n.dataType,this._xvalues=n.values}}}return this._xvalues}return null},t.prototype.drawLegendItem=function(t,e,n){var i=this._getChartType();null==i&&(i=this._chart._getChartType()),i===C.Funnel?this._drawFunnelLegendItem(t,e,n,this.style,this.symbolStyle):this._drawLegendItem(t,e,i,this.name,this.style,this.symbolStyle)},t.prototype.measureLegendItem=function(t,e){var n=this._getChartType();return null==n&&(n=this._chart._getChartType()),this._measureLegendItem(t,n===C.Funnel?this._getFunnelLegendName(e):this.name)},t.prototype.legendItemLength=function(){var t=this._getChartType();return null==t&&(t=this._chart._getChartType()),t===C.Funnel&&this._chart._xlabels&&this._chart._xlabels.length?this._chart._xlabels.length:1},t.prototype.getDataRect=function(t,e){return null},t.prototype._getChartType=function(){return this._chartType},t.prototype._clearValues=function(){this._values=null,this._xvalues=null,this.__plotter=null},t.prototype._getBinding=function(t){var e=this.binding;if(e){var n=this.chart?this.chart._bindingSeparator:",";if(n){var i=e.split(n);i&&i.length>t&&(e=i[t].trim())}}return e},t.prototype._getBindingValues=function(t){var e;return null!=this._cv?e=this._cv.items:null!=this._chart&&null!=this._chart.collectionView&&(e=this._chart.collectionView.items),this._bindValues(e,this._getBinding(t)).values},t.prototype._getItem=function(t){var e=null,n=null;return null!=this.itemsSource?n=null!=this._cv?this._cv.items:this.itemsSource:null!=this._chart.itemsSource&&(n=null!=this._chart.collectionView?this._chart.collectionView.items:this._chart.itemsSource),null!=n&&(e=n[t]),e},t.prototype._getLength=function(){var t=0,e=null;return null!=this.itemsSource?e=null!=this._cv?this._cv.items:this.itemsSource:null!=this._chart.itemsSource&&(e=null!=this._chart.collectionView?this._chart.collectionView.items:this._chart.itemsSource),null!=e&&(t=e.length),t},t.prototype._setPointIndex=function(t,e){this._pointIndexes[t]=e},t.prototype._getDataRect=function(){var t=this.getValues(0),e=this.getValues(1);if(t){for(var n=NaN,i=NaN,r=NaN,s=NaN,a=t.length,l=0;l<a;l++){var h=t[l];if(isFinite(h)&&(isNaN(i)?i=s=h:h<i?i=h:h>s&&(s=h)),e){var u=e[l];isFinite(u)&&(isNaN(n)?n=r=u:u<n?n=u:h>s&&(r=u))}}if(e||(n=0,r=a-1),!isNaN(i))return new o.Rect(n,i,r-n,s-i)}return null},t.prototype._isCustomAxisX=function(){return!(!this._axisX||this._chart&&this._axisX==this.chart.axisX)},t.prototype._isCustomAxisY=function(){return!(!this._axisY||this._chart&&this._axisY==this.chart.axisY)},t.prototype._getAxisX=function(){var t=null;return this.axisX?t=this.axisX:this.chart&&(t=this.chart.axisX),t},t.prototype._getAxisY=function(){var t=null;return this.axisY?t=this.axisY:this.chart&&(t=this.chart.axisY),t},t.prototype._measureLegendItem=function(t,e){var n=new o.Size;if(n.width=W._LEGEND_ITEM_WIDTH,n.height=W._LEGEND_ITEM_HEIGHT,this._name){var i=t.measureString(e,D._CSS_LABEL,D._CSS_LEGEND);n.width+=i.width,n.height<i.height&&(n.height=i.height)}return n.width+=3*W._LEGEND_ITEM_MARGIN,n.height+=2*W._LEGEND_ITEM_MARGIN,n},t.prototype._drawFunnelLegendItem=function(t,e,n,i,r){t.strokeWidth=1;var s=W._LEGEND_ITEM_MARGIN,a=null,l=null;null===a&&(a=this._chart._getColorLight(n)),null===l&&(l=this._chart._getColor(n)),t.fill=a,t.stroke=l;var h=e.top+.5*e.height,u=W._LEGEND_ITEM_WIDTH,c=W._LEGEND_ITEM_HEIGHT,d=this._getFunnelLegendName(n);t.drawRect(e.left+s,h-.5*c,u,c,null,r||i),d&&D._renderText(t,d,new o.Point(e.left+c+2*s,h),0,1,D._CSS_LABEL,D._CSS_LEGEND)},t.prototype._getFunnelLegendName=function(t){var e;return this._chart._xlabels&&this._chart._xlabels.length&&(e=this._chart._xlabels[t]),e||(e=this.name),e},t.prototype._drawLegendItem=function(t,e,n,i,r,s){t.strokeWidth=1;var a=W._LEGEND_ITEM_MARGIN,l=null,h=null;null===l&&(l=this._chart._getColorLight(this._chart.series.indexOf(this))),null===h&&(h=this._chart._getColor(this._chart.series.indexOf(this))),t.fill=l,t.stroke=h;var u=e.top+.5*e.height,c=W._LEGEND_ITEM_WIDTH,d=W._LEGEND_ITEM_HEIGHT;switch(n){case C.Area:case C.SplineArea:t.drawRect(e.left+a,u-.5*d,c,d,null,r);break;case C.Bar:case C.Column:t.drawRect(e.left+a,u-.5*d,c,d,null,s||r);break;case C.Scatter:case C.Bubble:var p=.3*c,f=.3*d;this.symbolMarker==F.Box?t.drawRect(e.left+a+.5*c-p,u-f,2*p,2*f,null,s||r):t.drawEllipse(e.left+.5*c+a,u,p,f,null,s||r);break;case C.Line:case C.Spline:t.drawLine(e.left+a,u,e.left+c+a,u,null,r);break;case C.LineSymbols:case C.SplineSymbols:p=.3*c,f=.3*d,this.symbolMarker==F.Box?t.drawRect(e.left+a+.5*c-p,u-f,2*p,2*f,null,s||r):t.drawEllipse(e.left+.5*c+a,u,p,f,null,s||r),t.drawLine(e.left+a,u,e.left+c+a,u,null,r);break;case C.Candlestick:case C.HighLowOpenClose:t.drawLine(e.left+a,u,e.left+c+a,u,null,s||r)}this._name&&D._renderText(t,i,new o.Point(e.left+d+2*a,u),0,1,D._CSS_LABEL,D._CSS_LEGEND)},t.prototype._cvCollectionChanged=function(t,e){this._clearValues(),this._invalidate()},t.prototype._cvCurrentChanged=function(t,e){this._chart&&this._chart._notifyCurrentChanged&&this._invalidate()},t.prototype._bindValues=function(t,e,n){var i,r,s;if(void 0===n&&(n=!1),null!=t){var a=t.length;i=new Array(t.length);for(var l=0;l<a;l++){s=null;var h=t[l];null!=e&&(h=h[e]),o.isArray(h)&&h.length>0&&(s=h,h=h[0]),o.isNumber(h)?(i[l]=h,r=o.DataType.Number):o.isDate(h)?(i[l]=h.valueOf(),r=o.DataType.Date):n&&h&&(i[l]=l,r=o.DataType.Number),o.isArray(s)&&s.length>0&&(i[l]=s)}}var u=new B;return u.values=i,u.dataType=r,u},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t.prototype._indexToPoint=function(t){return t>=0&&t<this._values.length?new o.Point(this._xvalues?this._xvalues[t]:t,this._values[t]):null},t.prototype._getSymbolFill=function(t){var e=null;return this.symbolStyle&&(e=this.symbolStyle.fill),!e&&this.style&&(e=this.style.fill),!e&&this.chart&&(e=this.chart._getColorLight(t)),e},t.prototype._getSymbolStroke=function(t){var e=null;return this.symbolStyle&&(e=this.symbolStyle.stroke),!e&&this.style&&(e=this.style.stroke),!e&&this.chart&&(e=this.chart._getColor(t)),e},t.prototype._getAltSymbolStroke=function(t){var e=null;return this.altStyle&&(e=this.altStyle.stroke),e},t.prototype._getAltSymbolFill=function(t){var e=null;return this.altStyle&&(e=this.altStyle.fill),e},t.prototype._renderLabels=function(t,e,n,i){this._plotter&&this._plotter._renderLabels(t,this,e,n,i)},t._LEGEND_ITEM_WIDTH=10,t._LEGEND_ITEM_HEIGHT=10,t._LEGEND_ITEM_MARGIN=4,t._DEFAULT_SYM_SIZE=10,t}();e.SeriesBase=z;var W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"chartType",{get:function(){return this._chartType},set:function(t){(t=o.asEnum(t,C,!0))!=this._chartType&&(this._chartType=t,this._invalidate())},enumerable:!0,configurable:!0}),e}(z);e.Series=W;var G=function(){function t(e){this._strokeWidth=1,this._fontSize=null,this._fontFamily=null,this._savedGradient={},this._bbCache={},this._element=e,this._create(),this._element.appendChild(this._svg),void 0===t._isff&&(t._isff=navigator.userAgent.toLowerCase().indexOf("firefox")>=0)}return t.prototype.beginRender=function(){for(;this._svg.firstChild;)o.removeChild(this._svg.firstChild);this._savedGradient={},this._bbCache={},this._svg.appendChild(this._defs),this._svg.appendChild(this._textGroup)},t.prototype.endRender=function(){o.removeChild(this._textGroup)},t.prototype.setViewportSize=function(t,e){this._svg.setAttribute("width",t.toString()),this._svg.setAttribute("height",e.toString())},Object.defineProperty(t.prototype,"element",{get:function(){return this._svg},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){this._fill=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){this._stroke=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWidth",{get:function(){return this._strokeWidth},set:function(t){this._strokeWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textFill",{get:function(){return this._textFill},set:function(t){this._textFill=t},enumerable:!0,configurable:!0}),t.prototype.addClipRect=function(e,n){if(e&&n){var i=document.createElementNS(t.svgNS,"clipPath"),o=document.createElementNS(t.svgNS,"rect");o.setAttribute("x",(e.left-1).toFixed()),o.setAttribute("y",(e.top-1).toFixed()),o.setAttribute("width",(e.width+2).toFixed()),o.setAttribute("height",(e.height+2).toFixed()),i.appendChild(o),i.setAttribute("id",n),this._svg.appendChild(i)}},t.prototype.drawEllipse=function(e,n,i,o,r,s){var a=document.createElementNS(t.svgNS,"ellipse");return this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&a.setAttribute("stroke-width",this._strokeWidth.toString()),this._applyColor(a,"fill",this._fill),a.setAttribute("cx",e.toFixed(1)),a.setAttribute("cy",n.toFixed(1)),a.setAttribute("rx",i.toFixed(1)),a.setAttribute("ry",o.toFixed(1)),r&&a.setAttribute("class",r),this._applyStyle(a,s),this._appendChild(a),a},t.prototype.drawRect=function(e,n,i,o,r,s,a){var l=document.createElementNS(t.svgNS,"rect");return this._applyColor(l,"fill",this._fill),this._applyColor(l,"stroke",this._stroke),null!==this._strokeWidth&&l.setAttribute("stroke-width",this._strokeWidth.toString()),l.setAttribute("x",e.toFixed(1)),l.setAttribute("y",n.toFixed(1)),l.setAttribute("width",i>0&&i<.05?"0.1":i.toFixed(1)),l.setAttribute("height",o>0&&o<.05?"0.1":o.toFixed(1)),a&&l.setAttribute("clip-path","url(#"+a+")"),r&&l.setAttribute("class",r),this._applyStyle(l,s),this._appendChild(l),l},t.prototype.drawLine=function(e,n,i,o,r,s){var a=document.createElementNS(t.svgNS,"line");return this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&a.setAttribute("stroke-width",this._strokeWidth.toString()),a.setAttribute("x1",e.toFixed(1)),a.setAttribute("x2",i.toFixed(1)),a.setAttribute("y1",n.toFixed(1)),a.setAttribute("y2",o.toFixed(1)),r&&a.setAttribute("class",r),this._applyStyle(a,s),this._appendChild(a),a},t.prototype.drawLines=function(e,n,i,o,r){if(e&&n){var s=Math.min(e.length,n.length);if(s>0){var a=document.createElementNS(t.svgNS,"polyline");this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&a.setAttribute("stroke-width",this._strokeWidth.toString()),a.setAttribute("fill","none");for(var l="",h=0;h<s;h++)l+=e[h].toFixed(1)+","+n[h].toFixed(1)+" ";return a.setAttribute("points",l),i&&a.setAttribute("class",i),r&&a.setAttribute("clip-path","url(#"+r+")"),this._applyStyle(a,o),this._appendChild(a),a}}return null},t.prototype.drawSplines=function(e,n,i,o,r){if(e&&n){var s=new Q(e,n).calculate(),a=s.xs,l=s.ys,h=Math.min(a.length,l.length);if(h>0){var u=document.createElementNS(t.svgNS,"polyline");this._applyColor(u,"stroke",this._stroke),null!==this._strokeWidth&&u.setAttribute("stroke-width",this._strokeWidth.toString()),u.setAttribute("fill","none");for(var c="",d=0;d<h;d++)c+=a[d].toFixed(1)+","+l[d].toFixed(1)+" ";return u.setAttribute("points",c),i&&u.setAttribute("class",i),r&&u.setAttribute("clip-path","url(#"+r+")"),this._applyStyle(u,o),this._appendChild(u),u}}return null},t.prototype.drawPolygon=function(e,n,i,o,r){if(e&&n){var s=Math.min(e.length,n.length);if(s>0){var a=document.createElementNS(t.svgNS,"polygon");this._applyColor(a,"stroke",this._stroke),null!==this._strokeWidth&&a.setAttribute("stroke-width",this._strokeWidth.toString()),this._applyColor(a,"fill",this._fill);for(var l="",h=0;h<s;h++)l+=e[h].toFixed(1)+","+n[h].toFixed(1)+" ";return a.setAttribute("points",l),i&&a.setAttribute("class",i),r&&a.setAttribute("clip-path","url(#"+r+")"),this._applyStyle(a,o),this._appendChild(a),a}}return null},t.prototype.drawPieSegment=function(e,n,i,r,s,a,l,h){if(s>=2*Math.PI)return this.drawEllipse(e,n,i,i,a,l);var u=document.createElementNS(t.svgNS,"path");this._applyColor(u,"fill",this._fill),this._applyColor(u,"stroke",this._stroke),null!==this._strokeWidth&&u.setAttribute("stroke-width",this._strokeWidth.toString());var c=new o.Point(e,n);c.x+=i*Math.cos(r),c.y+=i*Math.sin(r);var d=r+s,p=new o.Point(e,n);p.x+=i*Math.cos(d),p.y+=i*Math.sin(d);var f=" 0 0,1 ";Math.abs(s)>Math.PI&&(f=" 0 1,1 ");var g="M "+c.x.toFixed(1)+","+c.y.toFixed(1);return g+=" A "+i.toFixed(1)+","+i.toFixed(1)+f,g+=p.x.toFixed(1)+","+p.y.toFixed(1),g+=" L "+e.toFixed(1)+","+n.toFixed(1)+" z",u.setAttribute("d",g),h&&u.setAttribute("clip-path","url(#"+h+")"),a&&u.setAttribute("class",a),this._applyStyle(u,l),this._appendChild(u),u},t.prototype.drawDonutSegment=function(e,n,i,r,s,a,l,h,u){var c=!1;a>=2*Math.PI&&(c=!0,a-=.001);var d=document.createElementNS(t.svgNS,"path");this._applyColor(d,"fill",this._fill),this._applyColor(d,"stroke",this._stroke),null!==this._strokeWidth&&d.setAttribute("stroke-width",this._strokeWidth.toString());var p=new o.Point(e,n);p.x+=i*Math.cos(s),p.y+=i*Math.sin(s);var f=s+a,g=new o.Point(e,n);g.x+=i*Math.cos(f),g.y+=i*Math.sin(f);var _=new o.Point(e,n);_.x+=r*Math.cos(f),_.y+=r*Math.sin(f);var m=new o.Point(e,n);m.x+=r*Math.cos(s),m.y+=r*Math.sin(s);var v=" 0 0,1 ",y=" 0 0,0 ";Math.abs(a)>Math.PI&&(v=" 0 1,1 ",y=" 0 1,0 ");var b="M "+p.x.toFixed(3)+","+p.y.toFixed(3);return b+=" A "+i.toFixed(3)+","+i.toFixed(3)+v,b+=g.x.toFixed(3)+","+g.y.toFixed(3),b+=c?" M "+_.x.toFixed(3)+","+_.y.toFixed(3):" L "+_.x.toFixed(3)+","+_.y.toFixed(3),b+=" A "+r.toFixed(3)+","+r.toFixed(3)+y,b+=m.x.toFixed(3)+","+m.y.toFixed(3),c||(b+=" z"),d.setAttribute("d",b),u&&d.setAttribute("clip-path","url(#"+u+")"),l&&d.setAttribute("class",l),this._applyStyle(d,h),this._appendChild(d),d},t.prototype.drawString=function(t,e,n,i){var o=this._createText(e,t);n&&o.setAttribute("class",n),this._applyStyle(o,i),this._appendChild(o);var r,s=this._getKey(t,n,this._groupCls);return this._bbCache[s]?o.setAttribute("y",(e.y-((r=this._bbCache[s]).y+r.height)).toFixed(1)):(r=this._getBBox(o),o.setAttribute("y",(e.y-(r.y+r.height-e.y)).toFixed(1))),o},t.prototype.drawStringRotated=function(e,n,i,o,r,s){var a=this._createText(n,e);r&&a.setAttribute("class",r),this._applyStyle(a,s);var l=document.createElementNS(t.svgNS,"g");l.setAttribute("transform","rotate("+o.toFixed(1)+","+i.x.toFixed(1)+","+i.y.toFixed(1)+")"),l.appendChild(a),this._appendChild(l);var h=this._getBBox(a);return a.setAttribute("y",(n.y-(h.y+h.height-n.y)).toFixed(1)),a},t.prototype.measureString=function(t,e,n,i){var r=new o.Size(0,0);if(!this._fontFamily&&!this._fontSize){var s=this._getKey(t,e,n);if(this._bbCache[s])return this._bbCache[s]}this._fontSize&&this._text.setAttribute("font-size",this._fontSize),this._fontFamily&&this._text.setAttribute("font-family",this._fontFamily),e&&this._text.setAttribute("class",e),n&&this._textGroup.setAttribute("class",n),this._applyStyle(this._text,i),this._setText(this._text,t);var a=this._getBBox(this._text);if(r.width=a.width,r.height=a.height,this._text.removeAttribute("font-size"),this._text.removeAttribute("font-family"),this._text.removeAttribute("class"),i)for(var l in i)this._text.removeAttribute(this._deCase(l));if(this._textGroup.removeAttribute("class"),this._text.textContent=null,!this._fontFamily&&!this._fontSize){var h=this._getKey(t,e,n);this._bbCache[h]={x:a.x,y:a.y+1e3,width:a.width,height:a.height}}return r},t.prototype.startGroup=function(e,n,i){void 0===i&&(i=!1);var o=document.createElementNS(t.svgNS,"g");return e&&(o.setAttribute("class",e),this._groupCls=e),n&&o.setAttribute("clip-path","url(#"+n+")"),this._appendChild(o),i&&o.transform.baseVal.appendItem(this._svg.createSVGTransform()),this._group=o,o},t.prototype.endGroup=function(){if(this._group){var t=this._group.parentNode;t==this._svg?(this._group=null,this._groupCls=null):(this._group=t,this._groupCls=this._getClass(this._group))}},t.prototype.drawImage=function(e,n,i,o,r){var s=document.createElementNS(t.svgNS,"image");return s.setAttributeNS(t.xlinkNS,"href",e),s.setAttribute("x",n.toFixed(1)),s.setAttribute("y",i.toFixed(1)),s.setAttribute("width",o.toFixed(1)),s.setAttribute("height",r.toFixed(1)),this._appendChild(s),s},t.prototype._appendChild=function(t){var e=this._group;e||(e=this._svg),e.appendChild(t)},t.prototype._create=function(){this._svg=document.createElementNS(t.svgNS,"svg"),this._defs=document.createElementNS(t.svgNS,"defs"),this._svg.appendChild(this._defs),this._text=this._createText(new o.Point(-1e3,-1e3),""),this._textGroup=document.createElementNS(t.svgNS,"g"),this._textGroup.appendChild(this._text),this._svg.appendChild(this._textGroup)},t.prototype._setText=function(t,e){var n=e?e.toString():null;if(n&&n.indexOf("tspan")>=0)try{t.textContent=null;for(var i='<svg xmlns="http://www.w3.org/2000/svg">'+n+"</svg>",o=(new DOMParser).parseFromString(i,"text/xml").documentElement.firstChild;o;)t.appendChild(t.ownerDocument.importNode(o,!0)),o=o.nextSibling}catch(t){throw new Error("Error parsing XML string.")}else t.textContent=n},t.prototype._getKey=function(t,e,n){return t+(e||"")+(n||"")},t.prototype._createText=function(e,n){var i=document.createElementNS(t.svgNS,"text");return this._setText(i,n),i.setAttribute("x",e.x.toFixed(1)),i.setAttribute("y",e.y.toFixed(1)),null!=this._textFill&&i.setAttribute("fill",this._textFill),this._fontSize&&i.setAttribute("font-size",this._fontSize),this._fontFamily&&i.setAttribute("font-family",this._fontFamily),i},t.prototype._applyStyle=function(t,e){if(e)for(var n in e)"fill"===n||"stroke"===n?this._applyColor(t,n,e[n]):t.setAttribute(this._deCase(n),e[n])},t.prototype._deCase=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})},t.prototype._getClass=function(t){var e;if(t)for(var n=t;n&&!(e=n.getAttribute("class"));n=n.parentNode);return e},t.prototype._getBBox=function(e){if(!t._isff)return e.getBBox();try{return e.getBBox()}catch(t){return{x:0,y:0,width:0,height:0}}},t.prototype._applyColor=function(e,n,i){var r=K.tryParse(i);if(null!=r)if(o.isString(r))e.setAttribute(n,r);else{if(null==this._savedGradient[i]){var s,a="gc"+(1e6*Math.random()).toFixed();null!=r.x1?(s=document.createElementNS(t.svgNS,"linearGradient"),["x1","y1","x2","y2","gradientUnits"].forEach(function(t){null!=r[t]&&s.setAttribute(t,r[t])})):null!=r.r&&(s=document.createElementNS(t.svgNS,"radialGradient"),["cx","cy","r","fx","fy","fr","gradientUnits"].forEach(function(t){null!=r[t]&&s.setAttribute(t,r[t])})),r.colors&&r.colors&&r.colors.length>0&&r.colors.forEach(function(e){var n=document.createElementNS(t.svgNS,"stop");null!=e.color&&n.setAttribute("stop-color",e.color),null!=e.offset&&n.setAttribute("offset",e.offset),null!=e.opacity&&n.setAttribute("stop-opacity",e.opacity),s.appendChild(n)}),s.setAttribute("id",a),this._defs.appendChild(s),this._savedGradient[i]=a}e.setAttribute(n,"url(#"+this._savedGradient[i]+")")}},t.svgNS="http://www.w3.org/2000/svg",t.xlinkNS="http://www.w3.org/1999/xlink",t}();e._SvgRenderEngine=G;var Y,K=function(){function t(){}return t.tryParse=function(e){if(t.parsedColor[e])return t.parsedColor[e];if(null==e||-1===e.indexOf("-"))return e;var n,i=e.replace(/\s+/g,"").split(/\-/g),o=i[0][0],r=!1,s=i[0].match(/\(\S+\)/)[0].replace(/[\(\\)]/g,"").split(/\,/g);"l"===o||"L"===o?(n={x1:"0",y1:"0",x2:"0",y2:"0",colors:[]},"l"===o&&(r=!0),["x1","y1","x2","y2"].forEach(function(t,e){null!=s[e]&&(n[t]=r?100*+s[e]+"%":s[e]+"")})):"r"!==o&&"R"!==o||(n={cx:"0",cy:"0",r:"0",colors:[]},"r"===o&&(r=!0),["cx","cy","r","fx","fy","fr"].forEach(function(t,e){null!=s[e]&&""!==s[e]&&(n[t]=r?100*+s[e]+"%":s[e]+"")})),r||(n.gradientUnits="userSpaceOnUse"),t.parsedColor[e]=n;var a=i.length-1;return i.forEach(function(t,e){t.indexOf(")")>-1&&(t=t.match(/\)\S+/)[0].replace(")",""));var i=t.split(":"),o={color:"black"};null!=i[0]&&(o.color=i[0]),o.offset=null!=i[1]?r?100*+i[1]+"%":i[1]+"":e/a*100+"%",null!=i[2]&&(o.opacity=i[2]),n.colors.push(o)}),n},t.parsedColor={},t}(),X=function(){function t(t){this._position=j.Right,this._title="",this._titleAlign="left",this._titlePadding=5,this._areas=new Array,this._sz=new o.Size,this._colRowLens=[],this._chart=t}return Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){(t=o.asEnum(t,j))!=this._position&&(this._position=t,this._chart&&this._chart.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._title},set:function(t){t!=this._title&&(this._title=o.asString(t,!1),this._chart&&this._chart.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"titleAlign",{get:function(){return this._titleAlign},set:function(t){if(t!=this._titleAlign){var e=o.asString(t,!1);this._titleAlign="right"===e?"right":"center"===e?"center":"left",this._chart&&this._chart.invalidate()}},enumerable:!0,configurable:!0}),t.prototype._getDesiredSize=function(t,e,n,i){if(e==j.None)return null;var o=this._chart._getDesiredLegendSize(t,e==j.Right||e==j.Left,n,i);if(null!=o){if(this.title.length>0){var r=t.measureString(this.title,"wj-title","wj-legend");o.height+=r.height+this._titlePadding,r.width>o.width&&(o.width=r.width)}this._sz=o}return o},t.prototype._getPosition=function(t,e){return this.position==j.Auto?t>=e?j.Right:j.Bottom:this.position},t.prototype._render=function(t,e,n,i,o){this._areas=[];var r=n==j.Right||n==j.Left;if(t.fill="transparent",t.stroke=null,t.drawRect(e.x,e.y,this._sz.width,this._sz.height),this.title.length){var s=t.drawString(this.title,e,"wj-title"),a=s.getBBox();s.setAttribute("y",Number(s.getAttribute("y"))+a.height),"right"===this.titleAlign?s.setAttribute("x",e.x+i-a.width):"center"===this.titleAlign&&s.setAttribute("x",e.x+i/2-a.width/2);var l=a.height+this._titlePadding;e.y+=l,o-=l}this._chart._renderLegend(t,e,this._areas,r,i,o)},t.prototype._hitTest=function(t){for(var e=this._areas,n=0;n<e.length;n++)if(e[n]&&y._contains(e[n],t))return n;return null},t}();e.Legend=X,function(t){t[t.PlotArea=0]="PlotArea",t[t.AxisX=1]="AxisX",t[t.AxisY=2]="AxisY",t[t.ChartArea=3]="ChartArea",t[t.Legend=4]="Legend",t[t.Header=5]="Header",t[t.Footer=6]="Footer",t[t.Series=7]="Series",t[t.SeriesSymbol=8]="SeriesSymbol",t[t.DataLabel=9]="DataLabel",t[t.None=10]="None"}(Y=e.ChartElement||(e.ChartElement={}));var U=function(){function t(t,e,n){this._pointIndex=null,this._chartElement=Y.None,this._chart=t,this._pt=e,this._chartElement=n}return Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"series",{get:function(){return this._series},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chartElement",{get:function(){return this._chartElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distance",{get:function(){return this._dist},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){if(null==this._item&&null!==this.pointIndex)if(null!=this.series)this._item=this.series._getItem(this.pointIndex);else{var t=this._chart._getHitTestItem(this.pointIndex);t&&(this._item=t)}return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return void 0===this._x&&(this._x=this._getValue(1,!1)),this._x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return void 0===this._y&&(this._y=this._getValue(0,!1)),this._y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=this._chart._getHitTestValue(this.pointIndex);return null!=t?t:this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){if(void 0===this._name){var t=this._chart._getHitTestLabel(this.pointIndex);return null==t?this.series.name:t.toString()}return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_xfmt",{get:function(){return void 0===this.__xfmt&&(this.__xfmt=this._getValue(1,!0)),this.__xfmt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_yfmt",{get:function(){return void 0===this.__yfmt&&(this.__yfmt=this._getValue(0,!0)),this.__yfmt},enumerable:!0,configurable:!0}),t.prototype._setData=function(t,e){this._series=t,this._pointIndex=e},t.prototype._setDataPoint=function(t){if(t=o.asType(t,ht,!0)){this._pointIndex=t.pointIndex;var e=o.asType(this._chart,y,!0),n=t.seriesIndex;null!==n&&n>=0&&n<e.series.length&&(this._series=e.series[n]),null!=t.item&&(this._item=t.item),null!=t.x&&(this._x=t.x),null!=t.y&&(this._y=t.y),null!=t.xfmt&&(this.__xfmt=t.xfmt),null!=t.yfmt&&(this.__yfmt=t.yfmt),null!=t.name&&(this._name=t.name)}},t.prototype._getValue=function(t,e){var n=this._chart._getHitTestValue(this.pointIndex);if(null!=n)return n;var i=null,r=this._chart,s=this.pointIndex,a=r._isRotated();if(null!==this.series&&null!==s){var l=this.series.getValues(t),h=this.series.getDataType(t);l&&this.pointIndex<l.length?(i=l[this.pointIndex],h!=o.DataType.Date||e||(i=new Date(i))):1==t&&(r._xlabels&&r._xlabels.length>0&&s<r._xlabels.length?i=r._xlabels[s]:r._xvals&&s<r._xvals.length&&(i=r._xvals[s],r._xDataType!=o.DataType.Date||e||(i=new Date(i))))}return null!==i&&e&&(a?0==t?i=this.ax._formatValue(i):1==t&&(i=this.ay._formatValue(i)):0==t?i=this.ay._formatValue(i):1==t&&(i=this.ax._formatValue(i))),i},Object.defineProperty(t.prototype,"ax",{get:function(){return this.series.axisX?this.series.axisX:this._chart.axisX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ay",{get:function(){return this.series.axisY?this.series.axisY:this._chart.axisY},enumerable:!0,configurable:!0}),t}();e.HitTestInfo=U;var q=function(){function t(){}return t.standard=["#88bde6","#fbb258","#90cd97","#f6aac9","#bfa554","#bc99c7","#eddd46","#f07e6e","#8c8c8c"],t.cocoa=["#466bb0","#c8b422","#14886e","#b54836","#6e5944","#8b3872","#73b22b","#b87320","#141414"],t.coral=["#84d0e0","#f48256","#95c78c","#efa5d6","#ba8452","#ab95c2","#ede9d0","#e96b7d","#888888"],t.dark=["#005fad","#f06400","#009330","#e400b1","#b65800","#6a279c","#d5a211","#dc0127","#000000"],t.highcontrast=["#ff82b0","#0dda2c","#0021ab","#bcf28c","#19c23b","#890d3a","#607efd","#1b7700","#000000"],t.light=["#ddca9a","#778deb","#cb9fbb","#b5eae2","#7270be","#a6c7a7","#9e95c7","#95b0c7","#9b9b9b"],t.midnight=["#83aaca","#e37849","#14a46a","#e097da","#a26d54","#a584b7","#d89c54","#e86996","#2c343b"],t.modern=["#2d9fc7","#ec993c","#89c235","#e377a4","#a68931","#a672a6","#d0c041","#e35855","#68706a"],t.organic=["#9c88d9","#a3d767","#8ec3c0","#e9c3a9","#91ab36","#d4ccc0","#61bbd8","#e2d76f","#80715a"],t.slate=["#7493cd","#f99820","#71b486","#e4a491","#cb883b","#ae83a4","#bacc5c","#e5746a","#505d65"],t.zen=["#7bb5ae","#e2d287","#92b8da","#eac4cb","#7b8bbd","#c7d189","#b9a0c8","#dfb397","#a9a9a9"],t.cyborg=["#2a9fd6","#77b300","#9933cc","#ff8800","#cc0000","#00cca3","#3d6dcc","#525252","#000000"],t.superhero=["#5cb85c","#f0ad4e","#5bc0de","#d9534f","#9f5bde","#46db8c","#b6b86e","#4e5d6c","#2b3e4b"],t.flatly=["#18bc9c","#3498db","#f39c12","#6cc1be","#99a549","#8f54b5","#e74c3c","#8a9899","#2c3e50"],t.darkly=["#375a7f","#00bc8c","#3498db","#f39c12","#e74c3c","#8f61b3","#b08725","#4a4949","#000000"],t.cerulan=["#033e76","#87c048","#59822c","#53b3eb","#fc6506","#d42323","#e3bb00","#cccccc","#222222"],t}();e.Palettes=q;var Z,J,Q=function(){function t(t,e){this.k=.002,this._a=[],this._b=[],this._c=[],this._d=[],this.m=[[-.5,1.5,-1.5,.5],[1,-2.5,2,-.5],[-.5,0,.5,0],[0,1,0,0]],this._x=t,this._y=e;var n=this._len=Math.min(t.length,e.length);if(n>3)for(var i=0;i<n-1;i++){var r=0==i?new o.Point(t[i],e[i]):new o.Point(t[i-1],e[i-1]),s=new o.Point(t[i],e[i]),a=new o.Point(t[i+1],e[i+1]),l=i==n-2?new o.Point(t[i+1],e[i+1]):new o.Point(t[i+2],e[i+2]),h=new o.Point,u=new o.Point,c=new o.Point,d=new o.Point;h.x=r.x*this.m[0][0]+s.x*this.m[0][1]+a.x*this.m[0][2]+l.x*this.m[0][3],u.x=r.x*this.m[1][0]+s.x*this.m[1][1]+a.x*this.m[1][2]+l.x*this.m[1][3],c.x=r.x*this.m[2][0]+s.x*this.m[2][1]+a.x*this.m[2][2]+l.x*this.m[2][3],d.x=r.x*this.m[3][0]+s.x*this.m[3][1]+a.x*this.m[3][2]+l.x*this.m[3][3],h.y=r.y*this.m[0][0]+s.y*this.m[0][1]+a.y*this.m[0][2]+l.y*this.m[0][3],u.y=r.y*this.m[1][0]+s.y*this.m[1][1]+a.y*this.m[1][2]+l.y*this.m[1][3],c.y=r.y*this.m[2][0]+s.y*this.m[2][1]+a.y*this.m[2][2]+l.y*this.m[2][3],d.y=r.y*this.m[3][0]+s.y*this.m[3][1]+a.y*this.m[3][2]+l.y*this.m[3][3],this._a.push(h),this._b.push(u),this._c.push(c),this._d.push(d)}}return t.prototype.calculatePoint=function(t){var e=Math.floor(t);e<0&&(e=0),e>this._len-2&&(e=this._len-2);var n=t-e;return{x:((this._a[e].x*n+this._b[e].x)*n+this._c[e].x)*n+this._d[e].x,y:((this._a[e].y*n+this._b[e].y)*n+this._c[e].y)*n+this._d[e].y}},t.prototype.calculate=function(){if(this._len<=3)return{xs:this._x,ys:this._y};var t=[],e=[],n=this.calculatePoint(0);t.push(n.x),e.push(n.y);for(var i=this._len*this.k,o=i;o<=this._len-1;o+=i){var r=this.calculatePoint(o);(Math.abs(n.x-r.x)>=3||Math.abs(n.y-r.y)>=3)&&(t.push(r.x),e.push(r.y),n=r)}return{xs:t,ys:e}},t}();e._Spline=Q,function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Top=2]="Top",t[t.Right=3]="Right",t[t.Bottom=4]="Bottom",t[t.Center=5]="Center"}(Z=e.LabelPosition||(e.LabelPosition={})),function(t){t[t.None=0]="None",t[t.Inside=1]="Inside",t[t.Center=2]="Center",t[t.Outside=3]="Outside",t[t.Radial=4]="Radial",t[t.Circular=5]="Circular"}(J=e.PieLabelPosition||(e.PieLabelPosition={}));var $=function(t){function e(e,n,i,o){var r=t.call(this,e)||this;return r.cancel=!1,r._ht=n,r._pt=i,r._text=o,r}return i(e,t),Object.defineProperty(e.prototype,"point",{get:function(){return this._pt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=o.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitTestInfo",{get:function(){return this._ht},enumerable:!0,configurable:!0}),e}(s);e.DataLabelRenderEventArgs=$;var tt=function(){function t(){this.rendering=new o.Event}return Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(t){t!=this._content&&(this._content=t,this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"border",{get:function(){return this._bdr},set:function(t){t!=this._bdr&&(this._bdr=o.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offset",{get:function(){return this._off},set:function(t){t!=this._off&&(this._off=o.asNumber(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectingLine",{get:function(){return this._line},set:function(t){t!=this._line&&(this._line=o.asBoolean(t,!0),this._invalidate())},enumerable:!0,configurable:!0}),t.prototype.onRendering=function(t){return this.rendering.raise(this,t),!t.cancel},t.prototype._invalidate=function(){this._chart&&this._chart.invalidate()},t}();e.DataLabelBase=tt;var et=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pos=Z.Top,e}return i(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this._pos},set:function(t){(t=o.asEnum(t,Z))!=this._pos&&(this._pos=t,this._invalidate())},enumerable:!0,configurable:!0}),e}(tt);e.DataLabel=et;var nt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._pos=J.Center,e}return i(e,t),Object.defineProperty(e.prototype,"position",{get:function(){return this._pos},set:function(t){(t=o.asEnum(t,J))!=this._pos&&(this._pos=t,this._invalidate())},enumerable:!0,configurable:!0}),e}(tt);e.PieDataLabel=nt;var it,ot,rt,st=new(function(){function t(){this._moveMarker=function(t){var e=this._markers,n=t.currentTarget.getAttribute("data-markerIndex");null!=n&&e[n].forEach(function(e){e._moveMarker(t)})},this._markers=[],this._bindMoveMarker=this._moveMarker.bind(this)}return t.prototype.attach=function(t){var e,n,i=t.chart.hostElement,r=this._markers,s=i.getAttribute("data-markerIndex");null!=s?(n=r[s])&&o.isArray(n)?n.push(t):(r[s]=[t],this._bindMoveEvent(i)):(e=r.length,r.push(n=[t]),i.setAttribute("data-markerIndex",e),this._bindMoveEvent(i))},t.prototype.detach=function(t){var e,n,i=t.chart.hostElement,o=this._markers,r=i.getAttribute("data-markerIndex");null!=r&&((e=(n=o[r]).indexOf(t))>-1&&n.splice(e,1),0===n.length&&((e=o.indexOf(n))>-1&&(o[e]=void 0),this._unbindMoveEvent(i)))},t.prototype._unbindMoveEvent=function(t){var e=this._bindMoveMarker;t.removeEventListener("mousemove",e),"ontouchstart"in window&&t.removeEventListener("touchmove",e)},t.prototype._bindMoveEvent=function(t){var e=this._bindMoveMarker;t.addEventListener("mousemove",e),"ontouchstart"in window&&t.addEventListener("touchmove",e)},t}());!function(t){t[t.None=0]="None",t[t.Vertical=1]="Vertical",t[t.Horizontal=2]="Horizontal",t[t.Both=3]="Both"}(it=e.LineMarkerLines||(e.LineMarkerLines={})),function(t){t[t.None=0]="None",t[t.Move=1]="Move",t[t.Drag=2]="Drag"}(ot=e.LineMarkerInteraction||(e.LineMarkerInteraction={})),function(t){t[t.Auto=2]="Auto",t[t.Right=0]="Right",t[t.Left=1]="Left",t[t.Bottom=4]="Bottom",t[t.Top=6]="Top"}(rt=e.LineMarkerAlignment||(e.LineMarkerAlignment={}));var at=function(){function t(t,e){this._wrapperMousedown=null,this._wrapperMouseup=null,this.positionChanged=new o.Event;var n=this;n._chart=t,t.rendered.addHandler(n._initialize,n),n._resetDefaultValue(),o.copy(this,e),n._initialize()}return Object.defineProperty(t.prototype,"chart",{get:function(){return this._chart},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},set:function(t){var e=this;t!==e._isVisible&&(e._isVisible=o.asBoolean(t),e._marker&&e._toggleVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"seriesIndex",{get:function(){return this._seriesIndex},set:function(t){t!==this._seriesIndex&&(this._seriesIndex=o.asNumber(t,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalPosition",{get:function(){return this._horizontalPosition},set:function(t){var e=this;if(t!==e._horizontalPosition){if(e._horizontalPosition=o.asNumber(t,!0),e._horizontalPosition<0||e._horizontalPosition>1)throw"horizontalPosition's value should be in (0, 1).";e._marker&&e._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){var t=this;return t._chart.axisX.convertBack(t._targetPoint.x-t._plotRect.left)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){var t=this;return t._chart.axisY.convertBack(t._targetPoint.y-t._plotRect.top)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"content",{get:function(){return this._content},set:function(t){t!==this._content&&(this._content=o.asFunction(t),this._updateMarkerPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalPosition",{get:function(){return this._verticalPosition},set:function(t){var e=this;if(t!==e._verticalPosition){if(e._verticalPosition=o.asNumber(t,!0),e._verticalPosition<0||e._verticalPosition>1)throw"verticalPosition's value should be in (0, 1).";e._marker&&e._updateMarkerPosition()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alignment",{get:function(){return this._alignment},set:function(t){var e=this;t!==e._alignment&&(e._alignment=t,e._marker&&e._updatePositionByAlignment())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lines",{get:function(){return this._lines},set:function(t){(t=o.asEnum(t,it))!=this._lines&&(this._lines=t,this._marker&&this._resetLinesVisibility())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interaction",{get:function(){return this._interaction},set:function(t){(t=o.asEnum(t,ot))!=this._interaction&&(this._marker&&this._detach(),this._interaction=t,this._marker&&this._attach(),this._toggleElesDraggableClass(this._interaction==ot.Drag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragThreshold",{get:function(){return this._dragThreshold},set:function(t){t!=this._dragThreshold&&(this._dragThreshold=o.asNumber(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragContent",{get:function(){return this._dragContent},set:function(e){var n=this;e!==n._dragContent&&(n._dragContent=o.asBoolean(e)),o.toggleClass(n._dragEle,t._CSS_LINE_DRAGGABLE,n._interaction===ot.Drag&&n._dragContent&&n._lines!==it.None)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dragLines",{get:function(){return this._dragLines},set:function(t){t!=this._dragLines&&(this._dragLines=o.asBoolean(t))},enumerable:!0,configurable:!0}),t.prototype.onPositionChanged=function(t){this.positionChanged.raise(this,t)},t.prototype.remove=function(){var t=this;t._marker&&(t._chart.rendered.removeHandler(t._initialize,t),t._detach(),t._removeMarker(),t._wrapperMoveMarker=null,t._wrapperMousedown=null,t._wrapperMouseup=null)},t.prototype._attach=function(){var e=this,n=e._chart.hostElement;this._interaction!==ot.None?o.addClass(n,t._CSS_TOUCH_DISABLED):o.removeClass(n,t._CSS_TOUCH_DISABLED),st.attach(e),e._attachDrag()},t.prototype._attachDrag=function(){var t=this;t._interaction===ot.Drag&&(t._wrapperMousedown||(t._wrapperMousedown=t._onMousedown.bind(t)),t._wrapperMouseup||(t._wrapperMouseup=t._onMouseup.bind(t)),t._toggleDragEventAttach(!0))},t.prototype._detach=function(){var e=this;o.removeClass(e._chart.hostElement,t._CSS_TOUCH_DISABLED),st.detach(e),e._detachDrag()},t.prototype._detachDrag=function(){this._interaction===ot.Drag&&this._toggleDragEventAttach(!1)},t.prototype._toggleDragEventAttach=function(t){var e=this,n=e._chart.hostElement,i=t?"addEventListener":"removeEventListener";n[i]("mousedown",e._wrapperMousedown),document[i]("mouseup",e._wrapperMouseup),"ontouchstart"in window&&n[i]("touchstart",e._wrapperMousedown),"ontouchend"in window&&document[i]("touchend",e._wrapperMouseup)},t.prototype._onMousedown=function(e){var n,i,r,s,a,l=this,h=l._getEventPoint(e);l._interaction===ot.Drag&&(s=!(0===(n=o.getElementRect(l._hLine)).width||0===n.height),a=!(0===(i=o.getElementRect(l._vLine)).width||0===i.height),r=o.getElementRect(l._markerContent),l._dragContent&&l._pointInRect(h,r)?(l._capturedEle=l._markerContent,l._contentDragStartPoint=new o.Point(h.x,h.y),l._mouseDownCrossPoint=new o.Point(l._targetPoint.x,l._targetPoint.y)):s&&(Math.abs(n.top-h.y)<=l._dragThreshold||Math.abs(h.y-n.top-n.height)<=l._dragThreshold||h.y>=n.top&&h.y<=n.top+n.height)?(l._capturedEle=l._hLine,l._contentDragStartPoint=void 0,o.addClass(l._chart.hostElement,t._CSS_LINE_DRAGGABLE)):a&&(Math.abs(i.left-h.x)<=l._dragThreshold||Math.abs(h.x-i.left-i.width)<=l._dragThreshold||h.x>=i.left&&h.x<=i.left+i.width)&&(l._capturedEle=l._vLine,l._contentDragStartPoint=void 0,o.addClass(l._chart.hostElement,t._CSS_LINE_DRAGGABLE)),e.preventDefault())},t.prototype._onMouseup=function(e){var n=this,i=n._alignment===rt.Auto&&n._capturedEle===n._markerContent&&n._lines!==it.None;n._capturedEle=void 0,n._contentDragStartPoint=void 0,n._mouseDownCrossPoint=void 0,i&&(n._updatePositionByAlignment(),n._updatePositionByAlignment()),o.removeClass(n._chart.hostElement,t._CSS_LINE_DRAGGABLE)},t.prototype._moveMarker=function(t){var e,n,i,r,s,a,l=this,h=l._chart,u=l._getEventPoint(t),c=l._plotRect,d=l._interaction===ot.Drag,p=l._lines===it.Horizontal,f=l._lines===it.Vertical,g=l._seriesIndex,_=o.getElementRect(h.hostElement);if(c&&l._isVisible&&l._interaction!==ot.None&&(l._interaction!==ot.Drag||l._capturedEle&&l._lines!==it.None)){if(d&&(l._contentDragStartPoint?(u.x=p?l._targetPoint.x:l._mouseDownCrossPoint.x+u.x-l._contentDragStartPoint.x,u.y=f?l._targetPoint.y:l._mouseDownCrossPoint.y+u.y-l._contentDragStartPoint.y):p||!l._dragLines&&l._capturedEle===l._hLine?u.x=l._targetPoint.x:(f||!l._dragLines&&l._capturedEle===l._vLine)&&(u.y=l._targetPoint.y)),d&&l._lines===it.Horizontal||!l._dragLines&&l._capturedEle===l._hLine){if(u.y<=c.top||u.y>=c.top+c.height)return}else if(d&&l._lines===it.Vertical||!l._dragLines&&l._capturedEle===l._vLine){if(u.x<=c.left||u.x>=c.left+c.width)return}else if(u.x<=c.left||u.y<=c.top||u.x>=c.left+c.width||u.y>=c.top+c.height)return;if(null!=g&&g>=0&&g<h.series.length){if(null==(n=(e=h.series[g]).hitTest(new o.Point(u.x,NaN)))||null==n.x||null==n.y)return;i=e.axisX||h.axisX,r=e._getAxisY(),s=o.isDate(n.x)?D._toOADate(n.x):n.x,s=o.isString(s)?n.pointIndex:s,a=o.isDate(n.y)?D._toOADate(n.y):n.y,u.x=i.convert(s)+_.left,u.y=r.convert(a)+_.top}l._updateMarkerPosition(u),t.preventDefault()}},t.prototype._show=function(t){(t||this._marker).style.display="block"},t.prototype._hide=function(t){(t||this._marker).style.display="none"},t.prototype._toggleVisibility=function(){this._isVisible?this._show():this._hide()},t.prototype._resetDefaultValue=function(){var t=this;t._isVisible=!0,t._alignment=rt.Auto,t._lines=it.None,t._interaction=ot.None,t._horizontalPosition=null,t._verticalPosition=null,t._content=null,t._seriesIndex=null,t._dragThreshold=15,t._dragContent=!1,t._dragLines=!1,t._targetPoint=new o.Point},t.prototype._initialize=function(){var t,e=this,n=e._chart.hostElement.querySelector("."+D._CSS_PLOT_AREA);e._plot=n,e._marker||e._createMarker(),n&&(e._plotRect=o.getElementRect(n),t=n.getBBox(),e._plotRect.width=t.width,e._plotRect.height=t.height,e._updateMarkerSize(),e._updateLinesSize()),e._updateMarkerPosition(),e._wrapperMoveMarker=e._moveMarker.bind(e),e._attach()},t.prototype._createMarker=function(){var e,n,i=this;e=document.createElement("div"),o.addClass(e,t._CSS_MARKER),(n=i._getContainer()).appendChild(e),i._markerContainer=n,i._marker=e,i._createChildren()},t.prototype._removeMarker=function(){var t=this,e=t._markerContainer;e.removeChild(t._marker),t._content=null,t._hLine=null,t._vLine=null,e.hasChildNodes()||(t._chart.hostElement.removeChild(t._markerContainer),t._markerContainer=null),t._marker=null},t.prototype._getContainer=function(){var e=this._chart.hostElement.querySelector(t._CSS_MARKER_CONTAINER);return e||(e=this._createContainer()),e},t.prototype._createContainer=function(){var e=document.createElement("div"),n=this._chart.hostElement;return o.addClass(e,t._CSS_MARKER_CONTAINER),n.insertBefore(e,n.firstChild),e},t.prototype._createChildren=function(){var e,n,i,r,s=this,a=s._marker;(r=document.createElement("div")).style.position="absolute",r.style.height="100%",r.style.width="100%",a.appendChild(r),s._dragEle=r,e=document.createElement("div"),o.addClass(e,t._CSS_MARKER_CONTENT),a.appendChild(e),s._markerContent=e,n=document.createElement("div"),o.addClass(n,t._CSS_MARKER_HLINE),a.appendChild(n),s._hLine=n,i=document.createElement("div"),o.addClass(i,t._CSS_MARKER_VLINE),a.appendChild(i),s._vLine=i,s._toggleElesDraggableClass(s._interaction===ot.Drag),s._resetLinesVisibility()},t.prototype._toggleElesDraggableClass=function(e){var n=this;o.toggleClass(n._hLine,t._CSS_LINE_DRAGGABLE,e),o.toggleClass(n._vLine,t._CSS_LINE_DRAGGABLE,e),o.toggleClass(n._dragEle,t._CSS_LINE_DRAGGABLE,e&&n._dragContent&&n._lines!==it.None)},t.prototype._updateMarkerSize=function(){var t=this,e=t._plotRect,n=t._chart.hostElement,i=window.getComputedStyle(n,null),r=o.getElementRect(n);t._marker&&(t._marker.style.marginTop=e.top-r.top-(parseFloat(i.getPropertyValue("padding-top"))||0)+"px",t._marker.style.marginLeft=e.left-r.left-(parseFloat(i.getPropertyValue("padding-left"))||0)+"px")},t.prototype._updateLinesSize=function(){var t=this,e=t._plotRect;t._hLine&&t._vLine&&(t._hLine.style.width=e.width+"px",t._vLine.style.height=e.height+"px")},t.prototype._resetLinesVisibility=function(){var t=this;t._hLine&&t._vLine&&(t._hide(t._hLine),t._hide(t._vLine),t._lines!==it.Horizontal&&t._lines!==it.Both||t._show(t._hLine),t._lines!==it.Vertical&&t._lines!==it.Both||t._show(t._vLine))},t.prototype._updateMarkerPosition=function(t){var e,n,i=this,o=i._plotRect,r=i._targetPoint,s=!1;i._plot&&(e=o.left+o.width*(i._horizontalPosition||0),n=o.top+o.height*(i._verticalPosition||0),null==i._horizontalPosition&&t&&(e=t.x),null==i._verticalPosition&&t&&(n=t.y),e===r.x&&n===r.y||(s=!0),r.x=e,r.y=n,i._toggleVisibility(),i._content&&i._updateContent(),s&&i._raisePositionChanged(e,n),i._updatePositionByAlignment(!!t))},t.prototype._updateContent=function(){var t,e=this,n=e._targetPoint,i=e._chart.hitTest(n);t=e._content.call(null,i,n),e._markerContent.innerHTML=t||""},t.prototype._raisePositionChanged=function(t,e){this.onPositionChanged(new o.Point(t,e))},t.prototype._updatePositionByAlignment=function(t){var e=this,n=e._alignment,i=e._targetPoint,o=e._marker,r=0,s=0,a=o.clientWidth,l=o.clientHeight,h=e._plotRect;e._plot&&(!e._capturedEle||e._capturedEle&&e._capturedEle!==e._markerContent?(n===rt.Auto?(i.x+a+12>h.left+h.width&&i.x-a>=0&&(s=a),r=l,i.y-l<h.top&&(r=0)):(1==(1&n)&&(s=a),2==(2&n)&&(r=l)),e._interaction===ot.Move&&0===r&&0===s&&(s=-12)):(parseInt(e._hLine.style.top)>0&&(r=l),parseInt(e._vLine.style.left)>0&&(s=a)),o.style.left=i.x-s-h.left+"px",o.style.top=i.y-r-h.top+"px",e._hLine.style.top=r+"px",e._hLine.style.left=h.left-i.x+s+"px",e._vLine.style.top=h.top-i.y+r+"px",e._vLine.style.left=s+"px")},t.prototype._getEventPoint=function(t){return t instanceof MouseEvent?new o.Point(t.pageX,t.pageY):new o.Point(t.changedTouches[0].pageX,t.changedTouches[0].pageY)},t.prototype._pointInRect=function(t,e){return!(!t||!e)&&t.x>=e.left&&t.x<=e.left+e.width&&t.y>=e.top&&t.y<=e.top+e.height},t._CSS_MARKER="wj-chart-linemarker",t._CSS_MARKER_HLINE="wj-chart-linemarker-hline",t._CSS_MARKER_VLINE="wj-chart-linemarker-vline",t._CSS_MARKER_CONTENT="wj-chart-linemarker-content",t._CSS_MARKER_CONTAINER="wj-chart-linemarker-container",t._CSS_LINE_DRAGGABLE="wj-chart-linemarker-draggable",t._CSS_TOUCH_DISABLED="wj-flexchart-touch-disabled",t}();e.LineMarker=at;var lt,ht=function(){function t(t,e,n,i){this._seriesIndex=t,this._pointIndex=e,this._dataX=n,this._dataY=i}return Object.defineProperty(t.prototype,"seriesIndex",{get:function(){return this._seriesIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointIndex",{get:function(){return this._pointIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataX",{get:function(){return this._dataX},set:function(t){t!==this._dataX&&(this._dataX=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataY",{get:function(){return this._dataY},set:function(t){t!==this._dataY&&(this._dataY=t)},enumerable:!0,configurable:!0}),t}();e._DataPoint=ht,function(t){t[t.X=0]="X",t[t.Y=1]="Y",t[t.XY=2]="XY"}(lt=e._MeasureOption||(e._MeasureOption={}));var ut=function(){function t(t){this._rect=t}return Object.defineProperty(t.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){var e=this._rect;return t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom},t.prototype.pointDistance=function(t,e,n){var i=e.x-t.x,o=e.y-t.y;return n==lt.X?Math.abs(i):n==lt.Y?Math.abs(o):Math.sqrt(i*i+o*o)},t.prototype.distance=function(t){var e=lt.XY;null===t.x?e=lt.Y:null===t.y&&(e=lt.X);var n=this._rect;return t.x<n.left?t.y<n.top?this.pointDistance(t,new o.Point(n.left,n.top),e):t.y>n.bottom?this.pointDistance(t,new o.Point(n.left,n.bottom),e):e==lt.Y?0:n.left-t.x:t.x>n.right?t.y<n.top?this.pointDistance(t,new o.Point(n.right,n.top),e):t.y>n.bottom?this.pointDistance(t,new o.Point(n.right,n.bottom),e):e==lt.Y?0:t.x-n.right:e==lt.X?0:t.y<n.top?n.top-t.y:t.y>n.bottom?t.y-n.bottom:0},t}();e._RectArea=ut;var ct=function(){function t(t,e){this._center=t,this.setRadius(e)}return t.prototype.setRadius=function(t){this._rad=t,this._rad2=t*t},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),t.prototype.contains=function(t){var e=this._center.x-t.x,n=this._center.y-t.y;return e*e+n*n<=this._rad2},t.prototype.distance=function(t){var e=isNaN(t.x)?0:this._center.x-t.x,n=isNaN(t.y)?0:this._center.y-t.y,i=e*e+n*n;return i<=this._rad2?0:Math.sqrt(i)-this._rad},t}();e._CircleArea=ct;var dt=function(){function t(t,e){this._x=[],this._y=[],this._x=t,this._y=e}return t.prototype.contains=function(t){return!1},t.prototype.distance=function(t){for(var e=NaN,n=0;n<this._x.length-1;n++){var i=D._dist(t,new o.Point(this._x[n],this._y[n]),new o.Point(this._x[n+1],this._y[n+1]));(isNaN(e)||i<e)&&(e=i)}return e},t}();e._LinesArea=dt;var pt=function(){};e._HitResult=pt;var ft=function(){function t(t){this._map={},this._chart=t}return t.prototype.add=function(t,e){this._map[e]&&(t.tag||(t.tag=new ht(e,NaN,NaN,NaN)),this._map[e].push(t))},t.prototype.clear=function(){this._map={};for(var t=this._chart.series,e=0;e<t.length;e++)t[e].hitTest===W.prototype.hitTest&&(this._map[e]=new Array)},t.prototype.hitTest=function(t,e){void 0===e&&(e=!1);for(var n=null,i=Number.MAX_VALUE,r=this._chart.series.length-1;r>=0;r--){var s=this._map[r];if(s){for(var a=s.length-1;a>=0;a--){var l=s[a];if(!o.tryCast(l,dt)||e){var h=l.distance(t);if(h<i&&(n=l,0==(i=h)))break}}if(0==i)break}}if(n){var u=new pt;return u.area=n,u.distance=i,u}return null},t.prototype.hitTestSeries=function(t,e){var n=null,i=Number.MAX_VALUE,o=this._map[e];if(o)for(var r=o.length-1;r>=0;r--){var s=o[r],a=s.distance(t);if(a<i&&(n=s,0==(i=a)))break}if(n){var l=new pt;return l.area=n,l.distance=i,l}return null},t}();e._HitTester=ft;var gt=function(){function t(){this._DEFAULT_WIDTH=2,this._DEFAULT_SYM_SIZE=10,this.clipping=!0}return t.prototype.clear=function(){this.seriesCount=0,this.seriesIndex=0},t.prototype._renderLabels=function(t,e,n,i,r){var s=n.length,a=i.dataLabel,l=a.offset;void 0===l&&(l=a.connectingLine?16:0),a.border&&(l-=2);for(var h=0;h<s;h++){var u=n[h],c=o.asType(u.tag,ht,!0);c&&this._renderLabel(t,u,c,i,a,e,l,r)}},t.prototype._renderLabel=function(t,e,n,i,o,r,s,a){var l=null==o.position?Z.Top:o.position,h=o.border,u=o.connectingLine,c=new U(i,p);c._setDataPoint(n);var d=i._getLabelContent(c,o.content),p=this._getLabelPoint(r,n);if(this._getPointAndPosition(p,l,e,i),i._plotRect.contains(p)){var f=new $(t,c,p,d);if(o.onRendering&&(o.onRendering(f)?(d=f.text,p=f.point):d=null),d){var g=this._renderLabelAndBorder(t,d,l,s,p,u,2,h);if(g){var _=new ut(g);_.tag=n,a.push(_)}}}},t.prototype._getPointAndPosition=function(t,e,n,i){if(n instanceof ut){var o=n;i._isRotated()?t.y=o.rect.top+.5*o.rect.height:t.x=o.rect.left+.5*o.rect.width}},t.prototype._getLabelPoint=function(t,e){var n=t._getAxisX(),i=t._getAxisY();return new o.Point(n.convert(e.dataX),i.convert(e.dataY))},t.prototype._renderLabelAndBorder=function(t,e,n,i,o,r,s,a){var l,h="wj-data-label",u="wj-data-label-line",c=D._CSS_DATA_LABELS;switch(n){case Z.Top:r&&t.drawLine(o.x,o.y,o.x,o.y-i,u),o.y-=s+i,l=D._renderText(t,e,o,1,2,h,c);break;case Z.Bottom:r&&t.drawLine(o.x,o.y,o.x,o.y+i,u),o.y+=s+i,l=D._renderText(t,e,o,1,0,h,c);break;case Z.Left:r&&t.drawLine(o.x,o.y,o.x-i,o.y,u),o.x-=s+i,l=D._renderText(t,e,o,2,1,h,c);break;case Z.Right:r&&t.drawLine(o.x,o.y,o.x+i,o.y,u),o.x+=s+i,l=D._renderText(t,e,o,0,1,h,c);break;case Z.Center:l=D._renderText(t,e,o,1,1,h,c)}return a&&l&&t.drawRect(l.left-s,l.top-s,l.width+2*s,l.height+2*s,"wj-data-label-border"),l},t.prototype.getOption=function(t,e){var n=this.chart.options;if(e&&(n=n?n[e]:null),n&&!o.isUndefined(n[t])&&null!==n[t])return n[t]},t.prototype.getNumOption=function(t,e){var n=this.chart.options;if(e&&(n=n?n[e]:null),n&&n[t])return o.asNumber(n[t],!0)},t.cloneStyle=function(t,e){if(!t)return t;var n={};for(var i in t)e&&e.indexOf(i)>=0||(n[i]=t[i]);return n},t.prototype.isValid=function(t,e,n,i){return w.isValid(t)&&w.isValid(e)&&D._contains(this.chart._plotRect,new o.Point(t,e))},t.prototype.load=function(){},t.prototype.unload=function(){},t}();e._BasePlotter=gt;var _t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.origin=0,e.width=.7,e.isVolume=!1,e._volHelper=null,e.stackPosMap={},e.stackNegMap={},e.stacking=_.None,e}return i(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this.stackNegMap[this.chart.axisY._uniqueId]={},this.stackPosMap[this.chart.axisY._uniqueId]={},this._volHelper=null},e.prototype.load=function(){if(t.prototype.load.call(this),this.isVolume){var e,n,i,r,s,a,l,h,u=null,c=null;for(a=0;a<this.chart.series.length;a++){if(s=(e=this.chart.series[a]).getDataType(1)||e.chart._xDataType,n=e._getAxisX(),(i=null===(i=e._getChartType())||o.isUndefined(i)?this.chart._getChartType():i)===C.Column){var d=e.binding.split(this.chart?this.chart._bindingSeparator:",").length-1;r=e._getBindingValues(d)}else r=i===C.Candlestick?e._getBindingValues(4):null;var p;if(s===o.DataType.Date)for(l=[],h=[],a=0;a<e._getLength();a++)p=e._getItem(a)[e.bindingX].valueOf(),l.push(p),h.push({value:p,text:o.Globalize.format(new Date(p),n.format||"d")});else l=this.dataInfo.getXVals();if(u=this.dataInfo.getMinX(),c=this.dataInfo.getMaxX(),r&&r.length>0){this._volHelper=new xt(r,l,u,c,s),n._customConvert=this._volHelper.convert.bind(this._volHelper),n._customConvertBack=this._volHelper.convertBack.bind(this._volHelper),h&&h.length>0&&(this._itemsSource=n.itemsSource=h);break}}}},e.prototype.unload=function(){t.prototype.unload.call(this);for(var e,n=0;n<this.chart.series.length;n++)(e=this.chart.series[n]._getAxisX())&&(e._customConvert=null,e._customConvertBack=null,e.itemsSource&&e.itemsSource==this._itemsSource&&(this._itemsSource=e.itemsSource=null))},e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var n=t.getMinX(),i=t.getMaxX(),r=t.getMinY(),s=t.getMaxY(),a=t.getDeltaX();a<=0&&(a=1),!this.isVolume||this.chart._getChartType()!==C.Column&&this.chart._getChartType()!==C.Candlestick?this.unload():this.load();for(var l=0;l<this.chart.series.length;l++){var h=this.chart.series[l],u=h._getChartType();(u=null===u||o.isUndefined(u)?this.chart._getChartType():u)!==C.Column&&u!==C.Bar||this._isRange(h)&&h._getBindingValues(1).forEach(function(t){t<r?r=t:t>s&&(s=t)})}return this.rotated?(this.chart.axisY.logBase||t.getDataTypeY()===o.DataType.Date||(this.origin>s?s=this.origin:this.origin<r&&(r=this.origin)),new o.Rect(r,n-.5*a,s-r,i-n+a)):(this.chart.axisY.logBase||t.getDataTypeY()===o.DataType.Date||(this.origin>s?s=this.origin:this.origin<r&&(r=this.origin)),new o.Rect(n-.5*a,r,i-n+a,s-r))},e.prototype._isRange=function(t){var e=(null==t.binding?"":t.binding.split(this.chart?this.chart._bindingSeparator:",")).length-1;return this.isVolume?2===e:1===e},e.prototype.plotSeries=function(t,e,n,i,r,s,a,l){var h=[],u=this.chart.series.indexOf(i),c=o.asType(i,z),d=this.chart.options,p=this.width,f=0;if(s=s||0,a=a||1,d&&d.groupWidth){var g=d.groupWidth;if(o.isNumber(g))v=o.asNumber(g),isFinite(v)&&v>0&&(f=v,p=1);else if(o.isString(g)){var m=o.asString(g);if(m&&m.indexOf("%")>=0)m=m.replace("%",""),v=parseFloat(m),isFinite(v)&&(v<0?v=0:v>100&&(v=100),f=0,p=v/100);else{var v=parseFloat(m);isFinite(v)&&v>0&&(f=v,p=1)}}}var y=p/a,b=c._getAxisY()._uniqueId,C=this.stackNegMap[b],x=this.stackPosMap[b],j=i.getValues(0),S=i.getValues(1),E=this._isRange(c),I=c._bindValues(null==c._cv?null==this.chart.collectionView?null:this.chart.collectionView.items:c._cv.items,c._getBinding(1)).values;if(j){if(S||(S=this.dataInfo.getXVals()),S){var D=this.dataInfo.getDeltaX();D>0&&(p*=D,y*=D)}var P=c._getSymbolFill(u),M=c._getAltSymbolFill(u)||P,T=c._getSymbolStroke(u),R=c._getAltSymbolStroke(u)||T,A=j.length;null!=S&&(A=Math.min(A,S.length));var O,k,N=this.origin,L=0,F=this.stacking!=_.None,V=this.stacking==_.Stacked100pc;if(void 0!==c._getChartType()&&(F=V=!1),this.rotated){N<e.actualMin?N=e.actualMin:N>e.actualMax&&(N=e.actualMax),c._isCustomAxisY()&&(F=V=!1);for(var B=e.convert(N),H=n.actualMin,W=n.actualMax,G=0;G<A;G++){var Y=S?S[G]:G,K=j[G],X=B;if(this._getSymbolOrigin&&(X=n.convert(this._getSymbolOrigin(N,G))),E&&I&&I.length&&w.isValid(ot=I[G])&&(X=e.convert(ot)),this._getSymbolStyles){var U=this._getSymbolStyles(G);P=U&&U.fill?U.fill:P,M=U&&U.fill?U.fill:M,T=U&&U.stroke?U.fill:T,R=U&&U.stroke?U.fill:R}if(O=K>0?P:M,k=K>0?T:R,t.fill=O,t.stroke=k,w.isValid(Y)&&w.isValid(K))if(F){if(st=Y+.5*p,(rt=Y-.5*p)<H&&st<H||rt>W&&st>W)continue;var q;if(rt=n.convert(Math.max(rt,H)),st=n.convert(Math.min(st,W)),V){var Z=this.dataInfo.getStackedAbsSum(Y);K/=Z}at=0,K>0?(at=isNaN(x[Y])?0:x[Y],q=e.convert(at),lt=e.convert(at+K),x[Y]=at+K):(at=isNaN(C[Y])?0:C[Y],q=e.convert(at),lt=e.convert(at+K),C[Y]=at+K),l&&h.push(new o.Point(lt,n.convert(Y))),Q=new o.Rect(Math.min(q,lt),Math.min(rt,st),Math.abs(lt-q),Math.abs(st-rt)),f>0&&((tt=1-f/Q.height)<0&&(tt=0),Q.top+=((et=Q.top+.5*Q.height)-Q.top)*tt,Q.height=Math.min(f,Q.height)),pt=new ut(Q),this.drawSymbol(t,Q,i,G,new o.Point(lt,Q.top+.5*Q.height)),i._setPointIndex(G,L),L++,pt.tag=new ht(u,G,at+K,Y),this.hitTester.add(pt,u)}else{if(st=Y-.5*p+(s+1)*y,(rt=Y-.5*p+s*y)<H&&st<H||rt>W&&st>W)continue;rt=n.convert(Math.max(rt,H)),st=n.convert(Math.min(st,W));var J=e.convert(K),Q=new o.Rect(Math.min(J,X),Math.min(rt,st),Math.abs(X-J),Math.abs(st-rt));if(l&&h.push(new o.Point(J,(rt+st)/2)),f>0){var $=f/a,tt=1-$/Q.height;tt<0&&(tt=0);var et=n.convert(Y);Q.top+=(et-Q.top)*tt,Q.height=Math.min($,Q.height)}pt=new ut(Q),this.drawSymbol(t,Q,i,G,new o.Point(J,Q.top+.5*Q.height)),i._setPointIndex(G,L),L++,pt.tag=new ht(u,G,K,Y),this.hitTester.add(pt,u)}}}else{N<n.actualMin?N=n.actualMin:N>n.actualMax&&(N=n.actualMax),B=n.convert(N);var nt=e.actualMin,it=e.actualMax;for(c._isCustomAxisY()&&(F=V=!1),G=0;G<A;G++){if(X=B,Y=S?S[G]:G,K=j[G],this._getSymbolOrigin&&(X=n.convert(this._getSymbolOrigin(N,G,A))),E&&I&&I.length){var ot=I[G];w.isValid(ot)&&(X=n.convert(ot))}if(this._getSymbolStyles&&(P=(U=this._getSymbolStyles(G,A))&&U.fill?U.fill:P,M=U&&U.fill?U.fill:M,T=U&&U.stroke?U.stroke:T,R=U&&U.stroke?U.stroke:R),O=K>0?P:M,k=K>0?T:R,t.fill=O,t.stroke=k,w.isValid(Y)&&w.isValid(K))if(F){if(lt=Y+.5*p,(q=Y-.5*p)<nt&&lt<nt||q>it&&lt>it)continue;if(q=e.convert(q),lt=e.convert(lt),!w.isValid(q)||!w.isValid(lt))continue;var rt,st;V&&(K/=Z=this.dataInfo.getStackedAbsSum(Y));var at=0;K>0?(at=isNaN(x[Y])?0:x[Y],rt=n.convert(at),st=n.convert(at+K),x[Y]=at+K):(at=isNaN(C[Y])?0:C[Y],rt=n.convert(at),st=n.convert(at+K),C[Y]=at+K),l&&h.push(new o.Point(e.convert(Y),st)),Q=new o.Rect(Math.min(q,lt),Math.min(rt,st),Math.abs(lt-q),Math.abs(st-rt)),f>0&&((tt=1-f/Q.width)<0&&(tt=0),Q.left+=((dt=Q.left+.5*Q.width)-Q.left)*tt,Q.width=Math.min(f,Q.width)),pt=new ut(Q),this.drawSymbol(t,Q,i,G,new o.Point(Q.left+.5*Q.width,st)),i._setPointIndex(G,L),L++,pt.tag=new ht(u,G,Y,at+K),this.hitTester.add(pt,u)}else{var lt=Y-.5*p+(s+1)*y;if((q=Y-.5*p+s*y)<nt&&lt<nt||q>it&&lt>it)continue;if(q=e.convert(q),lt=e.convert(lt),!w.isValid(q)||!w.isValid(lt))continue;var ct=n.convert(K);if(Q=new o.Rect(Math.min(q,lt),Math.min(ct,X),Math.abs(lt-q),Math.abs(X-ct)),l&&h.push(new o.Point((q+lt)/2,ct)),f>0){(tt=1-($=f/a)/Q.width)<0&&(tt=0);var dt=e.convert(Y);Q.left+=(dt-Q.left)*tt,Q.width=Math.min($,Q.width)}var pt=new ut(Q);this.drawSymbol(t,Q,i,G,new o.Point(Q.left+.5*Q.width,ct)),i._setPointIndex(G,L),L++,pt.tag=new ht(u,G,Y,K),this.hitTester.add(pt,u)}}}l&&h&&h.length&&l(h)}},e.prototype.drawSymbol=function(t,e,n,i,o){var r=this;if(this.chart.itemFormatter){t.startGroup();var s=new U(this.chart,o,Y.SeriesSymbol);s._setData(n,i),this.chart.itemFormatter(t,s,function(){r.drawDefaultSymbol(t,e,n)}),t.endGroup()}else this.drawDefaultSymbol(t,e,n)},e.prototype.drawDefaultSymbol=function(t,e,n){t.drawRect(e.left,e.top,e.width,e.height,null,n.symbolStyle)},e}(gt);e._BarPlotter=_t;var mt=function(t){function e(){var e=t.call(this)||this;return e.hasSymbols=!1,e.hasLines=!0,e.isSpline=!1,e.stacking=_.None,e.stackPos={},e.stackNeg={},e.clipping=!1,e}return i(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this.stackNeg={},this.stackPos={}},e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var n=t.getMinX(),i=t.getMinY(),r=t.getMaxX(),s=t.getMaxY();if(this.isSpline&&!this.chart.axisY.logBase){var a=.1*(s-i);i-=a,s+=a}return this.rotated?new o.Rect(i,n,s-i,r-n):new o.Rect(n,i,r-n,s-i)},e.prototype.plotSeries=function(t,e,n,i,r,s,a,l){var h=[],u=o.asType(i,z),c=this.chart.series.indexOf(i),d=i.getValues(0),p=i.getValues(1);if(d){p||(p=this.dataInfo.getXVals());var f=gt.cloneStyle(i.style,["fill"]),g=d.length,m=!0;p?g=Math.min(g,p.length):(m=!1,p=new Array(g));var v=this._DEFAULT_WIDTH,y=u._getSymbolFill(c),b=u._getAltSymbolFill(c)||y,C=u._getSymbolStroke(c),x=u._getAltSymbolStroke(c)||C,j=u._getSymbolSize();t.stroke=C,t.strokeWidth=v,t.fill=y;var S=new Array,E=new Array,I=new Array,D=this.rotated,P=this.stacking!=_.None&&!u._isCustomAxisY(),M=this.stacking==_.Stacked100pc&&!u._isCustomAxisY();void 0!==u._getChartType()&&(P=M=!1);for(var T=this.chart.interpolateNulls,R=!1,A=0;A<g;A++){var O=d[A];if(w.isValid(G=m?p[A]:A)&&w.isValid(O)){if(P)if(M&&(O/=this.dataInfo.getStackedAbsSum(G)),O>=0)k=isNaN(this.stackPos[G])?0:this.stackPos[G],O=this.stackPos[G]=k+O;else{var k=isNaN(this.stackNeg[G])?0:this.stackNeg[G];O=this.stackNeg[G]=k+O}var N;if(D){N=new ht(c,A,O,G);var L=e.convert(O);O=n.convert(G),G=L}else N=new ht(c,A,G,O),G=e.convert(G),O=n.convert(O);if(isNaN(G)||isNaN(O))R=!0,!0!==T&&(S.push(void 0),E.push(void 0)),I.push(!0);else{S.push(G),E.push(O),I.push(!1),l&&h.push(new o.Point(G,O));var F=new ct(new o.Point(G,O),.5*j);F.tag=N,this.hitTester.add(F,c)}}else R=!0,!0!==T&&(S.push(void 0),E.push(void 0)),I.push(!0)}var V=0;if(this.hasLines)if(t.fill=null,R&&!0!==T){var B=[],H=[];for(A=0;A<g;A++)void 0===S[A]?(B.length>1&&(this._drawLines(t,B,H,null,f,this.chart._plotrectId),this.hitTester.add(new dt(B,H),c),V++),B=[],H=[]):(B.push(S[A]),H.push(E[A]));B.length>1&&(this._drawLines(t,B,H,null,f,this.chart._plotrectId),this.hitTester.add(new dt(B,H),c),V++)}else this._drawLines(t,S,E,null,f,this.chart._plotrectId),this.hitTester.add(new dt(S,E),c),V++;if((this.hasSymbols||this.chart.itemFormatter)&&j>0){t.fill=y;var W=0;for(A=0;A<g;A++)if(!T||!I[A]){var G=S[W];O=E[W],(!1===this.hasLines||this.chart.itemFormatter)&&(t.fill=d[A]>0?y:b,t.stroke=d[A]>0?C:x),this.isValid(G,O,e,n)&&(this._drawSymbol(t,G,O,j,u,A),i._setPointIndex(A,V),V++),W++}}l&&h&&h.length&&l(h)}},e.prototype._drawLines=function(t,e,n,i,o,r){this.isSpline?t.drawSplines(e,n,i,o,r):t.drawLines(e,n,i,o,r)},e.prototype._drawSymbol=function(t,e,n,i,r,s){var a=this;if(this.chart.itemFormatter){t.startGroup();var l=new U(this.chart,new o.Point(e,n),Y.SeriesSymbol);l._setData(r,s),this.chart.itemFormatter(t,l,function(){a.hasSymbols&&a._drawDefaultSymbol(t,e,n,i,r.symbolMarker,r.symbolStyle)}),t.endGroup()}else this._drawDefaultSymbol(t,e,n,i,r.symbolMarker,r.symbolStyle)},e.prototype._drawDefaultSymbol=function(t,e,n,i,o,r){o==F.Dot?t.drawEllipse(e,n,.5*i,.5*i,null,r):o==F.Box&&t.drawRect(e-.5*i,n-.5*i,i,i,null,r)},e}(gt);e._LinePlotter=mt;var vt=function(t){function e(){var e=t.call(this)||this;return e.stacking=_.None,e.isSpline=!1,e.stackPos={},e.stackNeg={},e}return i(e,t),e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var n=t.getMinX(),i=t.getMinY(),r=t.getMaxX(),s=t.getMaxY();if(this.isSpline){var a=.1*(s-i);this.chart.axisY.logBase||(i-=a),s+=a}return this.rotated?new o.Rect(i,n,s-i,r-n):new o.Rect(n,i,r-n,s-i)},e.prototype.clear=function(){t.prototype.clear.call(this),this.stackNeg={},this.stackPos={}},e.prototype.plotSeries=function(t,e,n,i,r,s,a,l){var h=[],u=this.chart.series.indexOf(i),c=i,d=i.getValues(0),p=i.getValues(1);if(d){var f=d.length;if(f){p||(p=this.dataInfo.getXVals());var g=!0;p?p.length<f&&(f=p.length):(g=!1,p=new Array(f));var m=new Array,v=new Array,y=new Array,b=new Array,C=this.stacking!=_.None&&!c._isCustomAxisY(),x=this.stacking==_.Stacked100pc&&!c._isCustomAxisY();void 0!==c._getChartType()&&(C=x=!1);for(var j=this.rotated,S=!1,E=this.chart.interpolateNulls,I=null,P=null,M=this.chart._plotRect,T=0;T<f;T++){var R=g?p[T]:T,A=d[T];if((null===I||R>I)&&(I=R),(null===P||R<P)&&(P=R),w.isValid(R)&&w.isValid(A)){var O=j?n.convert(R):e.convert(R);if(C){x&&(A/=this.dataInfo.getStackedAbsSum(R));var k=0;A>=0?(k=isNaN(this.stackPos[R])?0:this.stackPos[R],A=this.stackPos[R]=k+A):(k=isNaN(this.stackNeg[R])?0:this.stackNeg[R],A=this.stackNeg[R]=k+A),j?(k<e.actualMin&&(k=e.actualMin),y.push(e.convert(k)),b.push(O)):(y.push(O),k<n.actualMin&&(k=n.actualMin),b.push(n.convert(k)))}if(j)N=e.convert(A),isNaN(O)||isNaN(N)?(S=!0,C||!0===E||(m.push(void 0),v.push(void 0))):(m.push(N),v.push(O),D._contains(M,new o.Point(N,O))&&((L=new ct(new o.Point(N,O),this._DEFAULT_SYM_SIZE)).tag=new ht(u,T,A,R),this.hitTester.add(L,u)));else{var N=n.convert(A);if(isNaN(O)||isNaN(N))S=!0,C||!0===E||(m.push(void 0),v.push(void 0));else if(m.push(O),v.push(N),D._contains(M,new o.Point(O,N))){var L=new ct(new o.Point(O,N),this._DEFAULT_SYM_SIZE);L.tag=new ht(u,T,R,A),this.hitTester.add(L,u)}}}else S=!0,C||!0===E||(m.push(void 0),v.push(void 0))}l&&m.forEach(function(t,e){null!=t&&h.push(new o.Point(t,v[e]))});var F=this._DEFAULT_WIDTH,V=r._getColorLight(u),B=r._getColor(u),H=gt.cloneStyle(i.style,["fill"]),z=gt.cloneStyle(i.style,["stroke"]);if(!C&&!0!==E&&S){var W=[],G=[];for(T=0;T<f;T++)void 0===m[T]?(W.length>1&&(this.isSpline&&(W=(Y=this._convertToSpline(W,G)).xs,G=Y.ys),t.stroke=B,t.strokeWidth=F,t.fill="none",t.drawLines(W,G,null,H),this.hitTester.add(new dt(W,G),u),j?(W.push(e.convert(e.actualMin),e.convert(e.actualMin)),G.push(n.convert(n.actualMax),n.convert(n.actualMin))):(W.push(W[W.length-1],W[0]),G.push(n.convert(n.actualMin),n.convert(n.actualMin))),t.fill=V,t.stroke="none",t.drawPolygon(W,G,null,z)),W=[],G=[]):(W.push(m[T]),G.push(v[T]));W.length>1&&(this.isSpline&&(W=(Y=this._convertToSpline(W,G)).xs,G=Y.ys),t.stroke=B,t.strokeWidth=F,t.fill="none",t.drawLines(W,G,null,H),this.hitTester.add(new dt(W,G),u),j?(W.push(e.convert(e.actualMin),e.convert(e.actualMin)),G.push(n.convert(n.actualMax),n.convert(n.actualMin))):(W.push(W[W.length-1],W[0]),G.push(n.convert(n.actualMin),n.convert(n.actualMin))),t.fill=V,t.stroke="none",t.drawPolygon(W,G,null,z))}else{if(this.isSpline){var Y=this._convertToSpline(m,v);m=Y.xs,v=Y.ys}if(C){if(this.isSpline){var K=this._convertToSpline(y,b);y=K.xs,b=K.ys}m=m.concat(y.reverse()),v=v.concat(b.reverse())}else j?(m.push(e.convert(e.actualMin),e.convert(e.actualMin)),v[0]>v[v.length-1]?v.push(n.convert(I),n.convert(P)):v.push(n.convert(P),n.convert(I))):(m[0]>m[m.length-1]?m.push(e.convert(P),e.convert(I)):m.push(e.convert(I),e.convert(P)),v.push(n.convert(n.actualMin),n.convert(n.actualMin)));t.fill=V,t.stroke="none",t.drawPolygon(m,v,null,z),C?(m=m.slice(0,m.length-y.length),v=v.slice(0,v.length-b.length)):(m=m.slice(0,m.length-2),v=v.slice(0,v.length-2)),t.stroke=B,t.strokeWidth=F,t.fill="none",t.drawLines(m,v,null,H),this.hitTester.add(new dt(m,v),u)}this._drawSymbols(t,i,u),l&&h&&h.length&&l(h)}}},e.prototype._convertToSpline=function(t,e){if(t&&e){var n=new Q(t,e).calculate();return{xs:n.xs,ys:n.ys}}return{xs:t,ys:e}},e.prototype._drawSymbols=function(t,e,n){if(null!=this.chart.itemFormatter)for(var i=this.hitTester._map[n],r=0;r<i.length;r++){var s=o.tryCast(i[r],ct);if(s){var a=s.tag;t.startGroup();var l=new U(this.chart,s.center,Y.SeriesSymbol);l._setDataPoint(a),this.chart.itemFormatter(t,l,function(){}),t.endGroup()}}},e}(gt);e._AreaPlotter=vt;var yt=function(t){function e(){var e=t.call(this)||this;return e._MIN_SIZE=5,e._MAX_SIZE=30,e.hasLines=!1,e.hasSymbols=!0,e.clipping=!0,e}return i(e,t),e.prototype.adjustLimits=function(e,n){var i=this.getNumOption("minSize","bubble");this._minSize=i||this._MIN_SIZE;var o=this.getNumOption("maxSize","bubble");this._maxSize=o||this._MAX_SIZE;for(var r=this.chart.series,s=r.length,a=NaN,l=NaN,h=0;h<s;h++){var u=r[h]._getBindingValues(1);if(u)for(var c=u.length,d=0;d<c;d++)w.isValid(u[d])&&((isNaN(a)||u[d]<a)&&(a=u[d]),(isNaN(l)||u[d]>l)&&(l=u[d]))}this._minValue=a,this._maxValue=l;var p=t.prototype.adjustLimits.call(this,e,n),f=this.chart.axisY;if(this.chart.axisX.logBase<=0){var g=(n.width-this._maxSize)/p.width;p.left-=.5*this._maxSize/g,p.width+=this._maxSize/g}if(f.logBase<=0){var _=(n.height-this._maxSize)/p.height;p.top-=.5*this._maxSize/_,p.height+=this._maxSize/_}return p},e.prototype._drawSymbol=function(t,e,n,i,r,s){var a=this;if(null==this._minSize){var l=this.getNumOption("minSize","bubble");this._minSize=l||this._MIN_SIZE}if(null==this._maxSize){var h=this.getNumOption("maxSize","bubble");this._maxSize=h||this._MAX_SIZE}var u=r._getItem(s);if(u){var c=r._getBinding(1);if(c&&w.isValid(i=u[c])){var d=this._minValue==this._maxValue?1:Math.sqrt((i-this._minValue)/(this._maxValue-this._minValue));if(i=this._minSize+(this._maxSize-this._minSize)*d,this.chart.itemFormatter){var p=new U(this.chart,new o.Point(e,n),Y.SeriesSymbol);p._setData(r,s),t.startGroup(),this.chart.itemFormatter(t,p,function(){a._drawDefaultSymbol(t,e,n,i,r.symbolMarker,r.symbolStyle)}),t.endGroup()}else this._drawDefaultSymbol(t,e,n,i,r.symbolMarker,r.symbolStyle);var f=this.hitTester._map[this.chart.series.indexOf(r)];if(null!=f)for(var g=f.length-1;g>=0;g--){var _=f[g];if(_.tag&&_.tag.pointIndex==s){var m=o.tryCast(_,ct);m&&m.setRadius(.5*i)}}}}},e}(mt);e._BubblePlotter=yt;var bt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isCandle=!0,e.isArms=!1,e.isEqui=!1,e.isVolume=!1,e._volHelper=null,e._symWidth=.7,e}return i(e,t),e.prototype.clear=function(){t.prototype.clear.call(this),this._volHelper=null},e.prototype.load=function(){if(t.prototype.load.call(this),this.isVolume){var e,n,i,r,s,a,l,h,u=null,c=null;for(a=0;a<this.chart.series.length;a++){var d;if(s=(e=this.chart.series[a]).getDataType(1)||e.chart._xDataType,n=e._getAxisX(),r=(i=null===(i=e._getChartType())||o.isUndefined(i)?this.chart._getChartType():i)===C.Column?e._getBindingValues(1):i===C.Candlestick?e._getBindingValues(4):null,s===o.DataType.Date)for(l=[],h=[],a=0;a<e._getLength();a++)d=e._getItem(a)[e.bindingX].valueOf(),l.push(d),h.push({value:d,text:o.Globalize.format(new Date(d),n.format||"d")});else l=this.dataInfo.getXVals();if(u=this.dataInfo.getMinX(),c=this.dataInfo.getMaxX(),r&&r.length>0){this._volHelper=new xt(r,l,u,c,s),n._customConvert=this._volHelper.convert.bind(this._volHelper),n._customConvertBack=this._volHelper.convertBack.bind(this._volHelper),h&&h.length>0&&(this._itemsSource=n.itemsSource=h);break}}}},e.prototype.unload=function(){t.prototype.unload.call(this);for(var e,n=0;n<this.chart.series.length;n++)(e=this.chart.series[n]._getAxisX())&&(e._customConvert=null,e._customConvertBack=null,e.itemsSource&&e.itemsSource==this._itemsSource&&(this._itemsSource=e.itemsSource=null))},e.prototype.parseSymbolWidth=function(t){if(this._isPixel=void 0,t)if(o.isNumber(t)){var e=o.asNumber(t);isFinite(e)&&e>0&&(this._symWidth=e,this._isPixel=!0)}else if(o.isString(t)){var n=o.asString(t);if(n&&n.indexOf("%")>=0)n=n.replace("%",""),i=parseFloat(n),isFinite(i)&&(i<0?i=0:i>100&&(i=100),this._symWidth=i/100,this._isPixel=!1);else{var i=parseFloat(t);isFinite(i)&&i>0&&(this._symWidth=i,this._isPixel=!0)}}},e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var n=t.getMinX(),i=t.getMinY(),r=t.getMaxX(),s=t.getMaxY(),a=t.getDeltaX(),l=this.chart._xDataType;a<=0&&(a=1);var h=this.chart.series,u=h.length,c=0;this.parseSymbolWidth(this.symbolWidth),!this.isVolume||this.chart._getChartType()!==C.Column&&this.chart._getChartType()!==C.Candlestick?this.unload():this.load();for(var d=0;d<u;d++){var p=h[d];if(!p._isCustomAxisY()){var f=p._getBinding(1),g=p._getBinding(2),_=p._getBinding(3),m=p._getLength();if(m){var v=p._getSymbolSize();v>c&&(c=v);for(var y=0;y<m;y++){var b=p._getItem(y);b&&[f?b[f]:null,g?b[g]:null,_?b[_]:null].forEach(function(t){w.isValid(t)&&null!==t&&((isNaN(i)||t<i)&&(i=t),(isNaN(s)||t>s)&&(s=t))})}}}}var x=r-n,j=this.chart._plotRect;if(j&&j.width&&!this.isVolume){var S=j.width/(j.width-(v+=2))*x;n-=.5*(S-x),x=S}return l!==o.DataType.Date||!this.isVolume||this.chart._getChartType()!==C.Column&&this.chart._getChartType()!==C.Candlestick?this.chart._isRotated()?new o.Rect(i,n,s-i,x):new o.Rect(n,i,x,s-i):new o.Rect(n-.5*a,i,r-n+a,s-i)},e.prototype.plotSeries=function(t,e,n,i,r,s,a,l){var h=this,u=o.asType(i,z),c=this.chart.series.indexOf(i),d=i.getValues(0),p=i.getValues(1),f=this._symWidth,g=this.chart._isRotated();if(d){if(p||(p=this.dataInfo.getXVals()),p){var _=this.dataInfo.getDeltaX();_>0&&!1===this._isPixel&&(f*=_)}var m=d.length,v=!0;p?m=Math.min(m,p.length):(v=!1,p=new Array(m));var y=this._DEFAULT_WIDTH,b=u._getSymbolFill(c),C=u._getAltSymbolFill(c)||"transparent",x=u._getSymbolStroke(c),j=u._getAltSymbolStroke(c)||x,S=void 0===this._isPixel?u._getSymbolSize():f;t.stroke=x,t.strokeWidth=y,t.fill=b;for(var E,I,D=u._getBinding(1),P=u._getBinding(2),M=u._getBinding(3),T=g?n.actualMin:e.actualMin,R=g?n.actualMax:e.actualMax,A=0,O=null,k=null,N=0;N<m;N++)if(O=u._getItem(N)){var L=v?p[N]:N;if(w.isValid(L)&&T<=L&&L<=R){var F=d[N],V=D?O[D]:null,B=P?O[P]:null,H=M?O[M]:null;if(t.startGroup(),this.isEqui&&null!==k?k[M]!==O[M]&&(E=k[M]<O[M]?C:b,I=k[M]<O[M]?j:x):(E=B<H?C:b,I=B<H?j:x),t.fill=E,t.stroke=I,this.chart.itemFormatter){var W=new U(this.chart,new o.Point(e.convert(L),n.convert(F)),Y.SeriesSymbol);W._setData(u,N),this.chart.itemFormatter(t,W,function(){h._drawSymbol(t,e,n,c,N,E,S,L,F,V,B,H)})}else this._drawSymbol(t,e,n,c,N,E,S,L,F,V,B,H);t.endGroup(),i._setPointIndex(N,A),A++}k=O}}},e.prototype._drawSymbol=function(t,e,n,i,r,s,a,l,h,u,c,d){var p,f=new ht(i,r,l,h),g=null,_=null,m=null,v=null,y=this.chart._isRotated();if(y){var b=n;n=e,e=b}if(!1===this._isPixel&&(m=e.convert(l-.5*a))>(v=e.convert(l+.5*a))){var C=m;m=v,v=C}l=e.convert(l),!1!==this._isPixel&&(m=l-.5*a,v=l+.5*a),this.isCandle?(w.isValid(c)&&w.isValid(d)&&(c=n.convert(c),d=n.convert(d),_=(g=Math.min(c,d))+Math.abs(c-d),y?(t.drawRect(g,m,_-g||1,v-m||1),p=new ut(new o.Rect(g,m,_-g||1,v-m||1))):(t.drawRect(m,g,v-m||1,_-g||1),p=new ut(new o.Rect(m,g,v-m||1,_-g||1))),p.tag=f,this.hitTester.add(p,i)),w.isValid(h)&&(h=n.convert(h),null!==g&&(y?t.drawLine(_,l,h,l):t.drawLine(l,g,l,h))),w.isValid(u)&&(u=n.convert(u),null!==_&&(y?t.drawLine(g,l,u,l):t.drawLine(l,_,l,u)))):this.isEqui?w.isValid(h)&&w.isValid(u)&&(h=n.convert(h),u=n.convert(u),_=(g=Math.min(h,u))+Math.abs(h-u),t.drawRect(m,g,v-m||1,_-g||1),(p=new ut(new o.Rect(m,g,v-m||1,_-g||1))).tag=f,this.hitTester.add(p,i)):this.isArms?(w.isValid(c)&&w.isValid(d)&&(c=n.convert(c),d=n.convert(d),_=(g=Math.min(c,d))+Math.abs(c-d),t.drawRect(m,g,v-m||1,_-g||1)),w.isValid(h)&&null!==g&&(h=n.convert(h),t.drawLine(l,g,l,h)),w.isValid(u)&&null!==_&&(u=n.convert(u),t.drawLine(l,_,l,u)),w.isValid(h)&&w.isValid(u)&&(t.fill="transparent",_=(g=Math.min(h,u))+Math.abs(h-u),t.drawRect(m,g,v-m||1,_-g||1),(p=new ut(new o.Rect(m,g,v-m||1,_-g||1))).tag=f,this.hitTester.add(p,i))):(w.isValid(h)&&w.isValid(u)&&(h=n.convert(h),u=n.convert(u),_=(g=Math.min(h,u))+Math.abs(h-u),y?(t.drawLine(u,l,h,l),p=new ut(new o.Rect(g,m,_-g||1,v-m||1))):(t.drawLine(l,u,l,h),p=new ut(new o.Rect(m,g,v-m||1,_-g||1))),p.tag=f,this.hitTester.add(p,i)),w.isValid(c)&&(c=n.convert(c),y?t.drawLine(c,m,c,l):t.drawLine(m,c,l,c)),w.isValid(d)&&(d=n.convert(d),y?t.drawLine(d,l,d,v):t.drawLine(l,d,v,d)))},e}(gt);e._FinancePlotter=bt;var wt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stacking=_.None,e}return i(e,t),e.prototype.adjustLimits=function(t,e){this.dataInfo=t;var n=t.getMinX(),i=t.getMinY(),r=t.getMaxX(),s=t.getMaxY();return this.rotated?new o.Rect(i,n,s-i,r-n):new o.Rect(n,i,r-n,s-i)},e.prototype.plotSeries=function(t,e,n,i,r,s,a,l){var h=this.chart.series.indexOf(i);if(!(h>0)){var u,c,d,p,f,g=o.asType(i,z),_=this.chart.options,m=i.getValues(0),v=i.getValues(1),y=this.chart._plotRect,b=_&&_.funnel&&null!=_.funnel.neckWidth?_.funnel.neckWidth:.2,C=_&&_.funnel&&null!=_.funnel.neckHeight?_.funnel.neckHeight:0,x=b*y.width,j=0,S=0,E=0,I=0,D=y.left,P=y.top,M=y.width,T=y.height;if(m){x=x||1,v||(v=this.dataInfo.getXVals());var R=m.length;for(null!=v&&(R=Math.min(R,v.length)),j=0;j<R;j++)S+=m[j];var A,O,k,N=0;if(_&&_.funnel&&"rectangle"===_.funnel.type)for(C=T/R,b=M,j=0;j<R;j++){var L=v?v[j]:j,F=m[j],V=g._getSymbolFill(j),B=g._getAltSymbolFill(j)||V,H=g._getSymbolStroke(j),W=g._getAltSymbolStroke(j)||H;if(this._getSymbolStyles&&(V=(U=this._getSymbolStyles(j,R))&&U.fill?U.fill:V,B=U&&U.fill?U.fill:B,H=U&&U.stroke?U.stroke:H,W=U&&U.stroke?U.stroke:W),A=F>0?V:B,O=F>0?H:W,t.fill=A,t.stroke=O,w.isValid(L)&&w.isValid(F)){k||(k=M/F);var G=k*F;t.drawRect(D+=(b-G)/2,P,G,C),Y=new Ct(new o.Point(D,P),G,C,G,C),P+=C,b=G,Y.tag=new ht(h,j,L,F),this.hitTester.add(Y,h),i._setPointIndex(j,N),N++}}else for(E=y.left+y.width*(1-b)/2,I=y.top+y.height*(1-C),c=(1-b)*y.width/2/(y.height*(1-C)),!isNaN(c)&&isFinite(c)||(M=x,D=E,P=I),u=y.width*b*y.height+y.width*(1-b)/2*y.height*(1-C),j=0;j<R;j++){L=v?v[j]:j,F=m[j];var Y,K=[],X=[];if(V=g._getSymbolFill(j),B=g._getAltSymbolFill(j)||V,H=g._getSymbolStroke(j),W=g._getAltSymbolStroke(j)||H,this._getSymbolStyles){var U=this._getSymbolStyles(j,R);V=U&&U.fill?U.fill:V,B=U&&U.fill?U.fill:B,H=U&&U.stroke?U.stroke:H,W=U&&U.stroke?U.stroke:W}if(A=F>0?V:B,O=F>0?H:W,t.fill=A,t.stroke=O,w.isValid(L)&&w.isValid(F)){var q=u*F/S;M>x?(P+(p=this._getTrapezoidOffsetY(M,q,c))<I?(K=[D,D+(d=c*p),D+M-d,D+M],X=[P,P+p,P+p,P],Y=new Ct(new o.Point(D,P),M,p,M-2*d,0),M-=2*d,D+=d,P+=p):(d=c*(p=I-P),f=(q-=this._getTrapezoidArea(M,c,p))/x,K.push(D,D+d,D+d,D+d+x,D+d+x,D+M),X.push(P,P+p,P+p+f,P+p+f,P+p,P),Y=new Ct(new o.Point(D,P),M,p+f,x,f),M=x,D+=d,P=P+p+f),t.drawPolygon(K,X)):(t.drawRect(D,P,M,f=q/x),Y=new Ct(new o.Point(D,P),x,f,x,f),P+=f),Y.tag=new ht(h,j,L,F),this.hitTester.add(Y,h),i._setPointIndex(j,N),N++}}}}},e.prototype._getTrapezoidArea=function(t,e,n){var i=n*e;return i*n+(t-2*i)*n},e.prototype._getTrapezoidOffsetY=function(t,e,n){var i=Math.pow(t/2/n,2)-e/n;return t/2/n-Math.sqrt(i>=0?i:0)},e.prototype.drawSymbol=function(t,e,n,i,o){var r=this;if(this.chart.itemFormatter){t.startGroup();var s=new U(this.chart,o,Y.SeriesSymbol);s._setData(n,i),this.chart.itemFormatter(t,s,function(){r.drawDefaultSymbol(t,e,n)}),t.endGroup()}else this.drawDefaultSymbol(t,e,n)},e.prototype.drawDefaultSymbol=function(t,e,n){t.drawRect(e.left,e.top,e.width,e.height,null,n.symbolStyle)},e.prototype._getPointAndPosition=function(t,e,n,i){var o=n;t.x=o.center.x,t.y=o.center.y,e=null==e?Z.Center:e},e}(gt);e._FunnelPlotter=wt;var Ct=function(){function t(t,e,n,i,r){this._startPoint=t,this._width=e,this._height=n,this._neckWidth=i,this._neckHeight=r,this._center=new o.Point(this._startPoint.x+e/2,this._startPoint.y+n/2),this._offsetX=(e-i)/2,this._offsetY=n-r}return t.prototype.contains=function(t){var e=this._startPoint,n=this._offsetX,i=this._offsetY;if(t.x>=e.x&&t.x<=e.x+this._width&&t.y>=e.y&&t.y<=e.y+this._height){if(t.x>=e.x+n&&t.x<=e.x+this._width-n)return!0;if(t.y>e.y+i)return!1;if(t.x<this._center.x)return(t.y-e.y)/(t.x-e.x)<i/n;if(t.x>this._center.x)return(t.y-e.y)/(e.x+this._width-t.x)<i/n}return!1},t.prototype.distance=function(t){if(this.contains(t))return 0;var e=this._startPoint,n=this._width,i=this._height,o=this._offsetX,r=this._offsetY;return t.y<e.y?t.x<e.x?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):t.x>e.x+n?Math.sqrt(Math.pow(t.x-e.x-n,2)+Math.pow(e.y-t.y,2)):e.y-t.y:t.y>e.y+i?t.x<e.x?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(t.y-e.y-i,2)):t.x>e.x+n?Math.sqrt(Math.pow(t.x-e.x-n,2)+Math.pow(t.y-e.y-i,2)):t.y-e.y-i:t.y>e.y+r?t.x<e.x+o?e.x+o-t.x:t.x>e.x+n-o?t.x-e.x-n+o:void 0:t.x<e.x+o?Math.min(Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(t.y-e.y,2)),Math.sqrt(Math.pow(t.x-o/2-e.x,2)+Math.pow(t.y-r/2-e.y,2)),Math.sqrt(Math.pow(t.x-o-e.x,2)+Math.pow(t.y-r-e.y,2))):Math.min(Math.sqrt(Math.pow(t.x-n-e.x,2)+Math.pow(t.y-e.y,2)),Math.sqrt(Math.pow(t.x-n+o/2-e.x,2)+Math.pow(t.y-r/2-e.y,2)),Math.sqrt(Math.pow(t.x-n+o-e.x,2)+Math.pow(t.y-r-e.y,2)))},Object.defineProperty(t.prototype,"center",{get:function(){return this._center},enumerable:!0,configurable:!0}),t}();e._FunnelSegment=Ct;var xt=function(){function t(t,e,n,i,r){this._volumes=o.asArray(t),this._xVals=o.asArray(e),this._xDataMin=o.asNumber(n,!0,!1),this._xDataMax=o.asNumber(i,!0,!1),this._xDataType=o.asEnum(r,o.DataType,!0),this._calcData=[],this._init()}return t.prototype.convert=function(e,n,i){var r=void 0,s=this._calcData.length,a=-1;if(this._hasXs&&this._xDataType===o.DataType.Date){if(-1===(a=this._xVals.indexOf(e)))for(var l=0;l<this._xVals.length;l++){if(l<this._xVals.length-1&&this._xVals[l]<=e&&e<=this._xVals[l+1]){a=l;break}if(0===l&&e<=this._xVals[l]){a=l;break}if(l===this._xVals.length-1&&this._xVals[l]<=e){a=l;break}}-1===a&&(a=this._xVals.indexOf(Math.floor(e)),a=o.clamp(a,0,s-1))}else this._hasXs?-1===(a=this._xVals.indexOf(e))&&(a=this._xVals.indexOf(Math.floor(e)),a=o.clamp(a,0,s-1)):a=o.clamp(Math.round(e),0,s-1);return 0<=a&&a<s&&(this._hasXs&&(e=t.convertToRange(e,0,s-1,this._xDataMin,this._xDataMax)),r=((r=this._calcData[a].value+(e-a)*this._calcData[a].width-.5*this._calcData[a].width)-(n=this._getXVolume(n)))/((i=this._getXVolume(i))-n)),r},t.prototype.convertBack=function(e,n,i){var o,r=void 0,s=this._calcData.length,a=-1;for(o=0;o<s;o++)if(this._calcData[o].x1<=e&&e<=this._calcData[o].x2||0===o&&e<=this._calcData[o].x2||o===s-1&&this._calcData[o].x1<=e){a=o;break}return 0<=a&&a<s&&(r=e/this._calcData[a].width-this._calcData[a].value/this._calcData[a].width+.5+o,this._hasXs&&(r=t.convertToRange(r,this._xDataMin,this._xDataMax,0,s-1))),r},t.prototype._init=function(){this._hasXs=null!==this._xVals&&this._xVals.length>0,this._hasXs&&!o.isNumber(this._xDataMin)&&(this._xDataMin=Math.min.apply(null,this._xVals)),this._hasXs&&!o.isNumber(this._xDataMax)&&(this._xDataMax=Math.max.apply(null,this._xVals)),this._hasXs&&(this._hasXs=o.isNumber(this._xDataMin)&&o.isNumber(this._xDataMax)),this._hasXs&&this._xDataType===o.DataType.Date&&this._fillGaps();var t=0,e=0,n=null!==this._volumes&&this._volumes.length>0?this._volumes.length:0;for(e=0;e<n;e++)t+=this._volumes[e]||0;var i,r,s=0;for(e=0;e<n;e++)i=s+(r=(this._volumes[e]||0)/t),this._calcData.push({value:i,width:r,x1:s,x2:i}),s=this._calcData[e].value},t.prototype._getXVolume=function(e){var n=this._calcData.length,i=-1;if(this._hasXs){i=this._xVals.indexOf(e);for(var r=0;r<this._xVals.length;r++){if(r<this._xVals.length-1&&this._xVals[r]<=e&&e<=this._xVals[r+1]){i=r;break}if(0===r&&e<=this._xVals[r]){i=r;break}if(r===this._xVals.length-1&&this._xVals[r]<=e){i=r;break}}}return this._hasXs&&(e=t.convertToRange(e,0,n-1,this._xDataMin,this._xDataMax)),-1===i&&(i=o.clamp(Math.round(e),0,n-1)),this._calcData[i].value+(e-i)*this._calcData[i].width-.5*this._calcData[i].width},t.convertToRange=function(t,e,n,i,o){return e===n||i===o?0:(t-i)*(n-e)/(o-i)+e},t.prototype._fillGaps=function(){if(!(this._xDataType!==o.DataType.Date||null===this._xVals||this._xVals.length<=0)){var t,e=this._xDataMin,n=this._xDataMax;for(t=1;e<n;t++)(e=new Date(e)).setDate(e.getDate()+1),(e=e.valueOf())!==this._xVals[t]&&(this._xVals.splice(t,0,e),this._volumes.splice(t,0,0))}},t}();e._VolumeHelper=xt},"cjC+":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("DogD"),o=n("CcnG"),r=n("CcnG"),s=n("CcnG"),a=n("CcnG"),l=n("Ip0R"),h=n("8X1S");e.wjTooltipMeta={selector:"[wjTooltip]",inputs:[],outputs:["initialized"],exportAs:"wjTooltip",providers:[]};var u=function(){function t(e,n,o){this.isInitialized=!1,this._wjBehaviour=h.WjDirectiveBehavior.attach(this,e,n,o),this._elRef=e,t._toolTip||(t._toolTip=new i.Tooltip),this.created()}return t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy(),this.wjTooltip=null},Object.defineProperty(t.prototype,"wjTooltip",{get:function(){return this._toolTipText},set:function(e){this._toolTipText!=e&&t._toolTip.setTooltip(this._elRef.nativeElement,e)},enumerable:!0,configurable:!0}),t.meta={outputs:e.wjTooltipMeta.outputs},t.decorators=[{type:r.Directive,args:[{selector:e.wjTooltipMeta.selector,inputs:e.wjTooltipMeta.inputs,outputs:e.wjTooltipMeta.outputs,exportAs:e.wjTooltipMeta.exportAs,providers:[{provide:"WjComponent",useExisting:r.forwardRef(function(){return t})}].concat(e.wjTooltipMeta.providers)}]}],t.ctorParameters=function(){return[{type:r.ElementRef,decorators:[{type:s.Inject,args:[r.ElementRef]}]},{type:r.Injector,decorators:[{type:s.Inject,args:[r.Injector]}]},{type:void 0,decorators:[{type:s.Inject,args:["WjComponent"]},{type:s.SkipSelf},{type:r.Optional}]}]},t.propDecorators={wjTooltip:[{type:s.Input}]},t}();e.WjTooltip=u;var c=function(){function t(t,e){this._cmpResolver=t,this._elementRef=e,this._isInit=!1,this.propertiesChange=new a.EventEmitter}return Object.defineProperty(t.prototype,"component",{get:function(){return this._component},set:function(t){this._component!==t&&(this._component=t,this._createComponent())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this._properties},set:function(t){this._properties=t,this._updateProperties()},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this._isInit=!0,this._createComponent()},t.prototype._createComponent=function(){if(this._isInit){this._cmpRef&&(this._cmpRef.destroy(),this._cmpRef=null);var t=this._component;t&&this._anchor&&(this._cmpRef=this._anchor.createComponent(this._cmpResolver.resolveComponentFactory(t)),this._updateProperties())}},t.prototype._updateProperties=function(){var t=this._cmpRef&&this._cmpRef.instance,e=this.properties;if(t&&e)for(var n=0,i=Object.getOwnPropertyNames(e);n<i.length;n++){var r=i[n];t[r]=e[r];var s=t[r+"Change"];s instanceof o.EventEmitter&&this._addPropListener(t,r,s)}},t.prototype._addPropListener=function(t,e,n){var i=this;n.subscribe(function(n){i.properties[e]=i.properties[e]=t[e],i.propertiesChange.next(i.properties)})},t.decorators=[{type:o.Component,args:[{selector:"wj-component-loader",template:"<div #anchor></div>",inputs:["component","properties"],outputs:["propertiesChange"]}]}],t.ctorParameters=function(){return[{type:o.ComponentFactoryResolver,decorators:[{type:s.Inject,args:[o.ComponentFactoryResolver]}]},{type:r.ElementRef,decorators:[{type:s.Inject,args:[r.ElementRef]}]}]},t.propDecorators={_anchor:[{type:o.ViewChild,args:["anchor",{read:r.ViewContainerRef}]}]},t}();e.WjComponentLoader=c;var d=[u,c],p=function(){function t(){}return t.decorators=[{type:o.NgModule,args:[{imports:[h.WjDirectiveBaseModule,l.CommonModule],declarations:d.slice(),exports:d.slice()}]}],t.ctorParameters=function(){return[]},t}();e.WjCoreModule=p},iyzo:function(t,e,n){"use strict";var i=n("mrSG").__extends;Object.defineProperty(e,"__esModule",{value:!0});var o=n("DogD"),r=n("iyzo")||e;window.wijmo=window.wijmo||{},window.wijmo.input=r;var s,a,l=function(t){function e(e,n){var i=t.call(this,e,null,!0)||this;i._showBtn=!0,i._autoExpand=!0,i._animate=!1,i.textChanged=new o.Event,i.isDroppedDownChanging=new o.Event,i.isDroppedDownChanged=new o.Event;var r=i.getTemplate();i.applyTemplate("wj-control wj-content wj-dropdown",r,{_tbx:"input",_btn:"btn",_dropDown:"dropdown"},"input");var s=i._tbx;i._elRef=s,o.disableAutoComplete(s),i._createDropDown(),i._updateBtn(),o.removeChild(i._dropDown),o.addClass(i.hostElement,"wj-state-collapsed");var a=i._updateFocusState.bind(i);i.addEventListener(i.dropDown,"blur",a,!0),i.addEventListener(i.dropDown,"focus",a);var l=i._keydown.bind(i);return i.addEventListener(i.hostElement,"keydown",l),i.addEventListener(i.dropDown,"keydown",l),i.addEventListener(s,"keypress",function(t){9787==t.keyCode&&i._altDown&&t.preventDefault()}),i.addEventListener(s,"input",function(){i._setText(i.text,!1)}),i.addEventListener(s,"click",function(){i._autoExpand&&i._expandSelection()}),o.isIE9()&&i.addEventListener(s,"keyup",function(){i._setText(i.text,!1)}),i.addEventListener(i._btn,"mousedown",function(t){t.defaultPrevented||0!=t.button||setTimeout(function(){i._btnclick(t)})}),i.addEventListener(i._dropDown,"click",function(t){t.stopPropagation()}),i}return i(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._tbx.value},set:function(t){t!=this.text&&this._setText(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._tbx.readOnly},set:function(t){this._tbx.readOnly=o.asBoolean(t),o.toggleClass(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(t){this._tbx.required=o.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(t){this._tbx.placeholder=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDroppedDown",{get:function(){var t=this._dropDown;return t&&"none"!=t.style.display},set:function(t){if((t=o.asBoolean(t)&&!this.isDisabled&&!this.isReadOnly)!=this.isDroppedDown&&this.onIsDroppedDownChanging(new o.CancelEventArgs)){var e=this.hostElement,n=this._dropDown;if(t)n.style.minWidth||(n.style.minWidth=e.getBoundingClientRect().width+"px"),n.style.display="block",this._updateDropDown();else{var i=this.containsFocus();o.hidePopup(n),i&&(this.isTouching&&this.showDropDownButton?this.focus():this.selectAll())}this._updateFocusState(),o.toggleClass(e,"wj-state-collapsed",!this.isDroppedDown),this.onIsDroppedDownChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDown",{get:function(){return this._dropDown},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownCssClass",{get:function(){return this._cssClass},set:function(t){t!=this._cssClass&&(o.removeClass(this._dropDown,this._cssClass),this._cssClass=o.asString(t),o.addClass(this._dropDown,this._cssClass))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showDropDownButton",{get:function(){return this._showBtn},set:function(t){this._showBtn=o.asBoolean(t),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoExpandSelection",{get:function(){return this._autoExpand},set:function(t){this._autoExpand=o.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnimated",{get:function(){return this._animate},set:function(t){this._animate=o.asBoolean(t)},enumerable:!0,configurable:!0}),e.prototype.selectAll=function(){this._elRef==this._tbx?o.setSelectionRange(this._tbx,0,this.text.length):this.containsFocus()||this.focus()},e.prototype.onTextChanged=function(t){this.textChanged.raise(this,t),this._updateState()},e.prototype.onIsDroppedDownChanging=function(t){return this.isDroppedDownChanging.raise(this,t),!t.cancel},e.prototype.onIsDroppedDownChanged=function(t){this.isDroppedDownChanged.raise(this,t)},e.prototype.onGotFocus=function(e){this.isTouching||o.contains(this._dropDown,o.getActiveElement())||this.selectAll(),t.prototype.onGotFocus.call(this,e)},e.prototype.onLostFocus=function(e){this._commitText(),this.containsFocus()||(this.isDroppedDown=!1),t.prototype.onLostFocus.call(this,e)},e.prototype.containsFocus=function(){return t.prototype.containsFocus.call(this)||this.isDroppedDown&&o.contains(this._dropDown,o.getActiveElement())},e.prototype.dispose=function(){this.isDroppedDown=!1;var e=this.dropDown;if(e){var n=o.Control.getControl(e);n&&n.dispose(),o.removeChild(e)}t.prototype.dispose.call(this)},e.prototype.refresh=function(e){if(void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.isDroppedDown&&"none"!=getComputedStyle(this.hostElement).display){var n=o.getActiveElement();o.showPopup(this._dropDown,this.hostElement,!1,!1,null==this.dropDownCssClass),n instanceof HTMLElement&&n!=o.getActiveElement()&&n.focus()}},e.prototype._handleResize=function(){this.isDroppedDown&&this.refresh()},e.prototype._expandSelection=function(){var t=this._tbx,e=t.value,n=t.selectionStart,i=t.selectionEnd;if(e&&n==i){var r=this._getCharType(e,n);if(r>-1){for(;i<e.length&&this._getCharType(e,i)==r;i++);for(;n>0&&this._getCharType(e,n-1)==r;n--);n!=i&&o.setSelectionRange(t,n,i)}}},e.prototype._getCharType=function(t,e){var n=t[e];return n>="0"&&n<="9"?0:n>="a"&&n<="z"||n>="A"&&n<="Z"?1:-1},e.prototype._keydown=function(t){if(this._altDown=t.altKey,!t.defaultPrevented)switch(t.keyCode){case o.Key.Tab:case o.Key.Escape:case o.Key.Enter:this.isDroppedDown&&(this.isDroppedDown=!1,t.keyCode==o.Key.Tab||this.containsFocus()||this.focus(),t.preventDefault());break;case o.Key.F4:case o.Key.Up:case o.Key.Down:if((t.keyCode==o.Key.F4||t.altKey)&&o.contains(document.body,this.hostElement)){var e=this.isDroppedDown;this.isDroppedDown=!e,this.isDroppedDown==!e&&t.preventDefault()}}},e.prototype._btnclick=function(t){t.defaultPrevented||0!=t.button||(this.isDroppedDown=!this.isDroppedDown)},e.prototype._setText=function(t,e){null==t&&(t=""),(t=t.toString())!=this._tbx.value&&(this._tbx.value=t),t!=this._oldText&&(this._oldText=t,this.onTextChanged())},e.prototype._updateBtn=function(){this._btn.tabIndex=-1,this._btn.style.display=this._showBtn?"":"none"},e.prototype._createDropDown=function(){},e.prototype._commitText=function(){},e.prototype._updateDropDown=function(){this.isDroppedDown&&(this._commitText(),o.showPopup(this._dropDown,this.hostElement,!1,this._animate,null==this.dropDownCssClass))},e.controlTemplate='<div style="position:relative" class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control" /><span wj-part="btn" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-down"></span></button></span></div></div><div wj-part="dropdown" class="wj-content wj-dropdown-panel" style="display:none"></div></div>',e}(o.Control);e.DropDown=l,(a=s=e.DateSelectionMode||(e.DateSelectionMode={}))[a.None=0]="None",a[a.Day=1]="Day",a[a.Month=2]="Month";var h=function(t){function e(e,n){var i=t.call(this,e)||this;return i._readOnly=!1,i._selMode=s.Day,i._fmtYrMo="y",i._fmtYr="yyyy",i._fmtDayHdr="ddd",i._fmtDay="d ",i._fmtMonths="MMM",i.valueChanged=new o.Event,i.displayMonthChanged=new o.Event,i.formatItem=new o.Event,i._value=o.DateTime.newDate(),i._currMonth=i._getMonth(i._value),i._createChildren(),i.addEventListener(i.hostElement,"mouseup",i._click.bind(i)),i.addEventListener(i.hostElement,"keydown",i._keydown.bind(i)),i.initialize(n),i.refresh(!0),i}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=o.asDate(t,!0),t=this._clamp(t),(this._valid(t)||null==t)&&(this.displayMonth=this._getMonth(t),o.DateTime.equals(this._value,t)||(this._value=t,this.invalidate(!1),this.onValueChanged()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){t!=this.min&&(this._min=o.asDate(t,!0),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){t!=this.max&&(this._max=o.asDate(t,!0),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionMode",{get:function(){return this._selMode},set:function(t){if((t=o.asEnum(t,s))!=this._selMode){this._selMode=t;var e=this._monthMode();e&&(this.monthView=!1);var n=this._btnMth.querySelector(".wj-glyph-down");n&&(n.style.display=e?"none":""),this.refresh()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=o.asBoolean(t),o.toggleClass(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstDayOfWeek",{get:function(){return this._fdw},set:function(t){if(t!=this._fdw){if((t=o.asNumber(t,!0))&&(t>6||t<0))throw"firstDayOfWeek must be between 0 and 6 (Sunday to Saturday).";this._fdw=t,this.refresh()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMonth",{get:function(){return this._currMonth},set:function(t){o.DateTime.equals(this.displayMonth,t)||(t=o.asDate(t),(this.monthView?this._monthInValidRange(t):this._yearInValidRange(t))&&(this._currMonth=this._getMonth(this._clamp(t)),this.invalidate(!0),this.onDisplayMonthChanged()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatYearMonth",{get:function(){return this._fmtYrMo},set:function(t){t!=this._fmtYrMo&&(this._fmtYrMo=o.asString(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatDayHeaders",{get:function(){return this._fmtDayHdr},set:function(t){t!=this._fmtDayHdr&&(this._fmtDayHdr=o.asString(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatDays",{get:function(){return this._fmtDay},set:function(t){t!=this._fmtDay&&(this._fmtDay=o.asString(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatYear",{get:function(){return this._fmtYr},set:function(t){t!=this._fmtYr&&(this._fmtYr=o.asString(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatMonths",{get:function(){return this._fmtMonths},set:function(t){t!=this._fmtMonths&&(this._fmtMonths=o.asString(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showHeader",{get:function(){return"none"!=this._tbHdr.style.display},set:function(t){this._tbHdr.style.display=o.asBoolean(t)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthView",{get:function(){return"none"!=this._tbMth.style.display},set:function(t){t!=this.monthView&&(this._tbMth.style.display=t?"":"none",this._tbYr.style.display=t?"none":"")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=o.asFunction(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemValidator",{get:function(){return this._itemValidator},set:function(t){t!=this._itemValidator&&(this._itemValidator=o.asFunction(t),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.onValueChanged=function(t){this.valueChanged.raise(this,t)},e.prototype.onDisplayMonthChanged=function(t){this.displayMonthChanged.raise(this,t)},e.prototype.onFormatItem=function(t){this.formatItem.raise(this,t)},e.prototype.refresh=function(e){void 0===e&&(e=!0);var n,i,r,s=this.displayMonth,a=null!=this.firstDayOfWeek?this.firstDayOfWeek:o.Globalize.getFirstDayOfWeek();for(t.prototype.refresh.call(this,e),this._firstDay=o.DateTime.addDays(s,-(s.getDay()-a+7)%7),o.setText(this._spMth,o.Globalize.format(s,this._fmtYrMo)),n=this._tbMth.querySelectorAll("td"),c=0;c<7&&c<n.length;c++)r=o.DateTime.addDays(this._firstDay,c),o.setText(n[c],o.Globalize.format(r,this._fmtDayHdr));for(c=7;c<n.length;c++){i=n[c],r=o.DateTime.addDays(this._firstDay,c-7),o.setText(i,o.Globalize.format(r,this._fmtDay));var l=!this._valid(r);if(o.toggleClass(i,"wj-state-invalid",l),o.toggleClass(i,"wj-state-selected",this._selMode&&o.DateTime.sameDate(r,this.value)),o.toggleClass(i,"wj-day-today",o.DateTime.sameDate(r,o.DateTime.newDate())),o.toggleClass(i,"wj-day-othermonth",l||r.getMonth()!=s.getMonth()||!this._inValidRange(r)),this.itemFormatter&&this.itemFormatter(r,i),this.formatItem.hasHandlers){var h=new d(c,r,i);this.onFormatItem(h)}}var u=this._tbMth.querySelectorAll("tr");u.length&&(r=o.DateTime.addDays(this._firstDay,28),u[u.length-2].style.display=r.getMonth()==s.getMonth()?"":"none",r=o.DateTime.addDays(this._firstDay,35),u[u.length-1].style.display=r.getMonth()==s.getMonth()?"":"none"),(n=this._tbYr.querySelectorAll("td")).length&&o.setText(n[0],o.Globalize.format(s,this._fmtYr));for(var c=1;c<n.length;c++)i=n[c],r=o.DateTime.newDate(s.getFullYear(),c-1,1),o.setText(i,o.Globalize.format(r,this._fmtMonths)),i.className="",o.toggleClass(i,"wj-state-disabled",!this._monthInValidRange(r)),o.toggleClass(i,"wj-state-selected",this._sameMonth(r,this.value))},e.prototype._canChangeValue=function(){return!this._readOnly&&this._selMode!=s.None},e.prototype._valid=function(t){return!!o.isDate(t)&&!!o.DateTime.sameDate(t,this._clamp(t))&&(!o.isFunction(this.itemValidator)||this.itemValidator(t))},e.prototype._inValidRange=function(t){return!(this.min&&t<o.DateTime.fromDateTime(this.min,t)||this.max&&t>o.DateTime.fromDateTime(this.max,t))},e.prototype._monthInValidRange=function(t){if(this.min||this.max){var e=t.getFullYear(),n=t.getMonth(),i=o.DateTime.newDate(e,n,1),r=o.DateTime.newDate(e,n+1,0);if(this.min&&this.min>r)return!1;if(this.max&&this.max<i)return!1}return!0},e.prototype._yearInValidRange=function(t){if(this.min||this.max){var e=t.getFullYear(),n=o.DateTime.newDate(e,0),i=o.DateTime.newDate(e,11,31);if(this.min&&this.min>i)return!1;if(this.max&&this.max<n)return!1}return!0},e.prototype._sameMonth=function(t,e){return o.isDate(t)&&o.isDate(e)&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()},e.prototype._getValidDate=function(t,e){if(o.isDate(t))for(var n=t.getFullYear(),i=t.getMonth()+(e?0:1),r=o.DateTime.newDate(n,i,e?1:0),s=e?1:-1,a=0;a<31;a++){if(this._valid(r))return r;r=o.DateTime.addDays(r,s)}return null},e.prototype._clamp=function(t){if(t){if(this.min){var e=o.DateTime.fromDateTime(this.min,t);t<e&&(t=e)}if(this.max){var n=o.DateTime.fromDateTime(this.max,t);t>n&&(t=n)}}return t},e.prototype._createChildren=function(){var t=this.getTemplate();this.applyTemplate("wj-control wj-calendar",t,{_tbHdr:"tbl-header",_btnMth:"btn-month",_spMth:"span-month",_btnPrv:"btn-prev",_btnTdy:"btn-today",_btnNxt:"btn-next",_tbMth:"tbl-month",_tbYr:"tbl-year"});for(var e=this._createElement("tr",this._tbMth,"wj-header"),n=0;n<7;n++)this._createElement("td",e);for(var i=0;i<6;i++)for(e=this._createElement("tr",this._tbMth),n=0;n<7;n++)this._createElement("td",e);e=this._createElement("tr",this._tbYr,"wj-header"),this._createElement("td",e).setAttribute("colspan","4");for(var o=0;o<3;o++){e=this._createElement("tr",this._tbYr);for(var r=0;r<4;r++)this._createElement("td",e)}},e.prototype._createElement=function(t,e,n){var i=document.createElement(t);return e&&e.appendChild(i),n&&o.addClass(i,n),i},e.prototype._click=function(t){if(!t.defaultPrevented&&0==t.button){var e=!1,n=t.target;if(o.contains(this._btnMth,n)&&!this._monthMode()?(this.monthView=!this.monthView,e=!0):o.contains(this._btnPrv,n)?(this._navigate(-1),e=!0):o.contains(this._btnNxt,n)?(this._navigate(1),e=!0):o.contains(this._btnTdy,n)&&(this._navigate(0),e=!0),n&&!e&&(n=o.closest(n,"TD")))if(this.monthView)(i=this._getCellIndex(this._tbMth,n))>6&&this._canChangeValue()&&(r=o.DateTime.fromDateTime(o.DateTime.addDays(this._firstDay,i-7),this.value),this._inValidRange(r)&&this._valid(r)&&(this.value=r),e=!0);else{var i=this._getCellIndex(this._tbYr,n);if(i>0){if(this.displayMonth=o.DateTime.newDate(this.displayMonth.getFullYear(),i-1,1),this._monthMode()){if(this._canChangeValue()){var r=o.DateTime.fromDateTime(this.displayMonth,this.value);this._inValidRange(r)&&(this.value=r)}}else this.monthView=!0;e=!0}}e&&(t.preventDefault(),this.focus())}},e.prototype._getCellIndex=function(t,e){for(var n=t.querySelectorAll("TD"),i=0;i<n.length;i++)if(n[i]==e)return i;return-1},e.prototype._keydown=function(t){if(!t.defaultPrevented){if(t.altKey)switch(t.keyCode){case o.Key.Up:case o.Key.Down:return;case o.Key.End:return this._navigate(0),void t.preventDefault()}if(!(t.ctrlKey||t.metaKey||t.shiftKey)){var e=0,n=0,i=!0;if(this.monthView)switch(t.keyCode){case o.Key.Left:e=-1;break;case o.Key.Right:e=1;break;case o.Key.Up:e=-7;break;case o.Key.Down:e=7;break;case o.Key.PageDown:n=t.altKey?12:1;break;case o.Key.PageUp:n=t.altKey?-12:-1;break;case o.Key.Home:this._canChangeValue()&&(r=this._getValidDate(this.value,!0))&&(this.value=o.DateTime.fromDateTime(r,this.value));break;case o.Key.End:this._canChangeValue()&&(r=this._getValidDate(this.value,!1))&&(this.value=o.DateTime.fromDateTime(r,this.value));break;default:i=!1}else switch(t.keyCode){case o.Key.Left:n=-1;break;case o.Key.Right:n=1;break;case o.Key.Up:n=-4;break;case o.Key.Down:n=4;break;case o.Key.PageDown:n=t.altKey?120:12;break;case o.Key.PageUp:n=t.altKey?-120:-12;break;case o.Key.Home:n=this.value?-this.value.getMonth():0;break;case o.Key.End:n=this.value?11-this.value.getMonth():0;break;case o.Key.Enter:this._monthMode()?i=!1:this.monthView=!0;break;default:i=!1}if(this.value&&this._canChangeValue()&&(e||n)){var r=this.value;if(r=o.DateTime.addDays(r,e),r=o.DateTime.addMonths(r,n),n&&!this._valid(r))for(var s=r.getMonth(),a=1;a<31&&!this._valid(r);a++){var l=o.DateTime.addDays(r,+a),h=o.DateTime.addDays(r,-a);this._valid(l)&&l.getMonth()==s?r=l:this._valid(h)&&h.getMonth()==s&&(r=h)}for(a=0;a<31&&!this._valid(r);a++)r=o.DateTime.addDays(r,e>0||n>0?1:-1);this.value=r}i&&t.preventDefault()}}},e.prototype._getMonth=function(t){return t||(t=o.DateTime.newDate()),o.DateTime.newDate(t.getFullYear(),t.getMonth(),1)},e.prototype._monthMode=function(){return this.selectionMode==s.Month},e.prototype._navigate=function(t){var e=this.monthView,n=this.displayMonth;switch(t){case 0:var i=o.DateTime.newDate();this._canChangeValue()&&(this.value=e?o.DateTime.fromDateTime(i,this.value):this._getMonth(i)),n=this._getMonth(i);break;case 1:n=o.DateTime.addMonths(n,e?1:12);break;case-1:n=o.DateTime.addMonths(n,e?-1:-12)}this.displayMonth=n},e.controlTemplate='<div class="wj-content wj-calendar-outer"><div wj-part="tbl-header" class="wj-calendar-header"><div wj-part="btn-month" class="wj-month-select"><span wj-part="span-month"></span> <span class="wj-glyph-down"></span></div><div class="wj-btn-group"><button type="button" tabindex="-1" wj-part="btn-prev" class="wj-btn wj-btn-default"><span class="wj-glyph-left"></span></button><button type="button" tabindex="-1" wj-part="btn-today" class="wj-btn wj-btn-default"><span class="wj-glyph-circle"></span></button><button type="button" tabindex="-1" wj-part="btn-next" class="wj-btn wj-btn-default"><span class="wj-glyph-right"></span></button></div></div><table wj-part="tbl-month" class="wj-calendar-month"></table><table wj-part="tbl-year" class="wj-calendar-year" style="display:none"></table></div>',e}(o.Control);e.Calendar=h;var u=function(t){function e(n,i){var r=t.call(this,n)||this;r._hsb=[.5,1,1],r._alpha=1,r.valueChanged=new o.Event;var s=r.getTemplate();r.applyTemplate("wj-control wj-content wj-colorpicker",s,{_eSB:"div-sb",_eHue:"div-hue",_eAlpha:"div-alpha",_ePreview:"div-pv",_ePal:"div-pal",_eText:"div-text"}),r._palette="#FFF,#000, #F00,#FFC000,#FFFF00,#92D050,#00B050,#00B0F0,#0070C0,#7030A0".split(","),r._updatePalette(),r._eHue.style.backgroundImage="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAD4CAIAAACi6hsPAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAGvSURBVDhPXdBPaM9xHMfxz4pWaxcmtoOhpdXSVpiyHWxqmVpDjaU5rK34XfypjTJ/p+ZPay6jhsOsRrKwaJElf9IQq03WIkv4FeMwMq221tfje1ByeFzfvd7PEKWGEKWTQRZLySWfVRRTQjmVbKWGOhLsZT+HaeY0bbTTQSfdXOcWffTzmAFeMcwoYyT5ygS/mA5hNgphip98J8kHRnnNSwZ4yH1uc4OrdHGR87RximYO0cgedlLLdqqoYAPrWMtKVrCcJSxiPmnMJUQp/Bsyk2xyyKOAQooopYwKtlDNDur5G7SBJo7RQiv/B+2hl3s84CkvGGKEOOYnxolj/mYmhBmDJ5ngCx95xxsGecYj4pB3iENeoZMO2mmlhaMcpIE4ZII6aqhmM3HMMkooopB88sghm0wySCeVlCjMCVFIYx4LWUwOeRSwhmLWU84mqqihll3sppEmjnOSs5zjEl1c4yZ99POE5wwxwns+840fTDFLFKaZZIJxkozxlmEGGSC+GF++Sy89dHOZC8Rr4lVnOMERDrCPBPXEX22jko2UEn+/mnxyWUYWC0gnNUQh/AEc0HJs6cex0gAAAABJRU5ErkJggg==)",r._eHue.style.backgroundSize="contain",navigator.appVersion.indexOf("MSIE 9")>-1&&(r._eSB.children[0].style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffffffff,endColorstr=#00ffffff,GradientType=1)",r._eSB.children[1].style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#00000000,endColorstr=#ff000000,GradientType=0)"),r._cSB=o.createElement(s=e._tplCursor),r._cHue=o.createElement(s),r._cHue.style.width="100%",r._cAlpha=o.createElement(s),r._cAlpha.style.height="100%",r._eSB.appendChild(r._cSB),r._eHue.appendChild(r._cHue),r._eAlpha.appendChild(r._cAlpha),r.addEventListener(r.hostElement,"mousedown",function(t){document.addEventListener("mousemove",a),document.addEventListener("mouseup",l),r._mouseDown(t)});var a=function(t){r._mouseMove(t)},l=function(t){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",l),r._mouseUp(t)};return r.addEventListener(r.hostElement,"click",function(t){var e=t.target;if(e&&"DIV"==e.tagName&&o.contains(r._ePal,e)){var n=e.style.backgroundColor;n&&(r.value=new o.Color(n).toString())}}),r.value="#ffffff",r.initialize(i),r._updatePanels(),r}return i(e,t),Object.defineProperty(e.prototype,"showAlphaChannel",{get:function(){return"none"!=this._eAlpha.parentElement.style.display},set:function(t){this._eAlpha.parentElement.style.display=o.asBoolean(t)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showColorString",{get:function(){return"none"!=this._eText.style.display},set:function(t){this._eText.style.display=o.asBoolean(t)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){if(t!=this.value){this._value=o.asString(t),this._eText.innerText=this._value;var e=new o.Color(this._value),n=e.getHsb();this._hsb[0]==n[0]&&this._hsb[1]==n[1]&&this._hsb[2]==n[2]&&this._alpha==e.a||(0==n[2]?(n[0]=this._hsb[0],n[1]=this._hsb[1]):0==n[1]&&(n[0]=this._hsb[0]),this._hsb=n,this._alpha=e.a,this.onValueChanged())}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"palette",{get:function(){return this._palette},set:function(t){t=o.asArray(t);for(var e=0;e<t.length&&e<this._palette.length;e++){var n=o.asString(t[e]);this._palette[e]=n}this._updatePalette()},enumerable:!0,configurable:!0}),e.prototype.onValueChanged=function(t){this._updatePanels(),this.valueChanged.raise(this,t)},e.prototype._mouseDown=function(t){this._htDown=this._getTargetPanel(t),this._htDown&&(t.preventDefault(),this.focus(),this._mouseMove(t))},e.prototype._mouseMove=function(t){if(this._htDown){var e=this._htDown.getBoundingClientRect();this._htDown==this._eHue?(this._hsb[0]=o.clamp((t.clientY-e.top)/e.height,0,.99),this._updateColor()):this._htDown==this._eSB?(this._hsb[1]=o.clamp((t.clientX-e.left)/e.width,0,1),this._hsb[2]=o.clamp(1-(t.clientY-e.top)/e.height,0,1),this._updateColor()):this._htDown==this._eAlpha&&(this._alpha=o.clamp((t.clientX-e.left)/e.width,0,1),this._updateColor())}},e.prototype._mouseUp=function(t){this._htDown=null},e.prototype._updateColor=function(){var t=o.Color.fromHsb(this._hsb[0],this._hsb[1],this._hsb[2],this._alpha);this.value=t.toString(),this._updatePanels()},e.prototype._updatePalette=function(){var t=new o.Color("#fff"),e=new o.Color("#000");this._ePal.innerHTML="";for(var n=0;n<this._palette.length;n++){var i=o.createElement('<div style="float:left;width:10%;box-sizing:border-box;padding:1px">'),r=new o.Color(this._palette[n]),s=r.getHsb();i.appendChild(this._makePalEntry(r,4));for(var a=0;a<5;a++)r=0==s[1]?o.Color.interpolate(t,e,.1*a+(s[2]>.5?.05:.55)):o.Color.fromHsb(s[0],.1+.2*a,1-.1*a),i.appendChild(this._makePalEntry(r,0));this._ePal.appendChild(i)}},e.prototype._makePalEntry=function(t,e){var n=document.createElement("div");return o.setCss(n,{cursor:"pointer",backgroundColor:t.toString(),marginBottom:e||""}),n.innerHTML="&nbsp",n},e.prototype._updatePanels=function(){var t=o.Color.fromHsb(this._hsb[0],1,1,1),e=o.Color.fromHsb(this._hsb[0],this._hsb[1],this._hsb[2],1);this._eSB.style.backgroundColor=t.toString(),this._eAlpha.style.background="linear-gradient(to right, transparent 0%, "+e.toString()+" 100%)",navigator.appVersion.indexOf("MSIE 9")>-1&&(this._eAlpha.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr=#00000000,endColorstr="+e.toString()+", GradientType = 1)"),this._ePreview.style.backgroundColor=this.value,this._cHue.style.top=(100*this._hsb[0]).toFixed(0)+"%",this._cSB.style.left=(100*this._hsb[1]).toFixed(0)+"%",this._cSB.style.top=(100-100*this._hsb[2]).toFixed(0)+"%",this._cAlpha.style.left=(100*this._alpha).toFixed(0)+"%"},e.prototype._getTargetPanel=function(t){var e=t.target;return o.contains(this._eSB,e)?this._eSB:o.contains(this._eHue,e)?this._eHue:o.contains(this._eAlpha,e)?this._eAlpha:null},e.controlTemplate='<div style="position:relative;width:100%;height:100%"><div style="float:left;width:50%;height:100%;box-sizing:border-box;padding:2px"><div wj-part="div-pal"><div style="float:left;width:10%;box-sizing:border-box;padding:2px"><div style="background-color:black;width:100%">&nbsp;</div><div style="height:6px"></div></div></div><div wj-part="div-text" style="position:absolute;bottom:0px;display:none"></div></div><div style="float:left;width:50%;height:100%;box-sizing:border-box;padding:2px"><div wj-part="div-sb" class="wj-colorbox" style="float:left;width:89%;height:89%"><div style="position:absolute;width:100%;height:100%;background:linear-gradient(to right, white 0%,transparent 100%)"></div><div style="position:absolute;width:100%;height:100%;background:linear-gradient(to top, black 0%,transparent 100%)"></div></div><div style="float:left;width:1%;height:89%"></div><div style="float:left;width:10%;height:89%"><div wj-part="div-hue" class="wj-colorbox"></div></div><div style="float:left;width:89%;height:1%"></div><div style="float:left;width:89%;height:10%"><div style="width:100%;height:100%;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuM4zml1AAAAAcSURBVBhXY/iPBBYgAWpKQGkwgMqDAdUk/v8HAM7Mm6GatDUYAAAAAElFTkSuQmCC)"><div wj-part="div-alpha" class="wj-colorbox"></div></div></div><div style="float:left;width:1%;height:10%"></div><div style="float:left;width:10%;height:10%"><div wj-part="div-pv" class="wj-colorbox" style="position:static"></div></div></div></div>',e._tplCursor='<div style="position:absolute;left:50%;top:50%;width:7px;height:7px;transform:translate(-50%,-50%);border:2px solid #f0f0f0;border-radius:50px;box-shadow:0px 0px 4px 2px #0f0f0f"></div>',e}(o.Control);e.ColorPicker=u;var c=function(t){function e(e,n){var i=t.call(this,e)||this;i._pathDisplay=new o.Binding(null),i._pathValue=new o.Binding(null),i._pathChecked=new o.Binding(null),i._html=!1,i._checkedItems=[],i._itemRole="option",i._search="",i.selectedIndexChanged=new o.Event,i.itemsChanged=new o.Event,i.loadingItems=new o.Event,i.loadedItems=new o.Event,i.itemChecked=new o.Event,i.checkedItemsChanged=new o.Event,i.formatItem=new o.Event,i.applyTemplate("wj-control wj-content wj-listbox",null,null);var r=i.hostElement;return o.setAttribute(r,"role","listbox",!0),"SELECT"==i._orgTag&&i._initFromSelect(i.hostElement),i.addEventListener(r,"click",i._click.bind(i)),i.addEventListener(r,"keydown",i._keydown.bind(i)),i.addEventListener(r,"keypress",i._keypress.bind(i)),i.addEventListener(r,"wheel",function(t){r.scrollHeight>r.offsetHeight&&(t.deltaY<0&&0==r.scrollTop||t.deltaY>0&&r.scrollTop+r.offsetHeight>=r.scrollHeight)&&(t.preventDefault(),t.stopPropagation())}),i._tabIndex=r.tabIndex,i.initialize(n),i}return i(e,t),e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),!this.displayMemberPath&&this.checkedMemberPath||this._populateList()},Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._items},set:function(t){this._items!=t&&(this._cv&&(this._cv.currentChanged.removeHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.removeHandler(this._cvCollectionChanged,this),this._cv=null),this._items=t,this._cv=o.asCollectionView(t),null!=this._cv&&(this._cv.currentChanged.addHandler(this._cvCurrentChanged,this),this._cv.collectionChanged.addHandler(this._cvCollectionChanged,this)),this._populateList(),this.onItemsChanged(),this.onSelectedIndexChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._cv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isContentHtml",{get:function(){return this._html},set:function(t){t!=this._html&&(this._html=o.asBoolean(t),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._itemFormatter},set:function(t){t!=this._itemFormatter&&(this._itemFormatter=o.asFunction(t),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMemberPath",{get:function(){return this._pathDisplay.path},set:function(t){t!=this.displayMemberPath&&(this._pathDisplay.path=o.asString(t),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValuePath",{get:function(){return this._pathValue.path},set:function(t){this._pathValue.path=o.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkedMemberPath",{get:function(){return this._pathChecked.path},set:function(t){t!=this.checkedMemberPath&&(this._pathChecked.path=o.asString(t),this._populateList())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemRole",{get:function(){return this._itemRole},set:function(t){t!=this.itemRole&&(this._itemRole=o.asString(t),this._populateList())},enumerable:!0,configurable:!0}),e.prototype.getDisplayValue=function(t){var e=null;t>-1&&o.hasItems(this._cv)&&(e=this._cv.items[t],this.displayMemberPath&&(e=this._pathDisplay.getValue(e)));var n=null!=e?e.toString():"";return this.itemFormatter&&(n=this.itemFormatter(t,n)),n},e.prototype.getDisplayText=function(t){var e=this.hostElement.children,n=t>-1&&t<e.length?e[t]:null;return null!=n?n.textContent:""},e.prototype.isItemEnabled=function(t){if(!this.getDisplayText(t))return!1;var e=this.hostElement.children[t];return!(!e||e.hasAttribute("disabled")||o.hasClass(e,"wj-state-disabled"))},Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._cv?this._cv.currentPosition:-1},set:function(t){this._cv&&this._cv.moveCurrentToPosition(o.asNumber(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this._cv?this._cv.currentItem:null},set:function(t){this._cv&&this._cv.moveCurrentTo(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValue",{get:function(){var t=this.selectedItem;return t&&this.selectedValuePath&&(t=this._pathValue.getValue(t)),t},set:function(t){var e=this.selectedValuePath,n=-1;if(this._cv){for(var i=0;i<this._cv.items.length;i++){var r=this._cv.items[i],s=e?this._pathValue.getValue(r):r;if(s===t||o.DateTime.equals(s,t)){n=i;break}}this.selectedIndex=n}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxHeight",{get:function(){var t=this.hostElement;return t?parseFloat(t.style.maxHeight):null},set:function(t){var e=this.hostElement;e&&(e.style.maxHeight=o.asNumber(t)+"px")},enumerable:!0,configurable:!0}),e.prototype.showSelection=function(){for(var t,e=this.selectedIndex,n=this.hostElement,i=n.children,r=0;r<i.length;r++)o.toggleClass(t=i[r],"wj-state-selected",r==e),o.setAttribute(t,"tabindex",r==e?this._tabIndex:-1);if(e>-1&&e<i.length){var s=(t=i[e]).getBoundingClientRect(),a=n.getBoundingClientRect();s.bottom>a.bottom?n.scrollTop+=s.bottom-a.bottom:s.top<a.top&&(n.scrollTop-=a.top-s.top)}e>-1&&this.containsFocus()&&(t=i[e])instanceof HTMLElement&&!o.contains(t,o.getActiveElement())&&t.focus(),o.setAttribute(n,"tabindex",e<0?this._tabIndex:-1)},e.prototype.getItemChecked=function(t){var e=this._cv.items[t];if(o.isObject(e)&&this.checkedMemberPath)return this._pathChecked.getValue(e);var n=this._getCheckbox(t);return!!n&&n.checked},e.prototype.setItemChecked=function(t,e){this._setItemChecked(t,e,!0)},e.prototype.toggleItemChecked=function(t){this.setItemChecked(t,!this.getItemChecked(t))},Object.defineProperty(e.prototype,"checkedItems",{get:function(){if(this._checkedItems.splice(0,this._checkedItems.length),this._cv)for(var t=0;t<this._cv.items.length;t++)this.getItemChecked(t)&&this._checkedItems.push(this._cv.items[t]);return this._checkedItems},set:function(t){var e=this._cv,n=this.hostElement,i=o.asArray(t,!1);if(e&&i){for(var r=e.currentPosition,s=n.scrollTop,a=0;a<e.items.length;a++)this._setItemChecked(a,i.indexOf(e.items[a])>-1,!1);e.moveCurrentToPosition(r),n.scrollTop=s,this.onCheckedItemsChanged()}},enumerable:!0,configurable:!0}),e.prototype.onSelectedIndexChanged=function(t){this.selectedIndexChanged.raise(this,t)},e.prototype.onItemsChanged=function(t){this.itemsChanged.raise(this,t)},e.prototype.onLoadingItems=function(t){this.loadingItems.raise(this,t)},e.prototype.onLoadedItems=function(t){this.loadedItems.raise(this,t)},e.prototype.onItemChecked=function(t){this.itemChecked.raise(this,t)},e.prototype.onCheckedItemsChanged=function(t){this.checkedItemsChanged.raise(this,t)},e.prototype.onFormatItem=function(t){this.formatItem.raise(this,t)},e.prototype._setItemChecked=function(t,e,n){void 0===n&&(n=!0);var i=this._cv.items[t];if(o.isObject(i)){var r=o.tryCast(this._cv,"IEditableCollectionView");this._pathChecked.getValue(i)!=e&&(this._checking=!0,r?(r.editItem(i),this._pathChecked.setValue(i,e),r.commitEdit()):(this._pathChecked.setValue(i,e),this._cv.refresh()),this._checking=!1)}var s=this._getCheckbox(t);if(s){s.checked=e;var a=o.closest(s,".wj-listbox-item");a&&o.toggleClass(a,"wj-state-checked",e)}n&&(this.onItemChecked(),this.onCheckedItemsChanged())},e.prototype._cvCollectionChanged=function(t,e){this._checking||(this._populateList(),this.onItemsChanged())},e.prototype._cvCurrentChanged=function(t,e){this._checking||(this.showSelection(),this.onSelectedIndexChanged())},e.prototype._populateList=function(){var t=this.hostElement;if(t){var e=this.containsFocus();if(this.onLoadingItems(),t.innerHTML="",this._cv){for(var n=document.createDocumentFragment(),i=0;i<this._cv.items.length;i++){var r=this.getDisplayValue(i);1!=this._html&&(r=o.escapeHtml(r));var s=!1;this.checkedMemberPath&&(r='<label><input tabindex="-1" type="checkbox"'+((s=this._pathChecked.getValue(this._cv.items[i]))?" checked":"")+"> "+r+"</label>");var a=document.createElement("div"),l="wj-listbox-item";if(a.innerHTML=r,o.hasClass(a.firstChild,"wj-separator")&&(l+=" wj-separator"),s&&(l+=" wj-state-checked"),a.className=l,o.setAttribute(a,"role",this.itemRole?this.itemRole:null),this.formatItem.hasHandlers){var h=new d(i,this._cv.items[i],a);this.onFormatItem(h)}n.appendChild(a)}t.appendChild(n)}0==t.children.length&&t.appendChild(document.createElement("div")),e&&!this.containsFocus()&&this.focus(),this.showSelection(),this.onLoadedItems()}},e.prototype._click=function(t){if(!t.defaultPrevented){for(var e=this.hostElement.children,n=0;n<e.length;n++)if(o.contains(e[n],t.target)){this.selectedIndex=n;break}var i=this.selectedIndex;if(this.checkedMemberPath&&i>-1){var r=this._getCheckbox(i);r==t.target&&(e[i].focus(),this.setItemChecked(i,r.checked))}}},e.prototype._keydown=function(t){var e=this.selectedIndex;if(!t.defaultPrevented){if(65==t.keyCode&&(t.ctrlKey||t.metaKey)&&this.checkedMemberPath&&o.hasItems(this.collectionView))return this.checkedItems=this.getItemChecked(0)?[]:this.collectionView.items,void t.preventDefault();if(!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey))switch(t.keyCode){case o.Key.Down:t.preventDefault(),this._selectNext();break;case o.Key.Up:t.preventDefault(),this._selectPrev();break;case o.Key.Home:t.preventDefault(),this._selectFirst();break;case o.Key.End:t.preventDefault(),this._selectLast();break;case o.Key.PageDown:t.preventDefault(),this._selectNextPage();break;case o.Key.PageUp:t.preventDefault(),this._selectPrevPage();break;case o.Key.Space:if(this.checkedMemberPath&&e>-1){var n=this._getCheckbox(e);n&&this.isItemEnabled(e)&&(this.setItemChecked(e,!n.checked),t.preventDefault())}}}},e.prototype._keypress=function(t){var n=this;if(!t.defaultPrevented&&!(t.target instanceof HTMLInputElement)&&(t.charCode>32||32==t.charCode&&this._search)){t.preventDefault(),this._search+=String.fromCharCode(t.charCode).toLowerCase(),this._toSearch&&clearTimeout(this._toSearch),this._toSearch=setTimeout(function(){n._toSearch=null,n._search=""},e._AUTOSEARCH_DELAY);var i=this._findNext();i<0&&this._search.length>1&&(this._search=this._search[this._search.length-1],i=this._findNext()),i>-1&&(this.selectedIndex=i)}},e.prototype._selectNext=function(){for(var t=this.hostElement.children.length,e=this.selectedIndex+1;e<t;e++)if(this.isItemEnabled(e))return this.selectedIndex=e,!0;return!1},e.prototype._selectPrev=function(){for(var t=this.selectedIndex-1;t>=0;t--)if(this.isItemEnabled(t))return this.selectedIndex=t,!0;return!1},e.prototype._selectFirst=function(){for(var t=this.hostElement.children.length,e=0;e<t;e++)if(this.isItemEnabled(e))return this.selectedIndex=e,!0;return!1},e.prototype._selectLast=function(){for(var t=this.hostElement.children.length-1;t>=0;t--)if(this.isItemEnabled(t))return this.selectedIndex=t,!0;return!1},e.prototype._selectNextPage=function(){for(var t=this.hostElement,e=t.offsetHeight,n=t.children,i=0,o=this.selectedIndex+1;o<this._cv.items.length;o++){var r=n[o].scrollHeight;if(i+r>e&&this.isItemEnabled(o))return this.selectedIndex=o,!0;i+=r}return this._selectLast()},e.prototype._selectPrevPage=function(){for(var t=this.hostElement,e=t.offsetHeight,n=t.children,i=0,o=this.selectedIndex-1;o>0;o--){var r=n[o].scrollHeight;if(i+r>e&&this.isItemEnabled(o))return this.selectedIndex=o,!0;i+=r}return this._selectFirst()},e.prototype._findNext=function(){if(this.hostElement){var t=this.hostElement.childElementCount,e=this.selectedIndex;(e<0||1==this._search.length)&&e++;for(var n=0;n<t;n++){var i=(e+n)%t;if(0==this.getDisplayText(i).trim().toLowerCase().indexOf(this._search)&&this.isItemEnabled(i))return i}}return-1},e.prototype._getCheckbox=function(t){var e=this.hostElement;return e&&t>-1&&t<e.children.length?e.children[t].querySelector("input[type=checkbox]"):null},e.prototype._initFromSelect=function(t){for(var e=t.children,n=[],i=-1,o=0;o<e.length;o++){var r=e[o];"OPTION"==r.tagName&&(r.hasAttribute("selected")&&(i=n.length),n.push(r.innerHTML?{hdr:r.innerHTML,val:r.getAttribute("value"),cmdParam:r.getAttribute("cmd-param")}:{hdr:'<div class="wj-separator"/>'}),t.removeChild(r),o--)}n&&(this.displayMemberPath="hdr",this.selectedValuePath="val",this.itemsSource=n,this.selectedIndex=i)},e._AUTOSEARCH_DELAY=600,e}(o.Control);e.ListBox=c;var d=function(t){function e(e,n,i){var r=t.call(this)||this;return r._index=o.asNumber(e),r._data=n,r._item=o.asType(i,HTMLElement),r}return i(e,t),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),e}(o.EventArgs);e.FormatItemEventArgs=d;var p=function(t){function e(e,n){var i=t.call(this,e)||this;i._editable=!1,i._delKey=0,i._composing=!1,i._pathHdr=new o.Binding(null),i._bsCollapse=!0,i.itemsSourceChanged=new o.Event,i.selectedIndexChanged=new o.Event;var r=i.hostElement;o.addClass(r,"wj-combobox");var s=i._tbx,a=o.getUniqueId(r.id+"_dropdown");return i.dropDown.id=a,o.setAttribute(s,"role","combobox"),o.setAttribute(s,"aria-autocomplete","both"),o.setAttribute(s,"aria-owns",a),o.setAttribute(i._btn,"aria-controls",a),o.setAttribute(i.dropDown,"aria-expanded",!1),i.autoExpandSelection=!1,i.addEventListener(i._tbx,"compositionstart",function(){i._composing=!0}),i.addEventListener(i._tbx,"compositionend",function(){i._composing=!1,setTimeout(function(){i._setText(i.text,!0)})}),i.addEventListener(r,"wheel",function(t){if(!t.defaultPrevented&&!i.isDroppedDown&&!i.isReadOnly&&i.containsFocus()&&i.selectedIndex>-1){var e=o.clamp(-t.deltaY,-1,1);i.selectedIndex=o.clamp(i.selectedIndex-e,0,i.collectionView.items.length-1),t.preventDefault()}}),"SELECT"==i._orgTag&&i._lbx._initFromSelect(r),i._lbx.loadedItems.addHandler(function(){i.selectedIndex>-1&&(i.selectedIndex=i._lbx.selectedIndex)}),i.isRequired=!0,i.initialize(n),i}return i(e,t),Object.defineProperty(e.prototype,"itemsSource",{get:function(){return this._lbx.itemsSource},set:function(t){this._lbx.itemsSource!=t&&(this._lbx.itemsSource=t,this.onItemsSourceChanged()),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collectionView",{get:function(){return this._lbx.collectionView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMemberPath",{get:function(){return this._lbx.displayMemberPath},set:function(t){this._lbx.displayMemberPath=t;var e=this.getDisplayText();this.text!=e&&this._setText(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerPath",{get:function(){return this._pathHdr.path},set:function(t){this._pathHdr.path=o.asString(t);var e=this.getDisplayText();this.text!=e&&this._setText(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValuePath",{get:function(){return this._lbx.selectedValuePath},set:function(t){this._lbx.selectedValuePath=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isContentHtml",{get:function(){return this._lbx.isContentHtml},set:function(t){if(t!=this.isContentHtml){this._lbx.isContentHtml=o.asBoolean(t);var e=this.getDisplayText();this.text!=e&&this._setText(e,!0)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this._lbx.itemFormatter},set:function(t){this._lbx.itemFormatter=o.asFunction(t),this.selectedIndex=this._lbx.selectedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatItem",{get:function(){return this.listBox.formatItem},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return this._lbx.selectedIndex},set:function(t){t!=this.selectedIndex&&(this._lbx.selectedIndex=t);var e=this.getDisplayText(t=this.selectedIndex);this.text!=e&&this._setText(e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItem",{get:function(){return this._lbx.selectedItem},set:function(t){this._lbx.selectedItem=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValue",{get:function(){return this._lbx.selectedValue},set:function(t){this._lbx.selectedValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEditable",{get:function(){return this._editable},set:function(t){this._editable=o.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDropDownHeight",{get:function(){return this._lbx.maxHeight},set:function(t){this._lbx.maxHeight=o.asNumber(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDropDownWidth",{get:function(){return parseInt(this._dropDown.style.maxWidth)},set:function(t){this._dropDown.style.maxWidth=o.asNumber(t)+"px"},enumerable:!0,configurable:!0}),e.prototype.getDisplayText=function(t){if(void 0===t&&(t=this.selectedIndex),this.headerPath&&t>-1&&o.hasItems(this.collectionView)){var e=this.collectionView.items[t],n=e?this._pathHdr.getValue(e):null;return n=null!=n?n.toString():"",this.isContentHtml&&(this._cvt||(this._cvt=document.createElement("div")),this._cvt.innerHTML=n,n=this._cvt.textContent),n.trim()}return this._lbx.getDisplayText(t).trim()},e.prototype.indexOf=function(t,e){var n=this.collectionView;if(o.hasItems(n)&&null!=t){var i=this.selectedIndex;if(e&&t==this.getDisplayText(i))return i;t=t.toString().toLowerCase();for(var r=0;r<n.items.length;r++)if(this.listBox.isItemEnabled(r)){var s=this.getDisplayText(r).toLowerCase();if(e){if(s==t)return r}else if(t&&0==s.indexOf(t))return r}}return-1},Object.defineProperty(e.prototype,"listBox",{get:function(){return this._lbx},enumerable:!0,configurable:!0}),e.prototype.onItemsSourceChanged=function(t){this.itemsSourceChanged.raise(this,t)},e.prototype.onSelectedIndexChanged=function(t){this._updateBtn(),this.selectedIndexChanged.raise(this,t)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),o.hasItems(this.collectionView)&&(this._lbx.refresh(),this.selectedIndex>-1&&(this.selectedIndex=this._lbx.selectedIndex))},e.prototype.onLostFocus=function(e){this._composing&&(this._composing=!1,this._setText(this.text,!0)),this.isEditable&&this.isRequired&&!this.text&&o.hasItems(this.collectionView)&&(this.selectedIndex=0),t.prototype.onLostFocus.call(this,e)},e.prototype.onIsDroppedDownChanging=function(e){return this.isDroppedDown||o.hasItems(this.collectionView)?t.prototype.onIsDroppedDownChanging.call(this,e):(e.cancel=!0,!1)},e.prototype.onIsDroppedDownChanged=function(e){t.prototype.onIsDroppedDownChanged.call(this,e),this.isDroppedDown&&(this._lbx.showSelection(),this.isTouching||this.selectAll()),o.setAttribute(this.dropDown,"aria-expanded",this.isDroppedDown)},e.prototype._updateBtn=function(){var t=this.collectionView;this._btn.style.display=this._showBtn&&null!=t?"":"none",o.enable(this._btn,o.hasItems(t))},e.prototype._btnclick=function(e){t.prototype._btnclick.call(this,e),this.isTouching||this._elRef!=this._tbx||this.selectAll()},e.prototype._createDropDown=function(){var t=this;this._lbx||(this._lbx=new c(this._dropDown)),this._lbx.maxHeight=200,this._lbx.selectedIndexChanged.addHandler(function(){t._updateBtn();var e=t._lbx.selectedIndex,n=t._lbx.hostElement.children,i=e>-1&&e<n.length?n[e].id:null;o.setAttribute(t._tbx,"aria-activedescendant",i&&i.length?i:null),t.selectedIndex=e,t.onSelectedIndexChanged()}),this._lbx.itemsChanged.addHandler(function(){t._updateBtn()}),this.addEventListener(this._dropDown,"click",this._dropDownClick.bind(this))},e.prototype._dropDownClick=function(t){t.defaultPrevented||t.target!=this._dropDown&&(this.isDroppedDown=!1)},e.prototype._setText=function(e,n){if(!this._composing&&!this._settingText){this._settingText=!0,null==e&&(e=""),e=e.toString();var i=this.selectedIndex,r=this.collectionView,s=this._getSelStart(),a=-1,l=!0;if(this._delKey&&this.isEditable&&(n=!0,l=!1),i=this.indexOf(e,n),l&&(i<0&&n&&(i=this.indexOf(e,!1)),i<0&&s>0&&(i=this.indexOf(e.substr(0,s),!1))),i<0&&!this.isEditable&&o.hasItems(r)&&(this.isRequired||e)){var h=this._oldText||"";i=Math.max(0,this.indexOf(h,!1));for(var u=0;u<e.length&&u<h.length;u++)if(e[u]!=h[u]){s=u;break}}i>-1&&(a=s,e=this.getDisplayText(i)),e!=this._tbx.value&&(this._tbx.value=e),a>-1&&this.containsFocus()&&!this.isTouching&&this._updateInputSelection(a),r&&r.moveCurrentToPosition(i),t.prototype._setText.call(this,e,n),this._delKey=0,this._settingText=!1}},e.prototype._findNext=function(t,e){if(this.collectionView){t=t.toLowerCase();for(var n=this.collectionView.items.length,i=void 0,o=void 0,r=1;r<=n;r++)if((o=this.getDisplayText(i=(this.selectedIndex+r*e+n)%n).toLowerCase())&&0==o.indexOf(t)&&(!this.dropDown.children[i]||this.listBox.isItemEnabled(i)))return i}return this.selectedIndex},e.prototype._keydown=function(e){if(t.prototype._keydown.call(this,e),!e.defaultPrevented&&!this.isReadOnly&&!e.altKey&&o.hasItems(this.collectionView)&&this._elRef==this._tbx){this._delKey=0;var n=this._getSelStart();switch(e.keyCode){case o.Key.Back:if(this._bsCollapse&&!this.isEditable){var i=this._getSelEnd();n>0&&i==this._tbx.value.length&&o.hasItems(this.collectionView)&&this._setSelRange(n-1,i)}this._delKey=e.keyCode;break;case o.Key.Delete:this._delKey=e.keyCode;break;case o.Key.Up:case o.Key.Down:n==this.text.length&&(n=0),this.selectedIndex=this._findNext(this.text.substr(0,n),e.keyCode==o.Key.Up?-1:1),this._setSelRange(n,this.text.length),e.preventDefault()}}},e.prototype._updateInputSelection=function(t){this._elRef==this._tbx&&this._setSelRange(t,this._tbx.value.length)},e.prototype._getSelStart=function(){return this._tbx&&this._tbx.value?this._tbx.selectionStart:0},e.prototype._getSelEnd=function(){return this._tbx&&this._tbx.value?this._tbx.selectionEnd:0},e.prototype._setSelRange=function(t,e){var n=this._tbx;this._elRef==n&&o.setSelectionRange(n,t,e)},e}(l);e.ComboBox=p;var f=function(t){function e(e,n){var i=t.call(this,e)||this;return i._cssMatch="wj-autocomplete-match",i._minLength=2,i._maxItems=6,i._itemCount=0,i._delay=500,i._query="",i._inCallback=!1,i._srchProps=[],o.addClass(i.hostElement,"wj-autocomplete"),i._bsCollapse=!1,i.isEditable=!0,i.isRequired=!1,i.isContentHtml=!0,i.listBox.formatItem.addHandler(i._formatListItem,i),i._itemsSourceFnCallBackBnd=i._itemSourceFunctionCallback.bind(i),i.initialize(n),i}return i(e,t),Object.defineProperty(e.prototype,"minLength",{get:function(){return this._minLength},set:function(t){this._minLength=o.asNumber(t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxItems",{get:function(){return this._maxItems},set:function(t){this._maxItems=o.asNumber(t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=o.asNumber(t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchMemberPath",{get:function(){return this._srchProp},set:function(t){this._srchProp=o.asString(t),this._srchProps=t?t.trim().split(/\s*,\s*/):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsSourceFunction",{get:function(){return this._itemsSourceFn},set:function(t){this._itemsSourceFn=o.asFunction(t),o.isFunction(this._itemsSourceFn)&&this.itemsSourceFunction(this.text,this.maxItems,this._itemsSourceFnCallBackBnd)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cssMatch",{get:function(){return this._cssMatch},set:function(t){this._cssMatch=o.asString(t)},enumerable:!0,configurable:!0}),e.prototype._keydown=function(e){if(!e.defaultPrevented&&this.isDroppedDown)switch(e.keyCode){case o.Key.Up:case o.Key.Down:this.selectAll()}t.prototype._keydown.call(this,e)},e.prototype._setText=function(t){var e=this;if(!this._inCallback){if(!t&&this.selectedIndex>-1&&(this.selectedIndex=-1),t!=this._oldText&&(this._tbx.value!=t&&(this._tbx.value=t),this._oldText=t,this.onTextChanged(),!t&&this.collectionView))return this._rxHighlight=null,this.collectionView.filter=this._query=null,void(this.isDroppedDown=!1);this._toSearch&&clearTimeout(this._toSearch),t!=this.getDisplayText()&&(this._toSearch=setTimeout(function(){e._toSearch=null;var t=e.text.trim().toLowerCase();if(t.length>=e._minLength&&t!=e._query){e._query=t,t=t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var n=o.escapeHtml(t);e._rxMatch=new RegExp("(?=.*"+t.replace(/ /g,")(?=.*")+")","ig"),e._rxHighlight=e.isContentHtml?new RegExp("("+n.replace(/ /g,"|")+")(?![^<]*>|[^<>]* </)","ig"):new RegExp("("+n.replace(/ /g,"|")+")","ig"),e.itemsSourceFunction?e.itemsSourceFunction(t,e.maxItems,e._itemsSourceFnCallBackBnd):e._updateItems()}},this._delay))}},e.prototype._itemSourceFunctionCallback=function(t){this._inCallback=!0;var e=o.asCollectionView(t);e&&e.moveCurrentToPosition(-1),this.itemsSource=e,this._inCallback=!1,this.containsFocus()&&(this.isDroppedDown=!0,this.refresh())},e.prototype.onIsDroppedDownChanged=function(t){this.isDroppedDownChanged.raise(this,t),!this.containsFocus()||this.isDroppedDown||this.isTouching||null!=this.selectedItem||o.setSelectionRange(this._tbx,this.text.length),this._query=""},e.prototype._updateItems=function(){var t=this.collectionView;if(t){this._inCallback=!0,t.beginUpdate(),this._itemCount=0,t.filter=this._filter.bind(this),t.moveCurrentToPosition(-1),t.endUpdate(),this._inCallback=!1;var e=t.items.length;this.isDroppedDown=e>0&&this.containsFocus(),0!=e||this.isEditable||(this.selectedIndex=-1),this.refresh()}},e.prototype._filter=function(t){if(this._itemCount>=this._maxItems)return!1;var e=this._getItemText(t,!1);if(this._srchProps)for(var n=0;n<this._srchProps.length;n++)e+="\0"+t[this._srchProps[n]];return this.isContentHtml&&(e=e.replace(/<[^>]*>/g,"")),!!e.match(this._rxMatch)&&(this._itemCount++,!0)},e.prototype._getItemText=function(t,e){var n=t?t.toString():"",i=e&&this.headerPath?this._pathHdr:this._lbx._pathDisplay;return i&&(n=null!=(n=i.getValue(t))?n.toString():""),n},e.prototype._formatListItem=function(t,e){this._cssMatch&&this._rxHighlight&&(e.item.innerHTML=e.item.innerHTML.replace(this._rxHighlight,'<span class="'+this._cssMatch+'">$1</span>'))},e}(p);e.AutoComplete=f;var g=function(t){function e(e,n){var i=t.call(this,e)||this;i.itemClicked=new o.Event;var r=i.hostElement,s=i._tbx;o.addClass(r,"wj-menu"),s.style.display="none",i._hdr=i._elRef=o.createElement('<div wj-part="header" class="wj-form-control" style="cursor:default"/>'),s.parentElement.insertBefore(i._hdr,i._tbx);var a=i._orgOuter.match(/tabindex="?(-?\d+)"?/i);return a&&(r.tabIndex=parseInt(a[1])),i.isRequired=!1,o.setAttribute(r,"role","menubar",!0),o.setAttribute(s,"role",null),o.setAttribute(s,"aria-autocomplete",null),o.setAttribute(s,"aria-owns",null),o.setAttribute(i.dropDown,"role","menu"),i.listBox.itemRole="menuitem","SELECT"==i._orgTag&&(i.header=r.getAttribute("header"),i._lbx.itemsSource&&(i.commandParameterPath="cmdParam")),i.isContentHtml=!0,i.maxDropDownHeight=500,i.addEventListener(i._hdr,"click",function(t){t.defaultPrevented||(i._isButton?(i.isDroppedDown=!1,i._raiseCommand()):i.isDroppedDown=!i.isDroppedDown)}),i.listBox.lostFocus.addHandler(function(){i.containsFocus()||(i.isDroppedDown=!1)}),i.initialize(n),i}return i(e,t),Object.defineProperty(e.prototype,"header",{get:function(){return this._hdr.innerHTML},set:function(t){this._hdr.innerHTML=o.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this._command},set:function(t){this._command=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commandPath",{get:function(){return this._cmdPath},set:function(t){this._cmdPath=o.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commandParameterPath",{get:function(){return this._cmdParamPath},set:function(t){this._cmdParamPath=o.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isButton",{get:function(){return this._isButton},set:function(t){this._isButton=o.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},set:function(t){this._owner=o.asType(t,HTMLElement,!0),this._enableDisableItems()},enumerable:!0,configurable:!0}),e.prototype.show=function(t){if(!this.isDroppedDown){var e=this.dropDown;this.selectedIndex=-1,this.onIsDroppedDownChanging(new o.CancelEventArgs)&&(this.owner&&(e[o.Control._OWNR_KEY]=this.owner),o.showPopup(e,t),this.onIsDroppedDownChanged(),e.focus())}},e.prototype.hide=function(){this.isDroppedDown&&this.onIsDroppedDownChanging(new o.CancelEventArgs)&&(o.hidePopup(this.dropDown),this.onIsDroppedDownChanged())},e.prototype.onItemClicked=function(t){this.itemClicked.raise(this,t)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this._enableDisableItems()},e.prototype.onIsDroppedDownChanged=function(e){t.prototype.onIsDroppedDownChanged.call(this,e),this.isDroppedDown?(this._closing=!0,this._defaultItem=this.selectedItem,this.isRequired=!1,this.selectedIndex=-1,this._enableDisableItems(),this._closing=!1,this.dropDown.focus()):this.selectedItem||(this.selectedItem=this._defaultItem)},e.prototype._keydown=function(e){e.defaultPrevented||e.keyCode==o.Key.Enter&&(this.isDroppedDown?this.getDisplayText(this.selectedIndex)&&this._raiseCommand():(this.isDroppedDown=!0,e.preventDefault())),t.prototype._keydown.call(this,e)},e.prototype._dropDownClick=function(e){e.defaultPrevented||e.target==this.dropDown||this.getDisplayText(this.selectedIndex)&&this._raiseCommand(),t.prototype._dropDownClick.call(this,e)},e.prototype._raiseCommand=function(t){var e=this.selectedItem,n=this._getCommand(e);if(n){var i=this._cmdParamPath?e[this._cmdParamPath]:null;if(!this._canExecuteCommand(n,i))return;this._executeCommand(n,i)}this.onItemClicked(t)},e.prototype._getCommand=function(t){return(t&&this.commandPath?t[this.commandPath]:null)||this.command},e.prototype._executeCommand=function(t,e){t&&!o.isFunction(t)&&(t=t.executeCommand),o.isFunction(t)&&t(e)},e.prototype._canExecuteCommand=function(t,e){if(t){var n=t.canExecuteCommand;if(o.isFunction(n))return n(e)}return!0},e.prototype._enableDisableItems=function(){if(this.collectionView&&(this.command||this.commandPath))for(var t=this.collectionView.items,e=0;e<t.length;e++){var n=this._getCommand(t[e]);n&&o.toggleClass(this._lbx.hostElement.children[e],"wj-state-disabled",!this._canExecuteCommand(n,this.commandParameterPath?t[e][this.commandParameterPath]:null))}},e}(p);e.Menu=g,o.culture.MultiSelect=window.wijmo.culture.MultiSelect||{itemsSelected:"{count:n0} items selected",selectAll:"Select All"};var _=function(t){function e(e,n){var i=t.call(this,e)||this;return i._maxHdrItems=2,i._readOnly=!1,i._hdrFmt=o.culture.MultiSelect.itemsSelected,i.checkedItemsChanged=new o.Event,o.addClass(i.hostElement,"wj-multiselect"),i._tbx.readOnly=!0,i.checkedMemberPath=null,i.addEventListener(i.inputElement,"click",function(){i.isDroppedDown=!i.isDroppedDown}),i.addEventListener(i._selectAll,"click",function(t){o.hasItems(i.collectionView)&&t.target==i._selectAllCheckbox&&(i.checkedItems=t.target.checked?i.collectionView.items:[])}),i.removeEventListener(i.dropDown,"click"),i._updateHeader(),i.listBox.itemsChanged.addHandler(function(){i._updateHeader()}),i.listBox.checkedItemsChanged.addHandler(function(){i._updateHeader(),i.onCheckedItemsChanged()}),i.initialize(n),i}return i(e,t),Object.defineProperty(e.prototype,"showSelectAllCheckbox",{get:function(){return""==this._selectAll.style.display},set:function(t){this._selectAll.style.display=o.asBoolean(t)?"":"none"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectAllLabel",{get:function(){return this._selectAllLabel},set:function(t){t!=this._selectAllLabel&&(this._selectAllLabel=o.asString(t),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkedMemberPath",{get:function(){var t=this.listBox.checkedMemberPath;return t!=e._DEF_CHECKED_PATH?t:null},set:function(t){t=o.asString(t),this.listBox.checkedMemberPath=t||e._DEF_CHECKED_PATH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxHeaderItems",{get:function(){return this._maxHdrItems},set:function(t){this._maxHdrItems!=t&&(this._maxHdrItems=o.asNumber(t),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerFormat",{get:function(){return this._hdrFmt},set:function(t){t!=this._hdrFmt&&(this._hdrFmt=o.asString(t),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerFormatter",{get:function(){return this._hdrFormatter},set:function(t){t!=this._hdrFormatter&&(this._hdrFormatter=o.asFunction(t),this._updateHeader())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkedItems",{get:function(){return this.listBox.checkedItems},set:function(t){this.listBox.checkedItems=o.asArray(t)},enumerable:!0,configurable:!0}),e.prototype.onCheckedItemsChanged=function(t){this.checkedItemsChanged.raise(this,t)},e.prototype._createDropDown=function(){this._selectAll=o.createElement('<div class="wj-listbox-item wj-header wj-select-all" tabindex="0" style="display:none"><label><input type="checkbox"> <span></span></label></div>',this._dropDown),this._selectAllCheckbox=this._selectAll.querySelector("input[type=checkbox]"),this._selectAllSpan=this._selectAll.querySelector("label>span"),o.setText(this._selectAllSpan,o.culture.MultiSelect.selectAll);var e=o.createElement('<div style="width:100%;border:none"></div>',this._dropDown);this._lbx=new c(e),t.prototype._createDropDown.call(this)},Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=o.asBoolean(t),o.toggleClass(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this._updateHeader(),this._selectAllSpan&&o.setText(this._selectAllSpan,this._selectAllLabel||o.culture.MultiSelect.selectAll)},e.prototype.onIsDroppedDownChanged=function(e){var n=this;t.prototype.onIsDroppedDownChanged.call(this,e),this.isDroppedDown&&this.containsFocus()&&setTimeout(function(){n.listBox.focus()},200)},e.prototype._setText=function(t,e){},e.prototype._keydown=function(e){t.prototype._keydown.call(this,e),!e.defaultPrevented&&o.hasItems(this.collectionView)&&e.keyCode>32&&(this.isDroppedDown=!0)},e.prototype._updateHeader=function(){var t=this.checkedItems;if(o.isFunction(this._hdrFormatter))this.inputElement.value=this._hdrFormatter();else{var e="";if(t.length>0)if(t.length<=this._maxHdrItems){if(this.displayMemberPath){var n=new o.Binding(this.displayMemberPath);t=t.map(function(t){return n.getValue(t)})}e=t.join(", ")}else e=o.format(this.headerFormat,{count:t.length});this.inputElement.value=e}var i=null,r=this.collectionView;o.hasItems(r)&&(0==t.length?i=!1:t.length==r.items.length&&(i=!0)),this._selectAllCheckbox.indeterminate=null==i,null!=i&&(this._selectAllCheckbox.checked=i),this._updateState()},e._DEF_CHECKED_PATH="$checked",e}(p);e.MultiSelect=_;var m,v=function(t){function e(e,n){var i=t.call(this,e)||this;return i._selItems=[],i._lastInputValue="",i._selPath=new o.Binding(null),i._notAddItm=!1,i.selectedItemsChanged=new o.Event,o.addClass(i.hostElement,"wj-multi-autocomplete"),i.showDropDownButton=!1,i.initialize(n),i._wjTpl=i.hostElement.querySelector(".wj-template"),i._wjInput=i.hostElement.querySelector(".wj-input"),i.addEventListener(i.hostElement,"keyup",i._keyup.bind(i),!0),i.addEventListener(window,"resize",i._adjustInputWidth.bind(i)),i.addEventListener(i._tbx,"focus",function(){i._itemOff()}),i._addHelperInput(),i._initSeltems(),i.listBox.itemsChanged.addHandler(function(){return i.selectedIndex=-1}),i._refreshHeader(),i}return i(e,t),Object.defineProperty(e.prototype,"showDropDownButton",{set:function(t){this._showBtn=!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSelectedItems",{get:function(){return this._maxtems},set:function(t){this._maxtems!=t&&(this._maxtems=o.asNumber(t,!0),this._updateMaxItems(),this._refreshHeader(),this._clearSelIndex())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedMemberPath",{get:function(){return this._selPath.path},set:function(t){(t=o.asString(t))!==this.selectedMemberPath&&(this._selPath.path=t,this._initSeltems(),this._refreshHeader(),this.onSelectedItemsChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedItems",{get:function(){return this._selItems},set:function(t){if(this._selItems=o.asArray(t),this.selectedMemberPath&&""!==this.selectedMemberPath&&this._selItems)for(var e=0;e<this._selItems.length;e++)this._setSelItem(this._selItems[e],!1);this._updateMaxItems(),this.onSelectedItemsChanged(),this._refreshHeader(),this._clearSelIndex()},enumerable:!0,configurable:!0}),e.prototype.onSelectedItemsChanged=function(t){this.selectedItemsChanged.raise(this,t)},e.prototype.onIsDroppedDownChanged=function(e){!this.isDroppedDown&&this.selectedIndex>-1&&!this._notAddItm&&this._addItem(!0),this._notAddItm=!1,t.prototype.onIsDroppedDownChanged.call(this,e)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this._initSeltems(),this.isDroppedDown||this._refreshHeader()},e.prototype._keydown=function(e){if(!this.isReadOnly){if(!e.defaultPrevented)switch(e.keyCode){case o.Key.Back:this._lastInputValue=this._tbx.value;break;case o.Key.Enter:this._itemOff(),this._addItem(!0),o.isIE&&o.setSelectionRange(this._tbx,0,0);break;case o.Key.Tab:this.isDroppedDown?(this._addItem(!1),this._tbx.value="",this._lbx.selectedIndex=-1,e.preventDefault()):this._updateFocus();break;case o.Key.Space:if(""!==this._tbx.value)return;this.isDroppedDown||this._tbx.disabled||(this.isDroppedDown=!0,this._clearSelIndex());break;case o.Key.Escape:this.isDroppedDown&&(this._notAddItm=!0);break;case o.Key.Left:this._itemOn(!this.rightToLeft);break;case o.Key.Right:this._itemOn(!!this.rightToLeft);break;case o.Key.Up:case o.Key.Down:var n=o.getActiveElement();if(e.altKey){if(this._tbx==n)return this.isDroppedDown=!this.isDroppedDown,this.isDroppedDown||this._tbx.focus(),void e.preventDefault()}else if(this._tbx!==n)return;default:if(e.keyCode===o.Key.Back||e.keyCode===o.Key.Delete)return;this._itemOff(),null!=this._maxtems&&this._selItems.length>=this._maxtems&&e.preventDefault()}this._tbx.disabled||t.prototype._keydown.call(this,e)}},e.prototype._updateState=function(){t.prototype._updateState.call(this),this._wjTpl&&(o.hasClass(this.hostElement,"wj-state-focused")||this._itemOff())},e.prototype._keyup=function(t){if(!this.isReadOnly&&!t.defaultPrevented)switch(t.keyCode){case o.Key.Back:0===this._tbx.value.length&&0===this._lastInputValue.length&&this._delItem(!1);break;case o.Key.Delete:this._delItem(!0)}},e.prototype._addHelperInput=function(){var t=document.createElement("input");t.type="text",t.tabIndex=-1,t.className="wj-token-helper",t.readOnly=!0,this._wjTpl.insertBefore(t,this._wjInput),this._helperInput=t},e.prototype._refreshHeader=function(){for(var t=this.hostElement.querySelectorAll(".wj-token"),e=0;e<t.length;e++)this._wjTpl.removeChild(t[e]);var n=this.selectedItems;if(n&&0!==n.length){for(e=0;e<n.length;e++)this._insertToken(n[e]);this._wjInput.style.cssFloat=this.rightToLeft?"right":"left",this._adjustInputWidth()}},e.prototype._insertToken=function(t){var e=this._getItemText(t,!0);this.isContentHtml?(this._cvt||(this._cvt=document.createElement("div")),this._cvt.innerHTML=e,e=this._cvt.textContent.trim()):e=o.escapeHtml(e),this._wjTpl.insertBefore(this._createItem(e),this._wjInput)},e.prototype._updateMaxItems=function(){null!=this._maxtems&&this._selItems&&this._selItems.length>this._maxtems&&(this._selItems=this._selItems.slice(0,this._maxtems))},e.prototype._updateFocus=function(){var t=this,n=this._wjTpl.querySelector("."+e._clsActive);n?(o.removeClass(n,e._clsActive),setTimeout(function(){t._tbx.focus()})):(this._clearSelIndex(),o.removeClass(this.hostElement,"wj-state-focused"))},e.prototype._addItem=function(t){this.selectedItems.indexOf(this.selectedItem)>-1?this._clearSelIndex():this.selectedIndex>-1&&(this._updateSelItems(this.selectedItem,!0),this._refreshHeader(),t&&this._clearSelIndex(),this._disableInput(!0))},e.prototype._delItem=function(t){var n,i,o=this._wjTpl.querySelector("."+e._clsActive),r=!1;t&&!o||(o?(i=this._getItemIndex(o))>-1&&(n=this._selItems[i],r=!0):this._selItems.length>0&&(n=this._selItems[this._selItems.length-1],r=!0),r&&(this._updateSelItems(n,!1),this._refreshHeader(),this._clearSelIndex(),this._disableInput(!1)),this._tbx.focus())},e.prototype._updateSelItems=function(t,e){if(e){if(this._selItems&&0!==this._selItems.length||(this._selItems=[]),null!=this._maxtems&&this._selItems.length>=this._maxtems)return;this._selItems.push(t)}else{var n=this._selItems.indexOf(t);this._selItems.splice(n,1)}this._hasSelectedMemeberPath()&&this._setSelItem(t,e),this.onSelectedItemsChanged()},e.prototype._createItem=function(t){var n=this,i=document.createElement("div"),r=document.createElement("span"),s=document.createElement("a");return i.appendChild(r),i.appendChild(s),i.className="wj-token",r.className="wj-token-label",r.innerHTML=t,s.className="wj-token-close",s.href="#",s.tabIndex=-1,s.text="\xd7",i.style.cssFloat=this.rightToLeft?"right":"left",this.addEventListener(i,"click",function(t){n._helperInput.focus();var r=n._wjTpl.querySelector("."+e._clsActive);r&&o.removeClass(r,e._clsActive),o.addClass(i,e._clsActive),t.stopPropagation(),t.preventDefault()}),this.addEventListener(s,"click",function(t){if(!n.isReadOnly){var e=n._getItemIndex(i);e>-1&&n._updateSelItems(n._selItems[e],!1),n._wjTpl.removeChild(i),n._adjustInputWidth(),n._disableInput(!1),n._tbx.focus(),t.stopPropagation(),t.preventDefault()}}),i},e.prototype._itemOn=function(t){var n,i,r,s=o.getActiveElement();if((this._tbx!=s||0===this._tbx.value.length)&&0!==(n=this._wjTpl.querySelectorAll(".wj-token")).length)if(i=this._wjTpl.querySelector("."+e._clsActive),r=this._getItemIndex(i),t){if(0===r)return;-1===r?(o.addClass(n[n.length-1],e._clsActive),this._helperInput.focus()):(o.removeClass(i,e._clsActive),o.addClass(n[r-1],e._clsActive),this._helperInput.focus())}else if(!t){if(-1===r)return;r!==n.length-1?(o.removeClass(i,e._clsActive),o.addClass(n[r+1],e._clsActive),this._helperInput.focus()):(o.removeClass(i,e._clsActive),this._tbx.focus())}},e.prototype._itemOff=function(){var t=this._wjTpl.querySelector("."+e._clsActive);t&&o.removeClass(t,e._clsActive)},e.prototype._initSeltems=function(){if(this.selectedMemberPath&&""!==this.selectedMemberPath){var t=this.itemsSource;if(this._selItems.splice(0,this._selItems.length),t)for(var e=0;e<t.sourceCollection.length;e++)this._getSelItem(e)&&this._selItems.push(t.sourceCollection[e])}},e.prototype._getSelItem=function(t){var e=this.itemsSource.sourceCollection[t];return!(!o.isObject(e)||!this.selectedMemberPath)&&this._selPath.getValue(e)},e.prototype._setSelItem=function(t,e){o.isObject(t)&&this._selPath.getValue(t)!=e&&this._selPath.setValue(t,e)},e.prototype._clearSelIndex=function(){this.selectedIndex=-1},e.prototype._hasSelectedMemeberPath=function(){return this.selectedMemberPath&&""!==this.selectedMemberPath},e.prototype._disableInput=function(t){null!=this._maxtems&&(this._selItems.length<this._maxtems?(this._tbx.disabled=!1,this._tbx.focus()):(this._tbx.disabled=!0,this.hostElement.focus()))},e.prototype._adjustInputWidth=function(){this._tbx.style.width="60px";var t=o.getElementRect(this.hostElement),e=o.getElementRect(this._tbx),n=getComputedStyle(this._tbx),i=parseInt(n.paddingLeft,10),r=parseInt(n.paddingRight,10);this._tbx.style.width=(this.rightToLeft?e.left+e.width-t.left-i-r-8:t.left+t.width-e.left-i-r-8)+"px"},e.prototype._getItemIndex=function(t){for(var e=this.hostElement.querySelectorAll(".wj-token"),n=0;n<e.length;n++)if(t===e[n])return n;return-1},e._clsActive="wj-token-active",e}(f);e.MultiAutoComplete=v,function(t){t[t.None=0]="None",t[t.Click=1]="Click",t[t.Blur=2]="Blur",t[t.ClickOrBlur=3]="ClickOrBlur"}(m=e.PopupTrigger||(e.PopupTrigger={}));var y=function(t){function e(e,n){var i=t.call(this,e,null,!0)||this;i._showTrigger=m.Click,i._hideTrigger=m.Blur,i._fadeIn=!0,i._fadeOut=!0,i._removeOnHide=!0,i._visible=!1,i._ownerClickBnd=i._ownerClick.bind(i),i._ownerMousedownBnd=i._ownerMouseDown.bind(i),i.showing=new o.Event,i.shown=new o.Event,i.hiding=new o.Event,i.hidden=new o.Event;var r=i.hostElement;return o.addClass(r,"wj-control wj-content wj-popup"),r.getAttribute("tabindex")||(r.tabIndex=0),o.hidePopup(r,!1),i.addEventListener(r,"compositionstart",function(t){i._composing=!0}),i.addEventListener(r,"compositionend",function(t){i._composing=!1}),i.addEventListener(r,"keydown",function(t){if(!t.defaultPrevented){if(t.keyCode!=o.Key.Escape||i._composing||(t.preventDefault(),i.hide()),t.keyCode==o.Key.Enter){var e=i.dialogResultEnter;e&&(t.preventDefault(),i._validateAndHide(e))}t.keyCode==o.Key.Tab&&i.modal&&(t.preventDefault(),o.moveFocus(r,t.shiftKey?-1:1))}}),i.addEventListener(r,"click",function(t){if(t.target instanceof HTMLElement){var e=t.target.className.match(/\bwj-hide[\S]*\b/);e&&e.length>0&&(t.preventDefault(),t.stopPropagation(),i.hide(e[0]))}}),i.addEventListener(document,"wheel",function(t){if(i.isVisible&&i._modal){for(var e=t.target;e&&e!=document.body;e=e.parentElement)if(e.scrollHeight>e.clientHeight)return;t.preventDefault(),t.stopPropagation()}}),i.initialize(n),i}return i(e,t),Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},set:function(t){var e=this._owner;e&&(this.removeEventListener(e,"mousedown"),this.removeEventListener(e,"click")),(e=this._owner=null!=t?o.getElement(t):null)&&(this.addEventListener(e,"mousedown",this._ownerMousedownBnd,!0),this.addEventListener(e,"click",this._ownerClickBnd,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this.hostElement.firstElementChild},set:function(t){t!=this.content&&(this.hostElement.innerHTML="",t instanceof HTMLElement&&this.hostElement.appendChild(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTrigger",{get:function(){return this._showTrigger},set:function(t){this._showTrigger=o.asEnum(t,m)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideTrigger",{get:function(){return this._hideTrigger},set:function(t){this._hideTrigger=o.asEnum(t,m)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=o.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=o.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"removeOnHide",{get:function(){return this._removeOnHide},set:function(t){this._removeOnHide=o.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modal",{get:function(){return this._modal},set:function(t){this._modal=o.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDraggable",{get:function(){return this._draggable},set:function(t){this._draggable=o.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialogResult",{get:function(){return this._result},set:function(t){this._result=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialogResultEnter",{get:function(){return this._resultEnter},set:function(t){this._resultEnter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){var t=this.hostElement;return this._visible&&null!=t&&t.offsetHeight>0},enumerable:!0,configurable:!0}),e.prototype.show=function(t,e){var n=this;if(!this.isVisible){var i=this.hostElement;this.dialogResult=null,this._callback=null,this._hideAnim&&(clearInterval(this._hideAnim),this._hideAnim=null);var r=new o.CancelEventArgs;this.onShowing(r)&&(null!=t&&(this.modal=o.asBoolean(t)),null!=e&&(this._callback=o.asFunction(e)),o.showPopup(i,this._owner,!1,this._fadeIn,!1),this._modal&&this._showBackdrop(),this._composing=!1,this._visible=!0,this.onShown(r),this.modal&&this.addEventListener(window,"focus",function(){n.containsFocus()||o.moveFocus(i,0)}),this._makeDraggable(this._draggable),setTimeout(function(){if(!n.isTouching){var t=i.querySelector("input[autofocus]");t&&t.clientHeight>0&&!t.disabled&&t.tabIndex>-1&&!o.closest(t,"[disabled],.wj-state-disabled")?(t.focus(),t.select()):o.moveFocus(i,0)}n.containsFocus()||(i.tabIndex=0,i.focus())},200))}},e.prototype.hide=function(t){var e=this;if(this._makeDraggable(!1),this.isVisible){o.isUndefined(t)||(this.dialogResult=t);var n=new o.CancelEventArgs;if(this.onHiding(n)){for(var i=this.hostElement.querySelectorAll(".wj-control.wj-dropdown"),r=0;r<i.length;r++){var s=o.Control.getControl(i[r]);s instanceof l&&(s.isDroppedDown=!1)}this._bkdrop&&o.hidePopup(this._bkdrop,this.removeOnHide,this.fadeOut),this._hideAnim=o.hidePopup(this.hostElement,this.removeOnHide,this.fadeOut),this._visible=!1,this.removeEventListener(window,"focus"),this.containsFocus()&&o.getActiveElement().blur(),setTimeout(function(){e._updateState(),e.onHidden(n),e._callback&&e._callback(e)})}}},e.prototype.onShowing=function(t){return this.showing.raise(this,t),!t.cancel},e.prototype.onShown=function(t){this.shown.raise(this,t)},e.prototype.onHiding=function(t){return this.hiding.raise(this,t),!t.cancel},e.prototype.onHidden=function(t){this.hidden.raise(this,t)},e.prototype.dispose=function(){this.owner=null,t.prototype.dispose.call(this)},e.prototype.onLostFocus=function(e){this.isVisible&&this._hideTrigger&m.Blur&&(this.containsFocus()||this.hide()),t.prototype.onLostFocus.call(this,e)},e.prototype.refresh=function(e){if(void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.isVisible&&!this._refreshing){this._refreshing=!0;var n=o.getActiveElement(),i=this._owner?this._owner.getBoundingClientRect():null;o.showPopup(this.hostElement,i),this._modal&&n instanceof HTMLElement&&n!=o.getActiveElement()&&n.focus(),this._refreshing=!1}},e.prototype._makeDraggable=function(t){var e,n,i=this,r=this.hostElement,s=r?r.querySelector(".wj-dialog-header"):null,a=document,l="mouseup",h="touchend",u=function(t){r&&o.contains(s,t.target)&&(e=new o.Point(r.offsetLeft,r.offsetTop),n=o.mouseToPage(t),["mousemove",l,"touchmove",h].forEach(function(t){i.removeEventListener(a,t)}),["mousemove","touchmove"].forEach(function(t){i.addEventListener(a,t,c)}),[l,h].forEach(function(t){i.addEventListener(a,t,d)}))},c=function(t){var s=o.mouseToPage(t);o.setCss(r,{left:Math.max(e.x+(s.x-n.x),50-r.offsetWidth),top:Math.max(e.y+(s.y-n.y),0)}),i._dragged=!0},d=function(t){["mousemove",l,"touchmove",h].forEach(function(t){i.removeEventListener(a,t)})};["mousedown","touchstart"].forEach(function(t){i.removeEventListener(a,t)}),this._dragged=!1,s&&(o.setCss(s,{touchAction:t?"none":""}),t&&["mousedown","touchstart"].forEach(function(t){i.addEventListener(a,t,u)}))},e.prototype._handleResize=function(){this.isVisible&&!this._dragged&&this.refresh()},e.prototype._ownerClick=function(t){this.isVisible?this._hideTrigger&m.Click&&this.hide():this._showTrigger&m.Click&&(this._wasVisible||this.show())},e.prototype._ownerMouseDown=function(t){this._wasVisible=this.isVisible},e.prototype._showBackdrop=function(){var t=this;this._bkdrop||(this._bkdrop=document.createElement("div"),this._bkdrop.tabIndex=-1,o.addClass(this._bkdrop,"wj-popup-backdrop"),this.addEventListener(this._bkdrop,"mousedown",function(e){e.preventDefault(),e.stopPropagation(),t.hostElement.focus(),t.hideTrigger&m.Blur&&t.hide()})),this._bkdrop.style.display="";var e=this.hostElement;e.parentElement.insertBefore(this._bkdrop,e)},e.prototype._validateAndHide=function(t){var e=this.hostElement.querySelector(":invalid");e?e.focus():this.hide(t)},e}(o.Control);e.Popup=y;var b=function(t){function e(e,n){var i=t.call(this,e)||this;if(i._format="d",i.valueChanged=new o.Event,o.addClass(i.hostElement,"wj-inputdate"),i._msk=new o._MaskProvider(i._tbx),o.isIE9()||(i.inputType="tel"),i._tbx.type.match(/date/i)&&(i.inputType=""),i.addEventListener(i.hostElement,"wheel",function(t){if(!t.defaultPrevented&&!i.isDroppedDown&&i.containsFocus()&&null!=i.value&&i._canChangeValue()){var e=o.clamp(-t.deltaY,-1,1);i.value=i.selectionMode==s.Month?o.DateTime.addMonths(i.value,e):o.DateTime.addDays(i.value,e),i.selectAll(),t.preventDefault()}}),i.value=o.DateTime.newDate(),"INPUT"==i._orgTag){var r=i._tbx.getAttribute("value");r&&(i.value=o.Globalize.parseDate(r,"yyyy-MM-dd"))}return i.isRequired=!0,i.initialize(n),i}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){o.DateTime.equals(this._value,t)?this._tbx.value=o.Globalize.format(t,this.format):(t=o.asDate(t,!this.isRequired||null==t&&null==this.value),t=this._clamp(t),this._isValidDate(t)?(this._tbx.value=t?o.Globalize.format(t,this.format):"",t==this._value||o.DateTime.equals(this._value,t)||(this._value=t,this.onValueChanged())):this._tbx.value=t?o.Globalize.format(this.value,this.format):"",this.text!=this._oldText&&(this._oldText=this.text,this.onTextChanged()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._tbx.value},set:function(t){t!=this.text&&(this._setText(t,!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionMode",{get:function(){return this.calendar.selectionMode},set:function(t){this.calendar.selectionMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._calendar.min},set:function(t){this._calendar.min=o.asDate(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._calendar.max},set:function(t){this._calendar.max=o.asDate(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._format},set:function(t){t!=this.format&&(this._format=o.asString(t),this._tbx.value=o.Globalize.format(this.value,this.format))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._msk.mask},set:function(t){this._msk.mask=o.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"calendar",{get:function(){return this._calendar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputType",{get:function(){return this._tbx.type},set:function(t){this._tbx.type=o.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemValidator",{get:function(){return this._calendar.itemValidator},set:function(t){t!=this.itemValidator&&(this._calendar.itemValidator=o.asFunction(t),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemFormatter",{get:function(){return this.calendar.itemFormatter},set:function(t){t!=this.itemFormatter&&(this.calendar.itemFormatter=o.asFunction(t))},enumerable:!0,configurable:!0}),e.prototype.onValueChanged=function(t){this.valueChanged.raise(this,t)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.isDroppedDown=!1,this._msk&&this._msk.refresh(),this._calendar&&this._calendar.refresh(),this._tbx.value=o.Globalize.format(this.value,this.format)},e.prototype.onIsDroppedDownChanged=function(e){t.prototype.onIsDroppedDownChanged.call(this,e),this.isDroppedDown&&(this._calChanged=!1,this.dropDown.focus())},e.prototype._createDropDown=function(){var t=this;this._calendar=new h(this._dropDown),this._calendar.valueChanged.addHandler(function(){t.value=o.DateTime.fromDateTime(t._calendar.value,t.value),t._calChanged=!0}),this.addEventListener(this._dropDown,"mouseup",function(e){t._calChanged&&!o.closest(e.target,".wj-calendar-header")?t.isDroppedDown=!1:"btn-today"==e.target.getAttribute("wj-part")&&(t.isDroppedDown=!1)})},e.prototype._updateDropDown=function(){this._commitText();var e=this._calendar;e.value=this.value,e.min=this.min,e.max=this.max,this.selectionMode!=s.Month&&(e.monthView=!0);var n=getComputedStyle(this.hostElement);this._dropDown.style.minWidth=18*parseFloat(n.fontSize)+"px",this._calendar.refresh(),t.prototype._updateDropDown.call(this)},e.prototype._keydown=function(e){if(!(e.defaultPrevented||e.altKey||e.ctrlKey||e.metaKey))switch(e.keyCode){case o.Key.Enter:this._commitText(),this.selectAll();break;case o.Key.Escape:this.text=o.Globalize.format(this.value,this.format),this.selectAll();break;case o.Key.Up:case o.Key.Down:if(!this.isDroppedDown&&this.value&&this._canChangeValue()){var n=e.keyCode==o.Key.Up?1:-1,i=this.selectionMode==s.Month?o.DateTime.addMonths(this.value,n):o.DateTime.addDays(this.value,n);this.value=o.DateTime.fromDateTime(i,this.value),this.selectAll(),e.preventDefault()}}t.prototype._keydown.call(this,e)},e.prototype._canChangeValue=function(){return!this.isReadOnly&&this.selectionMode!=s.None},e.prototype._clamp=function(t){return this.calendar._clamp(t)},e.prototype._commitText=function(){var t=this._tbx.value;if(t||this.isRequired){var e=o.Globalize.parseDate(t,this.format);e?this.value=o.DateTime.fromDateTime(e,this.value):this._tbx.value=o.Globalize.format(this.value,this.format)}else this.value=null},e.prototype._isValidDate=function(t){if(t){if(this._clamp(t)!=t)return!1;if(this.itemValidator&&!this.itemValidator(t))return!1}return!0},e}(l);e.InputDate=b;var w=function(t){function e(e,n){var i=t.call(this,e)||this;if(i._format="t",i.valueChanged=new o.Event,o.addClass(i.hostElement,"wj-inputtime"),i._value=o.DateTime.newDate(),i._msk=new o._MaskProvider(i._tbx),o.isIE9()||(i._tbx.type="tel"),"INPUT"==i._orgTag){var r=i._tbx.getAttribute("value");r&&(i.value=o.Globalize.parseDate(r,"HH:mm:ss"))}return i.step=15,i.autoExpandSelection=!0,i.initialize(n),i}return i(e,t),Object.defineProperty(e.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputType",{get:function(){return this._tbx.type},set:function(t){this._tbx.type=o.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){(t=o.asDate(t,!this.isRequired))&&(null!=this._min&&this._getTime(t)<this._getTime(this._min)&&(t=o.DateTime.fromDateTime(t,this._min)),null!=this._max&&this._getTime(t)>this._getTime(this._max)&&(t=o.DateTime.fromDateTime(t,this._max))),this._setText(t?o.Globalize.format(t,this.format):"",!0),this.selectedItem&&this.selectedItem.value&&(t=o.DateTime.fromDateTime(t,this.selectedItem.value)),t==this._value||o.DateTime.equals(t,this._value)||(this._value=t,this.onValueChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._tbx.value},set:function(t){t!=this.text&&(this._setText(t,!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=o.asDate(t,!0),this.isDroppedDown=!1,this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=o.asDate(t,!0),this.isDroppedDown=!1,this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){this._step=o.asNumber(t,!0),this.isDroppedDown=!1,this._updateItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._format},set:function(t){t!=this.format&&(this._format=o.asString(t),this._tbx.value=o.Globalize.format(this.value,this.format),o.hasItems(this.collectionView)&&this._updateItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._msk.mask},set:function(t){this._msk.mask=o.asString(t)},enumerable:!0,configurable:!0}),e.prototype.onValueChanged=function(t){this.valueChanged.raise(this,t)},e.prototype.onItemsSourceChanged=function(e){t.prototype.onItemsSourceChanged.call(this,e),this._hasCustomItems=null!=this.itemsSource},e.prototype._updateInputSelection=function(e){if(this._delKey)t.prototype._updateInputSelection.call(this,e);else{for(var n=this._tbx.value;e<n.length&&!n[e].match(/[a-z0-9]/i);)e++;o.setSelectionRange(this._tbx,e,this._tbx.value.length)}},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this.isDroppedDown=!1,this._msk.refresh(),this._tbx.value=o.Globalize.format(this.value,this.format),this._updateItems()},e.prototype.onSelectedIndexChanged=function(e){if(this.selectedIndex>-1&&!this._settingText){var n=this.value?this.value:o.DateTime.newDate(),i=null!=this.selectedItem.value?this.selectedItem.value:o.Globalize.parseDate(this.text,this.format);this.value=o.DateTime.fromDateTime(n,i)}t.prototype.onSelectedIndexChanged.call(this,e)},e.prototype._updateItems=function(){if(!this._hasCustomItems){var t=[],e=o.DateTime.newDate(0,0,0,0,0),n=o.DateTime.newDate(0,0,0,23,59,59);if(this.min&&e.setHours(this.min.getHours(),this.min.getMinutes(),this.min.getSeconds()),this.max&&n.setHours(this.max.getHours(),this.max.getMinutes(),this.max.getSeconds()),o.isNumber(this.step)&&this.step>0)for(var i=e;i<=n;i=o.DateTime.addMinutes(i,this.step))t.push({value:i,text:o.Globalize.format(i,this.format)});var r=this.value;this._settingText=!0,this.displayMemberPath="text",this.selectedValuePath="text",this.itemsSource=t,this._hasCustomItems=!1,this._settingText=!1,this.value=r}},e.prototype._getTime=function(t){return 3600*t.getHours()+60*t.getMinutes()+t.getSeconds()},e.prototype._keydown=function(e){if(t.prototype._keydown.call(this,e),!e.defaultPrevented)switch(e.keyCode){case o.Key.Enter:this.isDroppedDown||(this._commitText(),this.selectAll());break;case o.Key.Escape:this.text=o.Globalize.format(this.value,this.format),this.selectAll()}},e.prototype._commitText=function(){if(this.text||this.isRequired){var t=this.value?o.Globalize.format(this.value,this.format):null;if(this.text!=t){var e=this.selectedItem&&this.selectedItem.value?this.selectedItem.value:o.Globalize.parseDate(this.text,this.format);e?this.value=o.DateTime.fromDateTime(this.value,e):this._tbx.value=t}}else this.value=null},e}(p);e.InputTime=w;var C=function(t){function e(e,n){var i=t.call(this,e)||this;o.addClass(i.hostElement,"wj-inputdatetime"),i._btnTm=i.hostElement.querySelector('[wj-part="btn-tm"]'),i._format="g",i._inputTime=new w(document.createElement("div")),i._inputTime.valueChanged.addHandler(function(){i.value=o.DateTime.fromDateTime(i.value,i._inputTime.value)});var r=i._inputTime.dropDown,s=i._keydown.bind(i);return i.addEventListener(r,"keydown",s,!0),i.addEventListener(r,"blur",function(){i._updateFocusState()},!0),i.addEventListener(i._btn,"mousedown",function(t){i._setDropdown(i.calendar.hostElement)}),i.addEventListener(i._btnTm,"mousedown",function(t){i._inputTime.dropDownCssClass=i.dropDownCssClass,i._setDropdown(r),setTimeout(function(){i._btnclick(t)})}),i.initialize(n),i}return i(e,t),Object.defineProperty(e.prototype,"timeMin",{get:function(){return this._inputTime.min},set:function(t){this._inputTime.min=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeMax",{get:function(){return this._inputTime.max},set:function(t){this._inputTime.max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeFormat",{get:function(){return this._inputTime.format},set:function(t){this._inputTime.format=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeStep",{get:function(){return this._inputTime.step},set:function(t){this._inputTime.step=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputTime",{get:function(){return this._inputTime},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._setDropdown(this.calendar.hostElement),t.prototype.dispose.call(this),this._inputTime.dispose()},e.prototype.refresh=function(e){void 0===e&&(e=!0),this._setDropdown(this.calendar.hostElement),this._inputTime.refresh(),t.prototype.refresh.call(this,e)},e.prototype._updateBtn=function(){t.prototype._updateBtn.call(this),this._btnTm&&(this._btnTm.tabIndex=this._btn.tabIndex,this._btnTm.parentElement.style.display=this._btn.style.display)},e.prototype._clamp=function(t){return t&&(this.min&&t<this.min&&(t=this.min),this.max&&t>this.max&&(t=this.max)),t},e.prototype._commitText=function(){var t=this._tbx.value;if(t||this.isRequired){var e=o.Globalize.parseDate(t,this.format);e?this.value=e:this._tbx.value=o.Globalize.format(this.value,this.format)}else this.value=null},e.prototype._setDropdown=function(t){this._dropDown!=t&&(this.isDroppedDown&&(this.isDroppedDown=!1),this._dropDown=t)},e.prototype._updateDropDown=function(){var e=this._inputTime;this._dropDown==e.dropDown?(this._commitText(),t.prototype._updateDropDown.call(this),e.isRequired=this.isRequired,e.value=this.value,this.isDroppedDown&&e.listBox.showSelection()):t.prototype._updateDropDown.call(this)},e.controlTemplate='<div style="position:relative" class="wj-template"><div class="wj-input"><div class="wj-input-group wj-input-btn-visible"><input wj-part="input" type="text" class="wj-form-control" /><span class="wj-input-group-btn" tabindex="-1"><button wj-part="btn" class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-calendar"></span></button><button wj-part="btn-tm" class="wj-btn wj-btn-default" type="button" tabindex="-1"><span class="wj-glyph-clock"></span></button></span></div></div><div wj-part="dropdown" class="wj-content wj-dropdown-panel" style="display:none;position:absolute;z-index:100;width:auto"></div></div>',e}(b);e.InputDateTime=C;var x=function(t){function e(e,n){var i=t.call(this,e)||this;i._showBtn=!0,i._readOnly=!1,i.textChanged=new o.Event,i.valueChanged=new o.Event;var r=i.hostElement;o.setAttribute(r,"role","spinbutton",!0);var s=i.getTemplate();i.applyTemplate("wj-control wj-content wj-inputnumber",s,{_tbx:"input",_btnUp:"btn-inc",_btnDn:"btn-dec"},"input"),i._tbx.type.match(/number/i)&&(i.inputType="");var a=i._tbx;a.autocomplete="off",a.spellcheck=!1,i._updateSymbols(),i.addEventListener(i._tbx,"compositionstart",function(){i._composing=!0}),i.addEventListener(i._tbx,"compositionend",function(){i._composing=!1,setTimeout(function(){var t=i.text;i._oldText.indexOf(i._chrPct)>-1&&t.indexOf(i._chrPct)<0&&(t+=i._chrPct),i._setText(t)})}),i.addEventListener(a,"keypress",i._keypress.bind(i)),i.addEventListener(a,"keydown",i._keydown.bind(i)),i.addEventListener(a,"input",i._input.bind(i));var l=i._clickSpinner.bind(i);return i.addEventListener(i._btnUp,"click",l),i.addEventListener(i._btnDn,"click",l),i._rptUp=new o._ClickRepeater(i._btnUp.querySelector("button")),i._rptDn=new o._ClickRepeater(i._btnDn.querySelector("button")),i.addEventListener(r,"wheel",function(t){if(!t.defaultPrevented&&!i.isReadOnly&&i.containsFocus()){var e=o.clamp(-t.deltaY,-1,1);i._increment((i.step||1)*e),setTimeout(function(){return i.selectAll()}),t.preventDefault()}}),i.value=0,i.isRequired=!0,i.initialize(n),i}return i(e,t),Object.defineProperty(e.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputType",{get:function(){return this._tbx.type},set:function(t){this._tbx.type=o.asString(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){if(t!=this._value)if(null==(t=o.asNumber(t,!this.isRequired||null==t&&null==this._value)))this._setText("");else if(!isNaN(t)){var e=o.Globalize.format(t,this.format);this._setText(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(t){this._tbx.required=o.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._readOnly},set:function(t){this._readOnly=o.asBoolean(t),this.inputElement.readOnly=this._readOnly,o.toggleClass(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=o.asNumber(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=o.asNumber(t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){this._step=o.asNumber(t,!0),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._format},set:function(t){t!=this.format&&(this._format=o.asString(t),this.refresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._tbx.value},set:function(t){t!=this.text&&(this._oldText=null,this._setText(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(t){this._tbx.placeholder=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSpinner",{get:function(){return this._showBtn},set:function(t){this._showBtn=o.asBoolean(t),this._updateBtn()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repeatButtons",{get:function(){return!this._rptUp.disabled},set:function(t){this._rptUp.disabled=this._rptDn.disabled=!o.asBoolean(t)},enumerable:!0,configurable:!0}),e.prototype.selectAll=function(){var t=this._tbx;o.setSelectionRange(t,0,t.value.length)},e.prototype.onTextChanged=function(t){this.textChanged.raise(this,t),this._updateState()},e.prototype.onValueChanged=function(t){this._updateAria(),this.valueChanged.raise(this,t)},e.prototype.dispose=function(){this._rptUp.element=null,this._rptDn.element=null,t.prototype.dispose.call(this)},e.prototype.onGotFocus=function(e){this.isTouching||(this._tbx.focus(),this.selectAll()),t.prototype.onGotFocus.call(this,e)},e.prototype.onLostFocus=function(e){this._composing&&(this._composing=!1,this._setText(this.text));var n=this._clamp(this.value),i=o.Globalize.format(n,this.format);this._setText(i),t.prototype.onLostFocus.call(this,e)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this._updateSymbols();var n=o.Globalize.format(this.value,this.format);this._setText(n)},e.prototype._updateSymbols=function(){var t=o.culture.Globalize.numberFormat,e=this.format?this.format.match(/([a-z])(\d*)(,*)(.*)/i):null;this._chrDec=t["."]||".",this._chrNeg=t["-"]||"-",this._chrPls=t["+"]||"+",this._chrPct=t["%"]||"%",this._chrCur=e&&e[4]?e[4]:t.currency.symbol||"$",this._fmtSpc=e&&e[1]?e[1].toLowerCase():"n",this._fmtPrc=e&&e[2]?parseInt(e[2]):null,this._rxSym=new RegExp("^[%+\\-() \\"+this._chrDec+"\\"+this._chrCur+"\\"+this._chrNeg+"\\"+this._chrPls+"\\"+this._chrPct+"]*$"),this._rxNeg=new RegExp("(\\-|\\(|\\"+this._chrNeg+")")},e.prototype._clamp=function(t){return o.clamp(t,this.min,this.max)},e.prototype._isNumeric=function(t,e){var n=t==this._chrDec||t>="0"&&t<="9",i="x"==this._fmtSpc;return!n&&i&&(n=t>="a"&&t<="f"||t>="A"&&t<="F"),n||e||i||(n=t==this._chrPls||t==this._chrNeg||"("==t||")"==t),n},e.prototype._getInputRange=function(t){for(var e=[0,0],n=this.text,i=!1,o=0;o<n.length;o++)this._isNumeric(n[o],t)&&(i||(e[0]=o,i=!0),e[1]=o+1);return e},e.prototype._flipSign=function(){var t=this._getSelStartDigits();this.value*=-1,this._setSelStartDigits(t)},e.prototype._getSelStartDigits=function(){for(var t=0,e=this._tbx.selectionStart,n=this._tbx.value,i=0;i<n.length&&i<e;i++)this._isNumeric(n[i],!0)&&t++;return t},e.prototype._setSelStartDigits=function(t){for(var e=this._tbx.value,n=0;n<e.length&&t>=0;n++)if(this._isNumeric(e[n],!0)){if(!t){o.setSelectionRange(this._tbx,n);break}t--}else if(!t){o.setSelectionRange(this._tbx,n);break}},e.prototype._increment=function(t){if(t){var e=this._clamp(o.isNumber(this.value)?this.value+t:0),n=o.Globalize.format(e,this.format,!1,!1);this._setText(n)}},e.prototype._updateBtn=function(){var t=this.showSpinner&&!!this.step,e=t;o.setCss([this._btnUp,this._btnDn],{display:t?"":"none"}),o.toggleClass(this.hostElement,"wj-input-show-spinner",t),o.enable(this._btnUp,e),o.enable(this._btnDn,e),this._updateAria()},e.prototype._setText=function(t){if(!this._composing){var e=this._tbx,n=this._rxNeg.test(t),i=this._delKey;if(t&&this._rxSym.test(t)&&(t=this.isRequired||!i?"0":""),this._delKey=!1,i&&0==this.value&&!this.isRequired&&(t=""),!t){if(!this.isRequired)return e.value="",null!=this._value&&(this._value=null,this.onValueChanged()),this._oldText&&(this._oldText=t,this.onTextChanged()),void this._updateBtn();t="0"}var r=this._format||(t.indexOf(this._chrDec)>-1?"n2":"n0"),s=o.Globalize.parseFloat(t,r);if(isNaN(s))e.value=this._oldText;else{var a=o.Globalize.format(s,r,!1);n&&s>=0&&!i&&(a=this._chrNeg+a),null!=this._fmtPrc&&"g"!=this._fmtSpc||!i&&e.value.match(/\.0?$/)&&(a=t+("0"==t?this._chrDec:"")),e.value!=a&&(e.value=a,s=o.Globalize.parseFloat(a,this.format)),s!=this._value&&(this._value=s,this.onValueChanged()),this.text!=this._oldText&&(this._oldText=this.text,this.onTextChanged()),this._updateBtn()}}},e.prototype._keypress=function(t){if(!(t.defaultPrevented||this._composing||this.isReadOnly)&&t.charCode&&!t.ctrlKey&&!t.metaKey){var e=this._tbx,n=String.fromCharCode(t.charCode);if(this._isNumeric(n,!1)){var i=this._getInputRange(!0),r=e.selectionStart,s=e.selectionEnd;if(r<i[0]&&s<e.value.length&&(s=Math.max(s,i[0]),o.setSelectionRange(e,i[0],s)),r>=i[1]){var a=null!=this._fmtPrc?this._fmtPrc:2,l=e.value.indexOf(this._chrDec);l>-1&&r-l>a&&t.preventDefault()}}else t.preventDefault();switch(n){case"-":case this._chrNeg:this.min>=0?this.value<0&&this._flipSign():this.value&&e.selectionStart==e.selectionEnd?this._flipSign():this._clamp(-1)<0&&(e.value=this._chrNeg,o.setSelectionRange(e,1)),t.preventDefault();break;case"+":case this._chrPls:this.value<0&&this._flipSign(),t.preventDefault();break;case this._chrDec:if(0==this._fmtPrc)t.preventDefault();else{var h=e.value.indexOf(n);h>-1&&(e.selectionStart<=h&&h++,o.setSelectionRange(e,h),t.preventDefault())}}}},e.prototype._keydown=function(t){var e=this;if(this._delKey=!1,!t.defaultPrevented&&!this._composing){var n=this._tbx,i=n.value,r=n.selectionStart,s=n.selectionEnd;switch(t.keyCode){case 65:t.ctrlKey&&(setTimeout(function(){e.selectAll()}),t.preventDefault());break;case o.Key.Up:case o.Key.Down:this.step&&!this.isReadOnly&&(this._increment(this.step*(t.keyCode==o.Key.Up?1:-1)),setTimeout(function(){e.selectAll()}),t.preventDefault());break;case o.Key.Back:if(this._delKey=!0,s-r<2&&!this.isReadOnly){var a=i[s-1];a!=this._chrDec&&a!=this._chrPct&&")"!=a||(setTimeout(function(){s=a==e._chrPct?e._getInputRange(!0)[1]:s-1,o.setSelectionRange(n,s)}),t.preventDefault())}break;case o.Key.Delete:if(this._delKey=!0,s-r<2&&!this.isReadOnly)if("0"==i&&1==r)o.setSelectionRange(n,0);else{var l=i[r];l!=this._chrDec&&l!=this._chrPct||(setTimeout(function(){o.setSelectionRange(n,r+1)}),t.preventDefault())}}}},e.prototype._input=function(t){var e=this;this._composing||setTimeout(function(){var t=e._tbx,n=t.value,i=n.indexOf(e._chrDec),r=t.selectionStart,s=e._getSelStartDigits();if("p"==e._fmtSpc&&n.length&&n.indexOf(e._chrPct)<0&&(n+=e._chrPct),e._setText(n),e.containsFocus()){var a=t.value,l=a.indexOf(e._chrDec),h=e._getInputRange(!0);if(n==e._chrNeg+e._chrDec&&l>-1)return void o.setSelectionRange(t,l+1);if(n[0]==e._chrNeg&&a[0]!=e._chrNeg)return void(1==a.length?o.setSelectionRange(t,1):e._setSelStartDigits(s));n?n==e._chrDec&&l>-1?r=l+1:r<=i&&l>-1||i<0&&l<0?r+=a.length-n.length:i<0&&l>-1&&(r=l):r=l>-1?l:h[1],r=o.clamp(r,h[0],h[1]),o.setSelectionRange(t,r)}})},e.prototype._clickSpinner=function(t){var e=this;t.defaultPrevented||this.isReadOnly||!this.step||(this._increment(this.step*(o.contains(this._btnUp,t.target)?1:-1)),this.isTouching||setTimeout(function(){return e.selectAll()}))},e.prototype._updateAria=function(){var t=this.hostElement;t&&(o.setAttribute(t,"aria-valuemin",this.min),o.setAttribute(t,"aria-valuemax",this.max),o.setAttribute(t,"aria-valuenow",this.value))},e.controlTemplate='<div class="wj-input"><div class="wj-input-group"><span wj-part="btn-dec" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1">-</button></span><input type="tel" wj-part="input" class="wj-form-control wj-numeric"/><span wj-part="btn-inc" class="wj-input-group-btn" tabindex="-1"><button class="wj-btn wj-btn-default" type="button" tabindex="-1">+</button></span></div></div>',e}(o.Control);e.InputNumber=x;var j=function(t){function e(e,n){var i=t.call(this,e)||this;i.valueChanged=new o.Event;var r=i.getTemplate();if(i.applyTemplate("wj-control wj-content wj-inputmask",r,{_tbx:"input"},"input"),"INPUT"==i._orgTag){var s=i._tbx.getAttribute("value");s&&(i.value=s)}return i._msk=new o._MaskProvider(i._tbx),i.isRequired=!0,i.initialize(n),i.addEventListener(i._tbx,"input",function(){setTimeout(function(){i.onValueChanged()})}),i}return i(e,t),Object.defineProperty(e.prototype,"inputElement",{get:function(){return this._tbx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._tbx.value},set:function(t){if(t!=this.value){this._tbx.value=o.asString(t);var e=o.getActiveElement();this._tbx.selectionStart=this._tbx.value.length,e&&e!=o.getActiveElement()&&e.focus(),t=this._msk._applyMask(),this._tbx.value=t,this.onValueChanged()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rawValue",{get:function(){return this._msk.getRawValue()},set:function(t){t!=this.rawValue&&(this.value=o.asString(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._msk.mask},set:function(t){var e=this.value;this._msk.mask=o.asString(t),this.value!=e&&this.onValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"promptChar",{get:function(){return this._msk.promptChar},set:function(t){var e=this.value;this._msk.promptChar=t,this.value!=e&&this.onValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._tbx.placeholder},set:function(t){this._tbx.placeholder=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maskFull",{get:function(){return this._msk.maskFull},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){return this._tbx.required},set:function(t){this._tbx.required=o.asBoolean(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return this._tbx.readOnly},set:function(t){this._tbx.readOnly=o.asBoolean(t),o.toggleClass(this.hostElement,"wj-state-readonly",this.isReadOnly)},enumerable:!0,configurable:!0}),e.prototype.selectAll=function(){var t=this._msk.getMaskRange();o.setSelectionRange(this._tbx,t[0],t[1]+1)},e.prototype.onValueChanged=function(t){this.value!=this._oldValue&&(this._oldValue=this.value,this.valueChanged.raise(this,t)),this._updateState()},e.prototype._updateState=function(){t.prototype._updateState.call(this),o.toggleClass(this.hostElement,"wj-state-invalid",!this._pristine&&this._tbx.value&&!this.maskFull)},e.prototype.dispose=function(){this._msk.input=null,t.prototype.dispose.call(this)},e.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this._msk.refresh()},e.prototype.onGotFocus=function(e){t.prototype.onGotFocus.call(this,e),this.selectAll()},e.controlTemplate='<div class="wj-input"><div class="wj-input-group"><input wj-part="input" class="wj-form-control"/></div></div>',e}(o.Control);e.InputMask=j;var S=function(t){function e(e,n){var i=t.call(this,e)||this;return i.valueChanged=new o.Event,o.addClass(i.hostElement,"wj-inputcolor"),i._tbx.style.paddingLeft="24px",i._ePreview=o.createElement('<div class="wj-inputcolorbox" style="position:absolute;left:6px;top:6px;width:12px;bottom:6px;border:1px solid black"></div>',i.hostElement.firstElementChild),"INPUT"==i._orgTag&&(i._tbx.type="",i._commitText()),i.value="#ffffff",i.isRequired=!0,i.initialize(n),i.addEventListener(i._colorPicker.hostElement,"click",function(t){var e=t.target;e&&"DIV"==e.tagName&&(o.closest(e,'[wj-part="div-pal"]')||o.closest(e,'[wj-part="div-pv"]'))&&e.style.backgroundColor&&(i.isDroppedDown=!1)}),i}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t!=this.value&&(!t&&this.isRequired||(this.text=o.asString(t)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._tbx.value},set:function(t){t!=this.text&&(this._setText(o.asString(t),!0),this._commitText())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAlphaChannel",{get:function(){return this._colorPicker.showAlphaChannel},set:function(t){this._colorPicker.showAlphaChannel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"palette",{get:function(){return this._colorPicker.palette},set:function(t){this._colorPicker.palette=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorPicker",{get:function(){return this._colorPicker},enumerable:!0,configurable:!0}),e.prototype.onValueChanged=function(t){this.valueChanged.raise(this,t)},e.prototype._createDropDown=function(){var t=this;this._colorPicker=new u(this._dropDown),o.setCss(this._dropDown,{minWidth:420,minHeight:200}),this._colorPicker.valueChanged.addHandler(function(){t.value=t._colorPicker.value})},e.prototype._keydown=function(e){if(!e.defaultPrevented)switch(e.keyCode){case o.Key.Enter:this._commitText(),this.selectAll();break;case o.Key.Escape:this.text=this.value,this.selectAll()}t.prototype._keydown.call(this,e)},e.prototype._commitText=function(){if(this.value!=this.text){if(!this.isRequired&&!this.text)return this._value=this.text,void(this._ePreview.style.backgroundColor="");o.Color.fromString(this.text)?(this._colorPicker.value=this.text,this._value=this._colorPicker.value,this._ePreview.style.backgroundColor=this.value,this.onValueChanged()):this.text=this._value?this._value:""}},e}(l);e.InputColor=S},kgmk:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n("GnYm"),s=n("CcnG"),a=n("CcnG"),l=n("CcnG"),h=n("Ip0R"),u=n("8X1S");e.wjFlexGridDetailMeta={selector:"[wjFlexGridDetail]",inputs:["wjFlexGridDetail","maxHeight","detailVisibilityMode","rowHasDetail","isAnimated"],outputs:["initialized"],exportAs:"wjFlexGridDetail",providers:[]};var c=function(t){function n(e,n,i,o,r,s){var a=t.call(this,i)||this;return a.isInitialized=!1,a._wjBehaviour=u.WjDirectiveBehavior.attach(a,e,n,i),a._viewContainerRef=o,a._templateRef=r,a._domRenderer=s,a._init(),a.created(),a}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype._init=function(){var t=this;this.createDetailCell=function(e,i){var o=u.WjDirectiveBehavior.instantiateTemplate(t.grid.hostElement,t._viewContainerRef,t._templateRef,t._domRenderer),r=o.viewRef,s=o.rootElement;return r.context.row=e,r.context.col=i,r.context.item=e.dataItem,s.parentElement.removeChild(s),s[n._viewRefProp]=r,s},this.disposeDetailCell=function(e){var i;if(e.detail&&(i=e.detail[n._viewRefProp])){e.detail[n._viewRefProp]=null;var o=t._viewContainerRef.indexOf(i);o>-1&&t._viewContainerRef.remove(o)}}},n._viewRefProp="__wj_viewRef",n.meta={outputs:e.wjFlexGridDetailMeta.outputs},n.decorators=[{type:a.Directive,args:[{selector:e.wjFlexGridDetailMeta.selector,inputs:e.wjFlexGridDetailMeta.inputs,outputs:e.wjFlexGridDetailMeta.outputs,exportAs:e.wjFlexGridDetailMeta.exportAs,providers:[{provide:"WjComponent",useExisting:a.forwardRef(function(){return n})}].concat(e.wjFlexGridDetailMeta.providers)}]}],n.ctorParameters=function(){return[{type:a.ElementRef,decorators:[{type:l.Inject,args:[a.ElementRef]}]},{type:a.Injector,decorators:[{type:l.Inject,args:[a.Injector]}]},{type:void 0,decorators:[{type:l.Inject,args:["WjComponent"]},{type:l.SkipSelf},{type:a.Optional}]},{type:a.ViewContainerRef,decorators:[{type:l.Inject,args:[a.ViewContainerRef]}]},{type:a.TemplateRef,decorators:[{type:l.Inject,args:[a.TemplateRef]}]},{type:a.Renderer,decorators:[{type:l.Inject,args:[a.Renderer]}]}]},n}(r.FlexGridDetailProvider);e.WjFlexGridDetail=c;var d=[c],p=function(){function t(){}return t.decorators=[{type:s.NgModule,args:[{imports:[u.WjDirectiveBaseModule,h.CommonModule],declarations:d.slice(),exports:d.slice()}]}],t.ctorParameters=function(){return[]},t}();e.WjGridDetailModule=p},qUBY:function(t,e,n){"use strict";n.r(e);var i,o,r=n("CcnG");n("0GgQ"),n("HB89"),function(t){t.Grid="Grid",t.PieChart="PieChart"}(i||(i={})),function(t){t.Profile="Profile",t.Deals="Deals"}(o||(o={})),n("eUd/");var s=n("Xyxl"),a=n("PCsq"),l=n("F5nt"),h=function(){function t(t,e,n,o,r){var s;this.title=t,this.modalService=e,this.formBuilder=n,this.service=o,this.configService=r,this.borrowingProfileApi="/api/BorrowingProfile/",this.profileDetailsUrl=this.borrowingProfileApi+"profile-trades/",this.profileDealsUrl=this.borrowingProfileApi+"profile-deals/",this.displayType=i.Grid,this.displayTypes=(s=i,Object.keys(s).map(function(t){return{value:s[t],title:t}})),this.todayDate=new Date,this.pageTitle="Borrowing Profile"}return t.prototype.ngOnInit=function(){var t=this;this.configService.loadBorrowingProfileConfigData().then(function(){return t.initComponent()})},t.prototype.initComponent=function(){var t=this;this.title.setTitle(this.configService.borrowingProfileConfig.applicationName),this.service.post(null,this.borrowingProfileApi).subscribe(function(e){t.data_vm=e,t.initForm()})},t.prototype.initForm=function(){this.filterFormGroup=this.formBuilder.group({display:[this.data_vm.filter.display],includeCpp:[this.data_vm.filter.includeCpp],includeOiic:[this.data_vm.filter.includeOiic],startFiscalYear:[this.data_vm.filter.startFiscalYear],viewMode:[this.data_vm.filter.viewMode],profileName:[this.data_vm.filter.profileName]})},t.prototype.getTrades=function(t,e,n){var i=this;this.filterFormGroup.value.profileName=t,this.service.post(this.filterFormGroup.value,this.profileDetailsUrl+e).subscribe(function(t){i.profileDetails=t,i.openModal(n)})},t.prototype.getProfileDeals=function(t,e){var n=this;this.filterFormGroup.value.profileName=t,this.service.post(this.filterFormGroup.value,this.profileDealsUrl).subscribe(function(i){n.profileDeals=i,n.profileName=t,n.openModal(e)})},t.prototype.postFilterData=function(){var t=this;this.service.post(this.filterFormGroup.value,this.borrowingProfileApi).subscribe(function(e){t.data_vm=e})},t.prototype.selectionChanged=function(t,e){this.getTrades(t.collectionView.currentItem.profileName,0,e)},t.prototype.openModal=function(t){this.modalService.open(t,{size:"lg",centered:!0})},t.prototype.isAheadOfPace=function(t,e){return 0!==t&&e.startsWith("Pace")?{"background-color":t>this.data_vm.elapsedTime?"rgb(90,235,80)":"rgb(235,80,90)"}:{"background-color":""}},t.prototype.addFooterRow=function(t){var e=new s.GroupRow;t.columnFooters.rows.push(e),t.columnFooters.setCellData(0,0,"Total Actual Borrowing:")},t}(),u=function(){},c=n("gIcY"),d=n("xuMK"),p=n("Ip0R"),f=n("8X1S"),g=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function _(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),r["\u0275ncd"](null,0)],null,null)}var m=n("J2jl"),v=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function y(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),r["\u0275ncd"](null,0)],null,null)}var b=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function w(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),r["\u0275ncd"](null,0)],null,null)}var C=n("+Fm5"),x=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function j(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"div",[],null,null,null,null,null)),r["\u0275ncd"](null,0)],null,null)}var S=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function E(t){return r["\u0275vid"](0,[],null,null)}var I=n("ZYjt"),D=n("iCtU"),P=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function M(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,55,"div",[["class","form-group form-inline wj-context-menu"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,21,"span",[["class","col-3 form-inline"]],null,null,null,null,null)),(t()(),r["\u0275eld"](2,0,null,null,20,"div",[["class","btn-group btn-group-toggle"],["ngbRadioGroup",""]],null,null,null,null,null)),(t()(),r["\u0275eld"](3,0,null,null,9,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(t()(),r["\u0275eld"](4,0,null,null,6,"input",[["class","form-check-input"],["formControlName","display"],["ng-selected","displayType===displayTypes[0].value"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,5)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,5).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,5)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,5)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,6).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,6).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.displayType=n)&&i),i},null,null)),r["\u0275did"](5,16384,null,0,c.DefaultValueAccessor,[r.Renderer2,r.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),r["\u0275did"](6,212992,null,0,c.RadioControlValueAccessor,[r.Renderer2,r.ElementRef,c["\u0275angular_packages_forms_forms_i"],r.Injector],{formControlName:[0,"formControlName"],value:[1,"value"]},null),r["\u0275prd"](1024,null,c.NG_VALUE_ACCESSOR,function(t,e){return[t,e]},[c.DefaultValueAccessor,c.RadioControlValueAccessor]),r["\u0275did"](8,671744,null,0,c.FormControlName,[[3,c.ControlContainer],[8,null],[8,null],[6,c.NG_VALUE_ACCESSOR],[2,c["\u0275angular_packages_forms_forms_j"]]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,c.NgControl,null,[c.FormControlName]),r["\u0275did"](10,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),(t()(),r["\u0275eld"](11,0,null,null,1,"label",[["class","space-right2"],["ngbButtonLabel",""]],null,null,null,null,null)),(t()(),r["\u0275ted"](12,null,[" - "," View"])),(t()(),r["\u0275eld"](13,0,null,null,9,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(t()(),r["\u0275eld"](14,0,null,null,6,"input",[["class","form-check-input"],["formControlName","display"],["ng-selected","displayType===displayTypes[1].value"],["type","radio"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r["\u0275nov"](t,15)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,15).onTouched()&&i),"compositionstart"===e&&(i=!1!==r["\u0275nov"](t,15)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r["\u0275nov"](t,15)._compositionEnd(n.target.value)&&i),"change"===e&&(i=!1!==r["\u0275nov"](t,16).onChange()&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,16).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.displayType=n)&&i),i},null,null)),r["\u0275did"](15,16384,null,0,c.DefaultValueAccessor,[r.Renderer2,r.ElementRef,[2,c.COMPOSITION_BUFFER_MODE]],null,null),r["\u0275did"](16,212992,null,0,c.RadioControlValueAccessor,[r.Renderer2,r.ElementRef,c["\u0275angular_packages_forms_forms_i"],r.Injector],{formControlName:[0,"formControlName"],value:[1,"value"]},null),r["\u0275prd"](1024,null,c.NG_VALUE_ACCESSOR,function(t,e){return[t,e]},[c.DefaultValueAccessor,c.RadioControlValueAccessor]),r["\u0275did"](18,671744,null,0,c.FormControlName,[[3,c.ControlContainer],[8,null],[8,null],[6,c.NG_VALUE_ACCESSOR],[2,c["\u0275angular_packages_forms_forms_j"]]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,c.NgControl,null,[c.FormControlName]),r["\u0275did"](20,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),(t()(),r["\u0275eld"](21,0,null,null,1,"label",[["class","space space-left2 clearfix"],["ngbButtonLabel",""]],null,null,null,null,null)),(t()(),r["\u0275ted"](22,null,[" - "," View"])),(t()(),r["\u0275eld"](23,0,null,null,19,"span",[["class","col-4 form-inline "]],null,null,null,null,null)),(t()(),r["\u0275eld"](24,0,null,null,18,"div",[["class","btn-group btn-group-toggle"],["ngbCheckBoxGroup",""]],null,null,null,null,null)),(t()(),r["\u0275eld"](25,0,null,null,8,"div",[["class","form-check form-check-inline float-right"]],null,null,null,null,null)),(t()(),r["\u0275eld"](26,0,null,null,5,"input",[["class","form-control mb-2 mr-sm-2"],["formControlName","includeCpp"],["id","inlineFormIncludeCpp"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"change"===e&&(i=!1!==r["\u0275nov"](t,27).onChange(n.target.checked)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,27).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.data_vm.filter.includeCpp=n)&&i),i},null,null)),r["\u0275did"](27,16384,null,0,c.CheckboxControlValueAccessor,[r.Renderer2,r.ElementRef],null,null),r["\u0275prd"](1024,null,c.NG_VALUE_ACCESSOR,function(t){return[t]},[c.CheckboxControlValueAccessor]),r["\u0275did"](29,671744,null,0,c.FormControlName,[[3,c.ControlContainer],[8,null],[8,null],[6,c.NG_VALUE_ACCESSOR],[2,c["\u0275angular_packages_forms_forms_j"]]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,c.NgControl,null,[c.FormControlName]),r["\u0275did"](31,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),(t()(),r["\u0275eld"](32,0,null,null,1,"label",[["class","space-right2"],["ngbButtonLabel",""]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,[" - Include CPP"])),(t()(),r["\u0275eld"](34,0,null,null,8,"div",[["class","form-check form-check-inline"]],null,null,null,null,null)),(t()(),r["\u0275eld"](35,0,null,null,5,"input",[["class","form-control mb-2 mr-sm-2"],["formControlName","includeOiic"],["id","inlineFormIncludeOiic"],["type","checkbox"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(t,e,n){var i=!0,o=t.component;return"change"===e&&(i=!1!==r["\u0275nov"](t,36).onChange(n.target.checked)&&i),"blur"===e&&(i=!1!==r["\u0275nov"](t,36).onTouched()&&i),"ngModelChange"===e&&(i=!1!==(o.data_vm.filter.includeOiic=n)&&i),i},null,null)),r["\u0275did"](36,16384,null,0,c.CheckboxControlValueAccessor,[r.Renderer2,r.ElementRef],null,null),r["\u0275prd"](1024,null,c.NG_VALUE_ACCESSOR,function(t){return[t]},[c.CheckboxControlValueAccessor]),r["\u0275did"](38,671744,null,0,c.FormControlName,[[3,c.ControlContainer],[8,null],[8,null],[6,c.NG_VALUE_ACCESSOR],[2,c["\u0275angular_packages_forms_forms_j"]]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,c.NgControl,null,[c.FormControlName]),r["\u0275did"](40,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),(t()(),r["\u0275eld"](41,0,null,null,1,"label",[["class","space-right2"],["ngbButtonLabel",""]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["- Include OIIC"])),(t()(),r["\u0275eld"](43,0,null,null,9,"span",[["class","col-3 form-inline"]],null,null,null,null,null)),(t()(),r["\u0275eld"](44,0,null,null,1,"label",[["for","inlineFormInputGroupDisplayMode"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Fiscal Year: "])),(t()(),r["\u0275eld"](46,0,null,null,6,"wj-combo-box",[["class","wj-dropdown"],["formControlName","startFiscalYear"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,_,g)),r["\u0275did"](47,4440064,null,0,d.WjComboBox,[r.ElementRef,r.Injector,[3,"WjComponent"]],{showDropDownButton:[0,"showDropDownButton"],displayMemberPath:[1,"displayMemberPath"],selectedValuePath:[2,"selectedValuePath"],isEditable:[3,"isEditable"],itemsSource:[4,"itemsSource"],selectedValue:[5,"selectedValue"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[d.WjComboBox]),r["\u0275prd"](1024,null,c.NG_VALUE_ACCESSOR,function(t){return[f.WjValueAccessorFactory(t)]},["WjComponent"]),r["\u0275did"](50,671744,null,0,c.FormControlName,[[3,c.ControlContainer],[8,null],[8,null],[6,c.NG_VALUE_ACCESSOR],[2,c["\u0275angular_packages_forms_forms_j"]]],{name:[0,"name"]},null),r["\u0275prd"](2048,null,c.NgControl,null,[c.FormControlName]),r["\u0275did"](52,16384,null,0,c.NgControlStatus,[[4,c.NgControl]],null,null),(t()(),r["\u0275eld"](53,0,null,null,2,"span",[["class","col-2 form-inline"]],null,null,null,null,null)),(t()(),r["\u0275eld"](54,0,null,null,1,"button",[["class","btn btn-outline-primary float-right"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["Get data"]))],function(t,e){var n=e.component;t(e,6,0,"display",n.displayTypes[0].value),t(e,8,0,"display",n.displayType),t(e,16,0,"display",n.displayTypes[1].value),t(e,18,0,"display",n.displayType),t(e,29,0,"includeCpp",n.data_vm.filter.includeCpp),t(e,38,0,"includeOiic",n.data_vm.filter.includeOiic),t(e,47,0,!0,"displayYear","startCalendarYear",!1,n.data_vm.fiscals,n.data_vm.filter.startFiscalYear),t(e,50,0,"startFiscalYear")},function(t,e){var n=e.component;t(e,4,0,r["\u0275nov"](e,10).ngClassUntouched,r["\u0275nov"](e,10).ngClassTouched,r["\u0275nov"](e,10).ngClassPristine,r["\u0275nov"](e,10).ngClassDirty,r["\u0275nov"](e,10).ngClassValid,r["\u0275nov"](e,10).ngClassInvalid,r["\u0275nov"](e,10).ngClassPending),t(e,12,0,n.displayTypes[0].title),t(e,14,0,r["\u0275nov"](e,20).ngClassUntouched,r["\u0275nov"](e,20).ngClassTouched,r["\u0275nov"](e,20).ngClassPristine,r["\u0275nov"](e,20).ngClassDirty,r["\u0275nov"](e,20).ngClassValid,r["\u0275nov"](e,20).ngClassInvalid,r["\u0275nov"](e,20).ngClassPending),t(e,22,0,n.displayTypes[1].title),t(e,26,0,r["\u0275nov"](e,31).ngClassUntouched,r["\u0275nov"](e,31).ngClassTouched,r["\u0275nov"](e,31).ngClassPristine,r["\u0275nov"](e,31).ngClassDirty,r["\u0275nov"](e,31).ngClassValid,r["\u0275nov"](e,31).ngClassInvalid,r["\u0275nov"](e,31).ngClassPending),t(e,35,0,r["\u0275nov"](e,40).ngClassUntouched,r["\u0275nov"](e,40).ngClassTouched,r["\u0275nov"](e,40).ngClassPristine,r["\u0275nov"](e,40).ngClassDirty,r["\u0275nov"](e,40).ngClassValid,r["\u0275nov"](e,40).ngClassInvalid,r["\u0275nov"](e,40).ngClassPending),t(e,46,0,r["\u0275nov"](e,52).ngClassUntouched,r["\u0275nov"](e,52).ngClassTouched,r["\u0275nov"](e,52).ngClassPristine,r["\u0275nov"](e,52).ngClassDirty,r["\u0275nov"](e,52).ngClassValid,r["\u0275nov"](e,52).ngClassInvalid,r["\u0275nov"](e,52).ngClassPending)})}function T(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,6,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,e,n){var i=!0,o=t.component;return"submit"===e&&(i=!1!==r["\u0275nov"](t,2).onSubmit(n)&&i),"reset"===e&&(i=!1!==r["\u0275nov"](t,2).onReset()&&i),"ngSubmit"===e&&(i=!1!==o.postFilterData()&&i),i},null,null)),r["\u0275did"](1,16384,null,0,c["\u0275angular_packages_forms_forms_bg"],[],null,null),r["\u0275did"](2,540672,null,0,c.FormGroupDirective,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),r["\u0275prd"](2048,null,c.ControlContainer,null,[c.FormGroupDirective]),r["\u0275did"](4,16384,null,0,c.NgControlStatusGroup,[[4,c.ControlContainer]],null,null),(t()(),r["\u0275and"](16777216,null,null,1,null,M)),r["\u0275did"](6,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,2,0,n.filterFormGroup),t(e,6,0,null==n.data_vm?null:n.data_vm.filter)},function(t,e){t(e,0,0,r["\u0275nov"](e,4).ngClassUntouched,r["\u0275nov"](e,4).ngClassTouched,r["\u0275nov"](e,4).ngClassPristine,r["\u0275nov"](e,4).ngClassDirty,r["\u0275nov"](e,4).ngClassValid,r["\u0275nov"](e,4).ngClassInvalid,r["\u0275nov"](e,4).ngClassPending)})}function R(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,2,"span",[["style","cursor:pointer"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getTrades(t.context.item.profileName,0,r["\u0275nov"](t.parent.parent,12))&&i),i},null,null)),(t()(),r["\u0275eld"](1,0,null,null,0,"img",[["src","../../assets/images/eye-black.png"]],null,null,null,null,null)),(t()(),r["\u0275ted"](2,null,[" \xa0"," "]))],null,function(t,e){t(e,2,0,e.context.item.profileName)})}function A(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,2,"span",[["style","cursor:pointer"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getProfileDeals(t.parent.context.item.profileName,r["\u0275nov"](t.parent.parent.parent,13))&&i),i},null,null)),(t()(),r["\u0275eld"](1,0,null,null,0,"img",[["src","../../assets/images/eye-black.png"]],null,null,null,null,null)),(t()(),r["\u0275ted"](2,null,["\xa0",""]))],null,function(t,e){t(e,2,0,e.parent.context.item.deals)})}function O(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,0,"img",[["src","../../assets/images/eye-white.png"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\xa0N/A"]))],null,null)}function k(t){return r["\u0275vid"](0,[(t()(),r["\u0275and"](16777216,null,null,1,null,A)),r["\u0275did"](1,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r["\u0275and"](0,[["noDeals",2]],null,0,null,O))],function(t,e){t(e,1,0,e.context.item.deals>0,r["\u0275nov"](e,2))},null)}function N(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,function(t,e){t(e,1,0,e.parent.context.item.percentBorrowed)})}function L(t){return r["\u0275vid"](0,[(t()(),r["\u0275ted"](-1,null,["N/A"]))],null,null)}function F(t){return r["\u0275vid"](0,[(t()(),r["\u0275and"](16777216,null,null,1,null,N)),r["\u0275did"](1,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r["\u0275and"](0,[["NA",2]],null,0,null,L))],function(t,e){t(e,1,0,e.context.item.percentBorrowed>0,r["\u0275nov"](e,2))},null)}function V(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,function(t,e){t(e,1,0,e.parent.context.item.deals)})}function B(t){return r["\u0275vid"](0,[(t()(),r["\u0275ted"](-1,null,["N/A"]))],null,null)}function H(t){return r["\u0275vid"](0,[(t()(),r["\u0275and"](16777216,null,null,1,null,V)),r["\u0275did"](1,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r["\u0275and"](0,[["noDeals",2]],null,0,null,B))],function(t,e){t(e,1,0,e.context.item.deals>0,r["\u0275nov"](e,2))},null)}function z(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,3,"span",[],null,null,null,null,null)),r["\u0275did"](1,278528,null,0,p.NgStyle,[r.KeyValueDiffers,r.ElementRef,r.Renderer2],{ngStyle:[0,"ngStyle"]},null),(t()(),r["\u0275ted"](2,null,[" ",""])),r["\u0275ppd"](3,2)],function(t,e){t(e,1,0,e.component.isAheadOfPace(e.context.item.provinceAmount,e.context.item.profileName))},function(t,e){t(e,2,0,r["\u0275unv"](e,2,0,t(e,3,0,r["\u0275nov"](e.parent.parent,0),e.context.item.provinceAmount,"0.1-2")))})}function W(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,3,"span",[],null,null,null,null,null)),r["\u0275did"](1,278528,null,0,p.NgStyle,[r.KeyValueDiffers,r.ElementRef,r.Renderer2],{ngStyle:[0,"ngStyle"]},null),(t()(),r["\u0275ted"](2,null,[" ",""])),r["\u0275ppd"](3,2)],function(t,e){t(e,1,0,e.component.isAheadOfPace(e.context.item.oefcAmount,e.context.item.profileName))},function(t,e){t(e,2,0,r["\u0275unv"](e,2,0,t(e,3,0,r["\u0275nov"](e.parent.parent,0),e.context.item.oefcAmount,"0.1-2")))})}function G(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,3,"span",[],null,null,null,null,null)),r["\u0275did"](1,278528,null,0,p.NgStyle,[r.KeyValueDiffers,r.ElementRef,r.Renderer2],{ngStyle:[0,"ngStyle"]},null),(t()(),r["\u0275ted"](2,null,[" ",""])),r["\u0275ppd"](3,2)],function(t,e){t(e,1,0,e.component.isAheadOfPace(e.context.item.consolidatedAmount,e.context.item.profileName))},function(t,e){t(e,2,0,r["\u0275unv"](e,2,0,t(e,3,0,r["\u0275nov"](e.parent.parent,0),e.context.item.consolidatedAmount,"0.1-2")))})}function Y(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,2,"span",[],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,[" ",""])),r["\u0275ppd"](2,2)],null,function(t,e){t(e,1,0,r["\u0275unv"](e,1,0,t(e,2,0,r["\u0275nov"](e.parent.parent.parent,0),e.parent.context.item.percentBorrowed,"1.0-0")))})}function K(t){return r["\u0275vid"](0,[(t()(),r["\u0275ted"](-1,null,["N/A"]))],null,null)}function X(t){return r["\u0275vid"](0,[(t()(),r["\u0275and"](16777216,null,null,1,null,Y)),r["\u0275did"](1,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r["\u0275and"](0,[["NA",2]],null,0,null,K))],function(t,e){t(e,1,0,e.context.item.percentBorrowed>0,r["\u0275nov"](e,2))},null)}function U(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,function(t,e){t(e,1,0,e.parent.context.item.deals)})}function q(t){return r["\u0275vid"](0,[(t()(),r["\u0275ted"](-1,null,["N/A"]))],null,null)}function Z(t){return r["\u0275vid"](0,[(t()(),r["\u0275and"](16777216,null,null,1,null,U)),r["\u0275did"](1,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r["\u0275and"](0,[["noDeals",2]],null,0,null,q))],function(t,e){t(e,1,0,e.context.item.deals>0,r["\u0275nov"](e,2))},null)}function J(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,function(t,e){t(e,1,0,e.parent.context.item.percentBorrowed)})}function Q(t){return r["\u0275vid"](0,[(t()(),r["\u0275ted"](-1,null,["N/A"]))],null,null)}function $(t){return r["\u0275vid"](0,[(t()(),r["\u0275and"](16777216,null,null,1,null,J)),r["\u0275did"](1,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),r["\u0275and"](0,[["NA",2]],null,0,null,Q))],function(t,e){t(e,1,0,e.context.item.percentBorrowed>0,r["\u0275nov"](e,2))},null)}function tt(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,96,"div",[["class","App-panel"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,30,"wj-flex-grid",[],null,null,null,y,v)),r["\u0275prd"](5120,null,c.NG_VALUE_ACCESSOR,function(t){return[f.WjValueAccessorFactory(t)]},["WjComponent"]),r["\u0275did"](3,4440064,[["profilesGrid",4]],0,m.WjFlexGrid,[r.ElementRef,r.Injector,[3,"WjComponent"],r.ChangeDetectorRef],{allowSorting:[0,"allowSorting"],quickAutoSize:[1,"quickAutoSize"],headersVisibility:[2,"headersVisibility"],isReadOnly:[3,"isReadOnly"],selectionMode:[4,"selectionMode"],showAlternatingRows:[5,"showAlternatingRows"],itemsSource:[6,"itemsSource"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGrid]),(t()(),r["\u0275eld"](5,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](6,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"],width:[2,"width"],maxWidth:[3,"maxWidth"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,R)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](10,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null),(t()(),r["\u0275eld"](11,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](12,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"],width:[2,"width"],maxWidth:[3,"maxWidth"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,k)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](16,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null),(t()(),r["\u0275eld"](17,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](19,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],format:[1,"format"],header:[2,"header"],width:[3,"width"],maxWidth:[4,"maxWidth"]},null),(t()(),r["\u0275eld"](20,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](22,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"],width:[2,"width"],maxWidth:[3,"maxWidth"]},null),(t()(),r["\u0275eld"](23,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](25,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"],width:[2,"width"],maxWidth:[3,"maxWidth"]},null),(t()(),r["\u0275eld"](26,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](27,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"],width:[2,"width"],maxWidth:[3,"maxWidth"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,F)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](31,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null),(t()(),r["\u0275eld"](32,0,null,null,36,"wj-flex-grid",[],null,null,null,y,v)),r["\u0275prd"](5120,null,c.NG_VALUE_ACCESSOR,function(t){return[f.WjValueAccessorFactory(t)]},["WjComponent"]),r["\u0275did"](34,4440064,null,0,m.WjFlexGrid,[r.ElementRef,r.Injector,[3,"WjComponent"],r.ChangeDetectorRef],{headersVisibility:[0,"headersVisibility"],isReadOnly:[1,"isReadOnly"],selectionMode:[2,"selectionMode"],itemsSource:[3,"itemsSource"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGrid]),(t()(),r["\u0275eld"](36,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](38,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],width:[1,"width"],maxWidth:[2,"maxWidth"]},null),(t()(),r["\u0275eld"](39,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](40,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],width:[1,"width"],maxWidth:[2,"maxWidth"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,H)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](44,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null),(t()(),r["\u0275eld"](45,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](46,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],width:[1,"width"],maxWidth:[2,"maxWidth"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,z)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](50,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null),(t()(),r["\u0275eld"](51,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](52,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],width:[1,"width"],maxWidth:[2,"maxWidth"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,W)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](56,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null),(t()(),r["\u0275eld"](57,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](58,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],width:[1,"width"],maxWidth:[2,"maxWidth"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,G)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](62,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null),(t()(),r["\u0275eld"](63,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](64,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],width:[1,"width"],maxWidth:[2,"maxWidth"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,X)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](68,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null),(t()(),r["\u0275eld"](69,0,null,null,27,"wj-flex-grid",[],null,null,null,y,v)),r["\u0275prd"](5120,null,c.NG_VALUE_ACCESSOR,function(t){return[f.WjValueAccessorFactory(t)]},["WjComponent"]),r["\u0275did"](71,4440064,null,0,m.WjFlexGrid,[r.ElementRef,r.Injector,[3,"WjComponent"],r.ChangeDetectorRef],{headersVisibility:[0,"headersVisibility"],isReadOnly:[1,"isReadOnly"],selectionMode:[2,"selectionMode"],itemsSource:[3,"itemsSource"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGrid]),(t()(),r["\u0275eld"](73,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](75,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],width:[1,"width"],maxWidth:[2,"maxWidth"]},null),(t()(),r["\u0275eld"](76,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](77,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],width:[1,"width"],maxWidth:[2,"maxWidth"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,Z)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](81,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null),(t()(),r["\u0275eld"](82,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](84,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],width:[1,"width"],maxWidth:[2,"maxWidth"]},null),(t()(),r["\u0275eld"](85,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](87,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],width:[1,"width"],maxWidth:[2,"maxWidth"]},null),(t()(),r["\u0275eld"](88,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](90,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],width:[1,"width"],maxWidth:[2,"maxWidth"]},null),(t()(),r["\u0275eld"](91,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](92,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],width:[1,"width"],maxWidth:[2,"maxWidth"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,$)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](96,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null)],function(t,e){var n=e.component;t(e,3,0,!1,!0,"Column",!0,"None",!0,null==n.data_vm?null:n.data_vm.profiles),t(e,6,0,"profileName","Profile","*",300),t(e,10,0,"","Cell"),t(e,12,0,"deals","# Deals","*",100),t(e,16,0,"","Cell"),t(e,19,0,"provinceAmount","0.00","Province","*",200),t(e,22,0,"oefcAmount","OEFC","*",200),t(e,25,0,"consolidatedAmount","Consolidated","*",200),t(e,27,0,"percentBorrowed","% of Total","*",100),t(e,31,0,"","Cell"),t(e,34,0,"None",!0,"None",null==n.data_vm?null:n.data_vm.profilesTotals),t(e,38,0,"profileName","*",300),t(e,40,0,"deals","*",100),t(e,44,0,"","Cell"),t(e,46,0,"provinceAmount","*",200),t(e,50,0,"","Cell"),t(e,52,0,"oefcAmount","*",200),t(e,56,0,"","Cell"),t(e,58,0,"consolidatedAmount","*",200),t(e,62,0,"","Cell"),t(e,64,0,"percentBorrowed","*",100),t(e,68,0,"","Cell"),t(e,71,0,"None",!0,"None",null==n.data_vm?null:n.data_vm.hedges),t(e,75,0,"profileName","*",300),t(e,77,0,"deals","*",100),t(e,81,0,"","Cell"),t(e,84,0,"provinceAmount","*",200),t(e,87,0,"oefcAmount","*",200),t(e,90,0,"consolidatedAmount","*",200),t(e,92,0,"percentBorrowed","*",100),t(e,96,0,"","Cell")},null)}function et(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,7,"div",[],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,6,"wj-flex-pie",[],null,[[null,"selectionChanged"]],function(t,e,n){var i=!0;return"selectionChanged"===e&&(i=!1!==t.component.selectionChanged(r["\u0275nov"](t,3),r["\u0275nov"](t.parent,12))&&i),i},j,x)),r["\u0275prd"](5120,null,c.NG_VALUE_ACCESSOR,function(t){return[f.WjValueAccessorFactory(t)]},["WjComponent"]),r["\u0275did"](3,4440064,[["profilesChart",4]],0,C.WjFlexPie,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"],selectionMode:[2,"selectionMode"],itemsSource:[3,"itemsSource"],bindingName:[4,"bindingName"]},{selectionChangedNg:"selectionChanged"}),r["\u0275prd"](2048,null,"WjComponent",null,[C.WjFlexPie]),(t()(),r["\u0275eld"](5,0,null,0,2,"wj-flex-chart-legend",[],null,null,null,E,S)),r["\u0275prd"](6144,null,"WjComponent",null,[C.WjFlexChartLegend]),r["\u0275did"](7,4440064,null,0,C.WjFlexChartLegend,[r.ElementRef,r.Injector,[3,"WjComponent"]],{position:[0,"position"]},null)],function(t,e){var n=e.component;t(e,3,0,"provinceAmount","Borrowing Profiles","Point",null==n.data_vm?null:n.data_vm.profiles,"profileName"),t(e,7,0,"Bottom")},null)}function nt(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"a",[["style","cursor:pointer"],["target","_blank"]],[[8,"href",4]],null,null,null,null)),(t()(),r["\u0275ted"](1,null,["",""]))],null,function(t,e){var n=e.component;t(e,0,0,r["\u0275inlineInterpolate"](2,"",null==n.configService?null:null==n.configService.globalConfig?null:n.configService.globalConfig.debtTicketViewerUrl,"",e.context.item.tradeNum,"")),t(e,1,0,e.context.item.tradeNum)})}function it(t){return r["\u0275vid"](0,[(t()(),r["\u0275ted"](0,null,[" "," "])),r["\u0275ppd"](1,1)],null,function(t,e){t(e,0,0,r["\u0275unv"](e,0,0,t(e,1,0,r["\u0275nov"](e.parent.parent.parent,1),e.context.item.tradeDate)))})}function ot(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,21,"wj-flex-grid",[],null,null,null,y,v)),r["\u0275prd"](5120,null,c.NG_VALUE_ACCESSOR,function(t){return[f.WjValueAccessorFactory(t)]},["WjComponent"]),r["\u0275did"](2,4440064,null,0,m.WjFlexGrid,[r.ElementRef,r.Injector,[3,"WjComponent"],r.ChangeDetectorRef],{headersVisibility:[0,"headersVisibility"],isReadOnly:[1,"isReadOnly"],selectionMode:[2,"selectionMode"],itemsSource:[3,"itemsSource"],sortRowIndex:[4,"sortRowIndex"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGrid]),(t()(),r["\u0275eld"](4,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](5,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,nt)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](9,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null),(t()(),r["\u0275eld"](10,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](11,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"],quickAutoSize:[2,"quickAutoSize"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,it)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](15,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null),(t()(),r["\u0275eld"](16,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](18,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"]},null),(t()(),r["\u0275eld"](19,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](21,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"],width:[2,"width"]},null)],function(t,e){t(e,2,0,"Column",!0,"None",e.component.profileDetails.trades,1),t(e,5,0,"tradeNum","Trade #"),t(e,9,0,"","Cell"),t(e,11,0,"tradeDate","Trade Date",!0),t(e,15,0,"","Cell"),t(e,18,0,"series","Series"),t(e,21,0,"description","Description","*")},null)}function rt(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),(t()(),r["\u0275ted"](2,null,["",""])),(t()(),r["\u0275eld"](3,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["data-dismiss","modal"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.context.dismiss("Cross click")&&i),i},null,null)),(t()(),r["\u0275eld"](4,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\xd7"])),(t()(),r["\u0275eld"](6,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,1,null,ot)),r["\u0275did"](8,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(t,e){var n=e.component;t(e,8,0,null==n.profileDetails?null:n.profileDetails.trades)},function(t,e){var n=e.component;t(e,2,0,null==n.profileDetails?null:n.profileDetails.profileName)})}function st(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"span",[["style","cursor:pointer"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.component.getTrades(t.context.item.profileName,t.context.item.dealId,r["\u0275nov"](t.parent.parent,12))&&i),i},null,null)),(t()(),r["\u0275ted"](1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.context.item.description)})}function at(t){return r["\u0275vid"](0,[(t()(),r["\u0275ted"](0,null,[" "," "])),r["\u0275ppd"](1,1)],null,function(t,e){t(e,0,0,r["\u0275unv"](e,0,0,t(e,1,0,r["\u0275nov"](e.parent.parent,1),e.context.item.tradeDate)))})}function lt(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(t()(),r["\u0275eld"](1,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),(t()(),r["\u0275ted"](2,null,["",""])),(t()(),r["\u0275eld"](3,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["data-dismiss","modal"],["type","button"]],null,[[null,"click"]],function(t,e,n){var i=!0;return"click"===e&&(i=!1!==t.context.dismiss("Cross click")&&i),i},null,null)),(t()(),r["\u0275eld"](4,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["\xd7"])),(t()(),r["\u0275eld"](6,0,null,null,28,"div",[["class","modal-body"]],null,null,null,null,null)),(t()(),r["\u0275eld"](7,0,null,null,27,"wj-flex-grid",[],null,[[null,"initialized"]],function(t,e,n){var i=!0;return"initialized"===e&&(i=!1!==t.component.addFooterRow(r["\u0275nov"](t,9))&&i),i},y,v)),r["\u0275prd"](5120,null,c.NG_VALUE_ACCESSOR,function(t){return[f.WjValueAccessorFactory(t)]},["WjComponent"]),r["\u0275did"](9,4440064,[["flexGrid",4]],0,m.WjFlexGrid,[r.ElementRef,r.Injector,[3,"WjComponent"],r.ChangeDetectorRef],{headersVisibility:[0,"headersVisibility"],isReadOnly:[1,"isReadOnly"],selectionMode:[2,"selectionMode"],itemsSource:[3,"itemsSource"]},{initialized:"initialized"}),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGrid]),(t()(),r["\u0275eld"](11,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](12,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"],width:[2,"width"],minWidth:[3,"minWidth"],quickAutoSize:[4,"quickAutoSize"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,st)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](16,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null),(t()(),r["\u0275eld"](17,0,null,0,5,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275did"](18,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"]},null),r["\u0275prd"](2048,null,"WjComponent",null,[m.WjFlexGridColumn]),(t()(),r["\u0275and"](16777216,null,0,2,null,at)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridCellTemplate]),r["\u0275did"](22,212992,null,0,m.WjFlexGridCellTemplate,[r.ViewContainerRef,[2,r.TemplateRef],r.ElementRef,[3,"WjComponent"],r.Renderer,r.Injector,r.ChangeDetectorRef],{wjFlexGridCellTemplate:[0,"wjFlexGridCellTemplate"],cellTypeStr:[1,"cellTypeStr"]},null),(t()(),r["\u0275eld"](23,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](25,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],format:[1,"format"],header:[2,"header"],aggregate:[3,"aggregate"]},null),(t()(),r["\u0275eld"](26,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](28,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],format:[1,"format"],header:[2,"header"]},null),(t()(),r["\u0275eld"](29,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](31,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],format:[1,"format"],header:[2,"header"],aggregate:[3,"aggregate"]},null),(t()(),r["\u0275eld"](32,0,null,0,2,"wj-flex-grid-column",[],null,null,null,w,b)),r["\u0275prd"](6144,null,"WjComponent",null,[m.WjFlexGridColumn]),r["\u0275did"](34,4440064,null,0,m.WjFlexGridColumn,[r.ElementRef,r.Injector,[3,"WjComponent"]],{binding:[0,"binding"],header:[1,"header"],aggregate:[2,"aggregate"]},null)],function(t,e){var n=e.component;t(e,9,0,"Column",!0,"ListBox",null==n.profileDeals?null:n.profileDeals.deals),t(e,12,0,"description","Deal","*",300,!0),t(e,16,0,"","Cell"),t(e,18,0,"tradeDate","Trade Date"),t(e,22,0,"","Cell"),t(e,25,0,"provinceAmount","n0","Province","Sum"),t(e,28,0,"oefcAmount","n0","OEFC"),t(e,31,0,"consolidatedAmount","n0","Consolidated","Sum"),t(e,34,0,"percentBorrowed","% of Total","Sum")},function(t,e){t(e,2,0,e.component.profileName)})}function ht(t){return r["\u0275vid"](0,[r["\u0275pid"](0,p.DecimalPipe,[r.LOCALE_ID]),r["\u0275pid"](0,p.DatePipe,[r.LOCALE_ID]),(t()(),r["\u0275eld"](2,0,null,null,2,"div",[["class","clearfix"]],null,null,null,null,null)),(t()(),r["\u0275eld"](3,0,null,null,1,"h5",[["class","display-5"]],null,null,null,null,null)),(t()(),r["\u0275ted"](4,null,["",""])),(t()(),r["\u0275eld"](5,0,null,null,6,"div",[],null,null,null,null,null)),(t()(),r["\u0275and"](16777216,null,null,1,null,T)),r["\u0275did"](7,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,tt)),r["\u0275did"](9,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](16777216,null,null,1,null,et)),r["\u0275did"](11,16384,null,0,p.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),r["\u0275and"](0,[["tradesModal",2]],null,0,null,rt)),(t()(),r["\u0275and"](0,[["dealsModal",2]],null,0,null,lt)),(t()(),r["\u0275eld"](14,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),r["\u0275ted"](-1,null,["All values converted to CAD as of delivery date. "])),(t()(),r["\u0275eld"](16,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r["\u0275ted"](17,null,[" Data displayed current as of ",""])),r["\u0275ppd"](18,1)],function(t,e){var n=e.component;t(e,7,0,n.filterFormGroup),t(e,9,0,n.displayType===n.displayTypes[0].value),t(e,11,0,n.displayType===n.displayTypes[1].value)},function(t,e){var n=e.component;t(e,4,0,null==n.configService?null:null==n.configService.borrowingProfileConfig?null:n.configService.borrowingProfileConfig.applicationName),t(e,17,0,r["\u0275unv"](e,17,0,t(e,18,0,r["\u0275nov"](e,1),n.todayDate)))})}var ut=r["\u0275ccf"]("app-borrowing-profile",h,function(t){return r["\u0275vid"](0,[(t()(),r["\u0275eld"](0,0,null,null,1,"app-borrowing-profile",[],null,null,null,ht,P)),r["\u0275did"](1,114688,null,0,h,[I.h,D.a,c.FormBuilder,l.a,a.a],null,null)],function(t,e){t(e,1,0)},null)},{},{},[]),ct=n("cjC+"),dt=n("kgmk"),pt=n("ZYCi");n.d(e,"BorrowingProfileModuleNgFactory",function(){return ft});var ft=r["\u0275cmf"](u,[],function(t){return r["\u0275mod"]([r["\u0275mpd"](512,r.ComponentFactoryResolver,r["\u0275CodegenComponentFactoryResolver"],[[8,[ut]],[3,r.ComponentFactoryResolver],r.NgModuleRef]),r["\u0275mpd"](4608,p.NgLocalization,p.NgLocaleLocalization,[r.LOCALE_ID,[2,p["\u0275angular_packages_common_common_a"]]]),r["\u0275mpd"](4608,c["\u0275angular_packages_forms_forms_i"],c["\u0275angular_packages_forms_forms_i"],[]),r["\u0275mpd"](4608,c.FormBuilder,c.FormBuilder,[]),r["\u0275mpd"](1073742336,p.CommonModule,p.CommonModule,[]),r["\u0275mpd"](1073742336,c["\u0275angular_packages_forms_forms_bb"],c["\u0275angular_packages_forms_forms_bb"],[]),r["\u0275mpd"](1073742336,c.FormsModule,c.FormsModule,[]),r["\u0275mpd"](1073742336,c.ReactiveFormsModule,c.ReactiveFormsModule,[]),r["\u0275mpd"](1073742336,f.WjDirectiveBaseModule,f.WjDirectiveBaseModule,[]),r["\u0275mpd"](1073742336,ct.WjCoreModule,ct.WjCoreModule,[]),r["\u0275mpd"](1073742336,m.WjGridModule,m.WjGridModule,[]),r["\u0275mpd"](1073742336,C.WjChartModule,C.WjChartModule,[]),r["\u0275mpd"](1073742336,d.WjInputModule,d.WjInputModule,[]),r["\u0275mpd"](1073742336,dt.WjGridDetailModule,dt.WjGridDetailModule,[]),r["\u0275mpd"](1073742336,pt.n,pt.n,[[2,pt.s],[2,pt.k]]),r["\u0275mpd"](1073742336,u,u,[]),r["\u0275mpd"](1024,pt.i,function(){return[[{path:"",component:h}]]},[])])})},xuMK:function(t,e,n){"use strict";var i,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n("iyzo"),s=n("DogD"),a=n("CcnG"),l=n("CcnG"),h=n("CcnG"),u=n("Ip0R"),c=n("gIcY"),d=n("8X1S");e.wjComboBoxMeta={selector:"wj-combo-box",template:"<div><ng-content></ng-content></div>",inputs:["asyncBindings","wjModelProperty","isDisabled","isDroppedDown","showDropDownButton","autoExpandSelection","placeholder","dropDownCssClass","isAnimated","isReadOnly","isRequired","displayMemberPath","selectedValuePath","headerPath","isContentHtml","isEditable","maxDropDownHeight","maxDropDownWidth","itemFormatter","itemsSource","text","selectedIndex","selectedItem","selectedValue"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","isDroppedDownChangingNg: isDroppedDownChanging","isDroppedDownChangedNg: isDroppedDownChanged","isDroppedDownChangePC: isDroppedDownChange","textChangedNg: textChanged","textChangePC: textChange","formatItemNg: formatItem","selectedIndexChangedNg: selectedIndexChanged","selectedIndexChangePC: selectedIndexChange","selectedItemChangePC: selectedItemChange","selectedValueChangePC: selectedValueChange"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var p=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="selectedValue",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjComboBoxMeta.outputs,changeEvents:{isDroppedDownChanged:["isDroppedDown"],textChanged:["text"],selectedIndexChanged:["selectedIndex","selectedItem","selectedValue"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjComboBoxMeta.selector,template:e.wjComboBoxMeta.template,inputs:e.wjComboBoxMeta.inputs,outputs:e.wjComboBoxMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjComboBoxMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.ComboBox);e.WjComboBox=p,e.wjAutoCompleteMeta={selector:"wj-auto-complete",template:"",inputs:["asyncBindings","wjModelProperty","isDisabled","isDroppedDown","showDropDownButton","autoExpandSelection","placeholder","dropDownCssClass","isAnimated","isReadOnly","isRequired","displayMemberPath","selectedValuePath","headerPath","isContentHtml","isEditable","maxDropDownHeight","maxDropDownWidth","itemFormatter","delay","maxItems","minLength","cssMatch","itemsSourceFunction","searchMemberPath","itemsSource","text","selectedIndex","selectedItem","selectedValue"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","isDroppedDownChangingNg: isDroppedDownChanging","isDroppedDownChangedNg: isDroppedDownChanged","isDroppedDownChangePC: isDroppedDownChange","textChangedNg: textChanged","textChangePC: textChange","formatItemNg: formatItem","selectedIndexChangedNg: selectedIndexChanged","selectedIndexChangePC: selectedIndexChange","selectedItemChangePC: selectedItemChange","selectedValueChangePC: selectedValueChange"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var f=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="selectedValue",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjAutoCompleteMeta.outputs,changeEvents:{isDroppedDownChanged:["isDroppedDown"],textChanged:["text"],selectedIndexChanged:["selectedIndex","selectedItem","selectedValue"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjAutoCompleteMeta.selector,template:e.wjAutoCompleteMeta.template,inputs:e.wjAutoCompleteMeta.inputs,outputs:e.wjAutoCompleteMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjAutoCompleteMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.AutoComplete);e.WjAutoComplete=f,e.wjCalendarMeta={selector:"wj-calendar",template:"",inputs:["asyncBindings","wjModelProperty","isDisabled","monthView","showHeader","itemFormatter","itemValidator","firstDayOfWeek","max","min","formatYearMonth","formatDayHeaders","formatDays","formatYear","formatMonths","selectionMode","isReadOnly","value","displayMonth"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","valueChangedNg: valueChanged","valueChangePC: valueChange","displayMonthChangedNg: displayMonthChanged","displayMonthChangePC: displayMonthChange","formatItemNg: formatItem"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var g=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="value",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjCalendarMeta.outputs,changeEvents:{valueChanged:["value"],displayMonthChanged:["displayMonth"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjCalendarMeta.selector,template:e.wjCalendarMeta.template,inputs:e.wjCalendarMeta.inputs,outputs:e.wjCalendarMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjCalendarMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.Calendar);e.WjCalendar=g,e.wjColorPickerMeta={selector:"wj-color-picker",template:"",inputs:["asyncBindings","wjModelProperty","isDisabled","showAlphaChannel","showColorString","palette","value"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","valueChangedNg: valueChanged","valueChangePC: valueChange"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var _=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="value",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjColorPickerMeta.outputs,changeEvents:{valueChanged:["value"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjColorPickerMeta.selector,template:e.wjColorPickerMeta.template,inputs:e.wjColorPickerMeta.inputs,outputs:e.wjColorPickerMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjColorPickerMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.ColorPicker);e.WjColorPicker=_,e.wjInputMaskMeta={selector:"wj-input-mask",template:"",inputs:["asyncBindings","wjModelProperty","isDisabled","mask","isRequired","isReadOnly","promptChar","placeholder","rawValue","value"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","valueChangedNg: valueChanged","rawValueChangePC: rawValueChange","valueChangePC: valueChange"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var m=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="value",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjInputMaskMeta.outputs,changeEvents:{valueChanged:["rawValue","value"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjInputMaskMeta.selector,template:e.wjInputMaskMeta.template,inputs:e.wjInputMaskMeta.inputs,outputs:e.wjInputMaskMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjInputMaskMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.InputMask);e.WjInputMask=m,e.wjInputColorMeta={selector:"wj-input-color",template:"",inputs:["asyncBindings","wjModelProperty","isDisabled","isDroppedDown","showDropDownButton","autoExpandSelection","placeholder","dropDownCssClass","isAnimated","isReadOnly","isRequired","showAlphaChannel","value","text"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","isDroppedDownChangingNg: isDroppedDownChanging","isDroppedDownChangedNg: isDroppedDownChanged","isDroppedDownChangePC: isDroppedDownChange","textChangedNg: textChanged","textChangePC: textChange","valueChangedNg: valueChanged","valueChangePC: valueChange"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var v=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="value",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjInputColorMeta.outputs,changeEvents:{isDroppedDownChanged:["isDroppedDown"],textChanged:["text"],valueChanged:["value"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjInputColorMeta.selector,template:e.wjInputColorMeta.template,inputs:e.wjInputColorMeta.inputs,outputs:e.wjInputColorMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjInputColorMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.InputColor);e.WjInputColor=v,e.wjMultiSelectMeta={selector:"wj-multi-select",template:"<div><ng-content></ng-content></div>",inputs:["asyncBindings","wjModelProperty","isDisabled","isDroppedDown","showDropDownButton","autoExpandSelection","placeholder","dropDownCssClass","isAnimated","isReadOnly","isRequired","displayMemberPath","selectedValuePath","headerPath","isContentHtml","isEditable","maxDropDownHeight","maxDropDownWidth","itemFormatter","checkedMemberPath","maxHeaderItems","headerFormat","headerFormatter","showSelectAllCheckbox","selectAllLabel","itemsSource","checkedItems","text","selectedIndex","selectedItem","selectedValue"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","isDroppedDownChangingNg: isDroppedDownChanging","isDroppedDownChangedNg: isDroppedDownChanged","isDroppedDownChangePC: isDroppedDownChange","textChangedNg: textChanged","textChangePC: textChange","formatItemNg: formatItem","selectedIndexChangedNg: selectedIndexChanged","selectedIndexChangePC: selectedIndexChange","selectedItemChangePC: selectedItemChange","selectedValueChangePC: selectedValueChange","checkedItemsChangedNg: checkedItemsChanged","checkedItemsChangePC: checkedItemsChange"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var y=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="checkedItems",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjMultiSelectMeta.outputs,changeEvents:{isDroppedDownChanged:["isDroppedDown"],textChanged:["text"],selectedIndexChanged:["selectedIndex","selectedItem","selectedValue"],checkedItemsChanged:["checkedItems"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjMultiSelectMeta.selector,template:e.wjMultiSelectMeta.template,inputs:e.wjMultiSelectMeta.inputs,outputs:e.wjMultiSelectMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjMultiSelectMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.MultiSelect);e.WjMultiSelect=y,e.wjMultiAutoCompleteMeta={selector:"wj-multi-auto-complete",template:"",inputs:["asyncBindings","wjModelProperty","isDisabled","isDroppedDown","showDropDownButton","autoExpandSelection","placeholder","dropDownCssClass","isAnimated","isReadOnly","isRequired","displayMemberPath","selectedValuePath","headerPath","isContentHtml","isEditable","maxDropDownHeight","maxDropDownWidth","itemFormatter","delay","maxItems","minLength","cssMatch","itemsSourceFunction","searchMemberPath","maxSelectedItems","selectedItems","itemsSource","selectedMemberPath","text","selectedIndex","selectedItem","selectedValue"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","isDroppedDownChangingNg: isDroppedDownChanging","isDroppedDownChangedNg: isDroppedDownChanged","isDroppedDownChangePC: isDroppedDownChange","textChangedNg: textChanged","textChangePC: textChange","formatItemNg: formatItem","selectedIndexChangedNg: selectedIndexChanged","selectedIndexChangePC: selectedIndexChange","selectedItemChangePC: selectedItemChange","selectedValueChangePC: selectedValueChange","selectedItemsChangedNg: selectedItemsChanged","selectedItemsChangePC: selectedItemsChange"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var b=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="selectedItems",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjMultiAutoCompleteMeta.outputs,changeEvents:{isDroppedDownChanged:["isDroppedDown"],textChanged:["text"],selectedIndexChanged:["selectedIndex","selectedItem","selectedValue"],selectedItemsChanged:["selectedItems"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjMultiAutoCompleteMeta.selector,template:e.wjMultiAutoCompleteMeta.template,inputs:e.wjMultiAutoCompleteMeta.inputs,outputs:e.wjMultiAutoCompleteMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjMultiAutoCompleteMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.MultiAutoComplete);e.WjMultiAutoComplete=b,e.wjInputNumberMeta={selector:"wj-input-number",template:"",inputs:["asyncBindings","wjModelProperty","isDisabled","showSpinner","repeatButtons","max","min","step","isRequired","placeholder","inputType","format","isReadOnly","value","text"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","valueChangedNg: valueChanged","valueChangePC: valueChange","textChangedNg: textChanged","textChangePC: textChange"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var w=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="value",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjInputNumberMeta.outputs,changeEvents:{valueChanged:["value"],textChanged:["text"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjInputNumberMeta.selector,template:e.wjInputNumberMeta.template,inputs:e.wjInputNumberMeta.inputs,outputs:e.wjInputNumberMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjInputNumberMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.InputNumber);e.WjInputNumber=w,e.wjInputDateMeta={selector:"wj-input-date",template:"",inputs:["asyncBindings","wjModelProperty","isDisabled","isDroppedDown","showDropDownButton","autoExpandSelection","placeholder","dropDownCssClass","isAnimated","isReadOnly","isRequired","selectionMode","format","mask","max","min","inputType","itemValidator","itemFormatter","text","value"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","isDroppedDownChangingNg: isDroppedDownChanging","isDroppedDownChangedNg: isDroppedDownChanged","isDroppedDownChangePC: isDroppedDownChange","textChangedNg: textChanged","textChangePC: textChange","valueChangedNg: valueChanged","valueChangePC: valueChange"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var C=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="value",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjInputDateMeta.outputs,changeEvents:{isDroppedDownChanged:["isDroppedDown"],textChanged:["text"],valueChanged:["value"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjInputDateMeta.selector,template:e.wjInputDateMeta.template,inputs:e.wjInputDateMeta.inputs,outputs:e.wjInputDateMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjInputDateMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.InputDate);e.WjInputDate=C,e.wjInputTimeMeta={selector:"wj-input-time",template:"",inputs:["asyncBindings","wjModelProperty","isDisabled","isDroppedDown","showDropDownButton","autoExpandSelection","placeholder","dropDownCssClass","isAnimated","isReadOnly","isRequired","displayMemberPath","selectedValuePath","headerPath","isContentHtml","isEditable","maxDropDownHeight","maxDropDownWidth","itemFormatter","max","min","step","format","mask","inputType","itemsSource","text","selectedIndex","selectedItem","selectedValue","value"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","isDroppedDownChangingNg: isDroppedDownChanging","isDroppedDownChangedNg: isDroppedDownChanged","isDroppedDownChangePC: isDroppedDownChange","textChangedNg: textChanged","textChangePC: textChange","formatItemNg: formatItem","selectedIndexChangedNg: selectedIndexChanged","selectedIndexChangePC: selectedIndexChange","selectedItemChangePC: selectedItemChange","selectedValueChangePC: selectedValueChange","valueChangedNg: valueChanged","valueChangePC: valueChange"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var x=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="value",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjInputTimeMeta.outputs,changeEvents:{isDroppedDownChanged:["isDroppedDown"],textChanged:["text"],selectedIndexChanged:["selectedIndex","selectedItem","selectedValue"],valueChanged:["value"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjInputTimeMeta.selector,template:e.wjInputTimeMeta.template,inputs:e.wjInputTimeMeta.inputs,outputs:e.wjInputTimeMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjInputTimeMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.InputTime);e.WjInputTime=x,e.wjInputDateTimeMeta={selector:"wj-input-date-time",template:"",inputs:["asyncBindings","wjModelProperty","isDisabled","isDroppedDown","showDropDownButton","autoExpandSelection","placeholder","dropDownCssClass","isAnimated","isReadOnly","isRequired","selectionMode","format","mask","max","min","inputType","itemValidator","itemFormatter","timeMax","timeMin","timeStep","timeFormat","text","value"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","isDroppedDownChangingNg: isDroppedDownChanging","isDroppedDownChangedNg: isDroppedDownChanged","isDroppedDownChangePC: isDroppedDownChange","textChangedNg: textChanged","textChangePC: textChange","valueChangedNg: valueChanged","valueChangePC: valueChange"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var j=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="value",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjInputDateTimeMeta.outputs,changeEvents:{isDroppedDownChanged:["isDroppedDown"],textChanged:["text"],valueChanged:["value"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjInputDateTimeMeta.selector,template:e.wjInputDateTimeMeta.template,inputs:e.wjInputDateTimeMeta.inputs,outputs:e.wjInputDateTimeMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjInputDateTimeMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.InputDateTime);e.WjInputDateTime=j,e.wjListBoxMeta={selector:"wj-list-box",template:"<div><ng-content></ng-content></div>",inputs:["asyncBindings","wjModelProperty","isDisabled","isContentHtml","maxHeight","selectedValuePath","itemFormatter","displayMemberPath","checkedMemberPath","itemsSource","selectedIndex","selectedItem","selectedValue","checkedItems"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","formatItemNg: formatItem","itemsChangedNg: itemsChanged","itemCheckedNg: itemChecked","selectedIndexChangedNg: selectedIndexChanged","selectedIndexChangePC: selectedIndexChange","selectedItemChangePC: selectedItemChange","selectedValueChangePC: selectedValueChange","checkedItemsChangedNg: checkedItemsChanged","checkedItemsChangePC: checkedItemsChange"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var S=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="selectedValue",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.meta={outputs:e.wjListBoxMeta.outputs,changeEvents:{selectedIndexChanged:["selectedIndex","selectedItem","selectedValue"],checkedItemsChanged:["checkedItems"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjListBoxMeta.selector,template:e.wjListBoxMeta.template,inputs:e.wjListBoxMeta.inputs,outputs:e.wjListBoxMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjListBoxMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.ListBox);e.WjListBox=S,e.wjMenuMeta={selector:"wj-menu",template:"<div><ng-content></ng-content></div>",inputs:["asyncBindings","wjModelProperty","isDisabled","isDroppedDown","showDropDownButton","autoExpandSelection","placeholder","dropDownCssClass","isAnimated","isReadOnly","isRequired","displayMemberPath","selectedValuePath","headerPath","isContentHtml","isEditable","maxDropDownHeight","maxDropDownWidth","itemFormatter","header","commandParameterPath","commandPath","isButton","itemsSource","text","selectedIndex","selectedItem","selectedValue","value"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","isDroppedDownChangingNg: isDroppedDownChanging","isDroppedDownChangedNg: isDroppedDownChanged","isDroppedDownChangePC: isDroppedDownChange","textChangedNg: textChanged","textChangePC: textChange","formatItemNg: formatItem","selectedIndexChangedNg: selectedIndexChanged","selectedIndexChangePC: selectedIndexChange","selectedItemChangePC: selectedItemChange","selectedValueChangePC: selectedValueChange","itemClickedNg: itemClicked","valueChangePC: valueChange"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var E=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o.wjModelProperty="selectedValue",o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.itemsSource=new s.ObservableArray,o.selectedIndex=0,o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit(),this._attachToControl(),this._updateHeader()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy(),this.listBox.formatItem.removeHandler(this._fmtItem,this),this.listBox.loadingItems.removeHandler(this._loadingItems,this)},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,null!=t&&(this.selectedValue=t,this._updateHeader())},enumerable:!0,configurable:!0}),n.prototype.ngOnChanges=function(t){var e=t.header;e&&(this._definedHeader=e.currentValue,this._updateHeader())},n.prototype.ngAfterContentInit=function(){this.value=this.value},n.prototype.onItemClicked=function(e){this.value=this.selectedValue,t.prototype.onItemClicked.call(this,e)},n.prototype.refresh=function(e){void 0===e&&(e=!0),t.prototype.refresh.call(this,e),this._updateHeader()},n.prototype._attachToControl=function(){this.listBox.formatItem.addHandler(this._fmtItem,this),this.listBox.loadingItems.addHandler(this._loadingItems,this),this.invalidate()},n.prototype._loadingItems=function(t){for(var e=t.hostElement.getElementsByClassName("wj-listbox-item"),n=e.length-1;n>=0;n--)e[n].textContent=""},n.prototype._fmtItem=function(t,e){if(e.data instanceof I){var n=e.item;n.textContent="";var i=e.data,o=i.contentRoot;o&&(n.appendChild(o),i.added(n))}},n.prototype._updateHeader=function(){this.header=this._definedHeader||"";var t=this.selectedItem;if(null!=this.value&&t&&this.displayMemberPath){var e=null;if(t instanceof I){var n=t.contentRoot;e=n?n.innerHTML:t[this.displayMemberPath]}null!=e&&(this.header+=": <b>"+e+"</b>")}},n.meta={outputs:e.wjMenuMeta.outputs,changeEvents:{isDroppedDownChanged:["isDroppedDown"],textChanged:["text"],selectedIndexChanged:["selectedIndex","selectedItem","selectedValue"],itemClicked:["value"]}},n.decorators=[{type:a.Component,args:[{selector:e.wjMenuMeta.selector,template:e.wjMenuMeta.template,inputs:e.wjMenuMeta.inputs,outputs:e.wjMenuMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjMenuMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.Menu);e.WjMenu=E,e.wjMenuItemMeta={selector:"wj-menu-item",template:"<div *wjMenuItemTemplateDir><ng-content></ng-content></div>",inputs:["wjProperty","value","cmd","cmdParam"],outputs:["initialized"],providers:[]};var I=function(){function t(t,e,n,i,o){this.viewContainerRef=i,this.domRenderer=o,this.isInitialized=!1,this.wjProperty="itemsSource";var r=this._wjBehaviour=d.WjDirectiveBehavior.attach(this,t,e,n);this._ownerMenu=r.parentBehavior.directive,this.created()}return t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit();var t=this._ownerMenu;1==t.itemsSource.length&&t.selectedIndex<0&&(t.selectedIndex=0),t.displayMemberPath||(t.displayMemberPath="header"),t.selectedValuePath||(t.selectedValuePath="value"),t.commandPath||(t.commandPath="cmd"),t.commandParameterPath||(t.commandParameterPath="cmdParam")},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.prototype.added=function(t){},t.meta={outputs:e.wjMenuItemMeta.outputs,siblingId:"menuItemDir"},t.decorators=[{type:a.Component,args:[{selector:e.wjMenuItemMeta.selector,template:e.wjMenuItemMeta.template,inputs:e.wjMenuItemMeta.inputs,outputs:e.wjMenuItemMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return t})}].concat(e.wjMenuItemMeta.providers)}]}],t.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]},{type:l.ViewContainerRef,decorators:[{type:h.Inject,args:[l.ViewContainerRef]}]},{type:l.Renderer,decorators:[{type:h.Inject,args:[l.Renderer]}]}]},t}();e.WjMenuItem=I;var D=function(){function t(t,e,n,i,o,r,s){this.viewContainerRef=t,this.templateRef=e,this.elRef=n,this.domRenderer=o,this.ownerItem=r||s,this.ownerItem.templateDir=this}return t.prototype.ngAfterContentInit=function(){var t=this;setTimeout(function(){var e=d.WjDirectiveBehavior.instantiateTemplate(null,t.viewContainerRef,t.templateRef,t.domRenderer,!0).rootElement;t.contentRoot=e,t.ownerItem.contentRoot=e,t.ownerItem._ownerMenu.listBox.invalidate(),t.ownerItem._ownerMenu.invalidate()},0)},t.decorators=[{type:l.Directive,args:[{selector:"[wjMenuItemTemplateDir]",inputs:["wjMenuItemTemplateDir"]}]}],t.ctorParameters=function(){return[{type:l.ViewContainerRef,decorators:[{type:h.Inject,args:[l.ViewContainerRef]}]},{type:l.TemplateRef,decorators:[{type:h.Inject,args:[l.TemplateRef]},{type:l.Optional}]},{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:l.Renderer,decorators:[{type:h.Inject,args:[l.Renderer]}]},{type:I,decorators:[{type:h.Inject,args:[I]},{type:l.Optional}]},{type:P,decorators:[{type:h.Inject,args:[l.forwardRef(function(){return P})]},{type:l.Optional}]}]},t}();e.WjMenuItemTemplateDir=D,e.wjMenuSeparatorMeta={selector:"wj-menu-separator",template:'<div *wjMenuItemTemplateDir class="wj-state-disabled" style="width:100%;height:1px;background-color:lightgray"></div>',inputs:["wjProperty"],outputs:["initialized"],providers:[]};var P=function(t){function n(e,n,i,o,r){var s=t.call(this,e,n,i,o,r)||this;return s.created(),s}return o(n,t),n.prototype.added=function(t){s.addClass(t,"wj-state-disabled")},n.decorators=[{type:a.Component,args:[{selector:e.wjMenuSeparatorMeta.selector,template:e.wjMenuSeparatorMeta.template,inputs:e.wjMenuSeparatorMeta.inputs,outputs:e.wjMenuSeparatorMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjMenuSeparatorMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]},{type:l.ViewContainerRef,decorators:[{type:h.Inject,args:[l.ViewContainerRef]}]},{type:l.Renderer,decorators:[{type:h.Inject,args:[l.Renderer]}]}]},n}(I);e.WjMenuSeparator=P,e.wjItemTemplateMeta={selector:"[wjItemTemplate]",inputs:["wjItemTemplate"],outputs:["initialized"],exportAs:"wjItemTemplate",providers:[]};var M=function(){function t(e,n,i,o,r,s,a){this.viewContainerRef=o,this.templateRef=r,this.domRenderer=s,this.isInitialized=!1;var l=this._wjBehaviour=d.WjDirectiveBehavior.attach(this,e,n,i);this.ownerControl=l.parentBehavior.directive,this.listBox=t._getListBox(this.ownerControl),this._cdRef=a,this.created()}return t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit(),this._attachToControl()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){var t=this.ownerControl,e=this.listBox;e&&(e.formatItem.removeHandler(this._fmtItem,this),e.loadingItems.removeHandler(this._loadingItems,this)),t&&t.invalidate()},t.prototype._attachToControl=function(){this.listBox.formatItem.addHandler(this._fmtItem,this),this.listBox.loadingItems.addHandler(this._loadingItems,this),this.ownerControl.invalidate()},t.prototype._loadingItems=function(t){this.viewContainerRef.clear()},t.prototype._fmtItem=function(t,e){var n=e.item;n.textContent="";var i=this._instantiateTemplate(n);i.context.control=t,i.context.item=e.data,i.context.itemIndex=e.index,e.index===this.listBox.collectionView.items.length-1&&this._cdRef.detectChanges()},t.prototype._instantiateTemplate=function(t){return d.WjDirectiveBehavior.instantiateTemplate(t,this.viewContainerRef,this.templateRef,this.domRenderer).viewRef},t._getListBox=function(t){return t?t instanceof r.ListBox?t:t.listBox:null},t.meta={outputs:e.wjItemTemplateMeta.outputs,parentRefProperty:"owner"},t.decorators=[{type:l.Directive,args:[{selector:e.wjItemTemplateMeta.selector,inputs:e.wjItemTemplateMeta.inputs,outputs:e.wjItemTemplateMeta.outputs,exportAs:e.wjItemTemplateMeta.exportAs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return t})}].concat(e.wjItemTemplateMeta.providers)}]}],t.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]},{type:l.ViewContainerRef,decorators:[{type:h.Inject,args:[l.ViewContainerRef]}]},{type:l.TemplateRef,decorators:[{type:h.Inject,args:[l.TemplateRef]},{type:l.Optional}]},{type:l.Renderer,decorators:[{type:h.Inject,args:[l.Renderer]}]},{type:h.ChangeDetectorRef,decorators:[{type:h.Inject,args:[h.ChangeDetectorRef]}]}]},t}();e.WjItemTemplate=M,e.wjPopupMeta={selector:"wj-popup",template:"<div><ng-content></ng-content></div>",inputs:["wjModelProperty","isDisabled","owner","showTrigger","hideTrigger","fadeIn","fadeOut","isDraggable","dialogResultEnter","modal","removeOnHide"],outputs:["initialized","gotFocusNg: gotFocus","lostFocusNg: lostFocus","showingNg: showing","shownNg: shown","hidingNg: hiding","hiddenNg: hidden"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var T=function(t){function n(e,n,i){var o=t.call(this,d.WjDirectiveBehavior.getHostElement(e,n))||this;return o.isInitialized=!1,o._wjBehaviour=d.WjDirectiveBehavior.attach(o,e,n,i),o.created(),o}return o(n,t),n.prototype.created=function(){},n.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},n.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},n.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},n.prototype.addEventListener=function(e,n,i,o){var r=this;void 0===o&&(o=!1);var s=d.WjDirectiveBehavior,a=s.ngZone;a&&s.outsideZoneEvents[n]?a.runOutsideAngular(function(){t.prototype.addEventListener.call(r,e,n,i,o)}):t.prototype.addEventListener.call(this,e,n,i,o)},n.prototype.ngOnChanges=function(t){t.owner&&null==this.modal&&(this.modal=!this.owner)},n.prototype.dispose=function(){this.isVisible&&(this.hiding.removeAllHandlers(),this.fadeOut=!1,this.hide()),t.prototype.dispose.call(this)},n.meta={outputs:e.wjPopupMeta.outputs},n.decorators=[{type:a.Component,args:[{selector:e.wjPopupMeta.selector,template:e.wjPopupMeta.template,inputs:e.wjPopupMeta.inputs,outputs:e.wjPopupMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return n})}].concat(e.wjPopupMeta.providers)}]}],n.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},n}(r.Popup);e.WjPopup=T;var R=function(){function t(t){this.elRef=t}return t.prototype.onContextMenu=function(t){var e=this.wjContextMenu;e&&e.dropDown&&!s.closest(t.target,"[disabled]")&&(t.preventDefault(),e.owner=this.elRef.nativeElement,e.show(t))},t.decorators=[{type:l.Directive,args:[{selector:"[wjContextMenu]",inputs:["wjContextMenu"],exportAs:"wjContextMenu",host:{"(contextmenu)":"onContextMenu($event)"}}]}],t.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]}]},t}();e.WjContextMenu=R,e.wjCollectionViewNavigatorMeta={selector:"wj-collection-view-navigator",template:'<div class="wj-control wj-content wj-pager">\n                <div class="wj-input-group">\n                    <span class="wj-input-group-btn" >\n                        <button class="wj-btn wj-btn-default" type="button"\n                           (click)="cv.moveCurrentToFirst()"\n                           [disabled]="!cv || cv?.currentPosition <= 0">\n                            <span class="wj-glyph-left" style="margin-right: -4px;"></span>\n                            <span class="wj-glyph-left"></span>\n                         </button>\n                    </span>\n                    <span class="wj-input-group-btn" >\n                       <button class="wj-btn wj-btn-default" type="button"\n                           (click)="cv.moveCurrentToPrevious()"\n                           [disabled]="!cv || cv?.currentPosition <= 0">\n                            <span class="wj-glyph-left"></span>\n                       </button>\n                    </span>\n                    <input type="text" class="wj-form-control" \n                           value="{{cv?.currentPosition + 1 | number}} / {{cv?.itemCount | number}}" \n                           disabled />\n                    <span class="wj-input-group-btn" >\n                        <button class="wj-btn wj-btn-default" type="button"\n                           (click)="cv.moveCurrentToNext()"\n                           [disabled]="!cv || cv?.currentPosition >= cv?.itemCount - 1">\n                            <span class="wj-glyph-right"></span>\n                        </button>\n                    </span>\n                    <span class="wj-input-group-btn" >\n                        <button class="wj-btn wj-btn-default" type="button"\n                           (click)="cv.moveCurrentToLast()"\n                           [disabled]="!cv || cv?.currentPosition >= cv?.itemCount - 1">\n                            <span class="wj-glyph-right"></span>\n                            <span class="wj-glyph-right" style="margin-left: -4px;"></span>\n                        </button>\n                    </span>\n                </div>\n            </div>',inputs:["wjModelProperty","cv"],outputs:["initialized"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var A=function(){function t(t,e,n){this.isInitialized=!1,this._wjBehaviour=d.WjDirectiveBehavior.attach(this,t,e,n),this.created()}return t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.meta={outputs:e.wjCollectionViewNavigatorMeta.outputs},t.decorators=[{type:a.Component,args:[{selector:e.wjCollectionViewNavigatorMeta.selector,template:e.wjCollectionViewNavigatorMeta.template,inputs:e.wjCollectionViewNavigatorMeta.inputs,outputs:e.wjCollectionViewNavigatorMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return t})}].concat(e.wjCollectionViewNavigatorMeta.providers)}]}],t.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},t}();e.WjCollectionViewNavigator=A,e.wjCollectionViewPagerMeta={selector:"wj-collection-view-pager",template:'<div class="wj-control wj-content wj-pager" >\n                <div class="wj-input-group">\n                    <span class="wj-input-group-btn" >\n                        <button class="wj-btn wj-btn-default" type="button"\n                            (click)="cv.moveToFirstPage()"\n                            [disabled]="!cv || cv?.pageIndex <= 0">\n                            <span class="wj-glyph-left" style="margin-right: -4px;"></span>\n                            <span class="wj-glyph-left"></span>\n                        </button>\n                    </span>\n                    <span class="wj-input-group-btn" >\n                    <button class="wj-btn wj-btn-default" type="button"\n                            (click)="cv.moveToPreviousPage()"\n                            [disabled]="!cv || cv?.pageIndex <= 0">\n                            <span class="wj-glyph-left"></span>\n                        </button>\n                    </span>\n                    <input type="text" class="wj-form-control" \n                           value="{{cv?.pageIndex + 1 | number}} / {{cv?.pageCount | number}}" \n                           disabled />\n                    <span class="wj-input-group-btn" >\n                        <button class="wj-btn wj-btn-default" type="button"\n                            (click)="cv.moveToNextPage()"\n                            [disabled]="!cv || cv?.pageIndex >= cv?.pageCount - 1">\n                            <span class="wj-glyph-right"></span>\n                        </button>\n                    </span>\n                    <span class="wj-input-group-btn" >\n                        <button class="wj-btn wj-btn-default" type="button"\n                            (click)="cv.moveToLastPage()"\n                            [disabled]="!cv || cv?.pageIndex >= cv?.pageCount - 1">\n                            <span class="wj-glyph-right"></span>\n                            <span class="wj-glyph-right" style="margin-left: -4px;"></span>\n                        </button>\n                    </span>\n                </div>\n            </div>',inputs:["wjModelProperty","cv"],outputs:["initialized"],providers:[{provide:c.NG_VALUE_ACCESSOR,useFactory:d.WjValueAccessorFactory,multi:!0,deps:["WjComponent"]}]};var O=function(){function t(t,e,n){this.isInitialized=!1,this._wjBehaviour=d.WjDirectiveBehavior.attach(this,t,e,n),this.created()}return t.prototype.created=function(){},t.prototype.ngOnInit=function(){this._wjBehaviour.ngOnInit()},t.prototype.ngAfterViewInit=function(){this._wjBehaviour.ngAfterViewInit()},t.prototype.ngOnDestroy=function(){this._wjBehaviour.ngOnDestroy()},t.meta={outputs:e.wjCollectionViewPagerMeta.outputs},t.decorators=[{type:a.Component,args:[{selector:e.wjCollectionViewPagerMeta.selector,template:e.wjCollectionViewPagerMeta.template,inputs:e.wjCollectionViewPagerMeta.inputs,outputs:e.wjCollectionViewPagerMeta.outputs,providers:[{provide:"WjComponent",useExisting:l.forwardRef(function(){return t})}].concat(e.wjCollectionViewPagerMeta.providers)}]}],t.ctorParameters=function(){return[{type:l.ElementRef,decorators:[{type:h.Inject,args:[l.ElementRef]}]},{type:l.Injector,decorators:[{type:h.Inject,args:[l.Injector]}]},{type:void 0,decorators:[{type:h.Inject,args:["WjComponent"]},{type:h.SkipSelf},{type:l.Optional}]}]},t}();e.WjCollectionViewPager=O;var k=[p,f,g,_,m,v,y,b,w,C,x,j,S,E,I,P,M,T,R,A,O],N=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{imports:[d.WjDirectiveBaseModule,u.CommonModule],declarations:k.concat([D]),exports:k.slice()}]}],t.ctorParameters=function(){return[]},t}();e.WjInputModule=N}}]);